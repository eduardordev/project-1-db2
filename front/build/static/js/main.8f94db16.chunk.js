(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,a){},129:function(e,t,a){e.exports={sizeTable:"PoPool_sizeTable__G9y3s",center:"PoPool_center__2W4Sk",bordered:"PoPool_bordered__4GvEj",borderedSmall:"PoPool_borderedSmall__2yK58",checkbox:"PoPool_checkbox__3mUbm",checkitem:"PoPool_checkitem__3J357"}},179:function(e,t,a){},192:function(e,t,a){e.exports={colRight:"step3_colRight__2R0wf",tdFont:"step3_tdFont__1I_S5"}},221:function(e,t,a){},229:function(e,t,a){},230:function(e,t,a){},281:function(e,t,a){e.exports={colRight:"step2_colRight__1GA5a",tdFont:"step2_tdFont__3bPjv"}},344:function(e,t,a){},368:function(e,t,a){},370:function(e,t,a){e.exports=a.p+"static/media/prod.daf2a817.svg"},387:function(e){e.exports=[{value:"IN",label:"INTERLINING"},{value:"2F",label:"2END_FLEECE"},{value:"3F",label:"3ND_FLEECE"},{value:"FT",label:"FRENCH_TERRY"},{value:"I",label:"INTERLOCK"},{value:"J",label:"JERSEY"},{value:"M",label:"MESH"},{value:"MF",label:"MICRO_FLEECE"},{value:"MP",label:"MICRO_PIQUE"},{value:"PF",label:"POLAR_FLEECE"},{value:"R11",label:"RIB_1X1"},{value:"R21",label:"RIB_2X1"},{value:"R22",label:"RIB_2X2"},{value:"T",label:"THERMAL"},{value:"W",label:"WOVEN"},{value:"CM",label:"CIRCULAR_MESH"},{value:"WM",label:"WARP_MESH"},{value:"P",label:"PIQUE"},{value:"PT",label:"PLAITED_JERSEY"},{value:"DK",label:"DOUBLE_KNIT"},{value:"CC",label:"CIRCULAR_CREPE"},{value:"2FT",label:"2ND_FRENCH_TERRY"},{value:"3FT",label:"3ND_FRENCH_TERRY"},{value:"PW",label:"PLAIN_WEAVE"},{value:"TA",label:"TAFFETA"},{value:"PO",label:"POPLIN"},{value:"CH",label:"CHAMBRAY"},{value:"T",label:"TASLAN"},{value:"C",label:"CANVAS"},{value:"TW",label:"TWILL"},{value:"GA",label:"GARBARDINE"},{value:"HE",label:"HERRINGBONE"},{value:"SA",label:"SATIN"},{value:"OX",label:"OXFORD"},{value:"DD",label:"DOBBY"},{value:"WC",label:"WABEN_CREPE"},{value:"WK",label:"WARD_KNIT"},{value:"WAF",label:"WAFFLE"},{value:"MI",label:"MICROFILAMENT"}]},390:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAABa1BMVEX////v7+/b29zj4+Te3t7Ly8y5ubq4ubm4uLm4uLi8vLy6uru6urq5urq3uLi3t7j6+vq7u7zFxsbY2Nm6u7u2t7f09PTr6+y8vL22tre/v8DW19e9vb3Ozs61tra1tbbR0dK0tbW+vr7Iycq0tLXm5uaztLSzs7Sys7Sys7OysrOxsrOxsrK7vLyxsbKwsbKwsbGwsLGvsLGvr7Cur7C9vr+urq+trq+tra6sra6srK2rrK2rq6yqq6zS09Pg4eGqqqypqqvV1dapqauoqarU1NWoqKrCwsOnqKno6emnp6mmp6impqilpqekpae1trikpaajpKavr7GjpKXAwMGio6Wio6ShoqShoqOgoaOgoaKlpqifoKKfoKGen6Gen6CdnqCcnZ+bnJ6anJ2am52ZmpyYmZuXmZuXmJq4uLqWmJqWl5mVl5mVlpiUlpiUlZeTlZeTlJaSlJaSk5atrrCRk5WRkpSQkZSQkZPSp8xaAAAGmklEQVR4AezVVZKDQBCA4eDuDnEH7n+/7V7WNXhTNX/keb7RFeu3WCwWi+N4nhcWPH5RkjFFUVVV0/RFGgzDNC3ro8O2HcddLSJR1z3IF5vxfndA9CmBDnlYGBo/rwcURTFlRJLq+oOOLMupKop12sKBcRQZm/UaIW0c2y25m5hfY6ne0rHb7Skp3HXDaO+ABEpH4w3S3rE7cERW43hcn0Su275Cx+FMwhE//yGjs+MMEhpdeuwrdJxdEgxuve6zr7ArvqRBEMzqaBj9HNcbdC/Lqqqi+Rw99xX05oDqJ97LAreSJQiCabbwf4HZFo0sMDMzw4O5/2m2dkf9BLW8HRk3CFWMpnNrW37UdB7V7rG5ubW1s7MjN+t/co/gl/cIkZ1gV15W6nfVeZhFikblrsJjb9nfVc17bBaP/X3/Q7HOPUpXxWO/kYt5qqu9vf3gQC7IrsLDJjJOdhUeB2vygHYVHoeHsrCOdhUeLhG2q/AYO1yXAbyrwwUdycAa21VwpDGPCNpVeBwdyyLCdhUeRycLRhGsq+DkRAYq3yN7nASn4iG7OioeLpGaOyp3FR4mEbir8DhbEE6lff7Te5xZRMCuTorH2YpwDF35RLD/R/E4N4gA75J0j3OHCPD/yB4WEb4rj4ihq/OLiwXh8F2Fx6VBxNDVxaVHhO4qPC7FY+jKI8J35RLhu/KI4F0FV1fiIbsq97i6Fg/w3s0eDpGp6vs8dXVtEbmpvs/zPSwit3xXHpGxivs8/z/CwyWi6vs83+PuTgbArq6Kx70MZI/aXd3dW0S4d8noHvdHMsC9S0Ye940MTNFdBQ8ycEt3FYzJAdxV8CgLXFfhYRYhuwqPJ1mgu3p8epaBFbqrEHl6GhNMY+jqGy+vcFV0V8Xj7W1WHO/APk9ddR6BOLAdle8RNMIA9vmPPT4+RLGA7PP8nb91Ip/zgmiMXX18fH5ibUH7PH3nRWRTENA+/35XXxEEtM+/2xUuYusq6Aki3wPsKjz6giDfJamr8OBErF31ORFvV6SIsytShNtRuStcBOsq32MwFMSEtavB4F0UdFfFoxNpheHsatBeC8PZVduKYwHb57krVETYjsr3aLcFMoHt805j5BEIBdrnuav2WiyergLBvJLv3RQWCfreLV21E+KZrL7Pc1eTcvAf3tWYPPy/GPdYAroaDNvgQF6Id8m8/Kip31UrP0HtrgblVeKGf++auK26z/N718eXau1BedIYCAJ4zrZtW+U6q/y3bRv7+Dc5p2uV2fk2nX6DX00fer/Y7qiUEON/B3ekglwx3Oc+LlnsepUYYtcrSevZdJB3ZvvcQ1zC3DbYUQQOic0+F0YrAcRgRwnkelrIWYNeERxEcs9gR3lHm0sdk161trvkuaT/94PJITHoVTsF5I56R1E5JOca7VX7DscRTa/+d3Q4ljTWq3ZHkx36XjE5JB/j9nng2O2Y8gQd2dwDE7+jvIMREr2jfjk62SCqXomDDqLrVScfRNUrcXSxQSLuETj4IFH7/K+DDxKxowIHHUTVK0k3GyRiRwUOOoiuV918EFWvxNHDBtH1ihKCvarrHj10kNhe/ToHLaR8r8o4/kJ6uRjH96p6JY7ePTSIna8/aHsljt4+Sf/Z5IpdRz5I4nsVOAYGBgYfHU94Cs2OquCQDA2leFNzWrOjsFfgkAwPj1xpouKkbp+Xvwc4fD4S/u6jcEhGR0eLPMy7Z/h7omGvwOEz9vWss88d/H3Xvlfo8HltewrVd04Lx/j4xMTE950WiG/a7+f6XoHDZ3LySkOKk8rvnAa9AofPKR3issH3c0OHZEqyJw5x6a7JO2R0SALHQKRDMj09M3unTgW+k0ndK3D4zL2pqXhn9/6qQMfc/Px8jU4p3iEre6V2CGReslDNoXyHnOAe8wsLC6ORDoNedRfhWFxcdOVz2+Z9e1N6JQ5J+TF2J6teecfS0p0yjnO59UocS8tlIBbv24u9hwQdy2fV/w4m/fcDHRKHuVvGYb6j7B0rDqN/356uV+JY+YaQHHsljpVVcOzMslfiWIU3OXfRkUWvPOR7CNG8QybolWQtcJwFR4J9rnWEkEsEO0rRK3EAZH+mvRLHegBh3ed/IRXvsY4Q2l7hPdCxfimAEOxzVa8kG/9DuPd55XtINgGi6hXBPTY3NwMIwY7SOrYCCME+V/UKIfn2amsLILn2CiAE+1zXK4QodxRBrxCSy45CB0Ly2VHYK4Tk2ivJNkAy7dX2dgkhefZqu/QL8gP80HLCmTwtcQAAAABJRU5ErkJggg=="},394:function(e,t,a){e.exports=a(789)},402:function(e,t,a){},425:function(e,t,a){},446:function(e,t){},448:function(e,t){},486:function(e,t){},487:function(e,t){},620:function(e,t,a){e.exports=a.p+"static/media/dead-link.a6b2b56b.png"},767:function(e,t,a){},776:function(e,t,a){},778:function(e,t,a){},785:function(e,t,a){},789:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(46),o=a.n(i),s=a(391),r=a(797),c=a(796),d=a(791),m=a(795),u=a(11),p=a(10),h=a(78),g=a(12),f=a(79),b=a(246),E=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement("footer",{className:"footer"+(this.props.default?" footer-default":"")},l.a.createElement(b.a,{fluid:!!this.props.fluid},l.a.createElement("div",{className:"copyright"})))}}]),t}(l.a.Component),v=a(247),y=a(75),_=a(248),C=a(249),k=a(250),S=a(251),O=a(370),M=a.n(O),w=(a(402),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).role=localStorage.getItem("role"),a.user_name=localStorage.getItem("user_name"),a.user_email=localStorage.getItem("user_email"),a.state={initials:""},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){if(""!==this.user_name){var e=this.user_name.split(" "),t=e[0],a=e[0].split("")[0],n=e[1].split("")[0];this.setState({initials:a+n,name:t})}else if(""===this.user_name||null===this.user_name||void 0===this.user_name||" "===this.user_name){var l=[],i=l,o=l,s=l;this.setState({initials:o+s,name:i})}}},{key:"render",value:function(){var e=this.props.activeColor;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"content"},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(_.a,{className:"headerHome"},l.a.createElement(C.a,null,l.a.createElement("h1",{className:"titleHome"},"VULCANO"))),l.a.createElement("hr",null),l.a.createElement(k.a,{className:"row1"},l.a.createElement(S.a,null,l.a.createElement("div",{className:"labelImg",data:e},this.state.initials)),l.a.createElement(S.a,null,l.a.createElement("div",{className:"salute"},"Hi, ",this.user_name),l.a.createElement("div",{className:"sub"},"Email: ",this.user_email),l.a.createElement("div",{className:"sub"},"Role: ",this.role),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("img",{src:M.a,alt:"",className:"prodimg"})),l.a.createElement("br",null),l.a.createElement("div",{className:"sub"},"Have a productive day ",this.state.name,"!")))))))}}]),t}(l.a.Component)),x=a(22),N=a.n(x),T=a(32),j=a(23),A=a(7),F=a(81),P=a(3),L=a(369),D=a(269),H=a(270),I=a(271),R=a(72),z=a(253),B=a(17),U=a.n(B),W=a(80),V=a(273),q=a(274),J=a(276),G={input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}};var $=function(e){var t=localStorage.getItem("role")||"";return l.a.createElement(v.a,null,l.a.createElement(_.a,null,l.a.createElement(C.a,{tag:"h4"},"New CostSheet")),l.a.createElement(y.a,null,l.a.createElement(V.a,{onSubmit:function(e){return e.preventDefault()}},l.a.createElement(k.a,null,l.a.createElement(z.a,{md:{size:3,offset:1}},l.a.createElement(W.a,{styles:G,className:"react-select primary",classNamePrefix:"react-select",name:"clientSelect",value:e.formData.client?e.formData.client:null,onChange:function(t){return e.handleForm("client",t)},options:e.clients.map(function(e){return{value:e.id,label:e.name}}),placeholder:"Clients"})),l.a.createElement(z.a,{md:"2"},l.a.createElement(q.a,{id:"formGroup_pathToTechpack",className:"text-center"},l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm"},l.a.createElement("input",{type:"file",onChange:function(t){var a=null,n="";void 0!==t.target.files[0]&&(a=t.target.files[0],n="techpack/"+t.target.files[0].name),e.handleForm("techpack",{file:a,path:n})},name:"pathToTechpack",id:"input_pathToTechpack"}),l.a.createElement("i",{className:"tim-icons icon-cloud-upload-94"}),"\xa0techpack"),l.a.createElement("label",null,e.formData.techpack?e.formData.techpack.path:""))),l.a.createElement(z.a,{md:"2"},l.a.createElement(J.a,{type:"text",onChange:function(t){return e.handleForm("style",t.target.value)},value:e.formData.style?e.formData.style:"",placeholder:"Style..."})),l.a.createElement(z.a,{md:"3"},l.a.createElement(W.a,{styles:G,className:"react-select primary",classNamePrefix:"react-select",name:"seasonSelect",value:e.formData.season?e.formData.season:null,onChange:function(t){return e.handleForm("season",t)},options:e.seasons.map(function(e){return{value:e.id,label:e.name}}),placeholder:"Season"}))),l.a.createElement(k.a,null,l.a.createElement(z.a,{md:{size:4}}),l.a.createElement(z.a,{md:{size:4}},l.a.createElement(R.a,{color:"primary",name:"insert",type:"button",onClick:function(t){t.preventDefault(),e.QuickCost()}},"Create Quick Cost.")),"QuickCosting"!==t&&l.a.createElement(z.a,{md:{size:4}},l.a.createElement(R.a,{color:"primary",name:"insert",type:"button",onClick:function(t){t.preventDefault(),e.onSubmit()}},"Create Cost Sheet."))))))},Y=a(29),X=a(83),K=(a(425),a(77)),Q=[],Z={N:"In Progress",A:"Sent to Account",J:"Sent to Admin",D:"Approve by Admin"};var ee=function(e){var t=Object(Y.a)({},e),a=JSON.parse(localStorage.getItem("permissions")||"{}"),n=localStorage.getItem("role")||"";function i(e){var t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(t)}return Q=t.dataTable.map(function(e,o){var s=!1;return""!==e.updating_user&&"None"!==e.updating_user&&null!==e.updating_user&&(s=!0),s="Consulting"!==n&&"Telas"!==n&&s,{id:o,codigo:e.id,client:e.client.name,season:e.season.name,style:e.style,approvalStatus:Z[e.approvalStatus],created_at:i(e.created_at),updating_user:e.updating_user,type:e.qcFlag?"QuickCosting":"Costing",actions:l.a.createElement(k.a,{style:{maxWidth:"80%"}},"D"===e.approvalStatus?l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{xs:6},l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",disabled:s,onClick:function(){return t.OpenSheet(e.id,e.qcFlag)}},l.a.createElement("i",{className:"fa fa-edit"}))),l.a.createElement(z.a,{xs:6},a.costing.edit&&l.a.createElement(R.a,{color:"primary",size:"sm",className:"btn-icon btn-link",onClick:function(){return t.cloneCosting(e.id,e.detail_id)}},l.a.createElement("i",{className:"fa fa-clone"}))),l.a.createElement(z.a,{xs:6},a.costing.edit&&l.a.createElement(R.a,{color:"primary",size:"sm",className:"btn-icon btn-link",type:"button",onClick:function(){return t.showResume(e)}},l.a.createElement("i",{className:"fa fa-search"})))):l.a.createElement(l.a.Fragment,null," ",l.a.createElement(z.a,{xs:6},l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",disabled:s,onClick:function(a){s?a.preventDefault():t.OpenSheet(e.id,e.qcFlag)}},l.a.createElement("i",{className:"fa fa-edit"}))),l.a.createElement(z.a,{xs:6},a.costing.edit&&l.a.createElement(R.a,{color:"primary",size:"sm",className:"btn-icon btn-link",onClick:function(){return t.cloneCosting(e.id,e.detail_id)}},l.a.createElement("i",{className:"fa fa-clone"}))),l.a.createElement(z.a,{xs:6},a.costing.edit&&l.a.createElement(R.a,{color:"primary",size:"sm",className:"btn-icon btn-link",type:"button",onClick:function(){return t.showResume(e)}},l.a.createElement("i",{className:"fa fa-search"}))),l.a.createElement(z.a,{xs:6},a.costing.delete&&l.a.createElement(R.a,{color:"danger",size:"sm",className:"btn-icon btn-link",disabled:s,onClick:function(a){s?a.preventDefault():t.removeCosting(e.id)}},l.a.createElement("i",{className:"fa fa-times"})))))}}),l.a.createElement(v.a,null,l.a.createElement(_.a,null,l.a.createElement(C.a,{tag:"h4"},"CostSheets List")),l.a.createElement(y.a,null,l.a.createElement(X.a,{responsive:!0,data:Q,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"CODE",accessor:"codigo",width:90},{Header:"CLIENT",accessor:"client"},{Header:"SEASON",accessor:"season",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["season"]})},filterAll:!0},{Header:"STYLE",accessor:"style",width:200,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["style"]})},filterAll:!0},{Header:"Approval State",accessor:"approvalStatus"},{Header:"Updating User",accessor:"updating_user",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["updating_user"]})},filterAll:!0},{Header:"Type",accessor:"type",sortable:!1,filterable:!1},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1,width:100}],defaultPageSize:10,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"})))},te=a(4),ae=a.n(te),ne=a(16),le=ne.c.create({image:{width:"200px",height:"auto"},pageNumber:{position:"absolute",fontSize:12,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},page:{backgroundColor:"#FFF",paddingTop:15,paddingBottom:65,paddingHorizontal:6},section:{margin:3,padding:3,flexGrow:1},header_text:{fontSize:11,textAlign:"left"},header_text_bold:{fontSize:11,textAlign:"left",fontFamily:"Times-Bold"},title:{fontSize:20,textAlign:"center",width:"auto"},author:{fontSize:12,textAlign:"center",marginBottom:5,width:"auto"},subtitle:{fontSize:6,marginBottom:5,width:"auto"},subsubtitle:{fontSize:14,margin:6,width:"auto"},header:{fontSize:12,marginBottom:10,textAlign:"center",color:"grey",width:"auto"},table:{display:"table",width:"auto",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0,marginBottom:6},tableRow:{margin:"auto",flexDirection:"row"},tableRowBold:{margin:"auto",flexDirection:"row",backgroundColor:"lightgrey"},tableCollSmall15:{width:"15%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCollSmall5:{width:"6.53%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCellSmall:{margin:"auto",marginTop:1,fontSize:6},tableCellBoldSmall:{margin:"auto",marginTop:1,fontSize:6,fontFamily:"Times-Bold"},tableCol50:{width:"50%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCol50NoBorder:{width:"50%"},tableCol40:{width:"40%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCol25:{width:"25%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCol20:{width:"20%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCol16:{width:"16.66%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCol15:{width:"15%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCol12:{width:"12.50%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCol10:{width:"10%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCell:{margin:"auto",marginTop:5,fontSize:6},tableCellBold:{margin:"auto",marginTop:1,fontSize:6,fontFamily:"Times-Bold"}});function ie(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.a.createElement(l.a.Fragment,null,"\xa0"),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.a.createElement(l.a.Fragment,null,"\xa0"),i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.a.createElement(l.a.Fragment,null,"\xa0"),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l.a.createElement(l.a.Fragment,null,"\xa0"),s=e?le.tableCellBold:le.tableCell,r=e?le.tableRowBold:le.tableRow;return l.a.createElement(ne.e,{key:t,style:r},l.a.createElement(ne.e,{style:le.tableCol25},l.a.createElement(ne.d,{style:s},a)),l.a.createElement(ne.e,{style:le.tableCol25},l.a.createElement(ne.d,{style:s},n)),l.a.createElement(ne.e,{style:le.tableCol25},l.a.createElement(ne.d,{style:s},i)),l.a.createElement(ne.e,{style:le.tableCol25},l.a.createElement(ne.d,{style:s},o)))}function oe(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.a.createElement(l.a.Fragment,null,"\xa0"),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.a.createElement(l.a.Fragment,null,"\xa0"),i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.a.createElement(l.a.Fragment,null,"\xa0"),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l.a.createElement(l.a.Fragment,null,"\xa0"),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:l.a.createElement(l.a.Fragment,null,"\xa0"),r=e?le.tableCellBold:le.tableCell,c=e?le.tableRowBold:le.tableRow;return l.a.createElement(ne.e,{key:t,style:c},l.a.createElement(ne.e,{style:le.tableCol20},l.a.createElement(ne.d,{style:r},a)),l.a.createElement(ne.e,{style:le.tableCol20},l.a.createElement(ne.d,{style:r},n)),l.a.createElement(ne.e,{style:le.tableCol20},l.a.createElement(ne.d,{style:r},i)),l.a.createElement(ne.e,{style:le.tableCol20},l.a.createElement(ne.d,{style:r},o)),l.a.createElement(ne.e,{style:le.tableCol20},l.a.createElement(ne.d,{style:r},s)))}function se(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.a.createElement(l.a.Fragment,null,"\xa0"),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.a.createElement(l.a.Fragment,null,"\xa0"),i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.a.createElement(l.a.Fragment,null,"\xa0"),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l.a.createElement(l.a.Fragment,null,"\xa0"),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:l.a.createElement(l.a.Fragment,null,"\xa0"),r=e?le.tableCellBold:le.tableCell,c=e?le.tableRowBold:le.tableRow;return l.a.createElement(ne.e,{key:a,style:c},l.a.createElement(ne.e,{style:le.tableCol50},l.a.createElement(ne.d,{style:r},t)),l.a.createElement(ne.e,{style:le.tableCol12},l.a.createElement(ne.d,{style:r},n)),l.a.createElement(ne.e,{style:le.tableCol12},l.a.createElement(ne.d,{style:r},i)),l.a.createElement(ne.e,{style:le.tableCol12},l.a.createElement(ne.d,{style:r},o)),l.a.createElement(ne.e,{style:le.tableCol12},l.a.createElement(ne.d,{style:r},s)))}function re(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.a.createElement(l.a.Fragment,null,"\xa0"),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.a.createElement(l.a.Fragment,null,"\xa0"),i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.a.createElement(l.a.Fragment,null,"\xa0"),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l.a.createElement(l.a.Fragment,null,"\xa0"),s=e?le.tableCellBold:le.tableCell,r=e?le.tableRowBold:le.tableRow;return l.a.createElement(ne.e,{key:a,style:r},l.a.createElement(ne.e,{style:le.tableCol50},l.a.createElement(ne.d,{style:s},t)),l.a.createElement(ne.e,{style:le.tableCol16},l.a.createElement(ne.d,{style:s},n)),l.a.createElement(ne.e,{style:le.tableCol16},l.a.createElement(ne.d,{style:s},i)),l.a.createElement(ne.e,{style:le.tableCol16},l.a.createElement(ne.d,{style:s},o)))}function ce(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.a.createElement(l.a.Fragment,null,"\xa0"),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.a.createElement(l.a.Fragment,null,"\xa0"),i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=e?le.tableCellBold:le.tableCell,s=i?le.tableCellBold:le.tableCell,r=e?le.tableRowBold:le.tableRow;return l.a.createElement(ne.e,{key:a,style:r},l.a.createElement(ne.e,{style:le.tableCol50},l.a.createElement(ne.d,{style:s},t)),l.a.createElement(ne.e,{style:le.tableCol50},l.a.createElement(ne.d,{style:o},n)))}function de(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.a.createElement(l.a.Fragment,null,"\xa0"),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,m=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,u=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,h=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,g=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,f=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,b=e?le.tableCellBoldSmall:le.tableCellSmall,E=e?le.tableRowBold:le.tableRow;return l.a.createElement(ne.e,{style:E,key:t},l.a.createElement(ne.e,{style:le.tableCollSmall15},l.a.createElement(ne.d,{style:b},a)),l.a.createElement(ne.e,{style:le.tableCollSmall5},l.a.createElement(ne.d,{style:b},n)),l.a.createElement(ne.e,{style:le.tableCollSmall5},l.a.createElement(ne.d,{style:b},i)),l.a.createElement(ne.e,{style:le.tableCollSmall5},l.a.createElement(ne.d,{style:b},o)),l.a.createElement(ne.e,{style:le.tableCollSmall5},l.a.createElement(ne.d,{style:b},s)),l.a.createElement(ne.e,{style:le.tableCollSmall5},l.a.createElement(ne.d,{style:b},r)),l.a.createElement(ne.e,{style:le.tableCollSmall5},l.a.createElement(ne.d,{style:b},c)),l.a.createElement(ne.e,{style:le.tableCollSmall5},l.a.createElement(ne.d,{style:b},d)),l.a.createElement(ne.e,{style:le.tableCollSmall5},l.a.createElement(ne.d,{style:b},m)),l.a.createElement(ne.e,{style:le.tableCollSmall5},l.a.createElement(ne.d,{style:b},u)),l.a.createElement(ne.e,{style:le.tableCollSmall5},l.a.createElement(ne.d,{style:b},p)),l.a.createElement(ne.e,{style:le.tableCollSmall5},l.a.createElement(ne.d,{style:b},h)),l.a.createElement(ne.e,{style:le.tableCollSmall5},l.a.createElement(ne.d,{style:b},g)),l.a.createElement(ne.e,{style:le.tableCollSmall5},l.a.createElement(ne.d,{style:b},f)))}function me(e){var t,a,n,i=[{value:"O",label:"OTHER"},{value:"B",label:"BONDING"},{value:"E",label:"EMBROIDERY"},{value:"A",label:"APPLIQUE"},{value:"EM",label:"EMBOSSED"},{value:"RS",label:"ROLL_SUBLIMATION"},{value:"S",label:"SCREENPRINT"},{value:"SU",label:"SUBLIMATION"},{value:"G",label:"GARMENT_WASH"}];return l.a.createElement(ne.a,null,l.a.createElement(ne.b,{style:le.page},l.a.createElement(ne.d,{style:le.title},e.headerData.style),l.a.createElement(ne.e,{style:le.section},l.a.createElement(ne.e,null,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=se(!0,"Fabric LBS",-1,"White","Medium","Dark","Special"),n=se(!0,"Fabric YDS",-1,"White","Medium","Dark","Special"),i=de(!0,-1,"Fabric type","Weight b.wash Origianl","Weight b.wash Calculated","Width","Marker Width","Plies Tubular","Yield","Utilization %","Marker Length","Units Marker","Lbs * Unit","Lbs * Unit + waste","Inch^2 Unit","YD / Unit");function o(e,t){var a=12*t*e/12;return a||0}return l.a.createElement(ne.e,{key:t},l.a.createElement(ne.d,{style:le.subtitle},"Fabric Consumption"),l.a.createElement(ne.e,{style:le.table,key:0},i,e.map(function(e,t){return de(!1,t,e.show_name?e.show_name:"",parseFloat(e.weightBWashOriginal).toFixed(2),parseFloat(e.weightBWashCalculated).toFixed(2),parseFloat(e.dm_width).toFixed(2),parseFloat(e.markerWidth).toFixed(2),e.dm_pt?"1":"0",parseFloat(e.yieldydslbs).toFixed(2),parseFloat(e.markerEfficiency).toFixed(2),parseFloat(e.markerLong).toFixed(2),parseFloat(e.pieceByMarker).toFixed(2),parseFloat(isNaN(e.lbsunit)?"0":e.lbsunit).toFixed(2),parseFloat(isNaN(e.lbsunitwaste)?"0":e.lbsunitwaste).toFixed(2),parseFloat(isNaN(e.sqinchunit)?"0":e.sqinchunit).toFixed(2),parseFloat(isNaN(e.ydsunit)?"0":e.ydsunit).toFixed(2))})),l.a.createElement(ne.d,{style:le.subtitle},"Fabrics"),l.a.createElement(ne.e,{style:le.table,key:1},a,e.map(function(e,t){return se(!1,e.show_name?e.show_name:"",t,"$ "+e.priceWhite,"$ "+e.priceMedium,"$ "+e.priceDark,"$ "+e.priceSpecial)})),l.a.createElement(ne.e,{style:le.table,key:1},n,e.map(function(e,t){return se(!1,e.show_name?e.show_name:"",t,"$ "+(e.priceWhite/e.yieldydslbs).toFixed(2),"$ "+(e.priceMedium/e.yieldydslbs).toFixed(2),"$ "+(e.priceDark/e.yieldydslbs).toFixed(2),"$ "+(e.priceSpecial/e.yieldydslbs).toFixed(2))})),l.a.createElement(ne.e,{style:le.table,key:2},e.map(function(e,t){var a=o(parseFloat(e.priceWhite),parseFloat(e.lbsunit)),n=o(parseFloat(e.priceMedium),parseFloat(e.lbsunit)),l=o(parseFloat(e.priceDark),parseFloat(e.lbsunit)),i=o(parseFloat(e.priceSpecial),parseFloat(e.lbsunit));return se(!1,e.show_name?e.show_name:"",t,"$ "+a.toFixed(2),"$ "+n.toFixed(2),"$ "+l.toFixed(2),"$ "+i.toFixed(2))})))}(e.data.dms)),l.a.createElement(ne.e,null,function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return l.a.createElement(ne.e,{style:le.table,key:a},se(!0,"PIECE GOODS TOTAL (+"+t+"%)",0,"$ "+e.white.toFixed(2),"$ "+e.medium.toFixed(2),"$ "+e.dark.toFixed(2),"$ "+e.special.toFixed(2)))}(e.Calc.pricesFabrics,e.data.pfabrics)),l.a.createElement(ne.e,null,l.a.createElement(ne.d,{style:le.subtitle},"Materials"),function(e){var t=re(!0,"Materials",-1,"Unit Price","Transport","Price");return l.a.createElement(ne.e,{style:le.table},t,e.map(function(e,t){var a=e.material?e.material:"",n=e.unitPrice+e.transport;return re(!1,a,t,"$ "+e.unitPrice.toFixed(4),"$ "+e.transport.toFixed(4),"$ "+n.toFixed(4))}))}(e.data.materials)),l.a.createElement(ne.e,null,function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return l.a.createElement(ne.e,{style:le.table,key:a},ce(!0,"TRIMMING TOTAL (+"+t+"%)",a,"$ "+e.toFixed(2),!0))}(e.Calc.pricesMaterials,e.data.pmaterials)),l.a.createElement(ne.e,null,l.a.createElement(ne.d,{style:le.subtitle},"Manufacturing"),(a=e.data.pir,n=e.Calc,l.a.createElement(l.a.Fragment,null,l.a.createElement(ne.e,{style:le.table,key:0},ce(!1,"SAM",1,n.totalTime.toFixed(2),!0),ce(!1,"Cost per Minute",2,"$ "+n.cxm.toFixed(2),!0),ce(!1,"Sewing",3,"$ "+n.sewing.toFixed(2),!0),ce(!1,"Cutting",4,"$ "+n.cutting.toFixed(2),!0),ce(!1,"Manufacturing Total",5,"$ "+n.manufacturing.toFixed(2),!0),ce(!1,"Ir Reserve",0,a+"%",!0),oe(!0,6," ","Manufacturing White","Manufacturing Medium","Manufacturing Dark","Manufacturing Special"),oe(!1,7,"Normal","$ "+n.manufacturingPrices.white.toFixed(2),"$ "+n.manufacturingPrices.medium.toFixed(2),"$ "+n.manufacturingPrices.dark.toFixed(2),"$ "+n.manufacturingPrices.special.toFixed(2)),oe(!1,7,"IR Reserve","$ "+(n.manufacturingPrices.white*(a/100)).toFixed(2),"$ "+(n.manufacturingPrices.medium*(a/100)).toFixed(2),"$ "+(n.manufacturingPrices.dark*(a/100)).toFixed(2),"$ "+(n.manufacturingPrices.special*(a/100)).toFixed(2)))))),l.a.createElement(ne.e,null,l.a.createElement(ne.d,{style:le.subtitle},"Cost FOB Guatemala"),function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ne.e,{style:le.table,key:0},ce(!1,"Insurance",1,"$ "+e.broker.toFixed(2),!0),ce(!1,"Freight per Unit",4,"$ "+e.freightTotal.toFixed(2),!0),ie(!0,5,"White","Medium","Dark","Special"),ie(!1,6,"$ "+e.logisticsPrices.white.toFixed(2),"$ "+e.logisticsPrices.medium.toFixed(2),"$ "+e.logisticsPrices.dark.toFixed(2),"$ "+e.logisticsPrices.special.toFixed(2))))}(e.Calc)),l.a.createElement(ne.e,null,l.a.createElement(ne.d,{style:le.subtitle},"Cost FOB Total"),function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ne.e,{style:le.table,key:0},ce(!1,"Factoring",0,+e.factoring.toFixed(2)+"%",!0),ie(!0,1,"Profit White %","Profit Medium %","Profit Dark %","Profit Special %"),ie(!1,2,(100*e.profit.white).toFixed(2)+"%",(100*e.profit.medium).toFixed(2)+"%",(100*e.profit.dark).toFixed(2)+"%",(100*e.profit.special).toFixed(2)+"%"),ie(!1,3,"$ "+e.profitValues.white.toFixed(2),"$ "+e.profitValues.medium.toFixed(2),"$ "+e.profitValues.dark.toFixed(2),"$ "+e.profitValues.special.toFixed(2)),ce(!1,"Sale Commision",4,(100*e.sellCommision).toFixed(2)+"%",!0)))}(e.Calc)),l.a.createElement(ne.e,null,l.a.createElement(ne.d,{style:le.subtitle},"Embellishments"),function(e,t){return l.a.createElement(ne.e,{style:le.table},ce(!0,"Decoration",-1,"Unit Price",!0),e.embellishments.map(function(e,t){var a=i.find(function(t){return t.value===e.name}),n=e.price+e.price*(e.margin/100);return ce(!1,a.label,t,"$ "+n.toFixed(2),!1)}),ce(!0,"TOTAL EMBELLISHMENT",99,"$ "+t.totalEmbellishments.toFixed(2),!0))}(e.data,e.Calc)),l.a.createElement(ne.e,null,l.a.createElement(ne.d,{style:le.subtitle},"Final Selling Prices"),(t=e.Calc.sellingPrices,l.a.createElement(ne.e,{style:le.table},ie(!0,1,"Price White","Price Medium","Price Dark","Price Special"),ie(!1,2,"$ "+t.white.toFixed(2),"$ "+t.medium.toFixed(2),"$ "+t.dark.toFixed(2),"$ "+t.special.toFixed(2)))))),l.a.createElement(ne.d,{style:le.pageNumber,render:function(e){var t=e.pageNumber,a=e.totalPages;return"".concat(t," / ").concat(a)},fixed:!0})))}var ue=a(386);function pe(e,t,a){return he.apply(this,arguments)}function he(){return(he=Object(T.a)(N.a.mark(function e(t,a,n){var l,i,o,s,r,c=arguments;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=c.length>3&&void 0!==c[3]?c[3]:"certificate",i=c.length>4&&void 0!==c[4]?c[4]:[],o=n.get(l).name,s=o.split(".").pop(),!(i.indexOf(s)>-1)){e.next=9;break}return e.next=7,ae.a.post(t,n,a).catch(function(e){throw e});case 7:return r=e.sent,e.abrupt("return",r.data.url?r.data.url:r.data.path);case 9:throw new Error("Error file type can only be: "+i);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ge(e,t){return fe.apply(this,arguments)}function fe(){return(fe=Object(T.a)(N.a.mark(function e(t,a){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.a.get(t,a);case 2:return n=e.sent,e.abrupt("return",n.data.url);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function be(e,t,a,n){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(T.a)(N.a.mark(function e(t,a,n,i){var o,s,r,c,d,m;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=localStorage.getItem("userToken")||"",s="https://api.vulcanoapparel.com/api/v1/costingHeader/download/?key="+n,r={params:{key:n},headers:{Authorization:"Token "+o}},c=i.costSheet+"-"+i.style.replace(/[^a-z0-9]/gi,"_").toLowerCase()+".pdf",e.next=6,ge(s,r);case 6:return d=e.sent,e.next=9,Object(ne.f)(l.a.createElement(me,{data:t,title:"Hoja de Costeo",subTitle:"hoja de prueba.",pathToSketch:d,headerData:i,Calc:a})).toBlob();case 9:m=e.sent,Object(ue.saveAs)(m,c);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ve(e,t){return ye.apply(this,arguments)}function ye(){return(ye=Object(T.a)(N.a.mark(function e(t,a){var n,l,i;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem("userToken")||"",(l=new FormData).append("id",t),l.append("flag",a),e.next=7,ae.a.post("https://api.vulcanoapparel.com/api/v1/costingHeader/copy_costing/",l,{headers:{Authorization:"Token "+n,"Content-Type":"multipart/form-data;"}});case 7:return i=e.sent,e.abrupt("return",i);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}},e,null,[[0,11]])}))).apply(this,arguments)}var _e=a(272);function Ce(e){var t=e.detailCalculation;return l.a.createElement(l.a.Fragment,null,l.a.createElement(_e.a,{striped:!0,size:"sm",style:{marginBottom:"0rem"}},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"20%"}},"\xa0"),l.a.createElement("th",null,"White"),l.a.createElement("th",null,"Medium"),l.a.createElement("th",null,"Dark"),l.a.createElement("th",null,"Special")),l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"20%"},scope:"row"},"Total Fabrics",l.a.createElement("br",null),"(",l.a.createElement("b",null,100*t.wasteFabrics,"%"),")"),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.pricesFabrics.white.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.pricesFabrics.medium.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.pricesFabrics.dark.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.pricesFabrics.special.toFixed(2))),l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"20%"},scope:"row"},l.a.createElement("b",null,"Total Materials"),l.a.createElement("br",null),"(",l.a.createElement("b",null,100*t.wasteMaterials,"%"),")"),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.pricesMaterials.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.pricesMaterials.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.pricesMaterials.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.pricesMaterials.toFixed(2))),l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"20%"},scope:"row"},"Manufacturing"),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.manufacturing.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.manufacturing.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.manufacturing.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.manufacturing.toFixed(2))),l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"20%"},scope:"row"},"Insurance"),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.broker.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.broker.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.broker.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.broker.toFixed(2))),l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"20%"},scope:"row"},"Freight Total"),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.freightTotal.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.freightTotal.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.freightTotal.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.freightTotal.toFixed(2))),l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"20%"},scope:"row"},"Profit (%)"),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},console.log(e.resume),e.resume?(100*t.profit.white).toFixed(2)+"%":l.a.createElement(J.a,{type:"number",min:0,step:1,value:(100*t.profit.white).toFixed(2),onChange:function(t){return e.helper({key:"profitWhite",value:t.target.value})}})),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},e.resume?(100*t.profit.medium).toFixed(2)+"%":l.a.createElement(J.a,{type:"number",min:0,step:1,value:(100*t.profit.medium).toFixed(2),onChange:function(t){return e.helper({key:"profitMedium",value:t.target.value})}})),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},e.resume?(100*t.profit.dark).toFixed(2)+"%":l.a.createElement(J.a,{type:"number",min:0,step:1,value:(100*t.profit.dark).toFixed(2),onChange:function(t){return e.helper({key:"profitDark",value:t.target.value})}})),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},e.resume?(100*t.profit.special).toFixed(2)+"%":l.a.createElement(J.a,{type:"number",min:0,step:1,value:(100*t.profit.special).toFixed(2),onChange:function(t){return e.helper({key:"profitSpecial",value:t.target.value})}}))),l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"20%"},scope:"row"},"Profit"),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.profitValues.white.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.profitValues.medium.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.profitValues.dark.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.profitValues.special.toFixed(2))),l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"20%"},scope:"row"},"Factoring"),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},(100*t.factoring).toFixed(2),"%"),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},(100*t.factoring).toFixed(2),"%"),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},(100*t.factoring).toFixed(2),"%"),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},(100*t.factoring).toFixed(2),"%")),l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"20%"},scope:"row"},"Sell Commision"),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.sellComisionPrices.white.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.sellComisionPrices.medium.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.sellComisionPrices.dark.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.sellComisionPrices.special.toFixed(2))),l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"20%"},scope:"row"},l.a.createElement("b",null,"Embellishments Total")),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.totalEmbellishments.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.totalEmbellishments.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.totalEmbellishments.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.totalEmbellishments.toFixed(2))),l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"20%"},scope:"row"},"Selling Prices"),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.sellingPrices.white.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.sellingPrices.medium.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.sellingPrices.dark.toFixed(2)),l.a.createElement("td",{style:{textAlign:"center",width:"20%"}},"$",t.sellingPrices.special.toFixed(2))))))}function ke(e){function t(e){return null===e||void 0===e||""===e||isNaN(e)?0:parseFloat(e)}var a=t(e.cxm),n=t(e.totalTime),l=t(e.production_time),i=e.operation_flag,o=t(e.extra_time),s=i?n:l,r=t(e.cutting),c=a*(s+o)+r,d=t(e.pfabrics)/100,m=t(e.pmaterials)/100,u=t(e.pir)/100,p=function(e,a){var n=0,l=0,i=0,o=0;return e.map(function(e){var a=e.Bwidth/36*(1/(1*e.dm_width))*e.Blong/e.yieldydslbs;if(e.lbsunit||(e.lbsunit=a),e.wasted_flag){var s=12*t(e.lbsunitwaste)*t(e.priceWhite)/12,r=12*t(e.lbsunitwaste)*t(e.priceMedium)/12,c=12*t(e.lbsunitwaste)*t(e.priceDark)/12,d=12*t(e.lbsunitwaste)*t(e.priceSpecial)/12;return n+=s,l+=r,i+=c,o+=d,e}var m=12*t(e.lbsunit)*t(e.priceWhite)/12,u=12*t(e.lbsunit)*t(e.priceMedium)/12,p=12*t(e.lbsunit)*t(e.priceDark)/12,h=12*t(e.lbsunit)*t(e.priceSpecial)/12;return n+=m,l+=u,i+=p,o+=h,e}),{white:n=n*a/(1-a)+n,medium:l=l*a/(1-a)+l,dark:i=i*a/(1-a)+i,special:o=o*a/(1-a)+o}}(e.dms,d),h=function(e){var a=0;return e.map(function(e){return a+=t(e.unitPrice)+t(e.transport)}),a}(e.materials),g=h+h*(m/(1-m)),f=function(e){var a=0;return e.map(function(e){var n=t(e.price),l=t(e.margin);return a+=n+n*(l/100),e}),a}(e.embellishments),b=p.white+g+c,E=p.medium+g+c,v=p.dark+g+c,y=p.special+g+c;E+=E*u/(1-u),v+=v*u/(1-u),y+=y*u/(1-u);var _=(b+=b*u/(1-u))-p.white-g-c,C=E-p.medium-g-c,k=v-p.dark-g-c,S=y-p.special-g-c,O=t(e.broker),M=t(e.factoring)/100,w=t(e.freightPrice),x=t(e.freightQuantity),N=x>0?w/x:0,T=b+O+N,j=E+O+N,A=v+O+N,F=y+O+N,P=T,L=j,D=A,H=F,I=t(e.profitWhite)/100,R=t(e.profitMedium)/100,z=t(e.profitDark)/100,B=t(e.profitSpecial)/100,U=b/(1-I),W=E/(1-R),V=v/(1-z),q=y/(1-B),J=M*U,G=M*W,$=M*V,Y=M*q,X=(T+J)/(1-I),K=(j+G)/(1-R),Q=(A+$)/(1-z),Z=(F+Y)/(1-B),ee={white:X*I,medium:K*R,dark:Q*z,special:Z*B},te=t(e.sell)/100,ae=X*te/(1-te),ne=K*te/(1-te),le=Q*te/(1-te),ie=Z*te/(1-te);return{wasteFabrics:d,pricesFabrics:p,wasteMaterials:m,pricesMaterials:g,IrReserve:u,IrPrices:{white:_,medium:C,dark:k,special:S},cxm:a,totalTime:s,extraTime:o,sewing:a*(s+o),cutting:r,manufacturing:c,manufacturingPrices:{white:b,medium:E,dark:v,special:y},broker:O,freightPrice:w,freightQuantity:x,freightTotal:N,logisticsPrices:{white:P,medium:L,dark:D,special:H},profit:{white:I,medium:R,dark:z,special:B},profitValues:ee,preSellPrices:{white:U,medium:W,dark:V,special:q},factoring:M,factoringPrices:{white:J,medium:G,dark:$,special:Y},sellCommision:te,sellComisionPrices:{white:ae,medium:ne,dark:le,special:ie},totalValues:{white:X+=ae,medium:K+=ne,dark:Q+=le,special:Z+=ie},decorationMargin:t(e.decorationMargin)/100,sumEmbellishments:f,totalEmbellishments:f,sellingPrices:{white:X+=f,medium:K+=f,dark:Q+=f,special:Z+=f}}}var Se=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e)))._isMounted=!1,a.userToken=localStorage.getItem("userToken")||"",a.valid_time=localStorage.getItem("valid_time")||"",a.Access=JSON.parse(localStorage.getItem("permissions")||"{}"),a.user_id=localStorage.getItem("user_id")||"0",a._loadingHeaders=!1,a._loadingClients=!1,a._loadingSeasons=!1,a._formHeader={headers:{Authorization:"Token "+a.userToken,"Content-Type":"multipart/form-data"}},a._jsonHeader={headers:{Authorization:"Token "+a.userToken,"Content-Type":"application/json"}},a.logOut=function(){a._isMounted=!1,localStorage.clear(),a.componentWillUnmount(),a.props.history.push("/auth/login")},a.nauticaCase=function(){var e=localStorage.getItem("user_id"),t=a.state.formData;if((33===e||45===e||39===e)&&"NAUTICA"===t.client)return!1},a.handleError=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.response?e.response:{},n=e.message?e.message:"";if(void 0!==t.status&&401===t.status)a.logOut();else{var l="";if(void 0!==t.data)for(var i=0,o=Object.entries(t.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;a.notify("tr","warning",l)}},a.notify=function(e,t,n){var i;i={place:e,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:t,icon:"tim-icons icon-bell-55",autoDismiss:5},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&a._isMounted&&a.refs.notificationAlert.notificationAlert(i)},a.costingHistory=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/costingHeader/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadingHeaders=!0,this._isMounted&&this.setState({dataTable:e.data,loading:!1})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"costing History")}.bind(Object(P.a)(a)))},a.getClients=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/clients/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadingClients=!0,this._isMounted&&this.setState({clients:e.data})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e)}.bind(Object(P.a)(a)))},a.getSeasons=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/seasons/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadingSeasons=!0,this._isMounted&&this.setState({seasons:e.data})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e)}.bind(Object(P.a)(a)))},a.checkPageMode=function(){var e,t,a;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="",a="modal-white";break;default:e="bg-dark",t="text-primary",a="modal-black"}return{bg:e,hc:t,mc:a}},a.formHelper=function(e,t){a.setState({formData:Object(A.a)({},a.state.formData,Object(j.a)({},e,t))})},a.handleSubmit=function(){var e=a.state.formData;if(""!==e.style&&null!==e.client&&null!==e.season&&void 0!==e.techpack&&null!==e.techpack.file){a.setState({loading:!0});var t=new FormData;t.append("client",e.client.value),t.append("file",e.techpack.file),t.append("season",e.season.value),t.append("style",e.style),t.append("flag",1),ae.a.post("https://api.vulcanoapparel.com/api/v1/costingHeader/",t,a._formHeader).then(function(){this._isMounted&&this.setState({loading:!1,formData:{}}),this.componentDidMount(),this.notify("tr","success","Costing sheet added")}.bind(Object(P.a)(a))).catch(function(e){this._isMounted&&this.setState({loading:!1,formData:{}}),this.componentDidMount(),this.handleError(e,"header data post")}.bind(Object(P.a)(a)))}else a.notify("tr","warning","Complete form to continue.")},a.handleQuickCost=function(){var e=a.state.formData;if(null!==e.client&&null!==e.season&&void 0!==e.client&&void 0!==e.season&&null!==e.style&&void 0!==e.style){a.setState({loading:!0});var t=null;null!==e.techpack&&void 0!==e.techpack&&(t=e.techpack.file);var n=new FormData;n.append("client",e.client.value),n.append("file",t),n.append("season",e.season.value),n.append("style",e.style),n.append("flag",0),ae.a.post("https://api.vulcanoapparel.com/api/v1/costingHeader/",n,a._formHeader).then(function(){this._isMounted&&this.setState({loading:!1,formData:{}}),this.componentDidMount(),this.notify("tr","success","QuickCosting sheet added")}.bind(Object(P.a)(a))).catch(function(e){this._isMounted&&this.setState({loading:!1,formData:{}}),this.componentDidMount(),this.handleError(e,"header data post")}.bind(Object(P.a)(a)))}else a.notify("tr","warning","Complete form to continue.")},a.cleanDetail=Object(T.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.a.post("https://api.vulcanoapparel.com/api/v1/costingDetail/new_detail/",{},a._jsonHeader);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),a.costingDetail=function(){var e=Object(T.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.a.get("https://api.vulcanoapparel.com/api/v1/costingDetail/"+t+"/",a._jsonHeader);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.CloneProto=function(e){a.setState({loading:!0}),ve(e,0).then(function(){this.notify("tr","success","CostSheet Copied"),this.componentDidMount(),this.setState({loading:!1})}.bind(Object(P.a)(a)))},a.OpenSheet=function(e,t){var n=t?"/admin/quick_costing":"/admin/quotation";a.props.history.push({pathname:n,state:{costingData:e}})},a.ReleaseSheet=function(e){a.setState({loading:!0});var t=new FormData;t.append("id",e.id),t.append("user",1),ae.a.post("https://api.vulcanoapparel.com/api/v1/administration/return/",t,a._formHeader).then(function(){this.setState({loading:!1}),this._isMounted&&this.notify("tr","success","Costsheet released!"),this.componentDidMount()}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.handleError(e,"returnFlag")}.bind(Object(P.a)(a)))},a.showResume=function(e){a.setState({loading:!0}),a.costingDetail(e.detail_id).then(function(t){var a=ke(t.data);this.setState({showStyle:e.style,detailCalculation:a,loading:!1}),this.toggleApprovalModal()}.bind(Object(P.a)(a)))},a.toggleApprovalModal=function(){a.setState({ApprovalModal:!a.state.ApprovalModal})},a.toggleDeleteModal=function(){a.setState({deleteModal:!a.state.deleteModal})},a.handleRemoveCosting=function(e){e>0&&ae.a.delete("https://api.vulcanoapparel.com/api/v1/costingHeader/"+e+"/",{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.notify("tr","success","CostSheet Removed!"),this.toggleDeleteModal(),this.componentDidMount()}.bind(Object(P.a)(a))).catch(function(e){this.toggleDeleteModal(),this.handleError(e,"remove costing header")}.bind(Object(P.a)(a)))},a.state={dataTable:[],clients:{},seasons:{},formData:{},action:"insert",loading:!0,ApprovalModal:!1,detailCalculation:{},showStyle:"",deleteModal:!1,toDeleteHeader:0},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getClients(),this.getSeasons(),this.costingHistory()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this._loadingClients=!1,this._loadingSeasons=!1,this._loadingHeaders=!1}},{key:"render",value:function(){var e=this,t="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:{display:this.state.loading?"flex":"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(t," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement(L.a,{isOpen:this.state.ApprovalModal,toggle:this.toggleApprovalModal,size:"lg",style:{margin:"1vh auto 0px"}},l.a.createElement(D.a,{toggle:this.toggleApprovalModal,tag:"h2"},this.state.showStyle),l.a.createElement(H.a,null,l.a.createElement(Ce,{detailCalculation:this.state.detailCalculation,resume:!0}))),l.a.createElement(L.a,{isOpen:this.state.deleteModal,toggle:this.toggleDeleteModal,size:"sm",style:{margin:"1vh auto 0px"}},l.a.createElement(D.a,{toggle:this.toggleDeleteModal,tag:"h2"},this.state.showStyle),l.a.createElement(H.a,null,"Are you sure you want to remove the CostSheet?"),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"primary",className:"float-right",onClick:function(){return e.handleRemoveCosting(e.state.toDeleteHeader)}},"Confirm")," ",l.a.createElement(R.a,{color:"secondary",onClick:this.toggleDeleteModal,className:"float-right"},"Cancel"))),l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(k.a,null,l.a.createElement(z.a,{md:{size:10,order:1,offset:1}},this._loadingClients&&this._loadingSeasons&&this._loadingHeaders&&this.Access.costing.create&&l.a.createElement($,{clients:this.state.clients,seasons:this.state.seasons,formData:this.state.formData,handleForm:this.formHelper,onSubmit:this.handleSubmit,QuickCost:this.handleQuickCost}))),l.a.createElement(k.a,null,l.a.createElement(z.a,{md:{size:10,order:2,offset:1}},this.Access.costing.view&&this.nauticaCase()?l.a.createElement(ee,{dataTable:this.state.dataTable,editCosting:this.handleEditCosting,removeCosting:function(t){e.setState({toDeleteHeader:t}),e.toggleDeleteModal()},cloneCosting:this.CloneProto,OpenSheet:this.OpenSheet,ReleaseSheet:this.ReleaseSheet,showResume:this.showResume}):l.a.createElement(ee,{dataTable:this.state.dataTable,removeCosting:function(t){e.setState({toDeleteHeader:t}),e.toggleDeleteModal()},cloneCosting:this.CloneProto,OpenSheet:this.OpenSheet,ReleaseSheet:this.ReleaseSheet,showResume:this.showResume})))))}}]),t}(l.a.Component),Oe=a(793),Me={input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}},we={line_id:0,id:null,material:"",unitPrice:"",transport:0},xe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).Access=JSON.parse(localStorage.getItem("Access")||"{}"),a.assembleMaterials=function(){var e=[];a.props.materialsCatalog.map(function(t){return t.realUnitPrice=parseFloat(t.unitPrice)+parseFloat(t.transport),e.push({value:t.id,label:t.client+"/"+t.name+"/"+t.season,data:t}),t}),a.setState({material:[{line_id:0,material:"",unitPrice:0,select:null}],materialsCatalog:a.props.materialsCatalog,materialsOptions:e}),a.assembleDefaultMaterials(e)},a.assembleDefaultMaterials=function(e){if(void 0!==a.props.defaultData&&a.props.defaultData.length>0){var t=a.props.defaultData.map(function(t,a){var n=e.find(function(e){return e.value===t.id}),l=t.unitPrice;return{line_id:t.line_id,material:t.id,unitPrice:l,select:n}});return a.setState({material:t}),a.props.callBackData({materials:t,finished:!0},!0),!0}},a.addMaterial=function(e){e.preventDefault(),a.props.helper("newMaterial",we)},a.sendData=function(){var e={materials:a.state.material};a.props.callBackData(e)},a.buildNewLine=function(e,t,n){return{materialIndex:n,line:Object(A.a)({},t,{id:e.data.id,material:e.data.show_name,unitPrice:parseFloat(e.data.unitPrice),transport:parseFloat(a.FixElementValue(e.data.transport))})}},a.modLine=function(e,t,a,n){return{materialIndex:e,line:Object(A.a)({},n,Object(j.a)({},t,a))}},a.calcPrice=function(e,t,n,l){var i=0,o=0;"unitPrice"===n?(i=parseFloat(l),o=parseFloat(document.getElementById("transport-"+e).value)):"transport"===n&&(o=parseFloat(l),i=parseFloat(document.getElementById("unitPrice-"+e).value)),a.props.helper("selectMaterial",a.modLine(e,"unitPrice",i+o,t))},a.state={material:[],toEditLine:null,blocked:!0,prices:[]},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState({blocked:!this.props.quickCosting})}},{key:"FixElementValue",value:function(e){return null===e||void 0===e||""===e?"0":e}},{key:"render",value:function(){var e=this,t="D"===this.props.header||(this.props.quickCosting?this.Access.quick_costing:this.Access.quotation),a=this.props.materialsCatalog.map(function(e){return{value:e.id,label:e.show_name,data:e}}),n=this.props.detail.materials.length>0?this.props.detail.materials:[we];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{maxWidth:"30%"}},l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:5},l.a.createElement("label",null,"Waste %")),l.a.createElement(z.a,{sm:7},l.a.createElement(J.a,{name:"fabricWaste",type:"number",min:"0",max:"100",step:"1",value:this.props.detail.pmaterials?this.props.detail.pmaterials:0,onChange:function(t){return e.props.helper("pmaterials",t.target.value)},disabled:!t.edit})))),l.a.createElement(_e.a,{className:"tablesorter"},l.a.createElement("thead",{className:"text-primary"},l.a.createElement("tr",null,l.a.createElement("th",null,"TRIM"),l.a.createElement("th",null,"Price"),l.a.createElement("th",null,"\xa0"))),l.a.createElement("tbody",null,n.map(function(n,i){var o=a.find(function(e){return e.value===n.id}),s=parseFloat(e.FixElementValue(n.unitPrice)),r=parseFloat(e.FixElementValue(n.transport));return l.a.createElement("tr",{key:i,id:i},l.a.createElement("td",{style:{width:"40%"}},l.a.createElement("label",null,"\xa0"),l.a.createElement(W.a,{menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:Me,placeholder:"Choose Material",options:a,onChange:function(t){return e.props.helper("selectMaterial",e.buildNewLine(t,n,i))},value:o,isDisabled:!t.edit})),l.a.createElement("td",null,l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:4},l.a.createElement("label",null,"Unit Price"),l.a.createElement(J.a,{type:"number",id:"unitPrice-"+i,min:0,step:.01,value:s,onChange:function(t){e.props.helper("selectMaterial",e.modLine(i,"unitPrice",t.target.value,n))},disabled:!t.edit})),l.a.createElement(z.a,{xs:4},l.a.createElement("label",null,"Transport"),l.a.createElement(J.a,{type:"number",id:"transport-"+i,min:0,step:.01,value:r,onChange:function(t){e.props.helper("selectMaterial",e.modLine(i,"transport",t.target.value,n))},disabled:!t.edit})),l.a.createElement(z.a,{xs:4},l.a.createElement("label",null,"Price"),l.a.createElement(J.a,{disabled:!0,type:"number",min:"0",max:"999",step:"any",value:(s+r).toFixed(4)})))),l.a.createElement("td",null,t.edit&&l.a.createElement(R.a,{color:"warning",className:"btn-simple",size:"sm",onClick:function(){return e.props.helper("removeLine",i)}},l.a.createElement("i",{className:"tim-icons icon-simple-remove"}))))}),l.a.createElement("tr",null,l.a.createElement("td",null,"\xa0"),l.a.createElement("td",null,"\xa0"),l.a.createElement("td",null,t.edit&&l.a.createElement(R.a,{color:"info",className:"btn-simple",size:"sm",onClick:function(t){t.preventDefault(),e.props.helper("newMaterial",we)}},l.a.createElement("i",{className:"tim-icons icon-simple-add"})))))),l.a.createElement(_e.a,{size:"sm",className:"tablesorter"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center",style:{width:"60%"}},"Materials Total (+",this.props.detail.pmaterials,"%)"),l.a.createElement("td",{className:"text-center",style:{width:"30%"}},"$",this.props.calcs.pricesMaterials.toFixed(2)),l.a.createElement("td",{className:"text-center",style:{width:"10%"}},"\xa0")))))}}]),t}(l.a.Component),Ne={input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}},Te=[{value:"O",label:"OTHER"},{value:"B",label:"BONDING"},{value:"E",label:"EMBROIDERY"},{value:"A",label:"APPLIQUE"},{value:"EM",label:"EMBOSSED"},{value:"RS",label:"ROLL_SUBLIMATION"},{value:"S",label:"SCREENPRINT"},{value:"SU",label:"SUBLIMATION"},{value:"G",label:"GARMENT_WASH"}],je={id:0,name:"",status:"A",price:0,description:"",margin:0};var Ae=function(e){var t=JSON.parse(localStorage.getItem("Access")||"{}"),a=JSON.parse(localStorage.getItem("dms")),n=e.totalEmbellishments,i=e.detail.embellishments?e.detail.embellishments:[je],o=e.quickCost,s="D"===e.header||(o?t.quick_costing:t.quotation);function r(){if(e.quickCost){var t=[];return e.detail.dms.map(function(a,n){t.push({value:e.detail.dms[n].dm,label:e.detail.dms[n].dm})}),t}var n=[];return a.map(function(e,t){n.push({value:a[t].dm,label:a[t].dm})}),n}function c(e,t,a,n){var l="price"===t?parseFloat(a):a;return{embellishmentIndex:e,line:Object(A.a)({},n,Object(j.a)({},t,l))}}return l.a.createElement(_e.a,{className:"tablesorter"},l.a.createElement("thead",{className:"text-primary"},l.a.createElement("tr",null,l.a.createElement("th",null,"Embellishment"),l.a.createElement("th",null,"DM"),l.a.createElement("th",null,"Price"),l.a.createElement("th",null,"Margin"),l.a.createElement("th",null,"Description"),l.a.createElement("th",null,s.edit&&l.a.createElement(R.a,{color:"info",className:"btn-simple",size:"sm",onClick:function(t){t.preventDefault(),e.helper("newEmbellishment",je)}},l.a.createElement("i",{className:"tim-icons icon-simple-add"}))))),l.a.createElement("tbody",null,i.map(function(t,a){var n=Te.find(function(e){return e.value===t.name});return l.a.createElement("tr",{key:a,id:a},l.a.createElement("td",{style:{width:"50%"}},l.a.createElement(W.a,{menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:Ne,placeholder:"Choose embellishment",options:Te,onChange:function(n){return e.helper("selectEmbellishment",(l=n,i=t,{embellishmentIndex:a,line:Object(A.a)({},i,{name:l.value,price:0,margin:0,description:""})}));var l,i},value:n,isDisabled:!s.edit})),l.a.createElement("td",{style:{width:"10%"}},l.a.createElement(W.a,{options:r(),styles:Ne,placeholder:"DM"})),l.a.createElement("td",{style:{width:"10%"}},l.a.createElement(J.a,{type:"number",min:"0",max:"999",step:"0.01",value:t.price?t.price:0,onChange:function(n){return e.helper("selectEmbellishment",c(a,"price",n.target.value,t))},disabled:!s.edit})),l.a.createElement("td",{style:{width:"10%"}},l.a.createElement(J.a,{type:"number",value:t.margin?t.margin:0,step:"0.01",onChange:function(n){return e.helper("selectEmbellishment",c(a,"margin",n.target.value,t))},disabled:!s.edit})),l.a.createElement("td",{style:{width:"25%"}},l.a.createElement(J.a,{type:"text",value:t.description,onChange:function(n){return e.helper("selectEmbellishment",c(a,"description",n.target.value,t))},disabled:!s.edit})),l.a.createElement("td",{style:{width:"5%"}},s.edit&&l.a.createElement(R.a,{color:"warning",className:"btn-simple",size:"sm",onClick:function(){return e.helper("removeLine",a)}},l.a.createElement("i",{className:"tim-icons icon-simple-remove"}))))}),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center",colSpan:3},l.a.createElement("b",null,"Total Embellishment")),l.a.createElement("td",{className:"text-center"},"$",n))))},Fe=a(267),Pe={input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}},Le=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).Access=JSON.parse(localStorage.getItem("Access")||"{}"),a._defaultImageData="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22320%22%20height%3D%22180%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20320%20180%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_161650a55ea%20text%20%7B%20fill%3Argba(255%2C255%2C255%2C.75)%3Bfont-weight%3Anormal%3Bfont-family%3AHelvetica%2C%20monospace%3Bfont-size%3A16pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_161650a55ea%22%3E%3Crect%20width%3D%22320%22%20height%3D%22180%22%20fill%3D%22%23777%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%22110.203125%22%20y%3D%2297.35%22%3EImage%20cap%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E",a.proto=[{value:"CE",label:"COSTING_EXERCISE"},{value:"P1",label:"PROTO1"},{value:"P2",label:"PROTO2"},{value:"P3",label:"PROTO3"},{value:"S",label:"SMS"},{value:"B",label:"BULK"}],a.handleDownloadTechpack=function(e){e.preventDefault(),"documents"in a.props&&a.props.helper("techPack",a.props.documents.pathToTechpack)},a.handleDownloadPattern=function(e){e.preventDefault(),"documents"in a.props&&a.props.helper("pattern",a.props.documents.pathToPattern)},a.handleDownloadMarker=function(e){e.preventDefault(),"documents"in a.props&&a.props.helper("marker",a.props.documents.pathToMarker)},a.handleDownloadSAM=function(e){e.preventDefault(),"documents"in a.props&&a.props.helper("SAM",a.props.documents.pathToSAM)},a.onCallBackTemplate=function(e){a.props.helper("template",e)},a.handleFileChange=function(e){e.preventDefault();var t=new FileReader,n=e.target.files[0];t.onloadend=function(){a.setState({file:n,imageData:t.result}),a.props.helper("onSketchChange",{file:n,data:t.result})},t.readAsDataURL(n)},a.handleTechPackChange=function(e){e.preventDefault(),a.props.helper("teckpack",e.target.files[0])},a.quickCostCard=function(){var e=a.props.templateInfo.map(function(e){return{value:e.id,label:e.name,detail:e.templateId}});return l.a.createElement(v.a,{className:"card-primary"},l.a.createElement(y.a,null,l.a.createElement(_e.a,null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Select Template"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(W.a,{className:"react-select primary",classNamePrefix:"react-select",name:"singleSelect",value:a.props.selectedTemplate,onChange:function(e){return a.onCallBackTemplate(e)},options:e,placeholder:"Select Template"})))))))},a.handleStyleChange=function(e){var t=e.target.value;a.props.helper("style",t)},a.state={imageData:a._defaultImageData,file:null,costingHeader:a.props.costingHeader},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState({imageData:this.props.sketchData})}},{key:"componentDidUpdate",value:function(e){if(e.costingHeader!==this.props.costingHeader){var t="";t=""!==this.props.sketchData?this.props.sketchData:e.sketchData,this.setState({file:t,imageData:t,costingHeader:this.props.costingHeader})}}},{key:"render",value:function(){var e=this,t="D"===this.props.header||(this.props.quickCosting?this.Access.quick_costing:this.Access.quotation);return l.a.createElement(k.a,null,l.a.createElement(z.a,{md:5,xs:12},l.a.createElement(v.a,{className:"card-primary"},l.a.createElement(_.a,null,l.a.createElement(C.a,{tag:"h4"},"CostSheet Detail.")),l.a.createElement(y.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:4,className:"text-info"},"CostSheet:"),l.a.createElement(z.a,{xs:8},l.a.createElement("p",null,l.a.createElement("b",null,this.state.costingHeader.id)))),l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:4,className:"text-info"},"Client:"),l.a.createElement(z.a,{xs:8},l.a.createElement("p",null,this.state.costingHeader.client.name," ","(",l.a.createElement("b",null,this.state.costingHeader.client.abbreviation),")"))),l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:4,className:"text-info"},"Season:"),l.a.createElement(z.a,{xs:8},this.props.seasons&&l.a.createElement(W.a,{styles:Pe,className:"react-select primary",classNamePrefix:"react-select",name:"seasonSelect",value:this.state.costingHeader?{value:this.state.costingHeader.season.id,label:this.state.costingHeader.season.name}:null,onChange:function(t){return e.props.helper("season",t)},options:this.props.seasons.map(function(e){return{value:e.id,label:e.name}}),placeholder:"Season"}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{xs:4,className:"text-info"},"Style:"),l.a.createElement(z.a,{xs:8},l.a.createElement(J.a,{type:"text",value:this.props.costingHeader.style,onChange:this.handleStyleChange,disabled:!t.edit}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{xs:4,className:"text-info"},"Proto Status:"),l.a.createElement(z.a,{xs:8},t.edit?l.a.createElement(W.a,{options:this.proto,defaultValue:{value:"CE",label:"COSTING_EXERCISE"},value:this.proto.find(function(t){return t.value===e.props.costingHeader.proto_status}),onChange:function(t){e.props.helper("proto_status",t.value)}}):l.a.createElement(J.a,{disabled:!0,value:this.proto.find(function(t){return t.value===e.props.costingHeader.proto_status}).label}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{xs:4,className:"text-info"},"New TechPack"),l.a.createElement(z.a,{xs:8},t.edit&&l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm"},l.a.createElement("input",{type:"file",onChange:this.handleTechPackChange}),l.a.createElement("i",{className:"tim-icons icon-cloud-upload-94"}),"\xa0Re-upload Techpack"))),l.a.createElement("br",null),!this.props.quickCost&&l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:3,className:"text-info text-center"},"TechPack: ",l.a.createElement("br",null),l.a.createElement(R.a,{color:"info",className:"btn-simple",size:"sm",onClick:this.handleDownloadTechpack},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}))),l.a.createElement(z.a,{xs:3,className:"text-info text-center"},"Pattern: ",l.a.createElement("br",null),l.a.createElement(R.a,{color:"info",className:"btn-simple",size:"sm",onClick:this.handleDownloadPattern},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}))),l.a.createElement(z.a,{xs:3,className:"text-info text-center"},"Marker:  ",l.a.createElement("br",null),l.a.createElement(R.a,{color:"info",className:"btn-simple",size:"sm",onClick:this.handleDownloadMarker},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}))),l.a.createElement(z.a,{xs:3,className:"text-info text-center"},"SAM: ",l.a.createElement("br",null),l.a.createElement(R.a,{color:"info",className:"btn-simple",size:"sm",onClick:this.handleDownloadSAM},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}))))),l.a.createElement("br",null),l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Colors"),l.a.createElement(J.a,{type:"textarea",value:this.props.detail.colors?this.props.detail.colors:"",onChange:function(t){return e.props.helper("colors",t.target.value)},disabled:!t.edit})),this.props.quickCost&&l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:12},this.quickCostCard()))))),!this.props.quickCost&&l.a.createElement(z.a,{md:7,xs:12},l.a.createElement(v.a,{className:"card-primary"},l.a.createElement(_.a,null,l.a.createElement(C.a,{tag:"h4"},"Documents")),l.a.createElement(y.a,null,l.a.createElement("p",{className:"text-info"},"Sketch:"),l.a.createElement(v.a,{style:{maxWidth:"20rem"}},l.a.createElement(Fe.a,{top:!0,src:this.props.sketchData,style:{maxHeight:"20rem",width:"auto"},alt:"...",id:"sketch"}),l.a.createElement(y.a,null,l.a.createElement(q.a,null,t.edit&&l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm"},l.a.createElement("input",{type:"file",onChange:this.handleFileChange,name:"sketch"}),l.a.createElement("i",{className:"tim-icons icon-cloud-upload-94"}),"\xa0Upload Sketch"))))))))}}]),t}(l.a.Component);var De=function(e){var t=Object(Y.a)({},e),a=parseFloat(t.sumWhite),n=parseFloat(t.sumMedium),i=parseFloat(t.sumDark),o=parseFloat(t.sumSpecial);return l.a.createElement(_e.a,{className:"tablesorter",style:{width:"100%"}},l.a.createElement("thead",{className:"text-primary"},l.a.createElement("tr",{style:{textAlign:"center"}},l.a.createElement("td",null,l.a.createElement("b",null,"Total White cost")),l.a.createElement("td",null,l.a.createElement("b",null,"Total Medium cost")),l.a.createElement("td",null,l.a.createElement("b",null,"Total Dark cost")),l.a.createElement("td",null,l.a.createElement("b",null,"Total Special cost")))),l.a.createElement("tbody",null,l.a.createElement("tr",{style:{textAlign:"center"}},l.a.createElement("td",null," ","$"+a.toFixed(2)," "),l.a.createElement("td",null," ","$"+n.toFixed(2)," "),l.a.createElement("td",null," ","$"+i.toFixed(2)," "),l.a.createElement("td",null," ","$"+o.toFixed(2)," "))))};var He=function(e){var t=Object(Y.a)({},e),a=JSON.parse(localStorage.getItem("Access")||"{}"),n=t.detail,i=t.calcs,o=t.helper,s=t.quickCost,r="D"===t.header||(s?a.quick_costing:a.quotation);return l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center"},l.a.createElement("p",{className:"text-primary"},"Cost per Minute ($)")),l.a.createElement("td",{style:{width:"50%"}},l.a.createElement(J.a,{type:"number",placeholder:"0.00",step:"any",min:"0",max:"999",onChange:function(e){return o("cxm",e.target.value)},value:n.cxm?n.cxm:"",disabled:!r.edit}))),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center"},l.a.createElement("p",{className:"text-primary"},"Sewing Costs ($)")),l.a.createElement("td",{style:{width:"50%"}},l.a.createElement(J.a,{type:"number",placeholder:"0.00",step:"any",min:"0",readOnly:!0,value:i.sewing?i.sewing.toFixed(2):""}))),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center"},l.a.createElement("p",{className:"text-primary"},"Cutting Costs ($)")),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",placeholder:"0.00",step:"any",min:"0",max:"999",onChange:function(e){return o("cutting",e.target.value)},value:n.cutting?n.cutting:"",disabled:!r.edit}))),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center"},l.a.createElement("p",{className:"text-primary"},"Total Cut & Sewing")),l.a.createElement("td",{className:"text-center",style:{width:"50%"}},"$",i.manufacturing.toFixed(2))),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center"},l.a.createElement("p",{className:"text-primary"},"IR Reserve %")),l.a.createElement("td",{style:{width:"50%"}},l.a.createElement(J.a,{name:"IrReserve",type:"number",min:"0",max:"100",step:"1",value:n.pir?n.pir:"",onChange:function(e){return o("pir",e.target.value)},disabled:!r.edit}),l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:3,className:"text-center text-primary"},"$",i.IrPrices.white.toFixed(2)),l.a.createElement(z.a,{xs:3,className:"text-center text-primary"},"$",i.IrPrices.medium.toFixed(2)),l.a.createElement(z.a,{xs:3,className:"text-center text-primary"},"$",i.IrPrices.dark.toFixed(2)),l.a.createElement(z.a,{xs:3,className:"text-center text-primary"},"$",i.IrPrices.special.toFixed(2))))),l.a.createElement("tr",null,l.a.createElement("td",{style:{width:"50%"}},"\xa0"),l.a.createElement("td",{style:{width:"50%"}},l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:3,className:"text-center text-primary"},"$",i.manufacturingPrices.white.toFixed(2)),l.a.createElement(z.a,{xs:3,className:"text-center text-primary"},"$",i.manufacturingPrices.medium.toFixed(2)),l.a.createElement(z.a,{xs:3,className:"text-center text-primary"},"$",i.manufacturingPrices.dark.toFixed(2)),l.a.createElement(z.a,{xs:3,className:"text-center text-primary"},"$",i.manufacturingPrices.special.toFixed(2))))))};function Ie(e){return null===e||void 0===e||""===e||isNaN(e)?0:parseFloat(e)}var Re=function(e){var t=Object(Y.a)({},e),a=0;null===t.detail.extraTime?a=0:t.detail.wtshirt?a=2.945===t.detail.extra_time?2.945:1.967:t.detail.whodie?a=3.8===t.detail.extra_time?3.8:1.202:4.655===t.detail.extra_time&&(a=4.655);var n=JSON.parse(localStorage.getItem("Access")||"{}"),i="D"===t.header||(t.quickCost?n.quick_costing:n.quotation);return l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center",style:{width:"50%"}},l.a.createElement("p",{className:"text-primary"},"SAM")),l.a.createElement("td",{className:"text-center",style:{width:"50%"}},l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:6},l.a.createElement(q.a,{check:!0},l.a.createElement(S.a,{check:!0},l.a.createElement(J.a,{type:"radio",name:"samRadio",checked:t.detail.operation_flag,value:!0,onChange:function(e){return t.helper("operation_flag",e.target.value)},disabled:!i.edit}),"Total Time"),l.a.createElement(J.a,{type:"number",placeholder:"0.00",step:"0.01",onChange:function(e){return t.helper("sam",e.target.value)},readOnly:!t.quickCost,value:Ie(t.detail.totalTime),disabled:!i.edit}))),l.a.createElement(z.a,{xs:6},l.a.createElement(q.a,{check:!0},l.a.createElement(S.a,{check:!0},l.a.createElement(J.a,{type:"radio",name:"samRadio",checked:!t.detail.operation_flag,value:!1,onChange:function(e){return t.helper("operation_flag",e.target.value)},disabled:!i.edit}),"Operation Time"),l.a.createElement(J.a,{type:"number",placeholder:"0.00",step:"0.01",readOnly:!t.quickCost,value:Ie(t.detail.production_time),onChange:function(e){return t.helper("production_time",e.target.value)},disabled:!i.edit})))))),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center",style:{width:"50%"}},l.a.createElement("p",{className:"text-primary"},"WASH")),l.a.createElement("td",{className:"text-center",style:{width:"50%"}},l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:3},l.a.createElement(q.a,{check:!0},l.a.createElement(S.a,{check:!0},l.a.createElement(J.a,{type:"radio",name:"washRadio",checked:t.detail.wtshirt,value:t.detail.whodie,onClick:function(e){return t.helper("wash_flag",{wash:"wtshirt",value:e.target.value})},disabled:!i.edit}),"T-SHIRT"))),l.a.createElement(z.a,{xs:3},l.a.createElement(q.a,{check:!0},l.a.createElement(S.a,{check:!0},l.a.createElement(J.a,{type:"radio",name:"washRadio",checked:t.detail.whodie,value:t.detail.whodie,onClick:function(e){return t.helper("wash_flag",{wash:"whodie",value:e.target.value})},disabled:!i.edit}),"HOODIE"))),l.a.createElement(z.a,{xs:3},l.a.createElement(q.a,{check:!0},l.a.createElement(S.a,{check:!0},l.a.createElement(J.a,{type:"radio",name:"washRadio",checked:t.detail.wcomplex,value:t.detail.wcomplex,onClick:function(e){return t.helper("wash_flag",{wash:"wcomplex",value:e.target.value})},disabled:!i.edit}),"COMPLEX"))),l.a.createElement(z.a,{xs:3},l.a.createElement(q.a,{check:!0},l.a.createElement(S.a,{check:!0},l.a.createElement(J.a,{type:"number",placeholder:"0.00",step:"0.01",readOnly:!0,value:a,disabled:!i.edit}))))))),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center",style:{width:"50%"}},l.a.createElement("p",{className:"text-primary"},"Total SAM:")),l.a.createElement("td",{className:"text-center",style:{width:"50%"}},t.detail.operation_flag?Ie(t.detail.totalTime)+a:Ie(t.detail.production_time)+a)))};var ze=l.a.memo(function(e){var t=Object(Y.a)({},e),a=t.quickCosting;function n(){var e=0,a=0,n=0,l=0;return t.fabrics.forEach(function(t){e+=t.lbsunit,a+=t.lbsunitwaste,n+=t.sqinchunit,l+=t.ydsunit}),[e,a,n,l]}var i={lbsunit:0,lbsunitwaste:0,sqinchunit:0,ydsunit:0};return l.a.createElement("div",null,l.a.createElement(_e.a,{className:"tablesorter",style:{width:"2000px"},responsive:!0},l.a.createElement("thead",{className:"text-primary"},l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"250px"}},"DM"),l.a.createElement("th",{style:{width:"50px"}},"Weight b. wash O."),l.a.createElement("th",{style:{width:"50px"}},"Weight b. wash C."),l.a.createElement("th",{style:{width:"50px"}},"F. Width"),l.a.createElement("th",{style:{width:"50px"}},"Marker Width"),l.a.createElement("th",{style:{width:"50px"}},"Piles Tubular"),l.a.createElement("th",{style:{width:"50px"}},"Yield (yd/lb)"),l.a.createElement("th",{style:{width:"50px"}},"% Utilization"),l.a.createElement("th",{style:{width:"50px"}},"Marker length"),l.a.createElement("th",{style:{width:"50px"}},"Units in marker"),l.a.createElement("th",{style:{width:"50px"}},"lb * unit"),l.a.createElement("th",{style:{width:"50px"}},"lb * unit + waste"),l.a.createElement("th",{style:{width:"50px"}},"inch^2 / unit"),l.a.createElement("th",{style:{width:"50px"}},"yd / unit"))),l.a.createElement("tbody",null,void 0!==t.fabrics&&t.fabrics.length>0&&t.fabrics.map(function(e,n){var o=t.fabricsCatalog.find(function(t){return t.id===e.id}),s=0,r=0,c=parseFloat(e.dm_width?e.dm_width:0),d=parseFloat(e.weightBWashOriginal?e.weightBWashOriginal:0),m=parseFloat(e.markerWidth?e.markerWidth:0);return i.lbsunit+=parseFloat(e.lbsunit?e.lbsunit:0),i.lbsunitwaste+=parseFloat(e.lbsunitwaste?e.lbsunitwaste:0),i.sqinchunit+=parseFloat(e.sqinchunit?e.sqinchunit:0),i.ydsunit+=parseFloat(e.ydsunit?e.ydsunit:0),o&&void 0!==o?(s=d>0?d:o.weight,r=m>0?m:o.widthMark,e.dm_width=c>0?c:o.width):(s=d,r=m,e.dm_width=c),e.weightBWashOriginal=s,e.markerWidth=r,function(e,t,a){var n=e.dm_pt?1:2,l=e.Bwidth/36*(1/(e.dm_width*n))*e.Blong,i=l/e.yieldydslbs;e.weightBWashCalculated=e.weightBWashOriginal/33.9057475,document.getElementById("consumption-".concat(t,"-weightBWashCalculated"))&&(document.getElementById("consumption-".concat(t,"-weightBWashCalculated")).value=e.weightBWashCalculated.toFixed(4)),e.yieldydslbs=576/(e.weightBWashCalculated*n*e.dm_width),document.getElementById("consumption-".concat(t,"-yieldydslbs"))&&(document.getElementById("consumption-".concat(t,"-yieldydslbs")).value=e.yieldydslbs.toFixed(4)),e.lbsunit=e.markerLong/e.pieceByMarker/e.yieldydslbs+i,document.getElementById("consumption-".concat(t,"-lbsunit"))&&(document.getElementById("consumption-".concat(t,"-lbsunit")).value=e.lbsunit.toFixed(4)),e.lbsunitwaste=1.05*e.lbsunit,document.getElementById("consumption-".concat(t,"-lbsunitwaste"))&&(document.getElementById("consumption-".concat(t,"-lbsunitwaste")).value=e.lbsunitwaste.toFixed(4)),e.sqinchunit=e.markerWidth*e.markerLong*36*(e.markerEfficiency/100)/e.pieceByMarker,document.getElementById("consumption-".concat(t,"-sqinchunit"))&&(document.getElementById("consumption-".concat(t,"-sqinchunit")).value=e.sqinchunit.toFixed(4)),e.ydsunit=a?e.yieldydslbs*e.lbsunit:e.yieldydslbs*e.lbsunit/1.05,document.getElementById("consumption-".concat(t,"-ydsunit"))&&(document.getElementById("consumption-".concat(t,"-ydsunit")).value=e.ydsunit.toFixed(4)),e.ydsXunit=l,document.getElementById("consumption-".concat(t,"-ydsXunit"))&&(document.getElementById("consumption-".concat(t,"-ydsXunit")).value=e.ydsXunit.toFixed(4)),e.lbsXunit=i,document.getElementById("consumption-".concat(t,"-lbsXunit"))&&(document.getElementById("consumption-".concat(t,"-lbsXunit")).value=e.lbsXunit.toFixed(4))}(e,n,e.wasted_flag),l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",{key:n},l.a.createElement("td",null,l.a.createElement("p",{className:"text-primary"},e.show_name?e.show_name:"")),l.a.createElement("td",null,l.a.createElement(J.a,{id:"consumption-".concat(n,"-weightBWashOriginal"),type:"number",value:e.weightBWashOriginal,onChange:function(e){return t.masterHandle("weightBWashOriginal",n,e.target.value)},min:"0.00",max:"999",step:"any",disabled:!a})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"consumption-".concat(n,"-weightBWashCalculated"),type:"number",value:isNaN(e.weightBWashCalculated)?0:e.weightBWashCalculated.toFixed(4),min:"0.00",max:"999",step:"any",disabled:a})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"consumption-".concat(n,"-dm_width"),type:"number",value:isNaN(e.dm_width)?0:e.dm_width,onChange:function(e){return t.masterHandle("dm_width",n,e.target.value)},min:"0.00",max:"999",step:"any",disabled:!a})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"consumption-".concat(n,"-markerWidth"),type:"number",value:e.markerWidth?e.markerWidth:0,onChange:function(e){return t.masterHandle("markerWidth",n,e.target.value)},min:"0.00",max:"999",step:"any",disabled:!a})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"consumption-".concat(n,"-dm_pt"),type:"number",value:e.dm_pt?1:2,onChange:function(e){return t.masterHandle("dm_pt",n,e.target.value)},min:"0.00",max:"2",step:"any",disabled:a})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"consumption-".concat(n,"-yieldydslbs"),type:"number",value:isNaN(e.yieldydslbs)?0:e.yieldydslbs.toFixed(4),min:"0.00",max:"999",step:"any",disabled:a})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"consumption-".concat(n,"-markerEfficiency"),type:"number",value:e.markerEfficiency?e.markerEfficiency:0,onChange:function(e){return t.masterHandle("markerEfficiency",n,e.target.value)},min:"0",max:"100",step:"any",disabled:!a})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"consumption-".concat(n,"-markerLong"),type:"number",value:e.markerLong?e.markerLong:0,onChange:function(e){return t.masterHandle("markerLong",n,e.target.value)},min:"0.00",max:"999",step:"any",disabled:!a})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"consumption-".concat(n,"-pieceByMarker"),type:"number",value:e.pieceByMarker?e.pieceByMarker:0,onChange:function(e){return t.masterHandle("pieceByMarker",n,e.target.value)},min:"0.00",max:"999",step:"any",disabled:!a})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"consumption-".concat(n,"-lbsunit"),type:"number",value:e.lbsunit?e.lbsunit:0,onChange:function(e){return t.masterHandle("lbsunit",n,e.target.value)},min:"0.00",max:"999",step:"any",disabled:a})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"consumption-".concat(n,"-lbsunitwaste"),type:"number",value:e.lbsunitwaste?e.lbsunitwaste.toFixed(4):0,min:"0.00",max:"999",step:"any",disabled:a})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"consumption-".concat(n,"-sqinchunit"),type:"number",value:e.sqinchunit?e.sqinchunit.toFixed(4):0,min:"0.00",max:"9999",step:"any",disabled:a})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"consumption-".concat(n,"-ydsunit"),type:"number",value:e.ydsunit?e.ydsunit.toFixed(4):0,min:"0.00",max:"999",step:"any",disabled:a}))))}),l.a.createElement("tr",{className:"text-primary"},l.a.createElement("td",{colSpan:"10"}),l.a.createElement("th",{className:"text-primary"},n()[0].toFixed(2)," lbs"),l.a.createElement("th",{className:"text-primary"},n()[1].toFixed(2)," lbs"),l.a.createElement("th",{className:"text-primary"},n()[2].toFixed(2)," inch"),l.a.createElement("th",{className:"text-primary"},n()[3].toFixed(2)," yds")))))});var Be=function(e){var t=Object(Y.a)({},e),a=JSON.parse(localStorage.getItem("Access")||"{}"),n=t.detail,i=t.calcs,o=t.helper,s=t.quickCost,r="D"===t.header||(s?a.quick_costing:a.quotation);return l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",null,"Cost FOB Guatemala"),l.a.createElement(_e.a,{className:"tablesorter"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center"},l.a.createElement("p",{className:"text-primary"},"Insurance")),l.a.createElement("td",{style:{width:"50%"}},l.a.createElement(J.a,{type:"number",placeholder:"0",step:"any",min:"0",max:"999",onChange:function(e){return o("broker",e.target.value)},value:n.broker?n.broker:"",disabled:!r.edit}))),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center"},l.a.createElement("p",{className:"text-primary"},"Freight")),l.a.createElement("td",null,l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement("label",null,"Price"),l.a.createElement(J.a,{type:"number",placeholder:"0",step:"any",min:"0",max:"10000",onChange:function(e){return o("freightPrice",e.target.value)},value:n.freightPrice?n.freightPrice:"",disabled:!r.edit})),l.a.createElement(z.a,null,l.a.createElement("label",null,"Units"),l.a.createElement(J.a,{type:"number",placeholder:"0",step:"any",min:"0",max:"10000",onChange:function(e){return o("freightQuantity",e.target.value)},value:n.freightQuantity?n.freightQuantity:"",disabled:!r.edit})),l.a.createElement(z.a,null,l.a.createElement("label",null,"Unit Price"),l.a.createElement(J.a,{type:"number",placeholder:"0",step:"any",min:"0",readOnly:!0,value:i.freightTotal.toFixed(4),disabled:!r.edit}))))))),l.a.createElement(_e.a,{className:"tablesorter"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"50%"}},"\xa0"),l.a.createElement("th",null,"White"),l.a.createElement("th",null,"Medium"),l.a.createElement("th",null,"Dark"),l.a.createElement("th",null,"Special"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{style:{width:"50%"}},"\xa0"),l.a.createElement("td",null,"$",i.logisticsPrices.white.toFixed(2)),l.a.createElement("td",null,"$",i.logisticsPrices.medium.toFixed(2)),l.a.createElement("td",null,"$",i.logisticsPrices.dark.toFixed(2)),l.a.createElement("td",null,"$",i.logisticsPrices.special.toFixed(2))))))};var Ue=function(e){var t=Object(Y.a)({},e),a=JSON.parse(localStorage.getItem("Access")||"{}"),n=t.detail,i=t.helper,o=t.calcs,s=t.quickCost,r="D"===t.header||(s?a.quick_costing:a.quotation);return l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",null,"Total Cost FOB"),l.a.createElement(_e.a,{className:"tablesorter"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center"},l.a.createElement("p",{className:"text-primary"},"Factoring %")),l.a.createElement("td",{style:{width:"50%"}},l.a.createElement(J.a,{type:"number",placeholder:"0",step:"any",min:"0",max:"100",onChange:function(e){return i("factoring",e.target.value)},value:n.factoring?n.factoring:"",disabled:!r.edit}),l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(S.a,{className:"text-center text-primary"},"White"),l.a.createElement("br",null),"$",o.factoringPrices.white.toFixed(2)),l.a.createElement(z.a,null,l.a.createElement(S.a,{className:"text-center text-primary"},"Medium"),l.a.createElement("br",null),"$",o.factoringPrices.medium.toFixed(2)),l.a.createElement(z.a,null,l.a.createElement(S.a,{className:"text-center text-primary"},"Dark"),l.a.createElement("br",null),"$",o.factoringPrices.dark.toFixed(2)),l.a.createElement(z.a,null,l.a.createElement(S.a,{className:"text-center text-primary"},"Special"),l.a.createElement("br",null),"$",o.factoringPrices.special.toFixed(2))))),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center"},l.a.createElement("p",{className:"text-primary"},"Profit %")),l.a.createElement("td",{style:{width:"50%"}},l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement("label",null,"White"),l.a.createElement(J.a,{type:"number",placeholder:"0",step:"any",min:"0",max:"100",onChange:function(e){return i("profitWhite",e.target.value)},value:n.profitWhite?n.profitWhite:"",disabled:!r.edit}),l.a.createElement("div",{className:"text-center text-primary"},"$",o.profitValues.white.toFixed(2))),l.a.createElement(z.a,null,l.a.createElement("label",null,"Medium"),l.a.createElement(J.a,{type:"number",placeholder:"0",step:"any",min:"0",max:"100",onChange:function(e){return i("profitMedium",e.target.value)},value:n.profitMedium?n.profitMedium:"",disabled:!r.edit}),l.a.createElement("div",{className:"text-center text-primary"},"$",o.profitValues.medium.toFixed(2))),l.a.createElement(z.a,null,l.a.createElement("label",null,"Dark"),l.a.createElement(J.a,{type:"number",placeholder:"0",step:"any",min:"0",max:"100",onChange:function(e){return i("profitDark",e.target.value)},value:n.profitDark?n.profitDark:"",disabled:!r.edit}),l.a.createElement("div",{className:"text-center text-primary"},"$",o.profitValues.dark.toFixed(2))),l.a.createElement(z.a,null,l.a.createElement("label",null,"Special"),l.a.createElement(J.a,{type:"number",placeholder:"0",step:"any",min:"0",max:"100",onChange:function(e){return i("profitSpecial",e.target.value)},value:n.profitSpecial?n.profitSpecial:"",disabled:!r.edit}),l.a.createElement("div",{className:"text-center text-primary"},"$",o.profitValues.special.toFixed(2)))))),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center"},l.a.createElement("p",{className:"text-primary"},"Sales Commision %")),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",placeholder:"0",step:"any",min:"0",max:"100",onChange:function(e){return i("sell",e.target.value)},value:n.sell?n.sell:"",disabled:!r.edit}))),l.a.createElement("tr",null,l.a.createElement("td",{style:{width:"50%"}},"\xa0"),l.a.createElement("td",{style:{width:"50%"}},l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:3,className:"text-center"},"$",o.totalValues.white.toFixed(2)),l.a.createElement(z.a,{xs:3,className:"text-center"},"$",o.totalValues.medium.toFixed(2)),l.a.createElement(z.a,{xs:3,className:"text-center"},"$",o.totalValues.dark.toFixed(2)),l.a.createElement(z.a,{xs:3,className:"text-center"},"$",o.totalValues.special.toFixed(2))))))))},We=(a(111),{input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}}),Ve={line_id:0,id:0,dm:"",dm_width:70,dm_pt:!0,priceWhite:0,priceMedium:0,priceDark:0,priceSpecial:0,priceWhiteC:0,priceMediumC:0,priceDarkC:0,priceSpecialC:0,fabricType:"S",markerEfficiency:0,markerLong:0,markerWidth:0,pieceByMarker:0,Blong:0,Bwidth:0,weightBWashOriginal:0,weightBWashCalculated:0,yieldydslbs:0,lbsunit:0,lbsunitwaste:0,sqinchunit:0,ydsunit:0,show_name:"",ydsXunit:0,lbsXunit:0,dm_updated_at:""},qe=[{value:"S",label:"SELF"},{value:"C1",label:"CONTRAST1"},{value:"C2",label:"CONTRAST2"},{value:"C3",label:"CONTRAST3"},{value:"C4",label:"CONTRAST4"},{value:"C5",label:"CONTRAST5"},{value:"R",label:"RIB"},{value:"R1",label:"RIB1"},{value:"R2",label:"RIB2"},{value:"R3",label:"RIB3"},{value:"R4",label:"RIB4"},{value:"J",label:"JERSEY"},{value:"J1",label:"JERSEY1"},{value:"J2",label:"JERSEY2"},{value:"J3",label:"JERSEY3"},{value:"W",label:"WOVEN"},{value:"W1",label:"WOVEN1"},{value:"WA",label:"WATTA"},{value:"WA1",label:"WATTA1"},{value:"M",label:"MESH"},{value:"M1",label:"MESH1"},{value:"A",label:"APLIQUE"},{value:"A1",label:"APLIQUE1"},{value:"I1",label:"INTERLINING"},{value:"I2",label:"INTERLINING1"},{value:"I3",label:"INTERLINING2"},{value:"WAF",label:"WAFFLE"},{value:"TRI",label:"TRICOT"},{value:"TAF",label:"TAFFETA"},{value:"TA1",label:"TAFFETA1"}];var Je=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).Access=JSON.parse(localStorage.getItem("Access")||"{}"),a.simpleFixElementValue=function(e){return null===e||void 0===e||""===e||isNaN(e)?0:parseFloat(e)},a.FixElementValue=function(e){return(null===e||void 0===e||""===e||isNaN(e)?0:parseFloat(e)).toFixed(2)},a.buildNewLine=function(e,t,n){return{dmIndex:n,line:Object(A.a)({},t,{id:e.data.id,dm:e.data.dm,dm_width:e.data.width,weightBWashOriginal:e.data.weight,dm_pt:e.data.pt,markerWidth:e.data.widthMark,priceWhite:e.data.priceWhite,priceMedium:e.data.priceMedium,priceDark:e.data.priceDark,priceSpecial:e.data.priceSpecial,show_name:e.data.show_name,Bwidth:a.simpleFixElementValue(t.Bwidth),Blong:a.simpleFixElementValue(t.Blong),dm_updated_at:e.data.dm_updated_at})}},a.modLine=function(e,t,a,n){return{dmIndex:e,line:Object(A.a)({},n,Object(j.a)({},t,a))}},a.calcCostWhite=function(e,t,a,n){var l=12*a*e/12;return l||0},a.calcCostMedium=function(e,t,a,n){var l=12*a*e/12;return l||0},a.calcCostDark=function(e,t,a,n){var l=12*a*e/12;return l||0},a.calcCostSpecial=function(e,t,a,n){var l=12*a*e/12;return l||0},a.state={},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t={fontSize:"12px",color:"grey",textAlign:"center",marginBottom:"0"},a=!this.props.header.markerFlag||this.props.markerBlock,n=this.props.fabricsCatalog.map(function(e){return{value:e.id,label:e.show_name,data:e}}),i=this.props.detail.dms.length>0?this.props.detail.dms:[Ve];if(!i)return null;var o=this.props.quickCosting?this.Access.quick_costing:this.Access.quotation;return l.a.createElement(l.a.Fragment,null,this.props.header.markerFlag&&o.edit&&l.a.createElement(q.a,{check:!0},l.a.createElement(S.a,{check:!0},l.a.createElement(J.a,{type:"checkbox",checked:this.props.markerBlock,onChange:function(){return e.props.helper("markerBlock",null)}})," ","Enable Fabric change? Marker already uploaded.",l.a.createElement("span",{className:"form-check-sign"},l.a.createElement("span",{className:"check"})))),l.a.createElement("br",null),l.a.createElement("div",{style:{maxWidth:"30%"}},l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:5},l.a.createElement("label",null,"Waste %")),l.a.createElement(z.a,{sm:7},l.a.createElement(J.a,{name:"fabricWaste",type:"number",min:"0",max:"100",step:"1",value:this.props.detail.pfabrics?this.props.detail.pfabrics:0,onChange:function(t){return e.props.helper("pfabrics",t.target.value)},disabled:!o.edit})))),l.a.createElement(_e.a,{size:"sm",className:"tablesorter"},l.a.createElement("thead",{className:"text-primary"},l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"34%"}},"DM"),l.a.createElement("th",{style:{width:"16%"}},"Style"),l.a.createElement("th",{style:{width:"7.5%"}},"P. White"),l.a.createElement("th",{style:{width:"7.5%"}},"P. Medium"),l.a.createElement("th",{style:{width:"7.5%"}},"P. Dark"),l.a.createElement("th",{style:{width:"7.5%"}},"Special"),l.a.createElement("th",{style:{width:"7.5%"}},"Bies Width"),l.a.createElement("th",{style:{width:"7.5%"}},"Bies Length"),l.a.createElement("th",{style:{width:"5%"}},o.edit&&l.a.createElement(R.a,{color:"info",className:"btn-simple",size:"sm",onClick:function(){return e.props.helper("newFabric",Ve)}},l.a.createElement("i",{className:"tim-icons icon-simple-add"}))))),l.a.createElement("tbody",null,i.map(function(i,s){var r=qe.filter(function(e){return e.value===i.fabricType}),c=i.id>0?{value:i.id,label:i.show_name}:null,d=!o.edit||!a,m=c&&n?n.find(function(e){return e.value===c.value}):null,u=m?m.data:{width:0},p=c?e.FixElementValue(parseFloat(i.Bwidth)*parseFloat(i.Blong)/(36*u.width*(u.pt?1:2))):0;return l.a.createElement("tr",{key:s,id:s},l.a.createElement("td",null,l.a.createElement(W.a,{menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:We,placeholder:"Choose DM",options:n,onChange:function(t){return e.props.helper("selectDM",e.buildNewLine(t,i,s))},value:c,isDisabled:d}),l.a.createElement("p",{style:t},"Updated at: ",i.dm_updated_at?function(e){var t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(t)}(i.dm_updated_at):"")),l.a.createElement("td",null,l.a.createElement(W.a,{menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:We,placeholder:"Choose placement",options:qe,value:r,onChange:function(t){return e.props.helper("selectDM",e.modLine(s,"fabricType",t.value,i))},isDisabled:d}),l.a.createElement("p",{style:t,className:"text-primary"},r[0].label)),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:"0",max:"999",step:"any",value:i.priceWhite,onChange:function(t){return e.props.helper("selectDM",e.modLine(s,"priceWhite",t.target.value,i))},disabled:d}),l.a.createElement("p",{style:t,className:"text-primary"},e.FixElementValue(parseFloat(i.priceWhite)/parseFloat(i.yieldydslbs)))),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:"0",max:"999",step:"any",value:i.priceMedium,onChange:function(t){return e.props.helper("selectDM",e.modLine(s,"priceMedium",t.target.value,i))},disabled:d}),l.a.createElement("p",{style:t,className:"text-primary"},e.FixElementValue(parseFloat(i.priceMedium)/parseFloat(i.yieldydslbs)))),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",value:i.priceDark,min:"0",max:"999",step:"any",onChange:function(t){return e.props.helper("selectDM",e.modLine(s,"priceDark",t.target.value,i))},disabled:d}),l.a.createElement("p",{style:t,className:"text-primary"},e.FixElementValue(parseFloat(i.priceDark)/parseFloat(i.yieldydslbs)))),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",value:i.priceSpecial,min:"0",max:"999",step:"any",onChange:function(t){return e.props.helper("selectDM",e.modLine(s,"priceSpecial",t.target.value,i))},disabled:d}),l.a.createElement("p",{style:t,className:"text-primary"},e.FixElementValue(parseFloat(i.priceSpecial)/parseFloat(i.yieldydslbs)))),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:"0.00",max:"999",step:"any",value:i.Bwidth?i.Bwidth:0,onChange:function(t){return e.props.helper("selectDM",e.modLine(s,"Bwidth",t.target.value,i))},disabled:d}),l.a.createElement("p",{style:t,className:"text-primary"},"Yds*u:",p)),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:"0.00",max:"999",step:"any",value:i.Blong?i.Blong:0,onChange:function(t){return e.props.helper("selectDM",e.modLine(s,"Blong",t.target.value,i))},disabled:d}),l.a.createElement("p",{style:t,className:"text-primary"},"Lbs*u:",e.FixElementValue(parseFloat(p)/parseFloat(i.yieldydslbs)))),l.a.createElement("td",null,o.edit&&l.a.createElement(R.a,{color:"warning",className:"btn-simple",size:"sm",onClick:function(){return e.props.helper("removeLine",s)}},l.a.createElement("i",{className:"tim-icons icon-simple-remove"}))))}))),l.a.createElement(_e.a,{size:"sm",className:"tablesorter"},l.a.createElement("tbody",null,i.map(function(t,a){var i="";t.id>0&&(n.find(function(e){return e.value===t.id})&&(i=n.find(function(e){return e.value===t.id}).data.pathToCertificate));return l.a.createElement("tr",{key:a},l.a.createElement("td",{style:{width:"5%"}},l.a.createElement(R.a,{onClick:function(t){t.preventDefault(),""!==i&&e.props.helper("downloadDM",i)},color:"danger",size:"sm",className:"btn-icon btn-link remove"},l.a.createElement("i",{className:"fa fa-download"}))),l.a.createElement("td",{style:{width:"45%"}},l.a.createElement("p",{className:"text-primary text-center"},t.show_name)),l.a.createElement("td",{style:{width:"7.5%"}},l.a.createElement("p",{className:"text-center"},e.calcCostWhite(t.priceWhite,t.lbsXunit,t.lbsunit,a).toFixed(2))),l.a.createElement("td",{style:{width:"7.5%"}},l.a.createElement("p",{className:"text-center"},e.calcCostMedium(t.priceMedium,t.lbsXunit,t.lbsunit,a).toFixed(2))),l.a.createElement("td",{style:{width:"7.5%"}},l.a.createElement("p",{className:"text-center"},e.calcCostDark(t.priceDark,t.lbsXunit,t.lbsunit,a).toFixed(2))),l.a.createElement("td",{style:{width:"7.5%"}},l.a.createElement("p",{className:"text-center"},e.calcCostSpecial(t.priceSpecial,t.lbsXunit,t.lbsunit,a).toFixed(2))),l.a.createElement("td",{className:"text-center",style:{width:"20%"}},"\xa0"))}))),l.a.createElement(_e.a,{size:"sm",className:"tablesorter"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center",style:{width:"50%"}},"Fabrics Total (+",this.props.detail.pfabrics,"%)"),l.a.createElement("td",{className:"text-center",style:{width:"7.5%"}},"$",this.props.calcs.pricesFabrics.white.toFixed(2)),l.a.createElement("td",{className:"text-center",style:{width:"7.5%"}},"$",this.props.calcs.pricesFabrics.medium.toFixed(2)),l.a.createElement("td",{className:"text-center",style:{width:"7.5%"}},"$",this.props.calcs.pricesFabrics.dark.toFixed(2)),l.a.createElement("td",{className:"text-center",style:{width:"7.5%"}},"$",this.props.calcs.pricesFabrics.special.toFixed(2)),l.a.createElement("td",{className:"text-center",style:{width:"20%"}},"\xa0")))))}}]),t}(l.a.Component),Ge=a(85),$e=a(164),Ye=function(e){return l.a.createElement(v.a,{className:"card-primary"},l.a.createElement(_.a,{role:"tab"},l.a.createElement("a",{style:{borderBottom:"1px solid grey"},"aria-expanded":e.isOpen,href:"#"+e.collapse,"data-parent":"#accordion","data-toggle":"collapse",onClick:function(t){t.preventDefault(),e.collapsesToggle(e.collapse)}},e.title,l.a.createElement("i",{className:"tim-icons icon-minimal-down"}))),l.a.createElement($e.a,{role:"tabpanel",isOpen:e.isOpen},l.a.createElement(y.a,null,e.children)))},Xe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e)))._isMounted=!1,a.assembleCollapses=function(){return a.setState({openedCollapses:a.props.tabs.map(function(e){return e.collapse})})},a.collapsesToggle=function(e){a.state.openedCollapses.includes(e)?a._isMounted&&a.setState({openedCollapses:Object(Ge.a)(a.state.openedCollapses.filter(function(t){return t!==e}))}):a._isMounted&&a.setState({openedCollapses:[].concat(Object(Ge.a)(a.state.openedCollapses),[e])})},a.Expand=function(){a.assembleCollapses()},a.Reduce=function(){a.setState({openedCollapses:[]})},a.state={openedCollapses:[]},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.assembleCollapses()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;if(!this.props.tabs)return null;var t=this.state.openedCollapses;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{maxWidth:"20rem"}},l.a.createElement(R.a,{className:"btn-simple",color:"info",onClick:this.Expand},l.a.createElement("i",{className:"tim-icons icon-simple-add"})," Expand"),l.a.createElement(R.a,{className:"btn-simple",color:"info",onClick:this.Reduce},l.a.createElement("i",{className:"tim-icons icon-simple-delete"})," Reduce")),l.a.createElement("div",{"aria-multiselectable":!0,className:"card-collapse",id:"accordion",role:"tablist"},this.props.tabs.map(function(a){return l.a.createElement(Ye,{key:a.collapse,collapse:a.collapse,title:a.title,collapsesToggle:e.collapsesToggle,isOpen:t.includes(a.collapse)},a.component)})))}}]),t}(l.a.Component),Ke=function(e){var t=e.CostingHeaderHelper,a=e.Access,n=e.detail,i=e.header,o=n.drawcore,s=n.twillTape,r=n.clearElastic,c=n.lining,d=n.selfFabricTape,m=n.elastic,u=n.waistbandElastic;o=o||"0/0",s=s||"0/0",r=r||"0/0",c=c||"0/0",d=d||"0/0",m=m||"0/0",u=u||"0/0";var p="D"===i||(e.quickCost?a.quick_costing:a.quotation);return l.a.createElement(l.a.Fragment,null,l.a.createElement(_e.a,null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("b",null,"\xa0")),l.a.createElement("th",null,l.a.createElement("b",null,"width")),l.a.createElement("th",null,l.a.createElement("b",null,"long")))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Drawcord"),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:0,max:100,value:o.split("/")[0],onChange:function(e){return t("detail",{key:"drawcore",position:0,value:e.target.value})},disabled:!p.edit})),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:0,max:100,value:o.split("/")[1],onChange:function(e){return t("detail",{key:"drawcore",position:1,value:e.target.value})},disabled:!p.edit}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Twill Tape"),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:0,max:100,value:s.split("/")[0],onChange:function(e){return t("detail",{key:"twillTape",position:0,value:e.target.value})},disabled:!p.edit})),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:0,max:100,value:s.split("/")[1],onChange:function(e){return t("detail",{key:"twillTape",position:1,value:e.target.value})},disabled:!p.edit}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Clear Elastic"),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:0,max:100,value:r.split("/")[0],onChange:function(e){return t("detail",{key:"clearElastic",position:0,value:e.target.value})},disabled:!p.edit})),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:0,max:100,value:r.split("/")[1],onChange:function(e){return t("detail",{key:"clearElastic",position:1,value:e.target.value})},disabled:!p.edit}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Lining"),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:0,max:100,value:c.split("/")[0],onChange:function(e){return t("detail",{key:"lining",position:0,value:e.target.value})},disabled:!p.edit})),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:0,max:100,value:c.split("/")[1],onChange:function(e){return t("detail",{key:"lining",position:1,value:e.target.value})},disabled:!p.edit}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Hanger/Zipper Loop"),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:0,max:100,value:d.split("/")[0],onChange:function(e){return t("detail",{key:"selfFabricTape",position:0,value:e.target.value})},disabled:!p.edit})),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:0,max:100,value:d.split("/")[1],onChange:function(e){return t("detail",{key:"selfFabricTape",position:1,value:e.target.value})},disabled:!p.edit}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Elastic Hem"),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:0,max:100,value:m.split("/")[0],onChange:function(e){return t("detail",{key:"elastic",position:0,value:e.target.value})},disabled:!p.edit})),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:0,max:100,value:m.split("/")[1],onChange:function(e){return t("detail",{key:"elastic",position:1,value:e.target.value})},disabled:!p.edit}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Elastic Waistband"),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:0,max:100,value:u.split("/")[0],onChange:function(e){return t("detail",{key:"waistbandElastic",position:0,value:e.target.value})},disabled:!p.edit})),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:0,max:100,value:u.split("/")[1],onChange:function(e){return t("detail",{key:"waistbandElastic",position:1,value:e.target.value})},disabled:!p.edit}))))))},Qe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).Access=JSON.parse(localStorage.getItem("Access")||"{}"),a.Role=localStorage.getItem("role")||"",a.Views={Consumption:!0,Fabrics:!0,Materials:!0,Manufacturing:!0,Logistics:!0,Embellishments:!0,Sumary:!0},a._isMounted=!1,a._loadingFabric=!1,a._loadingMaterial=!1,a._loadingEmbellishment=!1,a._loadedHeader=!1,a._loadedDetail=!1,a._loadedSketch=!1,a._loadedTemplates=!1,a.userToken=localStorage.getItem("userToken")||"",a.valid_time=localStorage.getItem("valid_time")||"",a.user_id=localStorage.getItem("user_id")||"0",a.header={headers:{Authorization:"Token "+a.userToken,"Content-Type":"multipart/form-data"}},a.headerJson={headers:{Authorization:"Token "+a.userToken,"Content-Type":"application/json"}},a._Collapses=["fabrics","material","manufacturing","consumption","embellishment","Logistics","variables","comment"],a.logOut=function(){a._isMounted=!1,localStorage.clear(),a.componentWillUnmount(),a.props.history.push("/auth/login")},a.handleError=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.response?e.response:{},n=e.message?e.message:"";if(void 0!==t.status&&401===t.status)a.logOut();else{var l="";if(void 0!==t.data)for(var i=0,o=Object.entries(t.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;a.notify("tr","warning",l)}},a.notify=function(e,t,n){var i;i={place:e,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:t,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&a._isMounted&&a.refs.notificationAlert.notificationAlert(i)},a.toggleApprovalModal=function(){a.setState({ApprovalModal:!a.state.ApprovalModal})},a.toggleTemplateModal=function(){a.setState({templateModal:!a.state.templateModal})},a.getFabrics=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/fabrics/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadingFabric=!0,this._isMounted&&this.setState({fabricsCatalog:e.data})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"get fabrics")}.bind(Object(P.a)(a)))},a.getMaterials=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/materials/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadingMaterial=!0,this._isMounted&&this.setState({materialsCatalog:e.data})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"get materials")}.bind(Object(P.a)(a)))},a.costingHeader=function(e){ae.a.get("https://api.vulcanoapparel.com/api/v1/costingHeader/"+e+"/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadedHeader=!0,this._isMounted&&this.setState({CostingHeader:e.data}),this.costingDetail({value:0,label:"default detail",detail:e.data.detail_id})}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.handleError(e,"costingHeader")}.bind(Object(P.a)(a)))},a.getTemplates=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/qcTemplates/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadedTemplates=!0,this._isMounted&&this.setState({templateInfo:e.data,loading:!1})}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.handleError(e)}.bind(Object(P.a)(a)))},a.getSeasons=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/seasons/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadingSeasons=!0,this._isMounted&&this.setState({seasons:e.data})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e)}.bind(Object(P.a)(a)))},a.costingDetail=function(e){a.setState({loading:!0}),ae.a.get("https://api.vulcanoapparel.com/api/v1/costingDetail/"+e.detail+"/",a.headerJson).then(function(t){this._loadedDetail=!0;var a=t.data,n=a.dms,l=a.materials,i=a.embellishments;n.sort(function(e,t){return e.line_id>t.line_id?1:t.line_id>e.line_id?-1:0}),l.sort(function(e,t){return e.line_id>t.line_id?1:t.line_id>e.line_id?-1:0}),i.sort(function(e,t){return e.line_id>t.line_id?1:t.line_id>e.line_id?-1:0}),a.dms=n.map(function(e){return Object(A.a)({},e,{line_id:0})}),a.materials=l.map(function(e){return Object(A.a)({},e,{line_id:0})}),a.embellishments=i.map(function(e){return Object(A.a)({},e,{line_id:0})}),this.setState({selectedTemplate:e,detail:a,loading:!1})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"costingDetail")}.bind(Object(P.a)(a)))},a.costingSketch=function(e){e&&ge("https://api.vulcanoapparel.com/api/v1/costingHeader/download/?key="+e,{params:{key:e},headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadedSketch=!0,this.setState({pathToSketchData:e})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"downloadFileFromS3 mount")}.bind(Object(P.a)(a)))},a.BuildModule=function(){a.setState({loading:!0}),a.getFabrics(),a.getMaterials(),a.getSeasons(),a.costingHeader(a.props.location.state.costingData),a.getTemplates()},a.buildDetailDB=function(){var e=a.state.detail,t=[];e.dms.map(function(e){return t.push({line_id:e.line_id,id:e.id,dm:e.dm,priceWhite:e.priceWhite,priceMedium:e.priceMedium,priceDark:e.priceDark,priceSpecial:e.priceSpecial,priceWhiteC:0,priceMediumC:0,priceDarkC:0,priceSpecialC:0,Blong:a.FixElementValue(e.Blong),Bwidth:a.FixElementValue(e.Bwidth),fabricType:e.fabricType,weightBWashOriginal:a.FixElementValue(e.weightBWashOriginal),weightBWashCalculated:a.FixElementValue(e.weightBWashCalculated),dm_width:a.FixElementValue(e.dm_width),markerWidth:a.FixElementValue(e.markerWidth),dm_pt:e.dm_pt,yieldydslbs:a.FixElementValue(e.yieldydslbs),markerEfficiency:a.FixElementValue(e.markerEfficiency),markerLong:a.FixElementValue(e.markerLong),pieceByMarker:a.FixElementValue(e.pieceByMarker),lbsunit:a.FixElementValue(e.lbsunit),lbsunitwaste:a.FixElementValue(e.lbsunitwaste),sqinchunit:a.FixElementValue(e.sqinchunit),ydsunit:a.FixElementValue(e.ydsunit),bydspunit:a.FixElementValue(e.bydspunit),blbspunit:a.FixElementValue(e.blbspunit),wasted_flag:a.FixElementValue(e.wasted_flag)}),e});var n=[];e.materials.map(function(e){return n.push({line_id:e.line_id,id:e.id,unitPrice:parseFloat(a.FixElementValue(e.unitPrice)),transport:parseFloat(a.FixElementValue(e.transport))}),e});var l=[];e.embellishments.map(function(e){return""!==e.name&&l.push({id:e.id,name:e.name,status:"A",price:e.price?e.price:0,margin:e.margin?parseFloat(e.margin):0,description:e.description?e.description:""}),e});var i=ke(e);return e.style=a.state.CostingHeader.style,e.totalTime=i.totalTime,e.tpMaterials=i.pricesMaterials,e.tpFabricsWhite=i.sellingPrices.white,e.tpFabricsMedium=i.sellingPrices.medium,e.tpFabricsDark=i.sellingPrices.dark,e.tpFabricsSpecial=i.sellingPrices.special,e.pathToSAM=e.pathToSAM?e.pathToSAM:"...",e.sewing=i.sewing,e.cutting=i.cutting,e.cxm=i.cxm,e.decorationMargin=i.decorationMargin,e.broker=i.broker,e.freightPrice=i.freightPrice,e.freightQuantity=i.freightQuantity,e.freightTotal=i.freightTotal,e.factoring=e.factoring?e.factoring:0,e.profitWhite=e.profitWhite?e.profitWhite:0,e.profitMedium=e.profitMedium?e.profitMedium:0,e.profitDark=e.profitDark?e.profitDark:0,e.profitSpecial=e.profitSpecial?e.profitSpecial:0,e.sell=e.sell?e.sell:0,e.pfabrics=e.pfabrics?e.pfabrics:0,e.pmaterials=e.pmaterials?e.pmaterials:0,e.pir=e.pir?e.pir:0,e.comment=e.comment?e.comment:"",e.dms=t,e.materials=n,e.embellishments=l,e.id=a.props.location.state.costingData,e.drawcore=e.drawcore?e.drawcore:"0/0",e.twillTape=e.twillTape?e.twillTape:"0/0",e.clearElastic=e.clearElastic?e.clearElastic:"0/0",e.lining=e.lining?e.lining:"0/0",e.selfFabricTape=e.selfFabricTape?e.selfFabricTape:"0/0",e.elastic=e.elastic?e.elastic:"0/0",e.waistbandElastic=e.waistbandElastic?e.waistbandElastic:"0/0",e.pathToSketch=a.state.CostingHeader.pathToSketch,e.colors=e.colors?e.colors:"",e.proto_status=a.state.CostingHeader.proto_status,e.season=a.state.CostingHeader.season.id,e.whodie=a.state.detail.whodie,e.wtshirt=a.state.detail.wtshirt,e.extra_time=a.state.detail.extra_time,delete e.created_at,delete e.updated_at,delete e.deletedFlag,e},a.handleSaveProto=function(e){e.preventDefault(),a.setState({loading:!0});var t=a.buildDetailDB();console.log(t,"ll"),ae.a.post("https://api.vulcanoapparel.com/api/v1/costingDetail/update_costing/",t,a.headerJson).then(function(){this.setState({loading:!1}),this.notify("tr","success","CostSheet updated."),this.componentDidMount()}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.notify("tr","warning","Cannot save costsheet"),this.componentDidMount()}.bind(Object(P.a)(a)))},a.saveQuickCost=function(){a.setState({loading:!0});var e=a.buildDetailDB();ae.a.post("https://api.vulcanoapparel.com/api/v1/costingDetail/update_costing/",e,a.headerJson).then(function(){var e=new FormData;e.append("id",this.state.detail.id),e.append("name",this.state.templateName),ae.a.post("https://api.vulcanoapparel.com/api/v1/qcTemplates/",e,this.headerJson).then(function(){this.setState({loading:!1}),this.componentDidMount(),this.toggleTemplateModal(),this.notify("tr","success","New Template added.")}.bind(this)).catch(function(e){this.toggleTemplateModal(),this.setState({loading:!1}),this.componentDidMount(),this.notify("tr","warning","Failed to create template. "+e)}.bind(this))}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.notify("tr","warning","Cannot save costsheet"),this.componentDidMount()}.bind(Object(P.a)(a)))},a.newProto=function(){a.setState({loading:!0}),ve(a.props.location.state.costingData,1).then(function(){this.setState({loading:!1}),this.props.history.push("/admin/costing")}.bind(Object(P.a)(a))).catch(function(){this.setState({loading:!1}),this.notify("tr","warning","Cannot save new proto"),this.componentDidMount()})},a.handleSubmit=function(e){e.preventDefault()},a.sendtoApprove=function(){a.setState({loading:!0});var e=new FormData;e.append("flag",1),e.append("id",a.props.location.state.costingData),ae.a.post("https://api.vulcanoapparel.com/api/v1/administration/change_approve_status/",e,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.setState({loading:!1}),this.notify("tr","success","CostSheet updated."),this.toggleApprovalModal(),this.componentDidMount()}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.handleError(e)}.bind(Object(P.a)(a)))},a.freeCostSheet=Object(T.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.location||"Consulting"===a.Role&&"Telas"===a.Role){e.next=5;break}return t=a.props.location.state.costingData,e.next=4,ae.a.patch("https://api.vulcanoapparel.com/api/v1/costingHeader/"+t+"/",{updating_user:""},a.headerJson);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)})),a.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},a.handleDownloadFile=function(e,t){if(""===e||"..."===e||null===e)a.notify("tr","warning","No "+t+" has been uploaded.");else{ge("marker"===t||"pattern"===t||"SAM"===t?"https://api.vulcanoapparel.com/api/v1/costingDetail/download/?key="+e:"https://api.vulcanoapparel.com/api/v1/costingHeader/download/?key="+e,{params:{key:e},headers:{Authorization:"Token "+a.userToken}}).then(function(e){var a={file:e};window.open(a.file),this.notify("tr","success",t+" downloaded!")}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"download file")}.bind(Object(P.a)(a)))}},a.handleSketchChange=function(e,t){var n=new FormData;n.append("file",e),n.append("id",a.props.location.state.costingData),pe("https://api.vulcanoapparel.com/api/v1/costingHeader/post_sketch/",a.header,n,"file",["jpg","jpeg","png","JPG","PNG","JPEG"]).then(function(e){this.notify("tr","success","Sketch Updated."),this.setState({CostingHeader:Object(A.a)({},this.state.CostingHeader,{pathToSketch:e}),pathToSketchData:t})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"upload to s3 sketch")}.bind(Object(P.a)(a)))},a.CostingHeaderHelper=function(e,t){if("template"===e&&a.costingDetail(t),"techPack"===e||"pattern"===e||"marker"===e||"SAM"===e?a.handleDownloadFile(t,e):"onSketchChange"===e&&a.handleSketchChange(t.file,t.data),"style"===e&&a.setState({CostingHeader:Object(A.a)({},a.state.CostingHeader,{style:t})}),"proto_status"===e&&a.setState({CostingHeader:Object(A.a)({},a.state.CostingHeader,{proto_status:t})}),"colors"===e&&a.setState({detail:Object(A.a)({},a.state.detail,{colors:t})}),"teckpack"===e){a.setState({loading:!0});var n=new FormData;n.append("file",t),n.append("id",a.state.CostingHeader.id),ae.a.post("https://api.vulcanoapparel.com/api/v1/costingHeader/post_techpack/",n,a.header).then(function(){this.notify("tr","success","CostSheet TechPack Changed"),this.componentDidMount()}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.handleError(e,"saveStyle")}.bind(Object(P.a)(a)))}if("saveStyle"===e&&(a.setState({loading:!0}),ae.a.patch("https://api.vulcanoapparel.com/api/v1/costingHeader/"+a.props.location.state.costingData+"/",{style:a.state.CostingHeader.style},a.headerJson).then(function(){this.setState({loading:!1}),this.notify("tr","success","CostSheet style Changed")}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.handleError(e,"saveStyle")}.bind(Object(P.a)(a)))),"detail"===e){var l=a.state.detail,i="0/0";t.key in l&&(i=l[t.key]);var o=i.split("/");o[t.position]=t.value,a.setState({detail:Object(A.a)({},a.state.detail,Object(j.a)({},t.key,o.join("/")))})}},a.fabricsHelper=function(e,t){if("pfabrics"===e){var n=a.state.detail;n.pfabrics=t,a.setState({detail:n})}if("selectDM"===e){var l=a.state.detail.dms;l[t.dmIndex]=t.line,a.setState({detail:Object(A.a)({},a.state.detail,{dms:l})})}if("newFabric"===e){var i=a.state.detail.dms;i.push(t),a.setState({detail:Object(A.a)({},a.state.detail,{dms:i})})}if("removeLine"===e){var o=a.state.detail.dms;delete o[t],a.setState({detail:Object(A.a)({},a.state.detail,{dms:o})})}("markerBlock"===e&&a.setState({MarkerBlock:!a.state.MarkerBlock}),"downloadDM"===e)&&ge("https://api.vulcanoapparel.com/api/v1/fabrics/download/?key="+t,{params:{key:t},headers:{Authorization:"Token "+a.userToken}}).then(function(e){var t={file:e};window.open(t.file),this.notify("tr","success","DM downloaded!")}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"cannot download file")}.bind(Object(P.a)(a)))},a.materialsHelper=function(e,t){var n=a.state.detail,l=a.state.detail.materials;"pmaterials"===e&&(n.pmaterials=t,a.setState({detail:n})),"selectMaterial"===e&&(l[t.materialIndex]=t.line,a.setState({detail:Object(A.a)({},a.state.detail,{materials:l})})),"newMaterial"===e&&(l.push(t),a.setState({detail:Object(A.a)({},a.state.detail,{materials:l})})),"removeLine"===e&&(delete l[t],a.setState({detail:Object(A.a)({},a.state.detail,{materials:l})}))},a.embellishmentHelper=function(e,t){var n=a.state.detail,l=a.state.detail.embellishments;"DecorationMargin"===e&&(n.decorationMargin=t,a.setState({detail:n})),"selectEmbellishment"===e&&(l[t.embellishmentIndex]=t.line,a.setState({detail:Object(A.a)({},a.state.detail,{embellishments:l})})),"newEmbellishment"===e&&(l.push(t),a.setState({detail:Object(A.a)({},a.state.detail,{embellishments:l})})),"removeLine"===e&&(delete l[t],a.setState({detail:Object(A.a)({},a.state.detail,{embellishments:l})}))},a.samsHelper=function(e,t){if("sam"===e&&a.setState({detail:Object(A.a)({},a.state.detail,{totalTime:t})}),"production_time"===e&&a.setState({detail:Object(A.a)({},a.state.detail,{production_time:t})}),"operation_flag"===e){var n="true"===t;a.setState({detail:Object(A.a)({},a.state.detail,{operation_flag:n})})}if("wash_flag"===e){var l=t.wash;"whodie"===l?a.setState({detail:Object(A.a)({},a.state.detail,{whodie:!a.state.detail.whodie,extra_time:a.state.detail.whodie?0:1.967,wtshirt:!1})}):"wtshirt"===l&&a.setState({detail:Object(A.a)({},a.state.detail,{whodie:!1,wtshirt:!a.state.detail.wtshirt,extra_time:a.state.detail.wtshirt?0:1.202})})}},a.manufacturingHelper=function(e,t){var n=a.state.detail;if("cxm"===e){var l=t*n.totalTime;a.setState({detail:Object(A.a)({},a.state.detail,{cxm:t,sewing:l})})}"cutting"===e&&a.setState({detail:Object(A.a)({},a.state.detail,{cutting:t})}),"pir"===e&&a.setState({detail:Object(A.a)({},a.state.detail,{pir:t})})},a.helperFOB=function(e,t){""!==e&&a.setState({detail:Object(A.a)({},a.state.detail,Object(j.a)({},e,t))})},a.helperTotalFOB=function(e,t){""!==e&&a.setState({detail:Object(A.a)({},a.state.detail,Object(j.a)({},e,t))})},a.masterHandle=function(e,t,n){var l=a.state.detail.dms;switch(e){case"weightBWashOriginal":var i=l[t].weightBWashOriginal/33.9057475,o=l[t].dm_pt?1:2,s=576/(i*l[t].dm_width*o);l[t].weightBWashOriginal=n,l[t].weightBWashCalculated=i,a.setState(function(e){return{detail:Object(A.a)({},e.detail,{dms:e.detail.dms.map(function(e){return e.key===t?Object(A.a)({},e,{weightBWashOriginal:n,weightBWashCalculated:i,yieldydslbs:s}):e})})}});break;case"dm_width":var r=l[t],c=l[t].dm_pt?1:2,d=576/(r.weightBWashCalculated*r.dm_width*c);l[t].dm_width=n,l[t].yieldydslbs=d,a.setState(function(e){return{detail:Object(A.a)({},e.detail,{dms:e.detail.dms.map(function(e){return e.key===t?Object(A.a)({},e,{yieldydslbs:d,dm_width:n}):e})})}});break;case"markerWidth":var m=l[t],u=m.markerEfficiency/100,p=m.markerWidth*m.markerLong*36*u/m.pieceByMarker;l[t].markerWidth=n,l[t].sqinchunit=p,a.setState(function(e){return{detail:Object(A.a)({},e.detail,{dms:e.detail.dms.map(function(e){return e.key===t?Object(A.a)({},e,{markerWidth:n,sqinchunit:p}):e})})}});break;case"dm_pt":var h=l[t],g=l[t].dm_pt?1:2,f=576/(h.weightBWashCalculated*h.dm_width*g),b=h.Bwidth/36*(1/(h.dm_width*g))*h.Blong/h.yieldydslbs,E=h.markerLong/h.pieceByMarker/h.yieldydslbs+b;l[t].dm_pt=n,l[t].yieldydslbs=f,a.setState(function(e){return{detail:Object(A.a)({},e.detail,{dms:e.detail.dms.map(function(e){return e.key===t?Object(A.a)({},e,{yieldydslbs:f,dm_width:n,lbsunit:E}):e})})}});break;case"markerEfficiency":var v=l[t],y=l[t].dm_pt?1:2,_=v.markerEfficiency/100,C=v.markerWidth*v.markerLong*36*_/v.pieceByMarker,k=v.Bwidth/36*(1/(v.dm_width*y))*v.Blong/v.yieldydslbs,S=v.markerLong/v.pieceByMarker/v.yieldydslbs+k;l[t].markerEfficiency=n,l[t].sqinchunit=C,a.setState(function(e){return{detail:Object(A.a)({},e.detail,{dms:e.detail.dms.map(function(e){return e.key===t?Object(A.a)({},e,{markerEfficiency:n,sqinchunit:C,lbsunit:S}):e})})}});break;case"markerLong":var O=l[t],M=l[t].dm_pt?1:2,w=O.markerEfficiency/100,x=O.markerWidth*O.markerLong*36*w/O.pieceByMarker,N=O.Bwidth/36*(1/(O.dm_width*M))*O.Blong/O.yieldydslbs,T=O.markerLong/O.pieceByMarker/O.yieldydslbs+N;l[t].markerLong=n,l[t].sqinchunit=x,a.setState(function(e){return{detail:Object(A.a)({},e.detail,{dms:e.detail.dms.map(function(e){return e.key===t?Object(A.a)({},e,{markerLong:n,sqinchunit:x,lbsunit:T}):e})})}});break;case"pieceByMarker":var j=l[t],F=l[t].dm_pt?1:2,P=j.markerEfficiency/100,L=j.markerWidth*j.markerLong*36*P/j.pieceByMarker,D=j.Bwidth/36*(1/(j.dm_width*F))*j.Blong/j.yieldydslbs,H=j.markerLong/j.pieceByMarker/j.yieldydslbs+D;l[t].pieceByMarker=n,l[t].sqinchunit=L,a.setState(function(e){return{detail:Object(A.a)({},e.detail,{dms:e.detail.dms.map(function(e){return e.key===t?Object(A.a)({},e,{pieceByMarker:n,sqinchunit:L,lbsunit:H}):e})})}})}},a.state={CostingHeaderId:0,CostingHeader:{},openedCollapses:a._Collapses,fabricsCatalog:[],materialsCatalog:[],embellishmentCatalog:[],fabricStyleCatalog:[],fabrics:[],materials:[],embellishments:[],sumWhite:0,sumMedium:0,sumDark:0,sumSpecial:0,sumMaterials:0,detail:{},embellishment:0,marginDecorations:0,_dataIsValid:!1,Reload:!1,totalSumWhite:0,totalSumMedium:0,totalSumDark:0,totalSumSpecial:0,pathToSketchData:"",ApprovalModal:!1,MarkerBlock:!1,loading:!1,seasons:null,templateInfo:{},selectedTemplate:null,templateModal:!1,templateName:""},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"FixElementValue",value:function(e){return null===e||void 0===e||""===e||isNaN(e)?"0":e}}]),Object(p.a)(t,[{key:"beforeunload",value:function(e){this.props.dataUnsaved&&(e.preventDefault(),e.returnValue=!0)}},{key:"componentDidMount",value:function(){this._isMounted=!0,void 0!==this.props.location.state?this.BuildModule():this.props.history.push("/admin/costing"),"Telas"===this.Role&&(this.Views=Object(A.a)({},this.Views,{Materials:!1,Manufacturing:!1,Logistics:!1,Embellishments:!1,Sumary:!1}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.beforeunload.bind(this)),this.freeCostSheet().then(function(e){this._isMounted=!1,this._loadingFabric=!1,this._loadingMaterial=!1,this._loadingEmbellishment=!1}.bind(this))}},{key:"render",value:function(){var e=this;if(!1!==this.state.Reload)return l.a.createElement(c.a,null,l.a.createElement(m.a,{push:!0,to:{pathname:"/admin/costing"}}));var t="bg-ligh"===this.checkPageMode().bg?"inverted":"",a={},n={};this._loadedDetail&&(a=ke(this.state.detail),n={pathToPattern:this.state.detail.pathToPattern,pathToMarker:this.state.detail.pathToMarker,pathToTechpack:this.state.CostingHeader.pathToTechpack,pathToSAM:this.state.detail.pathToSAM,pathToSketch:this.state.CostingHeader.PathToSketch});var i=[];return this.Views.Consumption&&this._loadedDetail&&this._loadingFabric&&i.push({collapse:"consumption",title:"Consumption",component:l.a.createElement(ze,{fabricsCatalog:this.state.fabricsCatalog,fabrics:this.state.detail.dms,weightBWashCalculatedHandle:this.weightBWashCalculatedHandle,yieldydslbsHandle:this.yieldydslbsHandle,lbsunitHandle:this.lbsunitHandle,lbsunitwasteHandle:this.lbsunitwasteHandle,sqinchunitHandle:this.sqinchunitHandle,ydsunitHandle:this.ydsunitHandle,masterHandle:this.masterHandle,quickCosting:!0})}),this.Views.Fabrics&&this._loadedDetail&&this._loadingFabric&&this._loadedHeader&&i.push({collapse:"fabrics",title:"Fabrics",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(Je,{fabricsCatalog:this.state.fabricsCatalog,detail:this.state.detail,header:this.state.CostingHeader,markerBlock:this.state.MarkerBlock,calcs:a,quickCosting:!0,helper:this.fabricsHelper}))}),this.Views.Materials&&this._loadingMaterial&&this._loadedDetail&&i.push({collapse:"materials",title:"Materials",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,{materialsCatalog:this.state.materialsCatalog,detail:this.state.detail,calcs:a,quickCosting:!0,helper:this.materialsHelper,header:this.state.CostingHeader}))}),this.Views.Manufacturing&&this._loadedDetail&&i.push({collapse:"manufacturing",title:"Manufacturing Costs",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(_e.a,{className:"tablesorter"},l.a.createElement("tbody",null,l.a.createElement(Re,{helper:this.samsHelper,detail:this.state.detail,quickCost:!0,header:this.state.CostingHeader}),l.a.createElement(He,{detail:this.state.detail,calcs:a,quickCost:!0,helper:this.manufacturingHelper,header:this.state.CostingHeader}))))}),this.Views.Logistics&&this._loadedDetail&&i.push({collapse:"logistics",title:"Logistics",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(Be,{detail:this.state.detail,calcs:a,helper:this.helperFOB,quickCost:!0,header:this.state.CostingHeader}),l.a.createElement(Ue,{detail:this.state.detail,calcs:a,helper:this.helperTotalFOB,quickCost:!0,header:this.state.CostingHeader}))}),this.Views.Embellishments&&this._loadedDetail&&i.push({collapse:"embellishments",title:"EMBELLISHMENTS/OTHERS",component:l.a.createElement(Ae,{detail:this.state.detail,helper:this.embellishmentHelper,totalEmbellishments:a.totalEmbellishments.toFixed(2),quickCost:!0,header:this.state.CostingHeader})}),this.Views.Sumary&&this._loadedDetail&&i.push({collapse:"comment",title:"COMMENT",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(Ke,{detail:this.state.detail,CostingHeaderHelper:this.CostingHeaderHelper,Access:this.Access,quickCost:!0,header:this.state.CostingHeader}),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleText",sm:4},"Comments: "),l.a.createElement(z.a,{sm:8},l.a.createElement(J.a,{type:"textarea",height:100,value:this.state.detail.comment?this.state.detail.comment:"",onChange:function(t){e.setState({detail:Object(A.a)({},e.state.detail,{comment:t.target.value})})},disabled:!this.Access.quick_costing.edit,style:{resize:"vertical",Height:"100% !important"}}))))}),this.Views.Sumary&&this._loadedDetail&&i.push({collapse:"sumary",title:"SUMMARY",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(De,{sumWhite:a.sellingPrices.white,sumMedium:a.sellingPrices.medium,sumDark:a.sellingPrices.dark,sumSpecial:a.sellingPrices.special}),l.a.createElement(k.a,null,l.a.createElement(z.a,null,this._loadedDetail&&this.Access&&l.a.createElement(R.a,{className:"btn-fill",color:"success",type:"button",onClick:function(t){e.handleSaveProto(t)}},"Save quickCost")),l.a.createElement(z.a,null,this._loadedDetail&&this.Access&&l.a.createElement(R.a,{className:"btn-fill",color:"success",type:"button",onClick:function(t){t.preventDefault(),e.toggleTemplateModal()}},"Save as Template")),l.a.createElement(z.a,null,l.a.createElement(R.a,{className:"btn-fill",color:"info",type:"button",onClick:function(){be(e.state.detail,a,e.state.CostingHeader.PathToSketch,{costSheet:e.props.location.state.costingData,clientName:e.state.CostingHeader.client.name,clientAbbreviation:e.state.CostingHeader.client.abbreviation,season:e.state.CostingHeader.season.name,style:e.state.CostingHeader.style})}},"CostSheet")),l.a.createElement(z.a,null,"\xa0")))}),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:this.state.loading?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(t," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement(Oe.a,{message:"Your changes will not be saved. Are you sure you want to leave?"}),l.a.createElement(L.a,{isOpen:this.state.ApprovalModal,toggle:this.toggleApprovalModal},l.a.createElement("div",{className:"modal-header"},l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.toggleApprovalModal},l.a.createElement("i",{className:"tim-icons icon-simple-remove"})),l.a.createElement("h5",{className:"modal-title"},"Send for approval to manager?")),l.a.createElement(H.a,null,l.a.createElement("p",null,"approve?")),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleApprovalModal},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(t){t.preventDefault(),e.sendtoApprove()}},"Send to Approve"))),l.a.createElement(L.a,{isOpen:this.state.templateModal,toggle:this.toggleTemplateModal},l.a.createElement("div",{className:"modal-header"},l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.toggleTemplateModal},l.a.createElement("i",{className:"tim-icons icon-simple-remove"})),l.a.createElement("h5",{className:"modal-title"},"Save costsheet as Template?")),l.a.createElement(H.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"templateName",sm:2},"Template Name:"),l.a.createElement(z.a,{sm:10},l.a.createElement(J.a,{type:"textarea",id:"templateName",value:this.state.templateName,onChange:function(t){e.setState({templateName:t.target.value})},style:{resize:"vertical",maxHeight:"150px"}})))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleTemplateModal},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(t){""!==e.state.templateName?(t.preventDefault(),e.saveQuickCost()):e.notify("tr","warning","Template name required")}},"Save changes"))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement("div",{className:"content"},this._loadedHeader&&this._loadedTemplates&&l.a.createElement(Le,{costingHeader:this.state.CostingHeader,detail:this.state.detail,quickCost:!0,documents:n,sketchData:this.state.pathToSketchData,helper:this.CostingHeaderHelper,templateInfo:this.state.templateInfo,selectedTemplate:this.state.selectedTemplate,header:this.state.CostingHeader}),l.a.createElement(V.a,{onSubmit:function(t){return e.handleSubmit(t,a.sellingPrices)}},i.length>0?l.a.createElement(Xe,{tabs:i}):null)))}}]),t}(l.a.Component),Ze={input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}},et={line_id:0,id:0,dm:"",dm_width:70,dm_pt:!0,priceWhite:0,priceMedium:0,priceDark:0,priceSpecial:0,priceWhiteC:0,priceMediumC:0,priceDarkC:0,priceSpecialC:0,fabricType:"S",markerEfficiency:0,markerLong:0,markerWidth:0,pieceByMarker:0,Blong:0,Bwidth:0,weightBWashOriginal:0,weightBWashCalculated:0,yieldydslbs:0,lbsunit:0,lbsunitwaste:0,sqinchunit:0,ydsunit:0,show_name:"",ydsXunit:0,lbsXunit:0,dm_updated_at:""},tt=[{value:"S",label:"SELF"},{value:"C1",label:"CONTRAST1"},{value:"C2",label:"CONTRAST2"},{value:"C3",label:"CONTRAST3"},{value:"C4",label:"CONTRAST4"},{value:"C5",label:"CONTRAST5"},{value:"R",label:"RIB"},{value:"R1",label:"RIB1"},{value:"R2",label:"RIB2"},{value:"R3",label:"RIB3"},{value:"R4",label:"RIB4"},{value:"J",label:"JERSEY"},{value:"J1",label:"JERSEY1"},{value:"J2",label:"JERSEY2"},{value:"J3",label:"JERSEY3"},{value:"W",label:"WOVEN"},{value:"W1",label:"WOVEN1"},{value:"WA",label:"WATTA"},{value:"WA1",label:"WATTA1"},{value:"M",label:"MESH"},{value:"M1",label:"MESH1"},{value:"A",label:"APLIQUE"},{value:"A1",label:"APLIQUE1"},{value:"I1",label:"INTERLINING"},{value:"I2",label:"INTERLINING1"},{value:"I3",label:"INTERLINING2"},{value:"WAF",label:"WAFFLE"},{value:"TRI",label:"TRICOT"},{value:"TAF",label:"TAFFETA"},{value:"TA1",label:"TAFFETA1"}];var at=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).Access=JSON.parse(localStorage.getItem("Access")||"{}"),a.simpleFixElementValue=function(e){return null===e||void 0===e||""===e||isNaN(e)?0:parseFloat(e)},a.FixElementValue=function(e){return(null===e||void 0===e||""===e||isNaN(e)?0:parseFloat(e)).toFixed(2)},a.buildNewLine=function(e,t,n){return{dmIndex:n,line:Object(A.a)({},t,{id:e.data.id,dm:e.data.dm,dm_width:e.data.width,weightBWashOriginal:e.data.weight,dm_pt:e.data.pt,markerWidth:e.data.widthMark,priceWhite:e.data.priceWhite,priceMedium:e.data.priceMedium,priceDark:e.data.priceDark,priceSpecial:e.data.priceSpecial,show_name:e.data.show_name,Bwidth:a.simpleFixElementValue(t.Bwidth),Blong:a.simpleFixElementValue(t.Blong),dm_updated_at:e.data.dm_updated_at})}},a.modLine=function(e,t,a,n){return{dmIndex:e,line:Object(A.a)({},n,Object(j.a)({},t,a))}},a.calcCostWhite=function(e,t,n,l){var i=12*t*e/12;return n&&(i*=1.05),a.state.whitePrices[l]=i,i||0},a.calcCostMedium=function(e,t,n,l){var i=12*t*e/12;return n&&(i*=1.05),a.state.mediumPrices[l]=i,i||0},a.calcCostDark=function(e,t,n,l){var i=12*t*e/12;return n&&(i*=1.05),a.state.darkPrices[l]=i,i||0},a.calcCostSpecial=function(e,t,n,l){var i=12*t*e/12;return n&&(i*=1.05),a.state.specialPrices[l]=i,i||0},a.state={specialTotalWaste:a.props.calcs.pricesFabrics.special,specialPrices:[],whitePrices:[],mediumPrices:[],darkPrices:[],toggleChecked:!1,allDMs:a.props.detail.dms.length>0?a.props.detail.dms:[et]},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t={fontSize:"12px",color:"grey",textAlign:"center",marginBottom:"0"},a=!this.props.header.markerFlag||this.props.markerBlock,n=this.props.fabricsCatalog.map(function(e){return{value:e.id,label:e.show_name,data:e}}),i="D"===this.props.header.approvalStatus||(this.props.quickCosting?this.Access.quick_costing:this.Access.quotation);return l.a.createElement(l.a.Fragment,null,this.props.header.markerFlag&&i.edit&&l.a.createElement(q.a,{check:!0},l.a.createElement(S.a,{check:!0},l.a.createElement(J.a,{type:"checkbox",checked:this.props.markerBlock,onChange:function(){return e.props.helper("markerBlock",null)}})," ","Enable Fabric change? Marker already uploaded.",l.a.createElement("span",{className:"form-check-sign"},l.a.createElement("span",{className:"check"})))),l.a.createElement("br",null),l.a.createElement("div",{style:{maxWidth:"30%"}},l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:5},l.a.createElement("label",null,"Waste %")),l.a.createElement(z.a,{sm:7},l.a.createElement(J.a,{name:"fabricWaste",type:"number",min:"0",max:"100",step:"1",value:this.props.detail.pfabrics?this.props.detail.pfabrics:0,onChange:function(t){return e.props.helper("pfabrics",t.target.value)},disabled:!i.edit})))),l.a.createElement(_e.a,{size:"sm",className:"tablesorter"},l.a.createElement("thead",{className:"text-primary"},l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"34%"}},"DM"),l.a.createElement("th",{style:{width:"16%"}},"Style"),l.a.createElement("th",{style:{width:"7.5%"}},"P. White"),l.a.createElement("th",{style:{width:"7.5%"}},"P. Medium"),l.a.createElement("th",{style:{width:"7.5%"}},"P. Dark"),l.a.createElement("th",{style:{width:"7.5%"}},"Special"),l.a.createElement("th",{style:{width:"7.5%"}},"Bies Width"),l.a.createElement("th",{style:{width:"7.5%"}},"Bies Length"),l.a.createElement("th",{style:{width:"5%"}},i.edit&&l.a.createElement(R.a,{color:"info",className:"btn-simple",size:"sm",onClick:function(){return e.props.helper("newFabric",et)}},l.a.createElement("i",{className:"tim-icons icon-simple-add"}))))),l.a.createElement("tbody",null,this.props.detail.dms.map(function(o,s){var r=tt.filter(function(e){return e.value===o.fabricType}),c=o.id>0?{value:o.id,label:o.show_name}:null,d=!i.edit||!a,m=c&&n?n.find(function(e){return e.value===c.value}):null,u=m?m.data:{width:0},p=c?e.FixElementValue(parseFloat(o.Bwidth)*parseFloat(o.Blong)/(36*u.width*(u.pt?1:2))):0;return l.a.createElement("tr",{key:s,id:s},l.a.createElement("td",null,l.a.createElement(W.a,{menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:Ze,placeholder:"Choose DM",options:n,onChange:function(t){return e.props.helper("selectDM",e.buildNewLine(t,o,s))},value:c,isDisabled:d}),l.a.createElement("p",{style:t},"Updated at: ",o.dm_updated_at?function(e){var t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(t)}(o.dm_updated_at):"")),l.a.createElement("td",null,l.a.createElement(W.a,{menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:Ze,placeholder:"Choose placement",options:tt,value:r,onChange:function(t){return e.props.helper("selectDM",e.modLine(s,"fabricType",t.value,o))},isDisabled:d}),l.a.createElement("p",{style:t,className:"text-primary"},r[0].label)),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:"0",max:"999",step:"any",value:o.priceWhite,onChange:function(t){return e.props.helper("selectDM",e.modLine(s,"priceWhite",t.target.value,o))},disabled:!0}),l.a.createElement("p",{style:t,className:"text-primary"},e.FixElementValue(parseFloat(o.priceWhite)/parseFloat(o.yieldydslbs)))),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",min:"0",max:"999",step:"any",value:o.priceMedium,onChange:function(t){return e.props.helper("selectDM",e.modLine(s,"priceMedium",t.target.value,o))},disabled:!0}),l.a.createElement("p",{style:t,className:"text-primary"},e.FixElementValue(parseFloat(o.priceMedium)/parseFloat(o.yieldydslbs)))),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",value:o.priceDark,min:"0",max:"999",step:"any",onChange:function(t){return e.props.helper("selectDM",e.modLine(s,"priceDark",t.target.value,o))},disabled:!0}),l.a.createElement("p",{style:t,className:"text-primary"},e.FixElementValue(parseFloat(o.priceDark)/parseFloat(o.yieldydslbs)))),l.a.createElement("td",null,l.a.createElement(J.a,{type:"number",value:o.priceSpecial,min:"0",max:"999",step:"any",onChange:function(t){return e.props.helper("selectDM",e.modLine(s,"priceSpecial",t.target.value,o))},disabled:!0}),l.a.createElement("p",{style:t,className:"text-primary"},e.FixElementValue(parseFloat(o.priceSpecial)/parseFloat(o.yieldydslbs)))),l.a.createElement("td",null,l.a.createElement(J.a,{placeholder:"Width",type:"number",min:"0.00",max:"999",step:"any",value:o.Bwidth?o.Bwidth:0,onChange:function(t){return e.props.helper("selectDM",e.modLine(s,"Bwidth",t.target.value,o))},disabled:d}),l.a.createElement("p",{style:t,className:"text-primary"},"Yds*u:",p)),l.a.createElement("td",null,l.a.createElement(J.a,{placeholder:"Long",type:"number",min:"0.00",max:"999",step:"any",value:o.Blong?o.Blong:0,onChange:function(t){return e.props.helper("selectDM",e.modLine(s,"Blong",t.target.value,o))},disabled:d}),l.a.createElement("p",{style:t,className:"text-primary"},"Lbs*u:",e.FixElementValue(parseFloat(p)/parseFloat(o.yieldydslbs)))),l.a.createElement("td",null,i.edit&&l.a.createElement(R.a,{color:"warning",className:"btn-simple",size:"sm",onClick:function(){return e.props.helper("removeLine",s)}},l.a.createElement("i",{className:"tim-icons icon-simple-remove"}))))}))),l.a.createElement(_e.a,{size:"sm",className:"tablesorter"},l.a.createElement("tbody",null,this.props.detail.dms.map(function(t,a){var i="";t.id>0&&(n.find(function(e){return e.value===t.id})&&(i=n.find(function(e){return e.value===t.id}).data.pathToCertificate));return l.a.createElement("tr",{key:a},l.a.createElement("td",{style:{width:"5%"}},l.a.createElement(R.a,{onClick:function(t){t.preventDefault(),""!==i&&e.props.helper("downloadDM",i)},color:"danger",size:"sm",className:"btn-icon btn-link remove"},l.a.createElement("i",{className:"fa fa-download"}))),l.a.createElement("td",{style:{width:"45%"}},l.a.createElement("p",{className:"text-primary text-center"},t.show_name)),l.a.createElement("td",{style:{width:"7.5%"}},l.a.createElement("p",{className:"text-center"},e.calcCostWhite(t.priceWhite,t.lbsunit,t.wasted_flag,a).toFixed(2))),l.a.createElement("td",{style:{width:"7.5%"}},l.a.createElement("p",{className:"text-center"},e.calcCostMedium(t.priceMedium,t.lbsunit,t.wasted_flag,a).toFixed(2))),l.a.createElement("td",{style:{width:"7.5%"}},l.a.createElement("p",{className:"text-center"},e.calcCostDark(t.priceDark,t.lbsunit,t.wasted_flag,a).toFixed(2))),l.a.createElement("td",{style:{width:"7.5%"}},l.a.createElement("p",{className:"text-center",id:"specialC-".concat(a)},e.calcCostSpecial(t.priceSpecial,t.lbsunit,t.wasted_flag,a).toFixed(2))),l.a.createElement("td",{style:{width:"15%"}},l.a.createElement("p",null,"Add waste (+5%)"),l.a.createElement(J.a,{style:{marginLeft:"40px"},type:"checkbox",className:"check",checked:t.wasted_flag,onChange:function(t){e.props.updater(a)}})),l.a.createElement("td",{className:"text-center",style:{width:"20%"}},"\xa0"))}))),l.a.createElement(_e.a,{size:"sm",className:"tablesorter"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center",style:{width:"50%"}},"Fabrics Total (+",this.props.detail.pfabrics,"%)"),l.a.createElement("td",{className:"text-center",style:{width:"7.5%"}},"$",this.state.whitePrices.reduce(function(e,t){return e+t},0).toFixed(2)),l.a.createElement("td",{className:"text-center",style:{width:"7.5%"}},"$",this.state.mediumPrices.reduce(function(e,t){return e+t},0).toFixed(2)),l.a.createElement("td",{className:"text-center",style:{width:"7.5%"}},"$",this.state.darkPrices.reduce(function(e,t){return e+t},0).toFixed(2)),l.a.createElement("td",{className:"text-center",style:{width:"7.5%"}},"$",this.state.specialPrices.reduce(function(e,t){return e+t},0).toFixed(2)),l.a.createElement("td",{className:"text-center",style:{width:"20%"}},"\xa0")))))}}]),t}(l.a.Component),nt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).Access=JSON.parse(localStorage.getItem("Access")||"{}"),a.Role=localStorage.getItem("role")||"",a.Views={Consumption:!0,Fabrics:!0,Materials:!0,Manufacturing:!0,Logistics:!0,Embellishments:!0,Sumary:!0},a._isMounted=!1,a._loadingFabric=!1,a._loadingMaterial=!1,a._loadingEmbellishment=!1,a._loadedHeader=!1,a._loadedDetail=!1,a._loadedSketch=!1,a._loadedTemplates=!1,a._loadingSeasons=!1,a.userToken=localStorage.getItem("userToken")||"",a.valid_time=localStorage.getItem("valid_time")||"",a.user_id=localStorage.getItem("user_id")||"0",a.header={headers:{Authorization:"Token "+a.userToken,"Content-Type":"multipart/form-data"}},a.headerJson={headers:{Authorization:"Token "+a.userToken,"Content-Type":"application/json"}},a._Collapses=["fabrics","material","manufacturing","consumption","embellishment","Logistics","variables","comment"],a.logOut=function(){a._isMounted=!1,localStorage.clear(),a.componentWillUnmount(),a.props.history.push("/auth/login")},a.handleError=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown",n=e.response?e.response:{},l=e.message?e.message:"";if(console.log(n,l,t),void 0!==n.status&&401===n.status)a.logOut();else{var i="";if(void 0!==n.data)for(var o=0,s=Object.entries(n.data);o<s.length;o++){var r=s[o],c=Object(F.a)(r,2),d=c[0],m=c[1];i+="".concat(d,": ").concat(m,"\t")}else i=l;a.notify("tr","warning",i)}},a.notify=function(e,t,n){var i;i={place:e,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:t,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&a._isMounted&&a.refs.notificationAlert.notificationAlert(i)},a.toggleApprovalModal=function(){a.setState({ApprovalModal:!a.state.ApprovalModal})},a.getFabrics=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/fabrics/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadingFabric=!0,this._isMounted&&this.setState({fabricsCatalog:e.data})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"get fabrics")}.bind(Object(P.a)(a)))},a.getMaterials=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/materials/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadingMaterial=!0,this._isMounted&&this.setState({materialsCatalog:e.data})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"get materials")}.bind(Object(P.a)(a)))},a.costingHeader=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ae.a.get("https://api.vulcanoapparel.com/api/v1/costingHeader/"+e+"/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadedHeader=!0,this._isMounted&&this.setState({CostingHeader:e.data}),t&&(""!==e.data.pathToSketch&&this.costingSketch(e.data.pathToSketch),this.costingDetail(e.data.detail_id))}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.handleError(e,"costingHeader")}.bind(Object(P.a)(a)))},a.getSeasons=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/seasons/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadingSeasons=!0,this._isMounted&&this.setState({seasons:e.data})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e)}.bind(Object(P.a)(a)))},a.costingDetail=function(e){ae.a.get("https://api.vulcanoapparel.com/api/v1/costingDetail/"+e+"/",a.headerJson).then(function(e){this._loadedDetail=!0;var t=e.data;t.wcomplex=4.655===t.extra_time;var a=t.dms;localStorage.setItem("dms",JSON.stringify(t.dms));var n=t.materials,l=t.embellishments;a.sort(function(e,t){return e.line_id>t.line_id?1:t.line_id>e.line_id?-1:0}),n.sort(function(e,t){return e.line_id>t.line_id?1:t.line_id>e.line_id?-1:0}),l.sort(function(e,t){return e.line_id>t.line_id?1:t.line_id>e.line_id?-1:0}),t.dms=a,t.materials=n,t.embellishments=l,this.setState({detail:t,loading:!1})}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.handleError(e,"costingDetail")}.bind(Object(P.a)(a)))},a.costingSketch=function(e){e&&ge("https://api.vulcanoapparel.com/api/v1/costingHeader/download/?key="+e,{params:{key:e},headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadedSketch=!0,this.setState({pathToSketchData:e})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"downloadFileFromS3 mount")}.bind(Object(P.a)(a)))},a.BuildModule=function(){a.setState({loading:!0}),a.getFabrics(),a.getMaterials(),a.getSeasons(),a.costingHeader(a.props.location.state.costingData,!0)},a.buildDetailDB=function(){var e=a.state.detail,t=[];e.dms.map(function(e){return t.push({line_id:e.line_id,id:e.id,dm:e.dm,priceWhite:e.priceWhite,priceMedium:e.priceMedium,priceDark:e.priceDark,priceSpecial:e.priceSpecial,priceWhiteC:0,priceMediumC:0,priceDarkC:0,priceSpecialC:0,wasted_flag:e.waste_flag,Blong:a.FixElementValue(e.Blong),Bwidth:a.FixElementValue(e.Bwidth),fabricType:e.fabricType,weightBWashOriginal:a.FixElementValue(e.weightBWashOriginal),weightBWashCalculated:a.FixElementValue(e.weightBWashCalculated),dm_width:a.FixElementValue(e.dm_width),markerWidth:a.FixElementValue(e.markerWidth),dm_pt:e.dm_pt,yieldydslbs:a.FixElementValue(e.yieldydslbs),markerEfficiency:a.FixElementValue(e.markerEfficiency),markerLong:a.FixElementValue(e.markerLong),pieceByMarker:a.FixElementValue(e.pieceByMarker),lbsunit:a.FixElementValue(e.lbsunit),lbsunitwaste:a.FixElementValue(e.lbsunitwaste),sqinchunit:a.FixElementValue(e.sqinchunit),ydsunit:a.FixElementValue(e.ydsunit),bydspunit:a.FixElementValue(e.bydspunit),blbspunit:a.FixElementValue(e.blbspunit)}),e});var n=[];e.materials.map(function(e){return n.push({line_id:e.line_id,id:e.id,unitPrice:parseFloat(a.FixElementValue(e.unitPrice)),transport:parseFloat(a.FixElementValue(e.transport))}),e});var l=[];e.embellishments.map(function(e){return""!==e.name&&l.push({id:e.id,name:e.name,status:"A",price:e.price?e.price:0,margin:e.margin?parseFloat(e.margin):0,description:e.description?e.description:""}),e});var i=ke(a.state.detail);return e.style=a.state.CostingHeader.style,e.totalTime=i.totalTime,e.tpMaterials=i.pricesMaterials,e.tpFabricsWhite=i.sellingPrices.white,e.tpFabricsMedium=i.sellingPrices.medium,e.tpFabricsDark=i.sellingPrices.dark,e.tpFabricsSpecial=i.sellingPrices.special,e.pathToSAM=e.pathToSAM?e.pathToSAM:"...",e.sewing=i.sewing,e.cutting=i.cutting,e.cxm=i.cxm,e.decorationMargin=i.decorationMargin,e.broker=a.state.detail.broker,e.freightPrice=i.freightPrice,e.freightQuantity=i.freightQuantity,e.freightTotal=i.freightTotal,e.factoring=e.factoring?e.factoring:0,e.profitWhite=e.profitWhite?e.profitWhite:0,e.profitMedium=e.profitMedium?e.profitMedium:0,e.profitDark=e.profitDark?e.profitDark:0,e.profitSpecial=e.profitSpecial?e.profitSpecial:0,e.sell=e.sell?e.sell:0,e.pfabrics=e.pfabrics?e.pfabrics:0,e.pmaterials=e.pmaterials?e.pmaterials:0,e.pir=e.pir?e.pir:0,e.comment=e.comment?e.comment:"",e.dms=t,e.materials=n,e.embellishments=l,e.id=a.props.location.state.costingData,e.drawcore=e.drawcore?e.drawcore:"0/0",e.twillTape=e.twillTape?e.twillTape:"0/0",e.clearElastic=e.clearElastic?e.clearElastic:"0/0",e.lining=e.lining?e.lining:"0/0",e.selfFabricTape=e.selfFabricTape?e.selfFabricTape:"0/0",e.elastic=e.elastic?e.elastic:"0/0",e.waistbandElastic=e.waistbandElastic?e.waistbandElastic:"0/0",e.pathToSketch=a.state.CostingHeader.pathToSketch,e.colors=e.colors?e.colors:"",e.proto_status=a.state.CostingHeader.proto_status,e.season=a.state.CostingHeader.season.id,e.whodie=a.state.detail.whodie,e.wtshirt=a.state.detail.wtshirt,e.extra_time=a.state.detail.extra_time,delete e.created_at,delete e.updated_at,delete e.deletedFlag,e},a.handleSaveProto=function(e){e.preventDefault(),a.setState({loading:!0}),console.log(a.state.detail.dms);var t=a.buildDetailDB();console.log(t),ae.a.post("https://api.vulcanoapparel.com/api/v1/costingDetail/update_costing/",t,a.headerJson).then(function(){this.setState({loading:!1}),this.notify("tr","success","CostSheet updated."),this.componentDidMount()}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.notify("tr","warning","Cannot save costsheet"),this.componentDidMount()}.bind(Object(P.a)(a)))},a.newProto=function(){a.setState({loading:!0}),ve(a.props.location.state.costingData,1).then(function(){this.setState({loading:!1}),this.props.history.push("/admin/costing")}.bind(Object(P.a)(a))).catch(function(){this.setState({loading:!1}),this.notify("tr","warning","Cannot save new proto"),this.componentDidMount()})},a.handleSubmit=function(e){e.preventDefault()},a.sendtoApprove=function(){a.setState({loading:!0});var e=new FormData;e.append("flag",1),e.append("id",a.props.location.state.costingData),ae.a.post("https://api.vulcanoapparel.com/api/v1/administration/change_approve_status/",e,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.setState({loading:!1}),this.notify("tr","success","CostSheet updated."),this.toggleApprovalModal(),this.componentDidMount()}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.handleError(e)}.bind(Object(P.a)(a)))},a.freeCostSheet=Object(T.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.location||"Consulting"===a.Role&&"Telas"===a.Role){e.next=5;break}return t=a.props.location.state.costingData,e.next=4,ae.a.patch("https://api.vulcanoapparel.com/api/v1/costingHeader/"+t+"/",{updating_user:""},a.headerJson);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)})),a.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},a.handleDownloadFile=function(e,t){if(""===e||"..."===e||null===e)a.notify("tr","warning","No "+t+" has been uploaded.");else{ge("marker"===t||"pattern"===t||"SAM"===t?"https://api.vulcanoapparel.com/api/v1/costingDetail/download/?key="+e:"https://api.vulcanoapparel.com/api/v1/costingHeader/download/?key="+e,{params:{key:e},headers:{Authorization:"Token "+a.userToken}}).then(function(e){var a={file:e};window.open(a.file),this.notify("tr","success",t+" downloaded!")}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"download file")}.bind(Object(P.a)(a)))}},a.handleSketchChange=function(e,t){var n=new FormData;n.append("file",e),n.append("id",a.props.location.state.costingData),pe("https://api.vulcanoapparel.com/api/v1/costingHeader/post_sketch/",a.header,n,"file",["jpg","jpeg","png","JPG","PNG","JPEG"]).then(function(e){this.notify("tr","success","Sketch Updated."),this.setState({CostingHeader:Object(A.a)({},this.state.CostingHeader,{pathToSketch:e}),pathToSketchData:t})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"upload to s3 sketch")}.bind(Object(P.a)(a)))},a.CostingHeaderHelper=function(e,t){if("techPack"===e||"pattern"===e||"marker"===e||"SAM"===e?a.handleDownloadFile(t,e):"onSketchChange"===e&&a.handleSketchChange(t.file,t.data),"style"===e&&a.setState({CostingHeader:Object(A.a)({},a.state.CostingHeader,{style:t})}),"proto_status"===e&&a.setState({CostingHeader:Object(A.a)({},a.state.CostingHeader,{proto_status:t})}),"colors"===e&&a.setState({detail:Object(A.a)({},a.state.detail,{colors:t})}),"teckpack"===e){a.setState({loading:!0});var n=new FormData;n.append("file",t),n.append("id",a.state.CostingHeader.id),ae.a.post("https://api.vulcanoapparel.com/api/v1/costingHeader/post_techpack/",n,a.header).then(function(){this.notify("tr","success","CostSheet TechPack Changed"),this.componentDidMount()}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.handleError(e,"saveStyle")}.bind(Object(P.a)(a)))}if("saveStyle"===e&&(a.setState({loading:!0}),ae.a.patch("https://api.vulcanoapparel.com/api/v1/costingHeader/"+a.props.location.state.costingData+"/",{style:a.state.CostingHeader.style},a.headerJson).then(function(){this.setState({loading:!1}),this.notify("tr","success","CostSheet style Changed")}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.handleError(e,"saveStyle")}.bind(Object(P.a)(a)))),"season"===e){var l=a.state.CostingHeader;l.season={id:t.value,name:t.label},a.setState({CostingHeader:l})}if("detail"===e){var i=a.state.detail,o="0/0";t.key in i&&(o=i[t.key]);var s=o.split("/");s[t.position]=t.value,a.setState({detail:Object(A.a)({},a.state.detail,Object(j.a)({},t.key,s.join("/")))})}},a.fabricsHelper=function(e,t){if("pfabrics"===e){var n=a.state.detail;n.pfabrics=t,a.setState({detail:n})}if("selectDM"===e){var l=a.state.detail.dms;l[t.dmIndex]=t.line,a.setState({detail:Object(A.a)({},a.state.detail,{dms:l})})}if("newFabric"===e){var i=a.state.detail.dms;i.push(t),a.setState({detail:Object(A.a)({},a.state.detail,{dms:i})})}if("removeLine"===e){var o=a.state.detail.dms;delete o[t],a.setState({detail:Object(A.a)({},a.state.detail,{dms:o})})}("markerBlock"===e&&a.setState({MarkerBlock:!a.state.MarkerBlock}),"downloadDM"===e)&&ge("https://api.vulcanoapparel.com/api/v1/fabrics/download/?key="+t,{params:{key:t},headers:{Authorization:"Token "+a.userToken}}).then(function(e){var t={file:e};window.open(t.file),this.notify("tr","success","DM downloaded!")}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"cannot download file")}.bind(Object(P.a)(a)))},a.materialsHelper=function(e,t){var n=a.state.detail,l=a.state.detail.materials;"pmaterials"===e&&(n.pmaterials=t,a.setState({detail:n})),"selectMaterial"===e&&(l[t.materialIndex]=t.line,a.setState({detail:Object(A.a)({},a.state.detail,{materials:l})})),"newMaterial"===e&&(l.push(t),a.setState({detail:Object(A.a)({},a.state.detail,{materials:l})})),"removeLine"===e&&(delete l[t],a.setState({detail:Object(A.a)({},a.state.detail,{materials:l})}))},a.embellishmentHelper=function(e,t){var n=a.state.detail,l=a.state.detail.embellishments;"DecorationMargin"===e&&(n.decorationMargin=t,a.setState({detail:n})),"selectEmbellishment"===e&&(l[t.embellishmentIndex]=t.line,a.setState({detail:Object(A.a)({},a.state.detail,{embellishments:l})})),"newEmbellishment"===e&&(l.push(t),a.setState({detail:Object(A.a)({},a.state.detail,{embellishments:l})})),"removeLine"===e&&(delete l[t],a.setState({detail:Object(A.a)({},a.state.detail,{embellishments:l})}))},a.samsHelper=function(e,t){if("sam"===e&&a.setState({detail:Object(A.a)({},a.state.detail,{totalTime:t})}),"operation_flag"===e){var n="true"===t;a.setState({detail:Object(A.a)({},a.state.detail,{operation_flag:n})})}if("wash_flag"===e){var l=t.wash;"whodie"===l?a.setState({detail:Object(A.a)({},a.state.detail,{whodie:!a.state.detail.whodie,wcomplex:!1,extra_time:a.state.detail.whodie?0:3.8,wtshirt:!1})}):"wtshirt"===l?a.setState({detail:Object(A.a)({},a.state.detail,{whodie:!1,wcomplex:!1,wtshirt:!a.state.detail.wtshirt,extra_time:a.state.detail.wtshirt?0:2.945})}):"wcomplex"===l&&a.setState({detail:Object(A.a)({},a.state.detail,{whodie:!1,wtshirt:!1,wcomplex:!a.state.detail.wcomplex,extra_time:a.state.detail.wcomplex?0:4.655})})}},a.manufacturingHelper=function(e,t){var n=a.state.detail;if("cxm"===e){var l=t*n.totalTime;a.setState({detail:Object(A.a)({},a.state.detail,{cxm:t,sewing:l})})}"cutting"===e&&a.setState({detail:Object(A.a)({},a.state.detail,{cutting:t})}),"pir"===e&&a.setState({detail:Object(A.a)({},a.state.detail,{pir:t})})},a.helperFOB=function(e,t){""!==e&&a.setState({detail:Object(A.a)({},a.state.detail,Object(j.a)({},e,t))})},a.helperTotalFOB=function(e,t){""!==e&&a.setState({detail:Object(A.a)({},a.state.detail,Object(j.a)({},e,t))})},a.weightBWashCalculatedHandle=function(e,t,n,l){var i=document.getElementById(e),o=document.getElementById(t);if(null!==i.value&&void 0!==i.value&&""!==i.value){var s=a.state.detail.dms;s[n][l]=1*i.value;var r=s[n].weightBWashOriginal/33.9057475;s[n].weightBWashCalculated=isNaN(r)?0:r,a.setState({detail:Object(A.a)({},a.state.detail,{dms:s})}),o.value=a.state.detail.dms[n].weightBWashOriginal}},a.yieldydslbsHandle=function(e,t,n,l){var i=document.getElementById(e),o=document.getElementById(t);if(null!==i.value&&void 0!==i.value&&""!==i.value){var s=a.state.detail.dms;s[n][l]=1*i.value;var r=s[n],c=s[n].dm_pt?1:2,d=576/(r.weightBWashCalculated*r.dm_width*c);s[n].yieldydslbs=isNaN(d)?0:d,a.setState({detail:Object(A.a)({},a.state.detail,{dms:s})}),o.value=a.state.detail.dms[n].yieldydslbs}},a.lbsunitHandle=function(e,t,n,l){var i=document.getElementById(e),o=document.getElementById(t);if(null!==i.value&&void 0!==i.value&&""!==i.value){var s=a.state.detail.dms;s[n][l]=1*i.value;var r=s[n],c=r.dm_pt?1:2,d=r.Bwidth/36*(1/(r.dm_width*c))*r.Blong/r.yieldydslbs,m=r.markerLong/r.pieceByMarker/r.yieldydslbs+d;s[n].lbsunit=isNaN(m)?0:m,a.setState({detail:Object(A.a)({},a.state.detail,{dms:s})}),o.value=a.state.detail.dms[n].lbsunit}},a.lbsunitwasteHandle=function(e,t,n,l){var i=document.getElementById(e),o=document.getElementById(t);if(null!==i.value&&void 0!==i.value&&""!==i.value){var s=a.state.detail.dms;s[n][l]=1*i.value;var r=1.05*s[n].lbsunit;s[n].lbsunitwaste=isNaN(r)?0:r,a.setState({detail:Object(A.a)({},a.state.detail,{dms:s})}),o.value=a.state.detail.dms[n].lbsunitwaste}},a.sqinchunitHandle=function(e,t,n,l){var i=document.getElementById(e),o=document.getElementById(t);if(null!==i.value&&void 0!==i.value&&""!==i.value){var s=a.state.detail.dms;s[n][l]=1*i.value;var r=s[n],c=r.markerEfficiency/100,d=r.markerWidth*r.markerLong*36*c/r.pieceByMarker;s[n].sqinchunit=isNaN(d)?0:d,a.setState({detail:Object(A.a)({},a.state.detail,{dms:s})}),o.value=a.state.detail.dms[n].sqinchunit}},a.ydsunitHandle=function(e,t,n,l,i){var o=document.getElementById(e),s=document.getElementById(t);if(null!==o.value&&void 0!==o.value&&""!==o.value){var r=a.state.detail.dms;r[n][l]=1*o.value;var c=r[n],d=c.yieldydslbs*c.lbsunitwaste;r[n].ydsunit=isNaN(d)?0:d,a.setState({detail:Object(A.a)({},a.state.detail,{dms:r})}),s.value=a.state.detail.dms[n].ydsunit}},a.addWaste=function(e){a.state.detail.dms[e].wasted_flag=!a.state.detail.dms[e].wasted_flag,a.setState({detail:a.state.detail})},a.state={CostingHeaderId:0,CostingHeader:{},openedCollapses:a._Collapses,fabricsCatalog:[],materialsCatalog:[],embellishmentCatalog:[],fabricStyleCatalog:[],fabrics:[],materials:[],embellishments:[],sumWhite:0,sumMedium:0,sumDark:0,sumSpecial:0,sumMaterials:0,detail:{},embellishment:0,marginDecorations:0,_dataIsValid:!1,Reload:!1,totalSumWhite:0,totalSumMedium:0,totalSumDark:0,totalSumSpecial:0,pathToSketchData:"",ApprovalModal:!1,MarkerBlock:!1,loading:!1,seasons:null},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"FixElementValue",value:function(e){return null===e||void 0===e||""===e||isNaN(e)?"0":e}}]),Object(p.a)(t,[{key:"beforeunload",value:function(e){this.props.dataUnsaved&&(e.preventDefault(),e.returnValue=!0)}},{key:"componentDidMount",value:function(){this._isMounted=!0,void 0!==this.props.location.state?this.BuildModule():this.props.history.push("/admin/costing"),"Telas"===this.Role?this.Views=Object(A.a)({},this.Views,{Materials:!1,Manufacturing:!1,Logistics:!1,Embellishments:!0,Sumary:!1}):"Ingenieria"===this.Role&&(this.Views=Object(A.a)({},this.Views,{Consumption:!1,Fabrics:!1,Materials:!1,Manufacturing:!0,Logistics:!1,Embellishments:!1,Sumary:!1}))}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.beforeunload.bind(this)),this.freeCostSheet().then(function(e){this._isMounted=!1,this._loadingFabric=!1,this._loadingMaterial=!1,this._loadingEmbellishment=!1}.bind(this))}},{key:"render",value:function(){var e=this;if(!1!==this.state.Reload)return l.a.createElement(c.a,null,l.a.createElement(m.a,{push:!0,to:{pathname:"/admin/costing"}}));var t="bg-ligh"===this.checkPageMode().bg?"inverted":"",a={},n={};this._loadedDetail&&(a=ke(this.state.detail),n={pathToPattern:this.state.detail.pathToPattern,pathToMarker:this.state.detail.pathToMarker,pathToTechpack:this.state.CostingHeader.pathToTechpack,pathToSAM:this.state.detail.pathToSAM,pathToSketch:this.state.CostingHeader.PathToSketch});var i=[];return this.Views.Consumption&&this._loadedDetail&&this._loadingFabric&&i.push({collapse:"consumption",title:"Consumption",component:l.a.createElement(ze,{fabricsCatalog:this.state.fabricsCatalog,fabrics:this.state.detail.dms,weightBWashCalculatedHandle:this.weightBWashCalculatedHandle,yieldydslbsHandle:this.yieldydslbsHandle,lbsunitHandle:this.lbsunitHandle,lbsunitwasteHandle:this.lbsunitwasteHandle,sqinchunitHandle:this.sqinchunitHandle,ydsunitHandle:function(){return e.ydsunitHandle()},quickCosting:!1})}),this.Views.Fabrics&&this._loadedDetail&&this._loadingFabric&&this._loadedHeader&&i.push({collapse:"fabrics",title:"Fabrics",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(at,{fabricsCatalog:this.state.fabricsCatalog,detail:this.state.detail,header:this.state.CostingHeader,markerBlock:this.state.MarkerBlock,calcs:a,quickCosting:!1,helper:this.fabricsHelper,updater:this.addWaste}))}),this.Views.Materials&&this._loadingMaterial&&this._loadedDetail&&i.push({collapse:"materials",title:"Materials",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,{materialsCatalog:this.state.materialsCatalog,detail:this.state.detail,header:this.state.CostingHeader,calcs:a,quickCosting:!1,helper:this.materialsHelper}))}),this.Views.Manufacturing&&this._loadedDetail&&i.push({collapse:"manufacturing",title:"Manufacturing Costs",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(_e.a,{className:"tablesorter"},l.a.createElement("tbody",null,l.a.createElement(Re,{helper:this.samsHelper,detail:this.state.detail,quickCost:!1,header:this.state.CostingHeader}),l.a.createElement(He,{detail:this.state.detail,calcs:a,quickCost:!1,helper:this.manufacturingHelper,header:this.state.CostingHeader}))))}),this.Views.Logistics&&this._loadedDetail&&i.push({collapse:"logistics",title:"Logistics",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(Be,{detail:this.state.detail,calcs:a,helper:this.helperFOB,header:this.state.CostingHeader}),l.a.createElement(Ue,{detail:this.state.detail,calcs:a,helper:this.helperTotalFOB,header:this.state.CostingHeader}))}),this.Views.Embellishments&&this._loadedDetail&&i.push({collapse:"embellishments",title:"EMBELLISHMENTS/OTHERS",component:l.a.createElement(Ae,{detail:this.state.detail,header:this.state.CostingHeader,helper:this.embellishmentHelper,totalEmbellishments:a.totalEmbellishments.toFixed(2)})}),this.Views.Sumary&&this._loadedDetail&&i.push({collapse:"comment",title:"COMMENT",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(Ke,{detail:this.state.detail,CostingHeaderHelper:this.CostingHeaderHelper,Access:this.Access,header:this.state.CostingHeader}),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleText",sm:4},"Comments: "),l.a.createElement(z.a,{sm:8},l.a.createElement(J.a,{type:"textarea",height:100,value:this.state.detail.comment?this.state.detail.comment:"",onChange:function(t){e.setState({detail:Object(A.a)({},e.state.detail,{comment:t.target.value})})},disabled:"D"===this.state.CostingHeader||!this.Access.quotation.edit,style:{resize:"vertical",Height:"100% !important"}}))))}),this.Views.Sumary&&this._loadedDetail&&i.push({collapse:"sumary",title:"SUMMARY",component:l.a.createElement(l.a.Fragment,null,l.a.createElement(De,{sumWhite:a.sellingPrices.white,sumMedium:a.sellingPrices.medium,sumDark:a.sellingPrices.dark,sumSpecial:a.sellingPrices.special}),l.a.createElement(k.a,null,l.a.createElement(z.a,null,this.Access.quotation.edit&&l.a.createElement(R.a,{className:"btn-fill",color:"success",type:"button",onClick:function(t){return e.handleSaveProto(t)}},"Save Changes")),l.a.createElement(z.a,null,this.Access.quotation.view&&("admin"===this.Role||"Consulting"===this.Role||"Approve Costings"===this.Role||"Account Manager"===this.Role||"Account Combos"===this.Role||"Costing Manager"===this.Role||"Costing Junior"===this.Role&&"RALPH LAUREN"===this.state.CostingHeader.client.name||"Costing Junior"===this.Role&&"LACOSTE"===this.state.CostingHeader.client.name)&&l.a.createElement(R.a,{className:"btn-fill",color:"info",type:"button",onClick:function(t){t.preventDefault(),window.open("https://api.vulcanoapparel.com/api/v1/get_costing/?id="+e.props.location.state.costingData)}},"Save as Excel")),l.a.createElement(z.a,null,this.Access.quotation.edit&&l.a.createElement(R.a,{className:"btn-fill",color:"danger",type:"button",onClick:function(t){t.preventDefault(),e.toggleApprovalModal()}},"Send for Approval")),l.a.createElement(z.a,null,l.a.createElement(R.a,{className:"btn-fill",color:"info",type:"button",onClick:function(){be(e.state.detail,a,e.state.CostingHeader.PathToSketch,{costSheet:e.props.location.state.costingData,clientName:e.state.CostingHeader.client.name,clientAbbreviation:e.state.CostingHeader.client.abbreviation,season:e.state.CostingHeader.season.name,style:e.state.CostingHeader.style})}},"CostSheet"))))}),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:this.state.loading?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(t," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement(Oe.a,{message:"Your changes will not be saved. Are you sure you want to leave?"}),l.a.createElement(L.a,{isOpen:this.state.ApprovalModal,toggle:this.toggleApprovalModal},l.a.createElement("div",{className:"modal-header"},l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.toggleApprovalModal},l.a.createElement("i",{className:"tim-icons icon-simple-remove"})),l.a.createElement("h5",{className:"modal-title"},"Send for approval to manager?")),l.a.createElement(H.a,null,l.a.createElement("p",null,"approve?")),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleApprovalModal},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(t){t.preventDefault(),e.sendtoApprove()}},"Send to Approve"))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement("div",{className:"content"},this._loadedHeader&&this._loadedDetail&&l.a.createElement(Le,{costingHeader:this.state.CostingHeader,detail:this.state.detail,quickCost:!1,documents:n,sketchData:this.state.pathToSketchData,helper:this.CostingHeaderHelper,seasons:this.state.seasons,header:this.state.CostingHeader}),"Auditoria Externa"===this.Role?l.a.createElement(l.a.Fragment,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(V.a,{onSubmit:function(t){return e.handleSubmit(t,a.sellingPrices)}},i.length>0?l.a.createElement(Xe,{tabs:i}):null))))}}]),t}(l.a.Component);function lt(e){var t,a=Object(Y.a)({},e),n=JSON.parse(localStorage.getItem("Access")||"{}"),i={input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}},o=a.dataForm,s=o.composition?o.composition.split("/"):[0,0,0,0,0,0],r=0;function c(e){return s[e]?s[e]:0}function d(e,t){var n=s;n[e]=t.target.value;var l=n.join("/");a.helper({formdata:{key:"composition",value:l}})}return s.map(function(e){return r+=parseFloat(e||0),e}),l.a.createElement(v.a,null,l.a.createElement(_.a,null,l.a.createElement(C.a,{tag:"h4"},l.a.createElement("b",null,"New Fabrics"))),l.a.createElement(y.a,null,l.a.createElement(V.a,{onSubmit:function(e){return function(e){e.preventDefault(),100===r?"object"===typeof o.fabric_type&&"object"===typeof o.season&&"object"===typeof o.client&&"object"===typeof o.pt?a.helper({submit:!0}):a.helper({error:"Please Choose fabric name, season, client and plies/tubular"}):a.helper({error:"Fabric Composition needs to be 100%"})}(e)}},l.a.createElement(k.a,null,l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"dm"},"DM"),l.a.createElement(J.a,{id:"dm",placeholder:"DM",type:"text",value:o.dm?o.dm:"",required:!0,onChange:function(e){return a.helper({formdata:{key:"dm",value:e.target.value}})},disabled:!n.fabrics.edit})),l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"fabric_type"},"Fabric Name"),l.a.createElement(W.a,{id:"fabric_type",required:"required",styles:i,value:o.fabric_type?o.fabric_type:null,onChange:function(e){a.helper({formdata:{key:"fabric_type",value:e}})},options:a.fabricNames,placeholder:"Choose fabric name",isDisabled:!n.fabrics.edit}))),l.a.createElement(k.a,null,l.a.createElement(z.a,{md:"4"},l.a.createElement("label",{htmlFor:"weight"},"Weight"),l.a.createElement(J.a,{id:"weight",placeholder:"weight",type:"number",value:o.weight?o.weight:"",required:!0,onChange:function(e){return a.helper({formdata:{key:"weight",value:e.target.value}})},disabled:!n.fabrics.edit})),l.a.createElement(z.a,{md:"4"},l.a.createElement("label",{htmlFor:"width"},"Width"),l.a.createElement(J.a,{id:"width",placeholder:"width",type:"number",value:o.width?o.width:"",required:!0,onChange:function(e){return a.helper({formdata:{key:"width",value:e.target.value}})},disabled:!n.fabrics.edit})),l.a.createElement(z.a,{md:"4"},l.a.createElement("label",{htmlFor:"widthMark"},"Width Mark"),l.a.createElement(J.a,{id:"widthMark",placeholder:"widthMark",type:"number",value:o.widthMark?o.widthMark:"",required:!0,onChange:function(e){return a.helper({formdata:{key:"widthMark",value:e.target.value}})},disabled:!n.fabrics.edit}))),l.a.createElement(k.a,null,l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"priceWhite"},"Price White"),l.a.createElement(J.a,{id:"priceWhite",placeholder:"priceWhite",type:"number",value:o.priceWhite?o.priceWhite:"",required:!0,onChange:function(e){return a.helper({formdata:{key:"priceWhite",value:e.target.value}})},disabled:!n.fabrics.edit})),l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"priceMedium"},"Price Medium"),l.a.createElement(J.a,{id:"priceMedium",placeholder:"priceMedium",type:"number",value:o.priceMedium?o.priceMedium:"",required:!0,onChange:function(e){return a.helper({formdata:{key:"priceMedium",value:e.target.value}})},disabled:!n.fabrics.edit}))),l.a.createElement(k.a,null,l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"priceDark"},"Price Dark"),l.a.createElement(J.a,{id:"priceDark",placeholder:"priceDark",type:"number",value:o.priceDark?o.priceDark:"",required:!0,onChange:function(e){return a.helper({formdata:{key:"priceDark",value:e.target.value}})},disabled:!n.fabrics.edit})),l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"priceSpecial"},"Price Special"),l.a.createElement(J.a,{id:"priceSpecial",placeholder:"priceSpecial",type:"number",value:o.priceSpecial?o.priceSpecial:"",required:!0,onChange:function(e){return a.helper({formdata:{key:"priceSpecial",value:e.target.value}})},disabled:!n.fabrics.edit}))),l.a.createElement(k.a,null,l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"season"},"Season"),l.a.createElement("div",{style:{marginBottom:"20px"}},l.a.createElement(W.a,{id:"season",required:!0,styles:i,value:o.season?o.season:null,onChange:function(e){a.helper({formdata:{key:"season",value:e}})},options:a.seasons,placeholder:"Choose Season",isDisabled:!n.fabrics.edit}))),l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"client"},"Client"),l.a.createElement(W.a,{id:"client",required:!0,styles:i,value:o.client?o.client:null,onChange:function(e){a.helper({formdata:{key:"client",value:e}})},options:a.clients,placeholder:"Choose Client",isDisabled:!n.fabrics.edit}))),l.a.createElement(k.a,null,l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"pt"},"Plies/Tubular"),l.a.createElement("div",{style:{marginBottom:"20px"}},l.a.createElement(W.a,{id:"pt",required:!0,styles:i,value:o.pt?o.pt:null,onChange:function(e){a.helper({formdata:{key:"pt",value:e}})},options:[{value:!0,label:"Plies"},{value:!1,label:"Tubular"}],placeholder:"Choose type",isDisabled:!n.fabrics.edit}))),l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"pathToCertificate"},"Upload DM (pdf, Doc, Docx)"),l.a.createElement(q.a,{id:"formGroup_pathToCertificate"},l.a.createElement(R.a,{className:"btn-simple btn btn-info btn-sm"},l.a.createElement("input",{type:"file",onChange:function(e){e.preventDefault(),a.helper({certificate:void 0!==e.target.files[0]?e.target.files[0]:null,formdata:{key:"pathToCertificate",value:void 0!==e.target.files[0]?"certificate/"+e.target.files[0].name:null}})},name:"pathToCertificate",id:"input_pathToCertificate",disabled:!n.fabrics.edit}),l.a.createElement("i",{className:"tim-icons icon-cloud-upload-94"}))," ",l.a.createElement("label",null,o.pathToCertificate)))),l.a.createElement("fieldset",{style:{padding:"10px",border:"1px solid black",marginBottom:"20px"}},l.a.createElement("legend",{style:{width:"auto"}},"Composition:"),l.a.createElement(k.a,null,l.a.createElement(z.a,{md:"4"},l.a.createElement("label",{htmlFor:"POLYESTER"},"POLYESTER"),l.a.createElement(J.a,{id:"POLYESTER",placeholder:"POLYESTER",type:"number",value:c(0),required:!0,onChange:function(e){return d(0,e)},disabled:!n.fabrics.edit})),l.a.createElement(z.a,{md:"4"},l.a.createElement("label",{htmlFor:"RAYON"},"RAYON"),l.a.createElement(J.a,{id:"RAYON",placeholder:"RAYON",type:"number",value:c(1),required:!0,onChange:function(e){return d(1,e)},disabled:!n.fabrics.edit})),l.a.createElement(z.a,{md:"4"},l.a.createElement("label",{htmlFor:"COTTON"},"COTTON"),l.a.createElement(J.a,{id:"COTTON",placeholder:"COTTON",type:"number",value:c(2),required:!0,onChange:function(e){return d(2,e)},disabled:!n.fabrics.edit})),l.a.createElement(z.a,{md:"4"},l.a.createElement("label",{htmlFor:"SPANDEX"},"SPANDEX"),l.a.createElement(J.a,{id:"SPANDEX",placeholder:"SPANDEX",type:"number",value:c(3),required:!0,onChange:function(e){return d(3,e)},disabled:!n.fabrics.edit})),l.a.createElement(z.a,{md:"4"},l.a.createElement("label",{htmlFor:"RECYCLED POLYESTER"},"RECYCLED POLYESTER"),l.a.createElement(J.a,{id:"RECYCLED POLYESTER",placeholder:"RECYCLED POLYESTER",type:"number",value:c(4),required:!0,onChange:function(e){return d(4,e)},disabled:!n.fabrics.edit})),l.a.createElement(z.a,{md:"4"},l.a.createElement("label",{htmlFor:"NYLON"},"NYLON"),l.a.createElement(J.a,{id:"NYLON",placeholder:"NYLON",type:"number",value:c(5),required:!0,onChange:function(e){return d(5,e)},disabled:!n.fabrics.edit})))),l.a.createElement("fieldset",{style:{padding:"10px",border:"1px solid black",marginBottom:"20px"}},l.a.createElement("legend",{style:{width:"auto"}},"Yarns:"),l.a.createElement(k.a,null,l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"yarn1"},"Yarn 1"),l.a.createElement(J.a,{id:"yarn1",placeholder:"yarn1",type:"text",value:o.yarn1?o.yarn1:"",onChange:function(e){return a.helper({formdata:{key:"yarn1",value:e.target.value}})},disabled:!n.fabrics.edit})),l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"yarn2"},"Yarn 2"),l.a.createElement(J.a,{id:"yarn2",placeholder:"yarn2",type:"text",value:o.yarn2?o.yarn2:"",onChange:function(e){return a.helper({formdata:{key:"yarn2",value:e.target.value}})},disabled:!n.fabrics.edit}))),l.a.createElement(k.a,null,l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"yarn3"},"Yarn 3"),l.a.createElement(J.a,{id:"yarn3",placeholder:"yarn3",type:"text",value:o.yarn3?o.yarn3:"",onChange:function(e){return a.helper({formdata:{key:"yarn3",value:e.target.value}})},disabled:!n.fabrics.edit})),l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"yarn4"},"Yarn 4"),l.a.createElement(J.a,{id:"yarn4",placeholder:"yarn4",type:"text",value:o.yarn4?o.yarn4:"",onChange:function(e){return a.helper({formdata:{key:"yarn4",value:e.target.value}})},disabled:!n.fabrics.edit})))),l.a.createElement(k.a,null,l.a.createElement(z.a,{className:"px-md-1",md:"6"},n.fabrics.edit&&l.a.createElement(q.a,null,("insert"===(t=a.action)?n.fabrics.create:"update"===t?n.fabrics.edit:void 0)&&l.a.createElement(R.a,{className:"btn-fill",color:"primary",name:"insert",type:"submit"},a.actionText)," ","update"===a.action?l.a.createElement(R.a,{type:"button",onClick:function(e){e.preventDefault(),a.helper({resetForm:!0})}},"New Fabric"):l.a.createElement(l.a.Fragment,null)))))))}var it=[];var ot=function(e){var t=Object(Y.a)({},e),a=JSON.parse(localStorage.getItem("Access")||"{}");return it=t.dataTable.map(function(e,n){return{id:n,codigo:e.id,dm:e.dm,show_name:e.show_name,season:e.season.name,client:e.client.name,rowData:e,actions:l.a.createElement("div",{className:"actions-right"},l.a.createElement(R.a,{onClick:function(a){var n;a.preventDefault(),n=e,t.editFabric(n)},color:"warning",size:"sm",className:"btn-icon btn-link edit"},l.a.createElement("i",{className:"fa fa-edit"}))," ",a.fabrics.delete&&l.a.createElement(R.a,{onClick:function(a){var n;a.preventDefault(),n=e,t.removeFabric(n)},color:"danger",size:"sm",className:"btn-icon btn-link remove"},l.a.createElement("i",{className:"fa fa-times"})))}}),l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,null,l.a.createElement(_.a,null,l.a.createElement(C.a,{tag:"h4"},"Historico de Telas")),l.a.createElement(y.a,null,l.a.createElement(X.a,{data:it,filterable:!0,columns:[{Header:"Codigo",accessor:"codigo"},{Header:"DM",accessor:"dm"},{Header:"nombre Tela",accessor:"show_name"},{Header:"Temporada",accessor:"season"},{Header:"Cliente",accessor:"client"},{Header:"Acciones",accessor:"actions",sortable:!1,filterable:!1}],defaultPageSize:t.itemsPages,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"}))))},st=a(387),rt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e)))._isMounted=!1,a.userToken=localStorage.getItem("userToken")||"",a.valid_time=localStorage.getItem("valid_time")||"",a.Access=JSON.parse(localStorage.getItem("Access")||"{}"),a.user_id=localStorage.getItem("user_id")||"0",a._fabricStory=!1,a._fabricType=!1,a.logOut=function(){a._isMounted=!1,localStorage.clear(),a.componentWillUnmount(),a.props.history.push("/auth/login")},a.handleError=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.response?e.response:{},n=e.message?e.message:"";if(void 0!==t.status&&401===t.status)a.logOut();else{var l="";if(void 0!==t.data)for(var i=0,o=Object.entries(t.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;a.notify("tr","warning",l)}},a.collapsesToggle=function(e){a.state.openedCollapses.includes(e)?a._isMounted&&a.setState({openedCollapses:[]}):a._isMounted&&a.setState({openedCollapses:[e]})},a.toggleDeleteModal=function(){a._isMounted&&a.setState({deleteModal:!a.state.deleteModal})},a.checkPageMode=function(){var e,t,a;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="",a="modal-white";break;default:e="bg-dark",t="text-primary",a="modal-black"}return{bg:e,hc:t,mc:a}},a.notify=function(e,t,n){var i;i={place:e,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:t,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&a._isMounted&&a.refs.notificationAlert.notificationAlert(i)},a.handleEditFabric=function(e){a.collapsesToggle("new");var t=a.state.formdata,n=st.find(function(t){return t.value===e.fabric_type_abbreviation}),l=a.state.SeasonsOps.find(function(t){return t.value===e.season.id}),i=a.state.clientOptions.find(function(t){return t.value===e.client.id});for(var o in e)t[o]=e[o];t.fabric_type=n,t.season=l,t.client=i,t.pt=t.pt?{value:!0,label:"Plies"}:{value:!1,label:"Tubular"},a._isMounted&&a.setState({formdata:t,action:"update",actionText:"Update"})},a.handleRemoveFabric=function(e){a._isMounted&&a.setState({toDeleteDM:e}),a.toggleDeleteModal()},a.removeSelectedFabric=function(){a._isMounted&&a.setState({loading:!0}),ae.a.delete("https://api.vulcanoapparel.com/api/v1/fabrics/"+a.state.toDeleteDM.id+"/",{headers:{Authorization:"Token "+a.userToken}}).then(function(){this._isMounted&&this.setState({formdata:{},action:"insert",actionText:"Insert",toDeleteDM:{dm:""},loading:!1}),this.toggleDeleteModal(),this.componentDidMount(),this.notify("tr","success","Fabric disabled!")}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"delete fabrics"),this._isMounted&&this.setState({loading:!1})}.bind(Object(P.a)(a)))},a.fabricHistory=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/fabrics/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._fabricStory=!0,this._isMounted&&this.setState({dataTable:e.data})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"fabrics history")}.bind(Object(P.a)(a)))},a.fabricTypes=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/fabric_types/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._fabricType=!0,this._isMounted&&this.setState({fabricsTypes:e.data.map(function(e){return{value:e.abbreviation,label:e.name}})})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"fabrics types")}.bind(Object(P.a)(a)))},a.seasonsHistory=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/seasons/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){var t=[];e.data.map(function(e){return t.push({value:e.id,label:e.name})}),this._isMounted&&this.setState({SeasonsOps:t})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"season history")}.bind(Object(P.a)(a)))},a.getClients=function(){var e=[];ae.a.get("https://api.vulcanoapparel.com/api/v1/clients/",{headers:{Authorization:"Token "+a.userToken}}).then(function(t){t.data.map(function(t){return e.push({value:t.id,label:t.name}),t}),this._isMounted&&this.setState({clientOptions:e})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"get clients")}.bind(Object(P.a)(a)))},a.formHelper=function(e){if("certificate"in e){var t=e.certificate;a.setState({certificate:t})}"formdata"in e&&a.setState({formdata:Object(A.a)({},a.state.formdata,Object(j.a)({},e.formdata.key,e.formdata.value))}),"submit"in e&&(a._isMounted&&a.setState({loading:!0}),"update"===a.state.action?null!==a.state.certificate?a.addCertificate(a.state.certificate,a.state.formdata.id).then(function(){this.patchFabric(this.formToDB(this.state.formdata))}.bind(Object(P.a)(a))):a.patchFabric(a.formToDB(a.state.formdata)):"insert"===a.state.action&&a.postFabric(a.formToDB(a.state.formdata))),"error"in e&&a.notify("tr","warning",e.error),"resetForm"in e&&a._isMounted&&a.setState({formdata:{},action:"insert",actionText:"Insert",certificate:null})},a.addCertificate=function(){var e=Object(T.a)(N.a.mark(function e(t,n){var l;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(l=new FormData).append("file",t),l.append("id",n),e.next=5,pe("https://api.vulcanoapparel.com/api/v1/fabrics/post_certificate/",{headers:{Authorization:"Token "+a.userToken,"Content-Type":"multipart/form-data"}},l,"file",["pdf","doc","docx"]);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.postFabric=function(e){e.created_by=a.user_id,ae.a.post("https://api.vulcanoapparel.com/api/v1/fabrics/",e,{headers:{Authorization:"Token "+a.userToken}}).then(function(e){null===this.state.certificate?this.notify("tr","warning","Dm certificate missing."):this.addCertificate(this.state.certificate,e.data.id).then(function(){this._isMounted&&this.setState({formdata:{},action:"insert",actionText:"Insert",loading:!1,certificate:null}),this.componentDidMount(),this.notify("tr","success","Fabric added!")}.bind(this))}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"post fabric"),this._isMounted&&this.setState({loading:!1,certificate:null})}.bind(Object(P.a)(a)))},a.patchFabric=function(e){var t=e.id;delete e.id,delete e.created_at,delete e.updated_at,delete e.show_name,ae.a.patch("https://api.vulcanoapparel.com/api/v1/fabrics/"+t+"/",e,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this._isMounted&&this.setState({formdata:{},action:"insert",actionText:"Insert",loading:!1,certificate:null}),this.componentDidMount(),this.notify("tr","success","Fabric updated!"),this.updateCostingSheet(t)}.bind(Object(P.a)(a))).catch(function(e){this._isMounted&&this.setState({loading:!1,certificate:null}),this.componentDidMount(),this.handleError(e,"patch fabric")}.bind(Object(P.a)(a)))},a.updateCostingSheet=function(e){var t=new FormData;t.append("fabric",e),ae.a.post("https://api.vulcanoapparel.com/api/v1/fabrics/change_price_of_fabric/",t,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.componentDidMount(),this.notify("tr","success","Cost Sheets Updated!")}.bind(Object(P.a)(a))).catch(function(e){this.componentDidMount(),this.handleError(e,"patch fabric")}.bind(Object(P.a)(a)))},a.formToDB=function(e){return Object(A.a)({},e,{fabric_type:e.fabric_type.value,pt:e.pt.value,season:e.season.value,client:e.client.value})},a.state={action:"insert",actionText:"Insert",itemsPages:5,dataTable:[],formdata:{},openedCollapses:["new"],SeasonsOps:[],StylesOps:[],clientOptions:[],deleteModal:!1,toDeleteDM:{dm:""},loading:!0,certificate:null,fabricsTypes:{}},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.seasonsHistory(),this.fabricHistory(),this.getClients(),this.fabricTypes()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidUpdate",value:function(){!0===this._fabricStory&&!0===this.state.loading&&this._isMounted&&this.setState({loading:!1})}},{key:"render",value:function(){var e=this,t="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:this.state.loading?{display:"flex"}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(t," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"content"},l.a.createElement(L.a,{isOpen:this.state.deleteModal,toggle:this.toggleDeleteModal,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content-center",toggle:this.toggleDeleteModal},"Disable Fabric."),l.a.createElement(H.a,null,l.a.createElement("h6",{className:"text-danger"},"Warning!"),l.a.createElement("p",null,"By disabling this fabric: ",l.a.createElement("b",{className:"text-warning"},this.state.toDeleteDM.dm),"\xa0 you won't be able to use it in future costings. Contact the system administrator to recover a fabric.")),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleDeleteModal},"Close"),l.a.createElement(R.a,{color:"primary",onClick:this.removeSelectedFabric},"Disable fabric"))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(R.a,{color:"primary",onClick:function(t){t.preventDefault(),e.collapsesToggle("new")}},"Add Fabric"),l.a.createElement(R.a,{color:"primary",onClick:function(t){t.preventDefault(),e.collapsesToggle("table")}},"Fabrics Table"),l.a.createElement(R.a,{color:"primary",onClick:function(e){e.preventDefault(),window.open("https://api.vulcanoapparel.com/api/v1/fabrics")}},"Download Fabrics"),l.a.createElement($e.a,{isOpen:this.state.openedCollapses.includes("new")},l.a.createElement(v.a,null,l.a.createElement(y.a,null,this._fabricType&&l.a.createElement(lt,{action:this.state.action,actionText:this.state.actionText,dataForm:this.state.formdata,fabricNames:this.state.fabricsTypes,seasons:this.state.SeasonsOps,clients:this.state.clientOptions,helper:function(t){return e.formHelper(t)}})))),l.a.createElement($e.a,{isOpen:this.state.openedCollapses.includes("table")},l.a.createElement(v.a,null,l.a.createElement(y.a,null,this.Access.fabrics.view&&this._fabricStory&&l.a.createElement(ot,{itemsPages:this.state.itemsPages,dataTable:this.state.dataTable,editFabric:this.handleEditFabric,removeFabric:this.handleRemoveFabric}))))))}}]),t}(l.a.Component);var ct=function(e){var t=Object(Y.a)({},e);return l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{htmlFor:"input_".concat(t.name)},t.displayName),l.a.createElement(q.a,{id:"formGroup_".concat(t.name),className:t.className},l.a.createElement(J.a,{name:t.name,id:"input_".concat(t.name),placeholder:t.placeHolder,type:"number",min:t.min,max:t.max,step:t.step,onKeyPress:function(e){!function(e){var t=e||window.event;if("paste"===t.type)a=t.clipboardData.getData("text/plain");else{var a=t.keyCode||t.which;a=String.fromCharCode(a)}/[0-9]|\./.test(a)||(t.returnValue=!1,t.preventDefault&&t.preventDefault())}(e)},value:t.defaultValue,onChange:function(e){t.onChange(e)}})))},dt={input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}},mt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).Access=JSON.parse(localStorage.getItem("Access")||"{}"),a.handleChange=function(e){var t,n=e.target.getAttribute("name"),l=e.target.value;a.setState((t={},Object(j.a)(t,n,l),Object(j.a)(t,"error_".concat(n),""),t))},a.formValidation=function(e){var t=!0;return Object.keys(e).map(function(n){if(null!==e[n].getAttribute("name")){var l=e[n].getAttribute("name");if(""===a.state[l]){var i="";i="client"===l||"season"===l?"text-danger":"has-danger";var o="error"+"".concat(l).charAt(0).toUpperCase()+"".concat(l).slice(1);a.setState(Object(j.a)({},o,i)),t=!1}}return n}),t},a.formErrorReset=function(){a.setState({errorClient:"",errorName:"",errorSeason:"",errorUnitPrice:"",errorTransport:"",errorMin:""})},a.handleSubmit=function(e){if(e.preventDefault(),a.formValidation(e.target.elements)){var t={id:a.state.id,client:a.state.client,name:a.state.name,season:a.state.season,unitPrice:a.state.unitPrice,transport:a.state.transport,min:a.state.min,clientSelect:a.state.clientSelect};a.formErrorReset(),a.props.onSubmit(e,a.props.action,t)}else a.props.notification("warning","Form is missing some fields.")},a.resetForm=function(e){a.formErrorReset(),a.props.reset(e)},a.changeToInsert=function(){return"update"===a.props.action?l.a.createElement(R.a,{onClick:a.resetForm},"Crear Nueva"):l.a.createElement(l.a.Fragment,null)},a.VisualizeElement=function(e){return"insert"===e?a.Access.materials.create:"update"===e?a.Access.materials.edit:void 0},a.state={id:0,client:"",name:"",season:"",unitPrice:"0",transport:"0",min:"0",catalogClients:[],submitButton:"",errorClient:"",errorName:"",errorSeason:"",errorUnitPrice:"",errorTransport:"",errorMin:"",clientSelect:null,seasonSelect:null},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.props.dataForm.id!==e.dataForm.id){var t=this.props.dataForm.season?parseInt(this.props.dataForm.season.id):0,a=this.props.dataForm.client?parseInt(this.props.dataForm.client.id):0,n=this.props.seasons.find(function(e){return e.value===t}),l=this.props.providers.find(function(e){return e.value===a});Object.keys(this.props.dataForm).length>0?(this.setState({id:this.props.dataForm.id,client:this.props.dataForm.id_client,name:this.props.dataForm.name,season:this.props.dataForm.id_season,unitPrice:this.props.dataForm.unitPrice,transport:this.props.dataForm.transport,min:this.props.dataForm.min,clientSelect:l,seasonSelect:n}),this.formErrorReset()):this.setState({id:0,client:"",name:"",season:"",unitPrice:"0",transport:"0",min:"0",clientSelect:null,seasonSelect:null})}}},{key:"render",value:function(){var e=this;return l.a.createElement(v.a,null,l.a.createElement(_.a,null,l.a.createElement("h5",{className:"title"},"Create Material")),l.a.createElement(y.a,null,l.a.createElement(V.a,{onSubmit:this.handleSubmit},l.a.createElement(k.a,null,l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"input_client",className:this.state.errorClient},"Client"),l.a.createElement(q.a,{id:"formGroup_client"},l.a.createElement(W.a,{className:"react-select",classNamePrefix:"react-select",name:"client",id:"input_client",styles:dt,value:this.state.clientSelect,onChange:function(t){e.setState({clientSelect:t,client:t.value,errorClient:""})},options:this.props.providers,placeholder:"Choose client"}))),l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"input_name"},"Description:"),l.a.createElement(q.a,{id:"formGroup_name",className:this.state.errorName},l.a.createElement(J.a,{name:"name",placeholder:"descripcion del material",type:"text",id:"input_name",value:this.state.name,onChange:this.handleChange})))),l.a.createElement(k.a,null,l.a.createElement(z.a,{md:"6"},l.a.createElement("label",{htmlFor:"input_season",className:this.state.errorSeason},"Season"),l.a.createElement(q.a,{id:"formGroup_season"},l.a.createElement(W.a,{className:"react-select",classNamePrefix:"react-select",name:"season",id:"input_season",styles:dt,value:this.state.seasonSelect,onChange:function(t){e.setState({seasonSelect:t,season:t.value,errorSeason:""})},options:this.props.seasons,placeholder:"Choose season"}))),l.a.createElement(z.a,{md:"6"},l.a.createElement(ct,{displayName:"Unit price:",name:"unitPrice",placeHolder:"0.00",min:"0",step:"any",defaultValue:this.state.unitPrice,onChange:this.handleChange,className:this.state.errorUnitPrice}))),l.a.createElement(k.a,null,l.a.createElement(z.a,{md:"6"},l.a.createElement(ct,{displayName:"Transportation:",name:"transport",placeHolder:"0.00",min:"0",step:"any",defaultValue:this.state.transport,onChange:this.handleChange,className:this.state.errorTransport})),l.a.createElement(z.a,{md:"6"},l.a.createElement(ct,{displayName:"Min:",name:"min",placeHolder:"0.00",min:"0",step:"any",defaultValue:this.state.min,onChange:this.handleChange,className:this.state.errorMin}))),l.a.createElement(k.a,null,l.a.createElement(z.a,{className:"px-md-1",md:"6"},l.a.createElement(q.a,null,this.VisualizeElement(this.props.action)&&l.a.createElement(R.a,{className:"btn-fill",color:"primary",type:"submit"},this.props.actionText)," ",this.changeToInsert()))))))}}]),t}(l.a.Component),ut=[];var pt=function(e){var t=Object(Y.a)({},e),a=JSON.parse(localStorage.getItem("Access")||"{}");return ut=t.dataTable.map(function(e,n){return{id:n,codigo:e.id,client:e.client.name,name:e.name,season:e.season.name,unitPrice:e.unitPrice,rowData:e,actions:l.a.createElement("div",{className:"actions-right"},a.materials.edit&&l.a.createElement(R.a,{onClick:function(e){!function(e,a){e.preventDefault(),t.editMaterial(a)}(e,ut.find(function(e){return e.id===n}).rowData)},color:"warning",size:"sm",className:"btn-icon btn-link edit"},l.a.createElement("i",{className:"fa fa-edit"}))," ",a.materials.delete&&l.a.createElement(R.a,{onClick:function(e){ut.find(function(a,l){return a.id===n&&(function(e,a){e.preventDefault(),t.removeMaterial(a)}(e,a),!0)})},color:"danger",size:"sm",className:"btn-icon btn-link remove"},l.a.createElement("i",{className:"fa fa-times"}))," ")}}),l.a.createElement(v.a,null,l.a.createElement(_.a,null,l.a.createElement(C.a,{tag:"h4"},"Materials")),l.a.createElement(y.a,null,l.a.createElement(X.a,{data:ut,filterable:!0,columns:[{Header:"Code",accessor:"codigo"},{Header:"Client",accessor:"client"},{Header:"Description",accessor:"name"},{Header:"Season",accessor:"season"},{Header:"Unit price",accessor:"unitPrice"},{Header:"Accions",accessor:"actions",sortable:!1,filterable:!1}],defaultPageSize:t.itemsPages,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"})))},ht=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e)))._isMounted=!1,a.userToken=localStorage.getItem("userToken")||"",a.valid_time=localStorage.getItem("valid_time")||"",a.Access=JSON.parse(localStorage.getItem("Access")||"{}"),a._loadingMaterials=!1,a.logOut=function(){a._isMounted=!1,localStorage.clear(),a.componentWillUnmount(),a.props.history.push("/auth/login")},a.handleError=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.response?e.response:{},n=e.message?e.message:"";if(void 0!==t.status&&401===t.status)a.logOut();else{var l="";if(void 0!==t.data)for(var i=0,o=Object.entries(t.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;a.notify("tr","warning",l)}},a.toggleDeleteModal=function(){a._isMounted&&a.setState({deleteModal:!a.state.deleteModal})},a.checkPageMode=function(){var e,t,a;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="",a="modal-white";break;default:e="bg-dark",t="text-primary",a="modal-black"}return{bg:e,hc:t,mc:a}},a.notify=function(e,t,n){var i;i={place:e,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:t,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&a._isMounted&&a.refs.notificationAlert(i)},a.collapsesToggle=function(e){a.state.openedCollapses.includes(e)?a._isMounted&&a.setState({openedCollapses:[]}):a._isMounted&&a.setState({openedCollapses:[e]})},a.handleSubmit=function(e,t,n){"insert"===t&&(a._isMounted&&a.setState({formdata:n,loading:!0}),a.addMaterial(n)),"update"===t&&(a._isMounted&&a.setState({loading:!0}),a.updateMaterial(n))},a.formNotification=function(e,t){a.notify("tr",e,t)},a.updateMaterial=function(e){var t={};Object.keys(e).map(function(n){var l="";return l="client"===n?"id_client":"season"===n?"id_season":n,e[n]!==a.state.formdata[l]&&(t[n]=e[n]),n}),Object.keys(t).length>0?ae.a.patch("https://api.vulcanoapparel.com/api/v1/materials/"+e.id+"/",t,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.notify("tr","success","Edit completed!"),this.setState({formdata:{},loading:!1}),this.componentDidMount()}.bind(Object(P.a)(a))).catch(function(e){this.setState({formdata:{},loading:!1}),this.handleError(e,"update material")}.bind(Object(P.a)(a))):a.notify("tr","info","There are no changes on this material.")},a.addMaterial=function(e){ae.a.post("https://api.vulcanoapparel.com/api/v1/materials/",e,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.notify("tr","success","Material added!"),this.setState({formdata:{},loading:!1}),this.componentDidMount()}.bind(Object(P.a)(a))).catch(function(e){this.setState({formdata:{},loading:!1}),this.handleError(e,"add material")}.bind(Object(P.a)(a)))},a.getClients=function(){var e=[];ae.a.get("https://api.vulcanoapparel.com/api/v1/clients/",{headers:{Authorization:"Token "+a.userToken}}).then(function(t){t.data.map(function(t,a){return e.push({value:t.id,label:t.name}),t}),this._isMounted&&this.setState({clientOptions:e})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"get clients")}.bind(Object(P.a)(a)))},a.seasonsHistory=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/seasons/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){var t=[];e.data.map(function(e,a){return t.push({value:e.id,label:e.name})}),this._isMounted&&this.setState({SeasonsOps:t})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"seasons history")}.bind(Object(P.a)(a)))},a.getMaterials=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/materials/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadingMaterials=!0,this._isMounted&&this.setState({materials:e.data})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"get materials")}.bind(Object(P.a)(a)))},a.handleEditMaterial=function(e){a.collapsesToggle("new"),a._isMounted&&a.setState({formdata:e,action:"update",actionText:"Update"})},a.handelRemoveMaterial=function(e){a._isMounted&&a.setState({toDeleteMaterial:e}),a.toggleDeleteModal()},a.removeSelectedMaterial=function(){a.setState({loading:!0}),ae.a.delete("https://api.vulcanoapparel.com/api/v1/materials/"+a.state.toDeleteMaterial.codigo+"/",{headers:{Authorization:"Token "+a.userToken}}).then(function(){this._isMounted&&this.setState({toDeleteDM:{id:""}}),this.toggleDeleteModal(),this.setState({formdata:{},loading:!1}),this.componentDidMount(),this.notify("tr","success","Material deactivated.")}.bind(Object(P.a)(a))).catch(function(e){this.setState({formdata:{},loading:!1}),this.handleError(e,"remove material")}.bind(Object(P.a)(a)))},a.handleReset=function(){a.setState({formdata:{},loading:!1}),a.componentDidMount()},a.state={formdata:{},materials:[],clientOptions:[],openedCollapses:["new"],SeasonsOps:[],action:"insert",actionText:"Add",deleteModal:!1,toDeleteMaterial:{codigo:""},loading:!1,importLoading:!1,importId:null,importModal:!1,materialInfo:{}},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getClients(),this.seasonsHistory(),this.getMaterials(),this._isMounted&&this.setState({action:"insert",actionText:"Add"})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:this.state.loading?{display:"flex"}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(t," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(L.a,{isOpen:this.state.deleteModal,toggle:this.toggleDeleteModal,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content-center",toggle:this.toggleDeleteModal},"Deactivate Material."),l.a.createElement(H.a,null,l.a.createElement("h6",{className:"text-danger"},"Warning!"),l.a.createElement("p",null,"If you deactivate the material ",l.a.createElement("b",{className:"text-warning"},this.state.toDeleteMaterial.codigo),"you'll be unnable to use it in other costing sheets. Contact the system administrator to recover a material.")),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleDeleteModal},"Close"),l.a.createElement(R.a,{color:"primary",onClick:this.removeSelectedMaterial},"deactivate Material"))),l.a.createElement(L.a,{isOpen:this.state.importModal,toggle:this.toggleImportModal,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content-center",toggle:this.toggleImportModal},"Import Material."),l.a.createElement(H.a,null,this.state.importId),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleImportModal},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){return e.fnImportMaterial(e.state.importId)}},"Import"))),l.a.createElement(R.a,{color:"primary",onClick:function(t){t.preventDefault(),e.collapsesToggle("new")}},"Create Material"),l.a.createElement(R.a,{color:"primary",onClick:function(t){t.preventDefault(),e.collapsesToggle("table")}},"Materials Table"),l.a.createElement($e.a,{isOpen:this.state.openedCollapses.includes("new")},l.a.createElement(v.a,null,l.a.createElement(y.a,null,this._loadingMaterials&&l.a.createElement(mt,{action:this.state.action,actionText:this.state.actionText,onSubmit:this.handleSubmit,dataForm:this.state.formdata,providers:this.state.clientOptions,seasons:this.state.SeasonsOps,reset:this.handleReset,notification:this.formNotification})))),l.a.createElement($e.a,{isOpen:this.state.openedCollapses.includes("table")},l.a.createElement(v.a,null,l.a.createElement(y.a,null,this.Access.materials.view&&l.a.createElement(pt,{dataTable:this.state.materials,editMaterial:this.handleEditMaterial,removeMaterial:this.handelRemoveMaterial,itemsPages:5}))))))}}]),t}(l.a.Component),gt=[];var ft=function(e){var t=Object(Y.a)({},e),a=JSON.parse(localStorage.getItem("Access")||"{}");function n(e){var a=e.target.dataset.detailid;t.handleFileChangePatternDownload(a)}return gt=t.dataTable.map(function(e,i){return{id:i,codigo:e.id,client:e.client.name,style:e.style,season:e.season.name,rowData:e,actions:l.a.createElement("div",{className:"actions-right"},l.a.createElement(q.a,{className:"text-center"},a.pattern.edit&&l.a.createElement(R.a,{color:"success",size:"sm",className:"btn-simple",type:"button"},l.a.createElement("input",{type:"file",onChange:t.handleFileChangePatternUpload,name:"patternFile",id:"input_patternFile_".concat(e.id),"data-detailid":e.detail_id,"data-headerid":e.id}),l.a.createElement("i",{className:"fas fa-upload"})," Pattern"),a.pattern.edit&&e.patternFlag&&l.a.createElement(R.a,{color:"success",size:"sm",className:"btn-simple",type:"button",onClick:n,"data-detailid":e.detail_id},l.a.createElement("i",{className:"fas fa-download"})," Pattern"),l.a.createElement("br",null),a.pattern.edit&&e.patternFlag&&!e.markerFlag&&l.a.createElement(R.a,{color:"success",size:"sm",className:"btn-simple",type:"button"},l.a.createElement("input",{type:"file",onChange:t.handleFileChangeMarkerUpload,name:"markerFile",id:"input_markerFile_".concat(e.id),"data-detailid":e.detail_id,"data-headerid":e.id}),l.a.createElement("i",{className:"fas fa-upload"})," Marker"),l.a.createElement(R.a,{color:"warning",size:"sm",className:"btn-simple",type:"button",onClick:function(a){return t.handleRemoveTaks(e.id)}},l.a.createElement("i",{className:"fas fa-times"})," Cancel Tasks")))}}),l.a.createElement(v.a,null,l.a.createElement(_.a,null,l.a.createElement(C.a,{tag:"h4"},"Pending CostSheets")),l.a.createElement(y.a,null,l.a.createElement(X.a,{data:gt,filterable:!0,columns:[{Header:"Code",accessor:"codigo"},{Header:"Client",accessor:"client"},{Header:"Style",accessor:"style"},{Header:"Season",accessor:"season"},{Header:"Actions",accessor:"actions",sortable:!1,filterable:!1,width:350,minWidth:350}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"})))},bt=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this)))._isMounted=!1,e.userToken=localStorage.getItem("userToken")||"",e.valid_time=localStorage.getItem("valid_time")||"",e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.getCostingHeaders=function(){var t=[];ae.a.get("https://api.vulcanoapparel.com/api/v1/costingHeader/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){e.data.map(function(e){return e.markerFlag&&e.patternFlag||t.push(e),1}),this._isMounted&&this.setState({costingHeaders:t})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e)}.bind(Object(P.a)(e)))},e.getCostingDetail=function(t){e.setState({loader:!0}),ae.a.get("https://api.vulcanoapparel.com/api/v1/costingDetail/"+t+"/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=e.data.pathToPattern;ge("https://api.vulcanoapparel.com/api/v1/costingDetail/download/?key="+t,{params:{key:t},headers:{Authorization:"Token "+this.userToken}}).then(function(e){this.setState({loader:!1});var t={file:e};window.open(t.file),this.notify("tr","success","Pattern downloaded!")}.bind(this)).catch(function(e){this.setState({loader:!1}),this.handleError(e)}.bind(this))}.bind(Object(P.a)(e))).catch(function(e){this.setState({loader:!1}),this.handleError(e)})},e.handleFileChangePatternUpload=function(t){e.setState({loader:!0});var a=t.target.dataset.detailid,n=t.target.files[0],l=new FormData;l.append("file",n),l.append("id",a),pe("https://api.vulcanoapparel.com/api/v1/costingDetail/post_pattern/",{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}},l,"file",["zip","rar","7z"]).then(function(){this.setState({loader:!1}),this.notify("tr","success","Pattern upload"),this.getCostingHeaders()}.bind(Object(P.a)(e))).catch(function(e){this.setState({loader:!1}),this.handleError(e)}.bind(Object(P.a)(e)))},e.handleFileChangePatternDownload=function(t){e.getCostingDetail(t)},e.handleFileChangeMarkerUpload=function(t){e.setState({loader:!0});var a=t.target.dataset.detailid,n=t.target.files[0],l=new FormData;l.append("file",n),l.append("id",a);var i=new FormData;i.append("marker",n),i.append("detail_id",a);var o={headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}};ae.a.post("https://api.vulcanoapparel.com/api/v1/costingDetail/parse_marker/",i,o).then(function(){pe("https://api.vulcanoapparel.com/api/v1/costingDetail/post_marker/",o,l,"file",["xlsx","xls","XLSX","XLS"]).then(function(){this.setState({loader:!1}),this.getCostingHeaders(),this.notify("tr","success","Marker Loaded and parsed")}.bind(this)).catch(function(e){this.handleError(e,"upload marker"),this.setState({loader:!1})}.bind(this))}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"parse marker"),this.setState({loader:!1})}.bind(Object(P.a)(e)))},e.checkPageMode=function(){var e,t,a;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="",a="modal-white";break;default:e="bg-dark",t="text-primary",a="modal-black"}return{bg:e,hc:t,mc:a}},e.returnFlag=function(t){var a=new FormData;a.append("id",t),a.append("delete_task",1),ae.a.post("https://api.vulcanoapparel.com/api/v1/administration/return/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","Task Removed!"),this.componentDidMount()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"returnFlag")}.bind(Object(P.a)(e)))},e.state={file:void 0,costingHeaders:[],detail:{},selectedHeader:-1,loader:!1},e.handleFileChangeMarkerUpload=e.handleFileChangeMarkerUpload.bind(Object(P.a)(e)),e.handleFileChangePatternDownload=e.handleFileChangePatternDownload.bind(Object(P.a)(e)),e.handleFileChangePatternUpload=e.handleFileChangePatternUpload.bind(Object(P.a)(e)),e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"isNumberKey",value:function(e){var t=e||window.event,a=t.keyCode||t.which;a="paste"===t.type?t.clipboardData.getData("text/plain"):String.fromCharCode(a);/[0-9]|\./.test(a)||(t.returnValue=!1,t.preventDefault&&t.preventDefault())}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getCostingHeaders()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:this.state.loading?{display:"flex"}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(e," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(k.a,null,l.a.createElement(z.a,{md:"12"},l.a.createElement(ft,{dataTable:this.state.costingHeaders,handleFileChangePatternUpload:this.handleFileChangePatternUpload,handleFileChangePatternDownload:this.handleFileChangePatternDownload,handleFileChangeMarkerUpload:this.handleFileChangeMarkerUpload,handleRemoveTaks:this.returnFlag})))))}}]),t}(l.a.Component),Et=[];var vt=function(e){var t=Object(Y.a)({},e),a=JSON.parse(localStorage.getItem("Access")||"{}");return Et=t.dataTable.map(function(e,n){return{id:n,codigo:e.id,client:e.client.name,style:e.style,season:e.season.name,rowData:e,actions:l.a.createElement("div",{className:"actions-right"},l.a.createElement(q.a,{className:"text-center"},a.engineering.edit&&l.a.createElement(R.a,{color:"success",size:"sm",className:"btn-simple",type:"button"},l.a.createElement("input",{type:"file",onChange:t.handleFileChange,name:"samFile",id:"input_samFile_".concat(e.id),"data-detailid":e.detail_id,"data-headerid":e.id,"data-altcost":e.altCost}),l.a.createElement("i",{className:"fas fa-upload"})," SAM")))}}),l.a.createElement(v.a,null,l.a.createElement(_.a,null,l.a.createElement(C.a,{tag:"h4"},"Pending CostSheets")),l.a.createElement(y.a,null,l.a.createElement(X.a,{data:Et,filterable:!0,columns:[{Header:"Code",accessor:"codigo",width:105,minWidth:105},{Header:"Client",accessor:"client"},{Header:"Style",accessor:"style"},{Header:"Season",accessor:"season"},{Header:"Actions",accessor:"actions",sortable:!1,filterable:!1,width:105,minWidth:105}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"})))},yt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e)))._isMounted=!1,a.userToken=localStorage.getItem("userToken")||"",a.valid_time=localStorage.getItem("valid_time")||"",a.logOut=function(){a._isMounted=!1,localStorage.clear(),a.componentWillUnmount(),a.props.history.push("/auth/login")},a.handleError=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.response?e.response:{},n=e.message?e.message:"";if(void 0!==t.status&&401===t.status)a.logOut();else{var l="";if(void 0!==t.data)for(var i=0,o=Object.entries(t.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;a.notify("tr","warning",l)}},a.notify=function(e,t,n){var i;i={place:e,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:t,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&a._isMounted&&a.refs.notificationAlert.notificationAlert(i)},a.getCostingHeaders=function(){var e=[];ae.a.get("https://api.vulcanoapparel.com/api/v1/costingHeader/",{headers:{Authorization:"Token "+a.userToken}}).then(function(t){t.data.map(function(t){if(!t.samFlag){var a=Object(A.a)({},t,{altCost:!1});e.push(a)}return 1}),this._isMounted&&this.setState({costingHeaders:e})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e)}.bind(Object(P.a)(a)))},a.patchDetailPathToSAM=function(e,t){ae.a.patch("https://api.vulcanoapparel.com/api/v1/costingDetail/"+e+"/",{pathToSAM:t},{headers:{Authorization:"Token "+a.userToken}}).then(function(){return!0}).catch(function(e){return this.handleError(e),!1})},a.handleFileChange=function(e){a.setState({loading:!0});var t=e.target.dataset.detailid,n="true"===e.target.dataset.altcost?1:0,l=e.target.files[0],i=new FormData;i.append("file",l),i.append("id",t);var o=new FormData;o.append("sam",l),o.append("detail_id",t),o.append("flag",0),o.append("operation_flag",n);var s={headers:{Authorization:"Token "+a.userToken,"Content-Type":"multipart/form-data"}};ae.a.post("https://api.vulcanoapparel.com/api/v1/costingDetail/parse_sams/",o,s).then(function(){pe("https://api.vulcanoapparel.com/api/v1/costingDetail/post_sams/",s,i,"file",["xlsx","xls","XLSX","XLS"]).then(function(){this.setState({loading:!1,file:l}),this.notify("tr","success","SAM uploaded"),this.getCostingHeaders()}.bind(this)).catch(function(e){this.setState({loading:!1}),this.handleError(e,"uploadFileToS3")}.bind(this))}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.handleError(e,"parse_sams")}.bind(Object(P.a)(a)))},a.checkPageMode=function(){var e,t,a;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="",a="modal-white";break;default:e="bg-dark",t="text-primary",a="modal-black"}return{bg:e,hc:t,mc:a}},a.altCostHandle=function(e,t){var n=a.state.costingHeaders;n[t].altCost=!n[t].altCost,a.setState({costingHeaders:n})},a.state={file:void 0,costingHeaders:[],selectedHeader:-1,loader:!1},a.handleFileChange=a.handleFileChange.bind(Object(P.a)(a)),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getCostingHeaders()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:this.state.loading?{display:"flex"}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(e," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(k.a,null,l.a.createElement(z.a,{md:"12"},l.a.createElement(vt,{dataTable:this.state.costingHeaders,handleFileChange:this.handleFileChange,altCostHandle:this.altCostHandle})))))}}]),t}(l.a.Component),_t=a(256),Ct=a(257),kt=a(258),St=a(278),Ot=a(279),Mt=[];var wt=function(e){var t=Object(Y.a)({},e);return Mt=t.dataTable.map(function(e,a){return{row:a,header_id:e.id,detail_id:e.detail_id,client:e.client.name,season:e.season.name,style:e.style,flags:l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"SAM: ",l.a.createElement("b",null,e.samFlag?l.a.createElement("i",{className:"tim-icons icon-check-2 text-success"}):l.a.createElement("i",{className:"tim-icons icon-simple-remove text-danger"}))),l.a.createElement("p",null,"Marker: ",l.a.createElement("b",null,e.markerFlag?l.a.createElement("i",{className:"tim-icons icon-check-2 text-success"}):l.a.createElement("i",{className:"tim-icons icon-simple-remove text-danger"}))),l.a.createElement("p",null,"Pattern: ",l.a.createElement("b",null,e.patternFlag?l.a.createElement("i",{className:"tim-icons icon-check-2 text-success"}):l.a.createElement("i",{className:"tim-icons icon-simple-remove text-danger"})))),actions:l.a.createElement("div",{className:""},l.a.createElement(R.a,{onClick:function(){return t.onApprove(e.id)},color:"info",size:"sm"},"Approve ",l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("hr",null),l.a.createElement(R.a,{onClick:function(){return t.onReject(e.id)},color:"danger",size:"sm"},"Reject ",l.a.createElement("i",{className:"fa fa-times"})),l.a.createElement("hr",null),l.a.createElement(R.a,{onClick:function(){return t.Resume(e)},color:"danger",size:"sm"},"Resume ",l.a.createElement("i",{className:"fa fa-search"})))}}),l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,l.a.createElement("b",null,t.tableTitle)),l.a.createElement(X.a,{data:Mt,filterable:!0,columns:[{Header:"Code",accessor:"header_id",width:110},{Header:"Client",accessor:"client"},{Header:"Season",accessor:"season"},{Header:"Style",accessor:"style"},{Header:"State",accessor:"flags",sortable:!1,filterable:!1},{Header:"Aprove",accessor:"actions",sortable:!1,filterable:!1,width:150}],defaultPageSize:t.itemsPages,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"header_id",desc:!0}],className:"-striped -highlight primary-pagination"}))},xt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).Access=JSON.parse(localStorage.getItem("permissions")||"{}"),a._isMounted=!1,a._toAproved=!1,a.userToken=localStorage.getItem("userToken")||"",a.checkPageMode=function(){return!0!==document.body.classList.contains("white-content")?"modal-black":"modal-white"},a.notify=function(e,t,n){var i;i={place:e,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:t,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&a._isMounted&&a.refs.notificationAlert.notificationAlert(i)},a.logOut=function(){a._isMounted=!1,localStorage.clear(),a.componentWillUnmount(),a.props.history.push("/auth/login")},a.handleError=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.response?e.response:{},n=e.message?e.message:"";if(void 0!==t.status&&401===t.status)a.logOut();else{var l="";if(void 0!==t.data)for(var i=0,o=Object.entries(t.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;a._isMounted&&a.notify("tr","warning",l)}},a.toAproved=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/administration/get_account/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._toAproved=!0,this._isMounted&&this.setState({toAprovedataTable:e.data})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"toAproved")}.bind(Object(P.a)(a)))},a.handleApprove=function(e){var t=new FormData;t.append("flag",2),t.append("id",e),ae.a.post("https://api.vulcanoapparel.com/api/v1/administration/change_approve_status/",t,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","CostSheet Approved!"),this.componentDidMount()}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(a)))},a.handleReject=function(e){var t=new FormData;t.append("flag",4),t.append("id",e),ae.a.post("https://api.vulcanoapparel.com/api/v1/administration/change_approve_status/",t,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","CostSheet Returned!"),this.componentDidMount()}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"handleReject")}.bind(Object(P.a)(a)))},a.costingDetail=function(){var e=Object(T.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.a.get("https://api.vulcanoapparel.com/api/v1/costingDetail/"+t+"/",{headers:{Authorization:"Token "+a.userToken}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.Resume=function(e){a.costingDetail(e.detail_id).then(function(t){var a=ke(t.data);this.setState({showStyle:e.style,detailCalculation:a}),this.toggleApprovalModal()}.bind(Object(P.a)(a)))},a.toggleApprovalModal=function(){a.setState({ApprovalModal:!a.state.ApprovalModal})},a.state={toAprovedataTable:null,vTabs:"vt1",ApprovalModal:!1,detailCalculation:{},showStyle:""},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.toAproved()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"content"},l.a.createElement(L.a,{isOpen:this.state.ApprovalModal,toggle:this.toggleApprovalModal,size:"lg"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.toggleApprovalModal},l.a.createElement("i",{className:"tim-icons icon-simple-remove"})),l.a.createElement("h2",{className:"modal-title"},this.state.showStyle)),l.a.createElement(H.a,null,l.a.createElement(Ce,{detailCalculation:this.state.detailCalculation,resume:!0})),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleApprovalModal},"Close"))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(v.a,null,l.a.createElement(_t.a,{pills:!0,className:"nav-pills-info nav-pills-icons"},l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"vt1"===this.state.vTabs?"active":"",onClick:function(){return e.setState({vTabs:"vt1"})}},"Pending Approval"))),l.a.createElement(St.a,{activeTab:this.state.vTabs},l.a.createElement(Ot.a,{tabId:"vt1"},this._toAproved&&l.a.createElement(wt,{dataTable:this.state.toAprovedataTable,itemsPages:5,onApprove:this.handleApprove,onReject:this.handleReject,Resume:this.Resume})),l.a.createElement(Ot.a,{tabId:"vt2"},l.a.createElement("p",null,"- WIP -")),l.a.createElement(Ot.a,{tabId:"vt3"},l.a.createElement("p",null,"- WIP -")))))}}]),t}(l.a.Component),Nt=[];var Tt=function(e){var t=Object(Y.a)({},e);return Nt=t.dataTable.map(function(e,a){var n=e.Calc;return{row:a,header_id:e.header.id,detail_id:e.header.detail_id,client:e.header.client.name,season:e.header.season.name,style:e.header.style,profit:l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,null,l.a.createElement(z.a,null,"White:"),l.a.createElement(z.a,null,l.a.createElement("b",null,"".concat((100*n.profit.white).toFixed(2),"%")))),l.a.createElement(k.a,null,l.a.createElement(z.a,null,"Medium:"),l.a.createElement(z.a,null,l.a.createElement("b",null,"".concat((100*n.profit.medium).toFixed(2),"%")))),l.a.createElement(k.a,null,l.a.createElement(z.a,null,"Dark:"),l.a.createElement(z.a,null,l.a.createElement("b",null,"".concat((100*n.profit.dark).toFixed(2),"%")))),l.a.createElement(k.a,null,l.a.createElement(z.a,null,"Special:"),l.a.createElement(z.a,null,l.a.createElement("b",null,"".concat((100*n.profit.special).toFixed(2),"%"))))),prices:l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,null,l.a.createElement(z.a,null,"White:"),l.a.createElement(z.a,null,l.a.createElement("b",null,"$",n.sellingPrices.white.toFixed(2)))),l.a.createElement(k.a,null,l.a.createElement(z.a,null,"Medium:"),l.a.createElement(z.a,null,l.a.createElement("b",null,"$",n.sellingPrices.medium.toFixed(2)))),l.a.createElement(k.a,null,l.a.createElement(z.a,null,"Dark:"),l.a.createElement(z.a,null,l.a.createElement("b",null,"$",n.sellingPrices.dark.toFixed(2)))),l.a.createElement(k.a,null,l.a.createElement(z.a,null,"Special:"),l.a.createElement(z.a,null,l.a.createElement("b",null,"$",n.sellingPrices.special.toFixed(2))))),actions:l.a.createElement("div",{className:""},l.a.createElement(R.a,{onClick:function(){return t.onApprove(a)},color:"info",size:"sm"},"Approve ",l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("hr",null),l.a.createElement(R.a,{onClick:function(){return t.onReject(e.header.id)},color:"danger",size:"sm"},"Reject ",l.a.createElement("i",{className:"fa fa-times"})))}}),l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,l.a.createElement("b",null,t.tableTitle)),l.a.createElement(X.a,{data:Nt,filterable:!0,columns:[{Header:"Code",accessor:"header_id",width:80},{Header:"Client",accessor:"client"},{Header:"Season",accessor:"season"},{Header:"Style",accessor:"style"},{Header:"Profits",accessor:"profit",sortable:!1,filterable:!1},{Header:"Selling Prices",accessor:"prices",sortable:!1,filterable:!1},{Header:"Aprove",accessor:"actions",sortable:!1,filterable:!1}],defaultPageSize:t.itemsPages,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"header_id",desc:!0}],className:"-striped -highlight primary-pagination"}))},jt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).Access=JSON.parse(localStorage.getItem("permissions")||"{}"),a._isMounted=!1,a._toAproved=!1,a.userToken=localStorage.getItem("userToken")||"",a.checkPageMode=function(){return!0!==document.body.classList.contains("white-content")?"modal-black":"modal-white"},a.notify=function(e,t,n){var i;i={place:e,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:t,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&a._isMounted&&a.refs.notificationAlert.notificationAlert(i)},a.logOut=function(){a._isMounted=!1,localStorage.clear(),a.componentWillUnmount(),a.props.history.push("/auth/login")},a.handleError=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.response?e.response:{},n=e.message?e.message:"";if(void 0!==t.status&&401===t.status)a.logOut();else{var l="";if(void 0!==t.data)for(var i=0,o=Object.entries(t.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;a.notify("tr","warning",l)}},a.toAproved=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/administration/get_jj/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){var t=e.data.map(function(e){return{header:e.header,detail:e.detail,Calc:ke(e.detail)}});this._toAproved=!0,this._isMounted&&this.setState({toAprovedataTable:t})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"toAproved")}.bind(Object(P.a)(a)))},a.handleApprove=function(){var e=new FormData,t=a.state.toAprovedataTable[a.state.dataKey],n=t.detail,l=t.header;e.append("flag",3),e.append("id",l.id),e.append("pw",parseFloat(n.profitWhite)),e.append("pm",parseFloat(n.profitMedium)),e.append("pd",parseFloat(n.profitDark)),e.append("ps",parseFloat(n.profitSpecial)),ae.a.post("https://api.vulcanoapparel.com/api/v1/administration/change_approve_status/",e,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.toggleApprovalModal(),this.notify("tr","success","CostSheet Approved!"),this.componentDidMount()}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(a)))},a.handlePopUpApprove=function(e){a.toggleApprovalModal(),a.setState({detailCalculation:a.state.toAprovedataTable[e].Calc,dataKey:e})},a.handleReject=function(e){ae.a.patch("https://api.vulcanoapparel.com/api/v1/costingHeader/"+e+"/",{approvalStatus:"A"},{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.notify("tr","success","CostSheet Returned!"),this.componentDidMount()}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"handleReject")}.bind(Object(P.a)(a)))},a.toggleApprovalModal=function(){a.setState({ApprovalModal:!a.state.ApprovalModal})},a.handleCostSheetCal=function(e){var t=a.state.toAprovedataTable;t[a.state.dataKey].detail[e.key]=e.value,t[a.state.dataKey].Calc=ke(t[a.state.dataKey].detail),a.setState({toAprovedataTable:t,detailCalculation:t[a.state.dataKey].Calc})},a.state={toAprovedataTable:null,vTabs:"vt1",ApprovalModal:!1,selectedHeader:null,detailCalculation:{},dataKey:null},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.toAproved()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"content"},l.a.createElement(L.a,{isOpen:this.state.ApprovalModal,toggle:this.toggleApprovalModal,size:"lg"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.toggleApprovalModal},l.a.createElement("i",{className:"tim-icons icon-simple-remove"})),l.a.createElement("h5",{className:"modal-title"},"FINAL APPROVATION")),l.a.createElement(H.a,null,l.a.createElement(Ce,{detailCalculation:this.state.detailCalculation,helper:this.handleCostSheetCal})),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleApprovalModal},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(t){t.preventDefault(),e.handleApprove()}},"Send to Approve"))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(v.a,null,l.a.createElement(_t.a,{pills:!0,className:"nav-pills-info nav-pills-icons"},l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"vt1"===this.state.vTabs?"active":"",onClick:function(){return e.setState({vTabs:"vt1"})}},"Pending Approval"))),l.a.createElement(St.a,{activeTab:this.state.vTabs},l.a.createElement(Ot.a,{tabId:"vt1"},this._toAproved&&l.a.createElement(Tt,{dataTable:this.state.toAprovedataTable,itemsPages:5,onApprove:this.handlePopUpApprove,onReject:this.handleReject})))))}}]),t}(l.a.Component),At=a(105),Ft=a(275),Pt=[];var Lt=function(e){var t=Object(Y.a)({},e),a=JSON.parse(localStorage.getItem("permissions")||"{}"),n=[{value:"T",label:"TRECENTO"},{value:"Z",label:"ZUNTEX"},{value:"J",label:"JT"}];return Pt=t.dataTable.map(function(e,i){var o=n.find(function(t){return t.value===e.company});return{row:i,id:e.id,name:e.name,abbreviation:e.abbreviation,company:o.label,actions:l.a.createElement("div",{className:"actions-right"},l.a.createElement(R.a,{onClick:function(){t.editClient(e)},color:"info",size:"sm",className:"btn-icon btn-link edit"},l.a.createElement("i",{className:"tim-icons icon-pencil"})),a.clients.delete&&l.a.createElement(R.a,{onClick:function(){t.removeClient(e)},color:"warning",size:"sm",className:"btn-icon btn-link edit"},l.a.createElement("i",{className:"tim-icons icon-simple-remove"})))}}),l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,l.a.createElement("b",null,t.tableTitle)),l.a.createElement(X.a,{data:Pt,filterable:!0,columns:[{Header:"Code",accessor:"id"},{Header:"Name",accessor:"name"},{Header:"Abbreviation",accessor:"abbreviation"},{Header:"Company",accessor:"company"},{Header:"Actions",accessor:"actions",sortable:!1,filterable:!1}],defaultPageSize:t.itemsPages,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"id",desc:!0}],className:"-striped -highlight primary-pagination"}))},Dt=(a(221),{input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}}),Ht=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).Access=JSON.parse(localStorage.getItem("permissions")||"{}"),a._isMounted=!1,a._ClientsLoaded=!1,a._UserLoaded=!1,a.userToken=localStorage.getItem("userToken")||"",a.companyOptions=[{value:"T",label:"TRECENTO"},{value:"Z",label:"ZUNTEX"},{value:"J",label:"JT"}],a.defaultColorForm={color_class:null,client:null,name:""},a.checkPageMode=function(){return!0!==document.body.classList.contains("white-content")?"modal-black":"modal-white"},a.notify=function(e,t,n){var i;i={place:e,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:t,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&a._isMounted&&a.refs.notificationAlert.notificationAlert(i)},a.logOut=function(){a._isMounted=!1,localStorage.clear(),a.componentWillUnmount(),a.props.history.push("/auth/login")},a.handleError=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.response?e.response:{},n=e.message?e.message:"";if(void 0!==t.status&&401===t.status)a.logOut();else{var l="";if(void 0!==t.data)for(var i=0,o=Object.entries(t.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;a.notify("tr","warning",l)}},a.getUsers=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/users/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._UserLoaded=!0;var t=e.data.map(function(e){return{value:e.id,label:e.email,clients:e.clients}});this.setState({users:t})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"getUsers")}.bind(Object(P.a)(a)))},a.updateUser=function(e,t){ae.a.patch("https://api.vulcanoapparel.com/api/v1/users/"+e+"/",t,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.componentDidMount(),this.notify("tr","success","Clients changed in user.")}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"updateUser")}.bind(Object(P.a)(a)))},a._userClientsLoaded=!1,a.getUserClients=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/clients/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._userClientsLoaded=!0,this._isMounted&&this.setState({clientsOptions:e.data.map(function(e){return{value:e.id,label:"".concat(e.company," / ").concat(e.name," / ").concat(e.abbreviation)}})})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"getUserClients")}.bind(Object(P.a)(a)))},a.getClients=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/clients/get_all_clients/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._ClientsLoaded=!0,this._isMounted&&this.setState({clients:e.data})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"getClients")}.bind(Object(P.a)(a)))},a.addClient=function(e){ae.a.post("https://api.vulcanoapparel.com/api/v1/clients/",e,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.componentDidMount(),this.notify("tr","success","Client added!")}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"addClient")}.bind(Object(P.a)(a)))},a.updateClient=function(e){var t=e;delete t.created_at,delete t.updated_at,ae.a.patch("https://api.vulcanoapparel.com/api/v1/clients/"+t.id+"/",t,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.componentDidMount(),this.notify("tr","success","Client updated!")}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"updateClient")}.bind(Object(P.a)(a)))},a.removeClient=function(e){ae.a.delete("https://api.vulcanoapparel.com/api/v1/clients/"+e.id+"/",{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.componentDidMount(),this.notify("tr","success","Client removed!")}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"removeClient")}.bind(Object(P.a)(a)))},a.handleChange=function(e,t){a.setState({client:Object(A.a)({},a.state.client,Object(j.a)({},e,t))})},a.handleSubmit=function(e,t){e.preventDefault(),t?a.updateClient(a.state.client):a.addClient(a.state.client)},a.clearClient=function(){a.setState({client:{}})},a.VisualizeElement=function(e){return!1===e?a.Access.clients.create:!0===e?a.Access.clients.edit:void 0},a.ClientsForm=function(e){var t=(e.id?e.id:0)>0,n=e.name?e.name:"",i=e.abbreviation?e.abbreviation:"",o=e.company?e.company:null,s=a.companyOptions.find(function(e){return e.value===o});return l.a.createElement(V.a,{onSubmit:function(e){return a.handleSubmit(e,t)}},l.a.createElement(q.a,null,l.a.createElement(S.a,{for:"clientName"},"Client's name"),l.a.createElement(J.a,{type:"text",name:"clientName",id:"clientName",placeholder:"Enter clients name.",style:{marginBottom:0},value:n,onChange:function(e){return a.handleChange("name",e.target.value)}}),l.a.createElement(Ft.a,{color:"muted"},"Enter client complete name.")),l.a.createElement(q.a,null,l.a.createElement(S.a,{for:"clientAbbreviation"},"Client's abbreviation"),l.a.createElement(J.a,{type:"text",name:"clientAbbreviation",id:"clientAbbreviation",placeholder:"Enter clients abbreviation",style:{marginBottom:0},value:i,onChange:function(e){return a.handleChange("abbreviation",e.target.value)}}),l.a.createElement(Ft.a,{color:"muted"},"3 Letter client's abbreviation.")),l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Company"),l.a.createElement(W.a,{options:a.companyOptions,value:s||null,onChange:function(e){a.handleChange("company",e.value)}})),t?l.a.createElement(R.a,{color:"info",onClick:a.clearClient},"Clear"):"",a.VisualizeElement(t)&&l.a.createElement(R.a,{color:"primary",type:"submit"},t?"Update":"Create"))},a.handleEditClient=function(e){a.setState({client:e})},a.handleSelectChange=function(e){for(var t,n=[],l=0,i=e.target.options.length;l<i;l++)(t=e.target.options[l]).selected&&n.push(t.value);a.setState({selectedClients:n})},a.handleUserSubmit=function(e){e.preventDefault(),a.updateUser(a.state.selectedUser.value,{clients:a.state.selectedClients})},a._loadedColorClass=!1,a.loadColorClass=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/color_by_client/get_color_class/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadedColorClass=!0,this.setState({colorsClasses:e.data.map(function(e){return{value:e.id,label:e.name}})})}.bind(Object(P.a)(a)))},a.loadFormColor=function(e){a.setState({ColorsForm:e})},a.createColor=function(e){e.preventDefault();var t=a.state.ColorsForm;t.name.length>25?a.notify("tr","warning","name cannot be more than 25 characters"):(a.setState({loadingColors:!0}),ae.a.post("https://api.vulcanoapparel.com/api/v1/color_by_client/",t,{headers:{Authorization:"Token "+a.userToken,"Content-Type":"application/json"}}).then(function(){this.setState({loadingColors:!1}),this.componentDidMount(),this.loadFormColor(this.defaultColorForm),this.notify("tr","success","Color created!")}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"createColor"),this.setState({loadingColors:!1}),this.loadFormColor(this.defaultColorForm),this.componentDidMount()}.bind(Object(P.a)(a))))},a.editColor=function(e){e.preventDefault();var t=a.state.ColorsForm;if(t.name.length>25)a.notify("tr","warning","name cannot be more than 25 characters");else{a.setState({loadingColors:!0});t.id;var n=Object(At.a)(t,["id"]);ae.a.patch("https://api.vulcanoapparel.com/api/v1"+"/color_by_client/".concat(t.id,"/"),n,{headers:{Authorization:"Token "+a.userToken,"Content-Type":"application/json"}}).then(function(){this.setState({loadingColors:!1}),this.componentDidMount(),this.loadFormColor(this.defaultColorForm),this.notify("tr","success","Color edited!")}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"editColor"),this.setState({loadingColors:!1}),this.componentDidMount()}.bind(Object(P.a)(a)))}},a._loadedColors=!1,a.loadColors=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/color_by_client/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadedColors=!0,this.setState({colors:e.data})}.bind(Object(P.a)(a)))},a.RemoveColor=function(e){a.setState({loadingColors:!0}),ae.a.delete("https://api.vulcanoapparel.com/api/v1"+"/color_by_client/".concat(e,"/"),{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.setState({loadingColors:!1}),this.componentDidMount(),this.notify("tr","success","Color Removed!")}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"RemoveColor"),this.setState({loadingColors:!1}),this.componentDidMount()}.bind(Object(P.a)(a)))},a.state={vTabs:"vt1",clients:[],client:{},users:[],user:{},selectedUser:null,selectedClients:[],selectCompany:{},colorsClasses:[],selectedClient:[],clientsOptions:[],ColorsForm:a.defaultColorForm,loadingColors:!1,colors:[]},a.createService=l.a.createRef(),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.clearClient(),this.getClients(),this.getUserClients(),this.getUsers(),this.loadColorClass(),this.loadColors(),this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state.clientsOptions.find(function(t){return t.value===e.state.ColorsForm.client});return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(_t.a,{pills:!0,className:"nav-pills-info nav-pills-icons"},l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"vt1"===this.state.vTabs?"active":"",onClick:function(){return e.setState({vTabs:"vt1"})}},"New Clients")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"vt2"===this.state.vTabs?"active":"",onClick:function(){return e.setState({vTabs:"vt2"})}},"Clients per User")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"vt3"===this.state.vTabs?"active":"",onClick:function(){return e.setState({vTabs:"vt3"})}},"Colors"))),l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(St.a,{activeTab:this.state.vTabs},l.a.createElement(Ot.a,{tabId:"vt1"},l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:12,md:3},this.ClientsForm(this.state.client)),l.a.createElement(z.a,{xs:12,md:9},this._ClientsLoaded&&l.a.createElement(Lt,{dataTable:this.state.clients,itemsPages:5,tableTitle:"Client's list",editClient:this.handleEditClient,removeClient:this.removeClient})))),l.a.createElement(Ot.a,{tabId:"vt2"},l.a.createElement(V.a,{onSubmit:this.handleUserSubmit},l.a.createElement("div",{style:{width:"100%",maxWidth:"500px"}},this._UserLoaded&&l.a.createElement(W.a,{menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:Dt,name:"users",placeholder:"Choose User",options:this.state.users,onChange:function(t){e.setState({selectedUser:t,selectedClients:t.clients})},value:this.state.selectedUser})),l.a.createElement(q.a,null,l.a.createElement(S.a,{for:"exampleSelectMulti1"},l.a.createElement("b",null,"Hold control and click to check/uncheck options"),l.a.createElement("br",null),"Clients assignated to this user:"),this._ClientsLoaded&&l.a.createElement(J.a,{type:"select",name:"selectMulti",id:"exampleSelectMulti1",multiple:!0,ref:this.createService,onChange:this.handleSelectChange,value:this.state.selectedClients,style:{height:"200px"}},this.state.clients.map(function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.name," / ",e.abbreviation)}))),l.a.createElement(R.a,{type:"submit",color:"primary"},"Save changes"))),l.a.createElement(Ot.a,{tabId:"vt3"},l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:4},l.a.createElement("h3",null,"Create Color"),l.a.createElement(V.a,{onSubmit:function(t){e.state.ColorsForm.id?e.editColor(t):e.createColor(t)}},l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Cliente"),this._ClientsLoaded&&l.a.createElement(W.a,{options:this.state.clientsOptions,value:t||null,onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{client:t.value}))}})),l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Color Name"),l.a.createElement(J.a,{type:"text",value:this.state.ColorsForm.name,onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{name:t.target.value}))}})),l.a.createElement("div",{className:"clearfix"},this.state.ColorsForm.id&&l.a.createElement(R.a,{type:"button",size:"sm",color:"secundary",disabled:this.state.loadingColors,className:"float-left",onClick:function(){return e.loadFormColor(e.defaultColorForm)}},"Clear"),l.a.createElement(R.a,{type:"submit",color:"primary",size:"sm",disabled:this.state.loadingColors,className:"float-left"},this.state.ColorsForm.id?"Update Color":"Create Color"),this.state.loadingColors&&l.a.createElement("div",{className:"BOMSloader float-left"})))),l.a.createElement(z.a,{xs:8},l.a.createElement("h3",null,"Color List"),this._loadedColors&&l.a.createElement(X.a,{data:this.state.colors.map(function(t){return Object(A.a)({},t,{client:t.client.name,actions:l.a.createElement("div",{className:"clearfix"},l.a.createElement(R.a,{size:"sm",color:"danger",className:"float-right",onClick:function(){e.RemoveColor(t.id)}},l.a.createElement("i",{className:"tim-icons icon-simple-remove"})),l.a.createElement(R.a,{size:"sm",color:"info",className:"float-right",onClick:function(){e.loadFormColor({id:t.id,color_class:t.color_class.id,client:t.client.id,name:t.name,client_code:t.client_code})}},l.a.createElement("i",{className:"tim-icons icon-pencil"})))})}),defaultPageSize:5,columns:[{Header:"Client",accessor:"client"},{Header:"Name",accessor:"name"},{Header:"Actions",accessor:"actions"}]}))))))))}}]),t}(l.a.Component),It=a(8),Rt=a.n(It),zt=a(790),Bt=(a(344),a(277)),Ut=a(162),Wt=a(163),Vt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).notify=function(e,t,n){var i;i={place:e,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:t,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&a.refs.notificationAlert.notificationAlert(i)},a.handleEmailChange=function(e){var t=e.target.value;a.setState({Email:t})},a.handlePasswordChange=function(e){var t=e.target.value;a.setState({Password:t})},a.SignInUser=function(){var e=Object(T.a)(N.a.mark(function e(t,a){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.a.post("https://api.vulcanoapparel.com/api/v1/signin",{username:t,password:a},{"Content-Type":"application/json"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.recover=function(){a.props.history.push({pathname:"/recover"})},a.handleAuthentication=function(e){e.preventDefault(),a.SignInUser(a.state.Email,a.state.Password).then(function(e){var t=Object(Ge.a)(e.data.views);localStorage.setItem("userToken",e.data.token),localStorage.setItem("valid_time",e.data.valid_time),localStorage.setItem("role",e.data.role),localStorage.setItem("user_id",e.data.user_id),localStorage.setItem("user_name",e.data.user_name),localStorage.setItem("user_email",e.data.user_email),localStorage.setItem("permissions",JSON.stringify(e.data.permissions)),localStorage.setItem("views",t),this.setState({_LoggedIn:!0})}.bind(Object(P.a)(a))).catch(function(e){var t="";if(void 0!==e.response)for(var a=0,n=Object.entries(e.response.data);a<n.length;a++){var l=n[a],i=Object(F.a)(l,2),o=i[0],s=i[1];t+="".concat(o,": ").concat(s,"\t")}else t=e.message;this.notify("tr","warning",t)}.bind(Object(P.a)(a)))},a._homeRedirect=l.a.createElement(m.a,{to:{pathname:"/admin/home"}}),a._passRedirect=l.a.createElement(m.a,{to:{pathname:"/admin/recover"}}),a.state={Email:"",focusEmail:!1,Password:"",focusPassword:!1,_LoggedIn:!1,_RecoverPass:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){document.body.classList.toggle("login-page")}},{key:"componentWillUnmount",value:function(){document.body.classList.toggle("login-page")}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),this.state._LoggedIn?this._homeRedirect:"",this.state._RecoverPass?this._passRedirect:"",l.a.createElement("div",{className:"content"},l.a.createElement(b.a,null,l.a.createElement(z.a,{className:"ml-auto mr-auto",lg:"4",md:"6"},l.a.createElement(V.a,{className:"form",onSubmit:function(t){return e.handleAuthentication(t)}},l.a.createElement(v.a,{className:"card-login"},l.a.createElement(_.a,{className:"card-header-name"},l.a.createElement(C.a,{tag:"h1",className:"card-title-name"},"\xa0VULCANO ")),l.a.createElement(y.a,null,l.a.createElement(Bt.a,{className:Rt()({"input-group-focus":this.state.Emailfocus})},l.a.createElement(Ut.a,{addonType:"prepend",className:"inputadd"},l.a.createElement(Wt.a,{className:"input-group-text"},l.a.createElement("i",{className:"tim-icons icon-single-02"}))),l.a.createElement(J.a,{type:"text",placeholder:"Email",onFocus:function(t){return e.setState({Emailfocus:!0})},onBlur:function(t){return e.setState({Emailfocus:!1})},value:this.state.Email,onChange:function(t){return e.handleEmailChange(t)},className:"input"})),l.a.createElement(Bt.a,{className:Rt()({"input-group-focus":this.state.Passwordfocus})},l.a.createElement(Ut.a,{addonType:"prepend",className:"inputadd"},l.a.createElement(Wt.a,{className:"input-group-text"},l.a.createElement("i",{id:"iconl",className:"tim-icons icon-key-25"}))),l.a.createElement(J.a,{type:"password",placeholder:"Password",onFocus:function(t){return e.setState({Passwordfocus:!0})},onBlur:function(t){return e.setState({Passwordfocus:!1})},value:this.state.Password,onChange:function(t){return e.handlePasswordChange(t)},className:"input"})),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:"6"}),l.a.createElement(z.a,{sm:"6"},l.a.createElement(zt.a,{to:"/auth/recover",className:"forgot"},"Forgot Password?"))),l.a.createElement(R.a,{type:"submit"},"Log in"))))))))}}]),t}(l.a.Component),qt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).userToken=localStorage.getItem("userToken")||"",a._homeRedirect=l.a.createElement(m.a,{to:{pathname:"/admin/home"}}),a._isMounted=!1,a.notify=function(e,t,n){var i;i={place:e,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:t,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&a._isMounted&&a.refs.notificationAlert.notificationAlert(i)},a.handleRecoverPassword=function(e){e.preventDefault(),a.setState({loading:!0});var t=new FormData;t.append("email",a.state.Email),ae.a.post("https://api.vulcanoapparel.com/api/v1/forgotpassword",t).then(function(e){this.notify("tr","success",e.data.message),this._isMounted&&this.setState({loading:!1,step:2})}.bind(Object(P.a)(a))).catch(function(){this.notify("tr","warning","Error: no se pudo enviar la solicitud"),this._isMounted&&this.setState({loading:!1,step:1,Email:""})}.bind(Object(P.a)(a)))},a.confirmCode=function(e){e.preventDefault(),a.setState({loading:!0});var t=new FormData;t.append("email",a.state.Email),t.append("token",a.state.codigo),ae.a.post("https://api.vulcanoapparel.com/api/v1/confirmtoken",t).then(function(){this.notify("tr","success","Codigo confirmado"),this._isMounted&&this.setState({loading:!1,step:3})}.bind(Object(P.a)(a))).catch(function(){this.notify("tr","warning","Error: No se pudo verificar el codigo"),this._isMounted&&this.setState({loading:!1,step:1,Email:"",codigo:""})}.bind(Object(P.a)(a)))},a.resetPassword=function(e){if(e.preventDefault(),a.setState({loading:!0}),a.state.newPassword===a.state.newPassword2){var t=new FormData;t.append("user_identification",a.state.Email),t.append("user_new_token",a.state.newPassword),ae.a.post("https://api.vulcanoapparel.com/api/v1/resetPassword",t).then(function(){this.notify("tr","success","Contrase\xf1a cambiada"),this._isMounted&&this.setState({loading:!1,step:1,Email:"",codigo:"",newPassword:"",newPassword2:""})}.bind(Object(P.a)(a))).catch(function(){this.notify("tr","warning","Error: No se pudo reiniciar la contrase\xf1a"),this._isMounted&&this.setState({loading:!1,step:1,Email:"",codigo:"",newPassword:"",newPassword2:""})}.bind(Object(P.a)(a)))}else a.notify("tr","warning","Error: Las contrase\xf1as no coinciden")},a.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},a.state={Email:"",focusEmail:!1,_LoggedIn:!1,loading:!1,codigo:"",newPassword:"",newPassword2:"",step:1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:{display:this.state.loading?"":"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(t," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),this.state._LoggedIn?this._homeRedirect:"",l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(b.a,null,l.a.createElement(z.a,{className:"ml-auto mr-auto",lg:"4",md:"6"},l.a.createElement(V.a,{className:"form",onSubmit:function(e){return e.preventDefault()}},l.a.createElement(v.a,{className:"card-login"},l.a.createElement(_.a,{className:"card-header"},l.a.createElement(C.a,{tag:"h1",className:"card-title"},"Recupera tu Contrase\xf1a")),1===this.state.step?l.a.createElement(y.a,null,l.a.createElement(S.a,null,"Ingresa tu correo electronico"),l.a.createElement(Bt.a,{className:Rt()({"input-group-focus":this.state.Emailfocus})},l.a.createElement(Ut.a,{addonType:"prepend",className:"inputadd"},l.a.createElement(Wt.a,{className:"input-group-text"},l.a.createElement("i",{className:"tim-icons icon-single-02"}))),l.a.createElement(J.a,{type:"text",placeholder:"Email",onFocus:function(t){return e.setState({Emailfocus:!0})},onBlur:function(t){return e.setState({Emailfocus:!1})},value:this.state.Email,onChange:function(t){return e.setState({Email:t.target.value})},className:"input"})),l.a.createElement(S.a,null,"Un correo electronico sera enviado a tu bandeja con un numero. Ingresa este numero en la siguiente pantalla"),l.a.createElement(R.a,{type:"button",onClick:function(t){return e.handleRecoverPassword(t)}},"Enviar")):l.a.createElement(l.a.Fragment,null),2===this.state.step?l.a.createElement(y.a,null,l.a.createElement(S.a,null,"Ingresa el codigo enviado a tu corrreo"),l.a.createElement(q.a,null,l.a.createElement(J.a,{type:"text",placeholder:"Codigo",value:this.state.codigo,onChange:function(t){return e.setState({codigo:t.target.value})}})),l.a.createElement(R.a,{type:"button",onClick:function(t){return e.confirmCode(t)}},"Confirmar")):l.a.createElement(l.a.Fragment,null),3===this.state.step?l.a.createElement(y.a,null,l.a.createElement("h4",null,"Ingresa el nuevo password"),l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Ingresa tu Contrase\xf1a"),l.a.createElement(J.a,{type:"password",placeholder:"Contrase\xf1a",value:this.state.newPassword,onChange:function(t){return e.setState({newPassword:t.target.value})}})),l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Ingresa nuevamente tu Contrase\xf1a"),l.a.createElement(J.a,{type:"password",placeholder:"Contrase\xf1a",value:this.state.newPassword2,onChange:function(t){return e.setState({newPassword2:t.target.value})}})),l.a.createElement(R.a,{type:"button",onClick:function(t){return e.resetPassword(t)}},"Confirmar")):l.a.createElement(l.a.Fragment,null)),l.a.createElement(zt.a,{to:"/auth/login",className:"forgot"},"Ingresar"))))))}}]),t}(l.a.Component),Jt=a(268),Gt=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"content"},l.a.createElement(b.a,null,l.a.createElement(z.a,{className:"ml-auto mr-auto",lg:"4",md:"6"},l.a.createElement(v.a,{style:{width:"20rem"}},l.a.createElement(Fe.a,{top:!0,src:a(620)}),l.a.createElement(y.a,null,l.a.createElement(C.a,null,"Este link no existe"),l.a.createElement(Jt.a,null,"As\xed como muchas cosas en la vida, este link no existe, tal vez intentaste navegar y cometiste un error."),l.a.createElement(R.a,{color:"primary"},"Go somewhere")))))))}}]),t}(l.a.Component),$t=[];var Yt=function(e){var t=Object(Y.a)({},e);return $t=t.dataTable.map(function(e,a){var n,i=l.a.createElement("b",null,l.a.createElement("i",{className:"tim-icons icon-simple-remove text-danger"})),o=i,s=i,r=i,c=i;return e.samFlag&&(o=l.a.createElement(R.a,{color:"info",size:"sm",type:"button",onClick:function(a){a.preventDefault(),t.returnFlag("sam",e.id)}},l.a.createElement("i",{className:"tim-icons icon-double-left text-success"})," Restart")),e.markerFlag&&(s=l.a.createElement(R.a,{color:"info",size:"sm",type:"button",onClick:function(a){a.preventDefault(),t.returnFlag("consumption",e.id)}},l.a.createElement("i",{className:"tim-icons icon-double-left text-success"})," Restart")),e.patternFlag&&(r=l.a.createElement(R.a,{color:"info",size:"sm",type:"button",onClick:function(a){a.preventDefault(),t.returnFlag("pattern",e.id)}},l.a.createElement("i",{className:"tim-icons icon-double-left text-success"})," Restart")),e.deletedFlag&&(c=l.a.createElement(R.a,{color:"info",size:"sm",type:"button",onClick:function(a){a.preventDefault(),t.returnFlag("delete",e.id)}},l.a.createElement("i",{className:"tim-icons icon-double-left text-success"})," Restart")),n=l.a.createElement(R.a,{color:"warning",size:"sm",type:"button",onClick:function(a){a.preventDefault(),t.returnFlag("user",e.id)}},l.a.createElement("i",{className:"tim-icons icon-double-left text-success"})," Release"),{row:a,header_id:e.id,detail_id:e.detail_id,client:e.client.name,season:e.season.name,style:e.style,flags:l.a.createElement(l.a.Fragment,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{xs:3},l.a.createElement("b",null,"SAM:")),l.a.createElement(z.a,{xs:9},o)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{xs:3},l.a.createElement("b",null,"Marker:")),l.a.createElement(z.a,{xs:7},s)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{xs:3},l.a.createElement("b",null,"Pattern:")),l.a.createElement(z.a,{xs:7},r)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{xs:3},l.a.createElement("b",null,"Restore:")),l.a.createElement(z.a,{xs:7},c)),null!==e.updating_user?l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{xs:3},l.a.createElement("b",null,"User:")),l.a.createElement(z.a,{xs:7},n)):l.a.createElement(l.a.Fragment,null))}}),l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,l.a.createElement("b",null,t.tableTitle)),l.a.createElement(X.a,{data:$t,filterable:!0,columns:[{Header:"Code",accessor:"header_id",width:110},{Header:"Client",accessor:"client"},{Header:"Season",accessor:"season"},{Header:"Style",accessor:"style"},{Header:"Flags",accessor:"flags",sortable:!1,filterable:!1}],defaultPageSize:t.itemsPages,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"header_id",desc:!0}],className:"-striped -highlight primary-pagination"}))},Xt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).Access=JSON.parse(localStorage.getItem("permissions")||"{}"),a._isMounted=!1,a._toAproved=!1,a.userToken=localStorage.getItem("userToken")||"",a.checkPageMode=function(){return!0!==document.body.classList.contains("white-content")?"modal-black":"modal-white"},a.notify=function(e,t,n){var i;i={place:e,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:t,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&a._isMounted&&a.refs.notificationAlert.notificationAlert(i)},a.logOut=function(){a._isMounted=!1,localStorage.clear(),a.componentWillUnmount(),a.props.history.push("/auth/login")},a.handleError=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.response?e.response:{},n=e.message?e.message:"";if(void 0!==t.status&&401===t.status)a.logOut();else{var l="";if(void 0!==t.data)for(var i=0,o=Object.entries(t.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;a._isMounted&&a.notify("tr","warning",l)}},a.toAproved=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/costingHeader/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._toAproved=!0,this._isMounted&&this.setState({toAprovedataTable:e.data})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"toAproved")}.bind(Object(P.a)(a)))},a.returnFlag=function(e,t){var n=new FormData;n.append("id",t),n.append(e,1),ae.a.post("https://api.vulcanoapparel.com/api/v1/administration/return/",n,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this._isMounted&&this.notify("tr","success",e+" restarted!"),this.componentDidMount()}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"returnFlag")}.bind(Object(P.a)(a)))},a.state={toAprovedataTable:null,vTabs:"vt1"},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.toAproved()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(v.a,null,this._toAproved&&l.a.createElement(Yt,{dataTable:this.state.toAprovedataTable,itemsPages:5,returnFlag:this.returnFlag})))}}]),t}(l.a.Component),Kt=a(244),Qt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).userToken=localStorage.getItem("userToken")||"",a.Access=JSON.parse(localStorage.getItem("permissions")||"{}"),a._loadingCostingPerClient=!1,a._loadingProfitPerClient=!1,a._isMounted=!1,a.notify=function(e,t,n){var i;i={place:e,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:t,icon:"tim-icons icon-bell-55",autoDismiss:5},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&a._isMounted&&a.refs.notificationAlert.notificationAlert(i)},a.logOut=function(){a._isMounted=!1,localStorage.clear(),a.componentWillUnmount(),a.props.history.push("/auth/login")},a.handleError=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.response?e.response:{},n=e.message?e.message:"";if(void 0!==t.status&&401===t.status)a.logOut();else{var l="";if(void 0!==t.data)for(var i=0,o=Object.entries(t.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;a.notify("tr","warning",l)}},a.getCostingPerClient=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/administration/get_costing_per_client/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){var t=e.data.map(function(e){return e.client}),a=e.data.map(function(e){return e.total});this._loadingCostingPerClient=!0;this._isMounted&&this.setState({CostingPerClient:function(e){var n=e.getContext("2d"),l=n.createLinearGradient(500,0,100,0);l.addColorStop(0,"#80b6f4"),l.addColorStop(1,"#FFFFFF");var i=n.createLinearGradient(0,500,0,50);return i.addColorStop(0,"rgba(128, 182, 244, 0)"),i.addColorStop(1,"rgba(249, 99, 59, 0.40)"),{labels:t,datasets:[{label:"Total Costsheets",borderColor:"#f96332",pointBorderColor:"#FFF",pointBackgroundColor:"#f96332",pointBorderWidth:2,pointHoverRadius:4,pointHoverBorderWidth:1,pointRadius:4,fill:!1,backgroundColor:i,borderWidth:2,data:a}]}}})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"getCostingPerClient")}.bind(Object(P.a)(a)))},a.getProfitPerClient=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/administration/get_profit_per_client/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){var t=e.data.map(function(e){return e.client}),a=e.data.map(function(e){return e.avg.toFixed(2)});this._loadingProfitPerClient=!0;this._isMounted&&this.setState({ProfitPerClient:function(e){var n=e.getContext("2d"),l=n.createLinearGradient(500,0,100,0);l.addColorStop(0,"#80b6f4"),l.addColorStop(1,"#FFFFFF");var i=n.createLinearGradient(0,500,0,50);return i.addColorStop(0,"rgba(128, 182, 244, 0)"),i.addColorStop(1,"rgba(249, 99, 59, 0.40)"),{labels:t,datasets:[{label:"Profit per Client",borderColor:"#f96332",pointBorderColor:"#FFF",pointBackgroundColor:"#f96332",pointBorderWidth:2,pointHoverRadius:4,pointHoverBorderWidth:1,pointRadius:4,fill:!1,backgroundColor:i,borderWidth:2,data:a}]}}})}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"getCostingPerClient")}.bind(Object(P.a)(a)))},a.options={maintainAspectRatio:!0,tooltips:{bodySpacing:4,mode:"nearest",intersect:0,position:"nearest",xPadding:10,yPadding:10,caretPadding:10},responsive:1,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},a.toggle=function(e){a.state.activeTab!==e&&a.setState({activeTab:e})},a.state={CostingPerClient:null,ProfitPerClient:null,activeTab:"1"},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getCostingPerClient(),this.getProfitPerClient()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this._loadingCostingPerClient=!1}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(v.a,{className:"card-plain"},l.a.createElement(_.a,null,l.a.createElement(_t.a,{tabs:!0},l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"1"===this.state.activeTab?"text-primary active border border-primary":"text-primary",onClick:function(){e.toggle("1")}},"CostSheets per Client")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"2"===this.state.activeTab?"text-primary active border border-primary":"text-primary",onClick:function(){e.toggle("2")}},"Profit per Client")),l.a.createElement("a",{href:"".concat("https://api.vulcanoapparel.com/api/v1","/excel_resume_costing/"),target:"_blank",rel:"noopener noreferrer",download:!0},l.a.createElement(R.a,{color:"primary",className:"text-secondary"},"Download Data")))),l.a.createElement(y.a,null,l.a.createElement(St.a,{activeTab:this.state.activeTab,className:"text-center"},l.a.createElement(Ot.a,{tabId:"1"},this._loadingCostingPerClient&&l.a.createElement(Kt.a,{data:this.state.CostingPerClient,options:this.options})),l.a.createElement(Ot.a,{tabId:"2"},this._loadingProfitPerClient&&l.a.createElement(Kt.a,{data:this.state.ProfitPerClient,options:this.options}))))))}}]),t}(l.a.Component),Zt={input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}},ea=function(e){var t=e.index,a=e.color,n=e.onChange,i=e.onRemove,o=e.onDuplicate,s=e.colorsList,r=e.addMaterial,c=e.materialsList,d=e.removeMaterial,m=e.editMaterial,u=e.materialDisabled,p=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}}(),h=s.find(function(e){return e.label===a.value}),g=localStorage.getItem("role")||"";return l.a.createElement(v.a,{className:"".concat(p.bg," border")},l.a.createElement(y.a,null,l.a.createElement(k.a,null,"Generacion"!==g&&"Patronajes"!==g?l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{xs:11},l.a.createElement(W.a,{isDisabled:u,options:s,styles:Zt,onChange:function(e){return n(t,"color",e.value||h.id)},value:h})),l.a.createElement(z.a,{xs:1},l.a.createElement(R.a,{disabled:u,color:"danger",size:"sm",className:"float-right",onClick:function(){i(a.uid)}},"x"),l.a.createElement(R.a,{color:"secondary",size:"sm",className:"float-right",onClick:function(){o(a)}},"copy"))):l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{xs:11},l.a.createElement(W.a,{isDisabled:!0,options:s,styles:Zt,onChange:function(e){return n(t,"color",e.value||h.id)},value:h})))),l.a.createElement("br",null),l.a.createElement(k.a,null,"Generacion"!==g&&"Patronajes"!==g?l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{xs:5},l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Embroidery"),l.a.createElement(z.a,{sm:9},l.a.createElement(J.a,{disabled:u,type:"text",maxLength:"70",onChange:function(e){n(t,"embroidery_description",e.target.value)},value:a.embroidery_description}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Laser"),l.a.createElement(z.a,{sm:9},l.a.createElement(J.a,{type:"text",disabled:u,maxLength:"70",onChange:function(e){n(t,"laser_description",e.target.value)},value:a.laser_description}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Washed"),l.a.createElement(z.a,{sm:9},l.a.createElement(J.a,{type:"text",disabled:u,maxLength:"70",onChange:function(e){n(t,"washed_description",e.target.value)},value:a.washed_description}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Ironing"),l.a.createElement(z.a,{sm:9},l.a.createElement(J.a,{type:"text",disabled:u,maxLength:"70",onChange:function(e){n(t,"ironing_description",e.target.value)},value:a.ironing_description}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Serigraphy"),l.a.createElement(z.a,{sm:9},l.a.createElement(J.a,{type:"text",disabled:u,maxLength:"70",onChange:function(e){n(t,"serigraphy_description",e.target.value)},value:a.serigraphy_description}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Sublimate"),l.a.createElement(z.a,{sm:9},l.a.createElement(J.a,{type:"text",disabled:u,maxLength:"70",onChange:function(e){n(t,"sublimate_description",e.target.value)},value:a.sublimate_description})))))),l.a.createElement(z.a,{xs:7},l.a.createElement(R.a,{size:"sm",disabled:u,onClick:function(){return r(t)}},"Add Material"),l.a.createElement(ta,{index:t,materials:a.materials,materialsList:c,onDelete:d,onEdit:m,materialDisabled:u}))):l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{xs:10},l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Embroidery"),l.a.createElement(z.a,{sm:9},l.a.createElement(J.a,{disabled:!0,type:"text",maxLength:"70",onChange:function(e){n(t,"embroidery_description",e.target.value)},value:a.embroidery_description}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Laser"),l.a.createElement(z.a,{sm:9},l.a.createElement(J.a,{type:"text",disabled:!0,maxLength:"70",onChange:function(e){n(t,"laser_description",e.target.value)},value:a.laser_description}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Washed"),l.a.createElement(z.a,{sm:9},l.a.createElement(J.a,{type:"text",disabled:!0,maxLength:"70",onChange:function(e){n(t,"washed_description",e.target.value)},value:a.washed_description}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Ironing"),l.a.createElement(z.a,{sm:9},l.a.createElement(J.a,{type:"text",disabled:!0,maxLength:"70",onChange:function(e){n(t,"ironing_description",e.target.value)},value:a.ironing_description}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Serigraphy"),l.a.createElement(z.a,{sm:9},l.a.createElement(J.a,{type:"text",disabled:!0,maxLength:"70",onChange:function(e){n(t,"serigraphy_description",e.target.value)},value:a.serigraphy_description}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Sublimate"),l.a.createElement(z.a,{sm:9},l.a.createElement(J.a,{type:"text",disabled:!0,maxLength:"70",onChange:function(e){n(t,"sublimate_description",e.target.value)},value:a.sublimate_description})))))),l.a.createElement(l.a.Fragment,null)))))},ta=function(e){var t=e.index,a=e.materials,n=e.materialsList,i=e.onEdit,o=e.onDelete,s=e.materialDisabled,r=a.map(function(e,a){var r=n.find(function(t){return t.value===e.material_id})||e;return Object(A.a)({},e,{material_name:r.label,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{disabled:s,size:"sm",color:"info",onClick:function(){return i(t,{material:r,consumption:e.consumption,bom_material_id:0,old_costing_id:e.old_costing_id,measure:e.measure},a)}},"Edit"),l.a.createElement(R.a,{disabled:s,size:"sm",color:"danger",onClick:function(){return o(t,e.material_id)}},"x"))})});return l.a.createElement(X.a,{responsive:!0,data:r,filterable:!0,columns:[{Header:"Material",accessor:"material_name",sortable:!1,filterable:!1},{Header:"Consumo",accessor:"consumption",sortable:!1,filterable:!1},{Header:"Measure",accessor:"measure",sortable:!1,filterable:!1},{Header:"Code",accessor:"old_costing_id",sortable:!1,filterable:!1},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1,width:150}],defaultPageSize:5})},aa=function(e){var t=e.selectedCostSheet,a=e.selectedStyle,n=e.header,i=e.onChange,o=e.helper,s=e.nameFile,r=localStorage.getItem("role")||"";return l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{body:!0,outline:!0,color:"primary"},l.a.createElement(y.a,null,l.a.createElement(C.a,null,"CostSheet Info"),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-primary",sm:4},"Client"),l.a.createElement(z.a,{sm:8},t.client_name)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-primary",sm:4},"Style"),l.a.createElement(z.a,{sm:8},t.style)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-primary",sm:4},"Season"),l.a.createElement(z.a,{sm:8},t.season)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-primary",sm:4},"BOM Style"),l.a.createElement(z.a,{sm:8},a.name?a.name:a)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-primary",sm:4},"SMS flag"),l.a.createElement(z.a,{sm:8},l.a.createElement(J.a,{type:"checkbox",style:{marginLeft:0},disabled:"Generacion"===r||"Patronajes"===r,checked:n.sms_flag,onChange:function(){i("sms_flag",!n.sms_flag)}}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-primary",sm:4},"SMS multiplier"),l.a.createElement(z.a,{sm:8},l.a.createElement(J.a,{type:"number",onChange:function(e){i("sms_multiplier",parseFloat(e.target.value))},value:n.sms_multiplier,disabled:!n.sms_flag}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleText",sm:4,className:"text-primary"},"Description"),l.a.createElement(z.a,{sm:8},l.a.createElement(J.a,{type:"textarea",value:n.description,disabled:"Generacion"===r||"Patronajes"===r,onChange:function(e){i("description",e.target.value)}})))),"Generacion"!==r&&"Patronajes"!==r?l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{sm:4,className:"text-primary"},"Upload Techpack:"),l.a.createElement(z.a,{sm:8},l.a.createElement(q.a,{className:"text-center"},l.a.createElement(R.a,{color:"info",className:"btn-simple",size:"sm"},l.a.createElement("input",{type:"file",onChange:function(e){e.preventDefault(),o({techpack:void 0!==e.target.files[0]?e.target.files[0]:null,formdata:{key:"pathToTechpack",value:void 0!==e.target.files[0]?"techpack/"+e.target.files[0].name:null}})},name:"techpackFile",id:"input_techpack_"}),l.a.createElement("i",{className:"tim-icons icon-cloud-upload-94"}),"\xa0techpack")," ",l.a.createElement("label",null,s?"".concat(s.name?s.name:s):"")))):l.a.createElement(l.a.Fragment,null)))},na={input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}},la=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e._isMounted=!1,e.costingURL="https://api.vulcanoapparel.com/api/v1",e.styleId=0,e.defaultEmbellishmentLine={id:0,color:0,name:"",embroidery_description:"",laser_description:"",washed_description:"",ironing_description:"",serigraphy_description:"",sublimate_description:"",materials:[]},e.handleFileChangeTechPack=function(){var t=Object(T.a)(N.a.mark(function t(a,n){var l,i,o;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l=n,i=a,(o=new FormData).append("file",i),o.append("id",l),t.next=7,pe("https://api.vulcanoapparel.com/api/v1/bom_header/upload_production_techpacks/",{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}},o,"file",["pdf","img","png","jpg"]).then(function(){this.notify("tr","success","Techpack uploaded")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e),this.notify("tr","error","Techpack uploaded fail")}.bind(Object(P.a)(e)));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e._sketchLoaded=!1,e.downloadSketch=function(t){var a=e.costingURL+"/costingHeader/download/?key="+t,n={params:{key:t},headers:{Authorization:"Token "+e.userToken}};ae.a.get(a,n).then(function(e){this._sketchLoaded=!0,this.setState({costingSketch:e.data.url})}.bind(Object(P.a)(e)))},e._loadingCostSheets=!1,e.costingHistory=function(){ae.a.get(e.costingURL+"/costingHeader/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingCostSheets=!0,this._isMounted&&this.setState({costsheets:e.data.map(function(e){return{value:e.id,label:"".concat(e.id," / ").concat(e.client.name," / ").concat(e.season.name," / ").concat(e.style),data:e}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"costing History")}.bind(Object(P.a)(e)))},e._loadingStyles=!1,e.getStyles=function(){ae.a.get(e.costingURL+"/style/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingStyles=!0,this._isMounted&&this.setState({styleList:e.data.map(function(e){return{value:e.id,label:"".concat(e.name," / ").concat(e.costing),costing_id:e.costing_id,name:e.name}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"costing History")}.bind(Object(P.a)(e)))},e._selectedCostsheet=!1,e.getSelectedCostSheet=function(t){e.toggleLoading(),ae.a.get(e.costingURL+"/costingHeader/new_BOM/?costing_id=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._selectedCostsheet=!0;var t=this.state.header,a=e.data;this._isMounted&&this.setState({selectedCostSheet:e.data,header:Object(A.a)({},t,{client:a.client,costing_id:a.costing_id,costing_style:a.style,cutting_cost:a.cutting_cost.toFixed(4),sewing_cost:a.sewing_cost.toFixed(4)})}),this.getColors(a.client),this.toggleLoading(),this.getProductionMaterials(a.client),this.downloadSketch(e.data.picture)}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"selected")}.bind(Object(P.a)(e)))},e._selectedHeader=!1,e.showHeaderInfo=function(t){e.toggleLoading(),ae.a.get("".concat(e.costingURL,"/bom_header/").concat(t,"/"),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._selectedHeader=!0;var t=this.state.header,a=e.data;this._isMounted&&this.setState({techpack:a.production_techpack,header:Object(A.a)({},t,{client_id:a.client,return_flag:a.return_flag,bom_style:a.bom_style.name,description:a.description,sms_flag:a.sms_flag,sms_multiplier:a.sms_multiplier,cutting_cost:a.cutting_cost.toFixed(4),sewing_cost:a.sewing_cost.toFixed(4),thread:a.thread.toFixed(4),packing:a.packing.toFixed(4),serigraphy:a.serigraphy.toFixed(4),embellishment_description:a.embellishment_description.map(function(e){return{id:e.id,color:e.color_id,value:"".concat(e.color),embroidery_description:e.embroidery_description,ironing_description:e.ironing_description,laser_description:e.laser_description,serigraphy_description:e.serigraphy_description,sublimate_description:e.sublimate_description,washed_description:e.washed_description,uid:e.id,returned_flag:e.returned_flag,materials:e.materials.map(function(e){return{bom_material_id:e.id,material_id:e.material.id,label:"".concat(e.material.description," / ").concat(e.material.size.name," / ").concat(e.old_costing_id," / ").concat(e.material.client.abbreviation),consumption:e.material_consumption,measure:e.material.measure.name,old_costing_id:e.material.old_costing_id}})}})})}),this.getColors(t.client),this.getProductionMaterials(t.client)}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"selected")}.bind(Object(P.a)(e)))},e._colorsLoaded=!1,e.getColors=function(t){t||(t=1),e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/color_by_client/get_colors_by_client/?client=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._colorsLoaded=!0,this._isMounted&&this.setState({colors:e.data.map(function(e){return{value:e.id,label:"".concat(e.name),data:e}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"selected")}.bind(Object(P.a)(e)))},e.addColorProcessCopy=function(){var t=e.state.header.embellishment_description;e.setState({header:Object(A.a)({},e.state.header,{embellishment_description:t})}),console.log(e.state)},e._loadingComponentStyles=!1,e.getProcessClient=function(){ae.a.get(e.costingURL+"/bom_header/get_bom_colors/?bom_id=".concat(e.props.location.state.bomHeader),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadingComponentStyles=!0,this._isMounted&&this.setState({StylesWithProcess:e.data.map(function(e){return{value:e.id,label:"".concat(t.props.location.state.costingName," / ").concat(e.color__name),name:e.style_name}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Error Loading Components")}.bind(Object(P.a)(e)))},e.setAllProces=function(){var t=[];e.state.StylesWithProcess.map(function(e,a){e.colors_Style.map(function(e,a){return console.log(e),t.push(e),{label:a}})}),e.setState({all_components:t})},e._loadingSelectedComponentStyles=!1,e.getOneProcess=function(t){var a=new FormData;a.append("process_id",t),ae.a.post(e.costingURL+"/bom_header/get_one_process/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingSelectedComponentStyles=!0,this._isMounted&&this.setState({newProcessSelected:e.data})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Error Loading Components")}.bind(Object(P.a)(e)))},e.poolProcessModal=function(){e.setState({processModal:!e.state.processModal})},e.addOldColorProcess=function(){var t=e.state.newProcessSelected,a=new Date,n={id:0,uid:a.getDate()+a.getHours()+a.getSeconds(),value:t.color,color:t.id,editable:!1,embroidery_description:t.embroidery_description,ironing_description:t.ironing_description,laser_description:t.laser_description,serigraphy_description:t.serigraphy_description,sublimate_description:t.sublimate_description,washed_description:t.washed_description,materials:t.materials.map(function(e){return{bom_material_id:0,material_id:e.material.id,label:e.material.description,consumption:e.material_consumption,old_costing_id:e.material.old_costing_id,measure:e.material.measure.name}})},l=e.state.header.embellishment_description,i="".concat(a.getDate()+a.getHours()+a.getSeconds()),o=Object(A.a)({},e.defaultEmbellishmentLine,{uid:i,editable:!1});l=[].concat(Object(Ge.a)(l),[o]),e.setState({header:Object(A.a)({},e.state.header,{embellishment_description:e.state.header.embellishment_description.push(n)})}),e.addColorProcessCopy()},e.addColorProcess=function(){var t=e.state.header.embellishment_description,a=Date.now(),n=Object(A.a)({},e.defaultEmbellishmentLine,{uid:a,editable:!1});t=[].concat(Object(Ge.a)(t),[n]),e.setState({header:Object(A.a)({},e.state.header,{embellishment_description:t})})},e.duplicateColorProcess=function(t){var a=new Date,n={id:0,uid:a.getDate()+a.getHours()+a.getSeconds(),value:void 0,color:void 0,editable:!1,embroidery_description:t.embroidery_description,ironing_description:t.ironing_description,laser_description:t.laser_description,serigraphy_description:t.serigraphy_description,sublimate_description:t.sublimate_description,washed_description:t.washed_description,materials:t.materials.map(function(e){return{bom_material_id:0,material_id:e.material_id,label:e.label,consumption:e.consumption,old_costing_id:e.old_costing_id,measure:e.measure}})},l=e.state.header.embellishment_description,i="".concat(a.getDate()+a.getHours()+a.getSeconds()),o=Object(A.a)({},e.defaultEmbellishmentLine,{uid:i,editable:!1});l=[].concat(Object(Ge.a)(l),[o]),e.setState({header:Object(A.a)({},e.state.header,{embellishment_description:e.state.header.embellishment_description.push(n)})}),e.addColorProcessCopy()},e.removeColorProcess=function(t){var a=e.state.header.embellishment_description.filter(function(e){return e.uid!==t});e.setState({header:Object(A.a)({},e.state.header,{embellishment_description:a})})},e.handleProcessColorChange=function(t,a,n){var l=e.state.header.embellishment_description;l[t][a]=n,e.setState({header:Object(A.a)({},e.state.header,{embellishment_description:l})})},e.toggleAddMaterial=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=e.state.modalMaterials;e.setState({modalMaterials:Object(A.a)({},l,{isOpen:!l.isOpen,index:t,edit:a,matIndex:n})}),t&&!1===a&&null===n&&e.setState({materialForm:{material:null,consumption:null}})},e._loadedMaterials=!1,e.getProductionMaterials=function(t){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/materialp/get_materialp_by_client/?client=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedMaterials=!0,this.setState({materials:e.data.map(function(e){return{bom_material_id:0,old_costing_id:e.old_costing_id,value:e.material_id,label:"".concat(e.description," / ").concat(e.old_costing_id," / ").concat(e.client_abbreviation),measure:e.measure_name}})})}.bind(Object(P.a)(e)))},e.addMaterialToEmbellishment=function(){var t=e.state,a=t.header,n=t.header.embellishment_description,l=t.materialForm,i=t.modalMaterials;if(!l.consumption||l.consumption<0||null===l.material)return e.notify("tr","warning","Material inputs required"),!1;var o=n[i.index].materials;if(o.find(function(e){return e.material_id===l.material.value}))return e.notify("tr","warning","Material already exists in this process"),!1;n[i.index].materials=[].concat(Object(Ge.a)(o),[{material_id:l.material.value,consumption:l.consumption,bom_material_id:0,old_costing_id:l.material.old_costing_id,measure:l.material.measure}]),e.setState({header:Object(A.a)({},a,{embellishment_description:n}),materialForm:{material:null,consumption:null,bom_material_id:0,old_costing_id:null,measure:null}}),e.toggleAddMaterial()},e.removeMaterialEmbellishment=function(t,a){var n=e.state,l=n.header,i=n.header.embellishment_description,o=i[t].materials;i[t].materials=o.filter(function(e){return e.material_id!==a}),e.setState({header:Object(A.a)({},l,{embellishment_description:i})})},e.editMaterialToggle=function(t,a,n){e.setState({materialForm:{material:a.material,consumption:a.consumption,bom_material_id:0,old_costing_id:a.material.old_costing_id,measure:a.material.measure}}),e.toggleAddMaterial(t,!0,n)},e.editMaterialEmbellishment=function(){var t=e.state,a=t.header,n=t.header.embellishment_description,l=t.materialForm,i=t.modalMaterials,o=i.index,s=i.matIndex;n[o].materials[s]={material_id:l.material.value,consumption:l.consumption,bom_material_id:0,old_costing_id:l.old_costing_id,measure:l.measure},e.setState({header:Object(A.a)({},a,{embellishment_description:n}),materialForm:{material:null,consumption:null,bom_material_id:0,old_costing_id:null,measure:null}}),e.toggleAddMaterial()},e.formHelper=function(t){if("techpack"in t){var a=t.techpack;e.setState({techpack:a})}"formdata"in t&&e.setState({formdata:Object(A.a)({},e.state.formdata,Object(j.a)({},t.formdata.key,t.formdata.value))}),e.setState({path_to_techpack:t})},e.updateHeader=function(t,a){var n=e.state,l=n.header,i=n.header.embellishment_description;if(0!==i.length){var o=!0;if(i.map(function(e){return 0===e.color&&(o=!1),0===e.materials.length&&(o=!1,e.materials.length.map(function(e){e.hasOwnProperty("bom_material_id")})),e}),o){var s=Object(A.a)({},l,{client:void 0,style:e.state.selectedStyle.value,id:t,sms_flag:!0===l.sms_flag?l.sms_flag=1:l.sms_flag=0,sms_multiplier:l.sms_multiplier||""===l.sms_multiplier?l.sms_multiplier:0});if(void 0===e.state.techpack)e.notify("tr","warning","Techpack missing.");else{if(0===s.description.length)return void e.notify("tr","warning","Description missing.");ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/update_bom_header/",s,{headers:{Authorization:"Token "+e.userToken}}).then(function(e){void 0===this.state.techpack?this.notify("tr","warning","SHOUDNT BE."):(this.handleFileChangeTechPack(this.state.techpack,e.data.id),this.toggleLoading(),this.notify("tr","success","BOM saved!"))}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"save bom")}.bind(Object(P.a)(e))),e.toggleLoading()}}else e.notify("tr","warning","Invalid Process data, missing color and/or materials")}else e.notify("tr","warning","BOM processes required")},e.duplicateHeader=function(t){e.toggleLoading();var a=new FormData;a.append("bom_id",t),ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/clone_bom/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.toggleLoading(),this.notify("tr","success","BOM duplicated!");this.props.history.push({pathname:"/admin/detail_boms"})}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"save bom")}.bind(Object(P.a)(e)))},e.createHeader=function(){var t=e.state,a=t.header,n=t.header.embellishment_description;if(0!==n.length){var l=!0;if(n.map(function(e){return 0===e.color&&(l=!1),0===e.materials.length&&(l=!1),e}),l){var i=Object(A.a)({},a,{bom_style:void 0,style:e.state.selectedStyle.value,client:void 0,client_id:void 0,costing_id:void 0,sms_flag:!0===a.sms_flag?a.sms_flag=1:a.sms_flag=0,sms_multiplier:a.sms_multiplier||""===a.sms_multiplier?a.sms_multiplier:0});void 0===e.state.techpack?e.notify("tr","warning","Techpack missing."):ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/",i,{headers:{Authorization:"Token "+e.userToken}}).then(function(e){if(void 0===this.state.techpack)this.notify("tr","warning","SHOUDNT BE.");else{this.handleFileChangeTechPack(this.state.techpack,e.data.id),this.notify("tr","success","BOM saved!");this.props.history.push({pathname:"/admin/detail_boms"})}}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"save bom")}.bind(Object(P.a)(e)))}else e.notify("tr","warning","Invalid Process data, missing color and/or materials")}else e.notify("tr","warning","BOM processes required")},e.state={loading:!1,costsheets:[],styleList:[],formdata:{},techpack:void 0,selectedCostSheet:{},selectedCostSheetOptions:{},selectedStyle:{},colors:[],processModal:!1,costingSketch:null,processes:[],path_to_techpack:void 0,header:{client:"",client_id:0,costing_id:0,description:"",cutting_cost:0,sewing_cost:0,thread:0,packing:0,serigraphy:0,sms_flag:!1,sms_multiplier:0,bom_style:"",return_flag:!1,embellishment_description:[]},modalMaterials:{isOpen:!1,index:null,edit:!1,matIndex:null},materials:[],materialForm:{material:null,consumption:"",bom_material_id:0}},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"getBomHeader",value:function(e,t){ae.a.get(this.costingURL+"/costingHeader/new_BOM/?costing_id=".concat(t),{headers:{Authorization:"Token "+this.userToken}}).then(function(e){var t=this.state.header,a=e.data;this._isMounted&&this.setState({selectedCostSheet:e.data,header:Object(A.a)({},t,{return_flag:a.return_flag,client:a.client,thread:a.thread,costing_id:a.costing_id,costing_style:a.style,cutting_cost:a.cutting_cost.toFixed(4),sewing_cost:a.sewing_cost.toFixed(4),bom_style:a.bom_style,sms_flag:a.sms_flag,description:a.description})})}.bind(this)).catch(function(e){this.handleError(e,"Not Found BOM")}.bind(this))}},{key:"getBomProcess",value:function(e,t){ae.a.get(this.costingURL+"/bom_header/"+t+"/",{headers:{Authorization:"Token "+this.userToken}}).then(function(e){this._isMounted&&this.setState({})})}},{key:"componentDidMount",value:function(){if(this._isMounted=!0,this.costingHistory(),this.getStyles(),this.props.location.state){var e={value:this.props.location.state.costingId,label:this.props.location.state.costingName,header:this.props.location.state.bomHeader};this.getSelectedCostSheet(this.props.location.state.costingId),this.setState({selectedCostSheetOptions:e,selectedStyle:e.label,editProcess:this.props.location.state.editProcess}),this.showHeaderInfo(this.props.location.state.bomHeader)}}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"sendForApproval",value:function(e){this.toggleLoading();var t=new FormData;t.append("flag","A"),t.append("bom_id",e),ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/change_status/",t,{headers:{Authorization:"Token "+this.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","CostSheet sent for Approve!"),this.componentDidMount();this.props.history.push({pathname:"/admin/detail_boms"})}.bind(this)).catch(function(e){this.handleError(e,"handleApprove")}.bind(this))}},{key:"render",value:function(){var e=this,t=this.state,a=(t.costsheets,t.selectedCostSheetOptions,t.selectedCostSheet),n=t.colors,i=t.styleList,o=t.selectedStyle,s=t.processModal,r=t.loading,c=(t.ProcessColor,t.costingSketch),d=t.header,m=t.modalMaterials,u=t.materials,p=t.materialForm,h=t.editProcess,g="bg-ligh"===this.checkPageMode().bg?"inverted":"",f=d.sms_multiplier,b=parseFloat(d.cutting_cost),E=parseFloat(d.sewing_cost),_=parseFloat(d.thread),O=parseFloat(d.packing),M=parseFloat(d.serigraphy),w=d.sms_flag?parseFloat(d.cutting_cost)*parseFloat(f||0):parseFloat(d.cutting_cost),x=d.sms_flag?parseFloat(d.sewing_cost)*parseFloat(f||0):parseFloat(d.sewing_cost),N=d.sms_flag?parseFloat(d.thread)*parseFloat(f||0):parseFloat(d.thread),T=d.sms_flag?parseFloat(d.packing)*parseFloat(f||0):parseFloat(d.packing),F=d.sms_flag?parseFloat(d.serigraphy)*parseFloat(f||0):parseFloat(d.serigraphy);return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:r?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(g," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement(L.a,{isOpen:m.isOpen,toggle:this.toggleAddMaterial},l.a.createElement("div",{className:"modal-header"},l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.toggleAddMaterial},l.a.createElement("i",{className:"tim-icons icon-simple-remove"})),l.a.createElement("h5",{className:"modal-title"},"Add Material")),l.a.createElement(H.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Material"),l.a.createElement(z.a,{sm:9},this._loadedMaterials&&l.a.createElement(W.a,{options:u,value:p.material,onChange:function(t){e.setState({materialForm:Object(A.a)({},p,{material:t})})}}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Consumption"),l.a.createElement(z.a,{sm:9},l.a.createElement(J.a,{type:"number",value:p.consumption,onChange:function(t){e.setState({materialForm:Object(A.a)({},p,{consumption:t.target.value,bom_material_id:0,old_costing_id:p.old_costing_id||p.material.old_costing_id,measure:p.measure||p.material.measure})})}})))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleAddMaterial},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){m.edit?e.editMaterialEmbellishment():e.addMaterialToEmbellishment()}},"ADD"))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement("h1",null,"BOMs"),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:3},"CostSheet"),l.a.createElement(z.a,{sm:9},this._loadingStyles?l.a.createElement(W.a,{placeholder:"Search Style",styles:na,options:i,onChange:function(t){e.getSelectedCostSheet(t.costing_id),e.setState(Object(A.a)({},e.state,{selectedStyle:t,header:Object(A.a)({},d)}))}}):l.a.createElement("div",{className:"BOMSloader"}))),l.a.createElement("br",null),this._selectedCostsheet&&l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:6},l.a.createElement(aa,{selectedCostSheet:a,selectedStyle:o,helper:function(t){return e.formHelper(t)},nameFile:this.state.techpack,header:d,onChange:function(t,a){return e.setState({header:Object(A.a)({},d,Object(j.a)({},t,a))})}})),l.a.createElement(z.a,{sm:6},this._sketchLoaded&&l.a.createElement(v.a,{body:!0,outline:!0,color:"primary"},l.a.createElement(Fe.a,{top:!0,src:c,alt:a.picture,style:{maxWidth:"300px",maxHeight:"300px"}})),l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(C.a,null,"Precios"),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:6},l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:4},"Corte"),l.a.createElement(z.a,{sm:8},l.a.createElement(J.a,{type:"number",min:"0",value:b,onChange:function(t){e.setState({header:Object(A.a)({},d,{cutting_cost:parseFloat(t.target.value)})})}}),l.a.createElement(S.a,{sm:12},"x SMS flag: ",w.toFixed(4))))),l.a.createElement(z.a,{sm:6},l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:4},"Costura"),l.a.createElement(z.a,{sm:8},l.a.createElement(J.a,{type:"number",min:"0",value:E,onChange:function(t){e.setState({header:Object(A.a)({},d,{sewing_cost:t.target.value})})}}),l.a.createElement(S.a,{sm:12},"x SMS flag: ",x.toFixed(4))))),l.a.createElement(z.a,{sm:6},l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:4},"Hilo"),l.a.createElement(z.a,{sm:8},l.a.createElement(J.a,{type:"number",placeholder:"0",min:"0",onChange:function(t){e.setState({header:Object(A.a)({},d,{thread:t.target.value})})},value:_}),l.a.createElement(S.a,{sm:12}," ","x SMS flag: ",N.toFixed(4))))),l.a.createElement(z.a,{sm:6},l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:4},"Empaque"),l.a.createElement(z.a,{sm:8},l.a.createElement(J.a,{type:"number",placeholder:"0",min:"0",onChange:function(t){e.setState({header:Object(A.a)({},d,{packing:t.target.value})})},value:O}),l.a.createElement(S.a,{sm:12},"x SMS flag: ",T.toFixed(4))))),l.a.createElement(z.a,{sm:6},l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:4},"Serigrafia"),l.a.createElement(z.a,{sm:8},l.a.createElement(J.a,{type:"number",placeholder:"0",min:"0",onChange:function(t){e.setState({header:Object(A.a)({},d,{serigraphy:t.target.value})})},value:M}),l.a.createElement(S.a,{sm:12},"x SMS flag: ",F.toFixed(4)))))))))),this._selectedCostsheet&&l.a.createElement(v.a,{body:!0,outline:!0,color:"primary"},l.a.createElement(C.a,null,l.a.createElement("div",{className:"clearfix"}),"Procesos/Colores",l.a.createElement(R.a,{color:"primary",size:"sm",onClick:function(){return e.addColorProcess()},className:"float-right"},"Add Color"),l.a.createElement(L.a,{isOpen:s,toggle:this.poolProcessModal,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content-center",toggle:this.toggleImportModal},"Select the process"),l.a.createElement(H.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,"Style / Color"),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},this.state.StylesWithProcess&&l.a.createElement(W.a,{placeholder:"Select Process",styles:na,options:this.state.all_components,onChange:function(t){e.setState({selectedPro:t}),e.getOneProcess(t.value)}})))))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:function(){return e.poolProcessModal()}},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){e.poolProcessModal(),e.addOldColorProcess()}},"Save Changes")))),l.a.createElement(y.a,null,d.embellishment_description.map(function(t,a){return l.a.createElement(l.a.Fragment,null,d.return_flag||t.returned_flag?l.a.createElement(l.a.Fragment,null,d.return_flag&&t.returned_flag?l.a.createElement(ea,{key:a,color:t,index:a,onChange:e.handleProcessColorChange,onRemove:e.removeColorProcess,onDuplicate:e.duplicateColorProcess,colorsList:n,addMaterial:e.toggleAddMaterial,materialsList:u,removeMaterial:e.removeMaterialEmbellishment,editMaterial:e.editMaterialToggle,materialDisabled:!1}):l.a.createElement(l.a.Fragment,null,!1===t.editable?l.a.createElement(l.a.Fragment,null,l.a.createElement(ea,{key:a,color:t,index:a,onChange:e.handleProcessColorChange,onRemove:e.removeColorProcess,onDuplicate:e.duplicateColorProcess,colorsList:n,addMaterial:e.toggleAddMaterial,materialsList:u,removeMaterial:e.removeMaterialEmbellishment,editMaterial:e.editMaterialToggle,materialDisabled:!1})):l.a.createElement(l.a.Fragment,null," "))):l.a.createElement(ea,{key:a,color:t,index:a,onChange:e.handleProcessColorChange,onRemove:e.removeColorProcess,onDuplicate:e.duplicateColorProcess,colorsList:n,addMaterial:e.toggleAddMaterial,materialsList:u,removeMaterial:e.removeMaterialEmbellishment,editMaterial:e.editMaterialToggle,materialDisabled:h}))}))),this._selectedCostsheet&&!1===this._selectedHeader?l.a.createElement(R.a,{color:"primary",onClick:function(){return e.createHeader()}},"Save as New"):l.a.createElement("p",null),this._selectedCostsheet&&this._selectedHeader&&l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{onClick:function(){return e.updateHeader(e.props.location.state.bomHeader)}},"Save Changes"),l.a.createElement(R.a,{color:"danger",onClick:function(){return e.sendForApproval(e.props.location.state.bomHeader)}},"Send for Approve")))}}]),t}(l.a.Component);function ia(e){var t=e.ID,a=e.onChange,n=e.onSubmit;return l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(V.a,{onSubmit:function(e){e.preventDefault(),n(t)}},l.a.createElement(q.a,{id:"formGroup_name"},l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12,md:4},l.a.createElement("label",{htmlFor:"input_name"},"ID:"),l.a.createElement(J.a,{name:"oldID",placeholder:"Old material id",type:"text",id:"oldID",value:t||"",onChange:function(e){return a(e.target.value)}}))),l.a.createElement(k.a,null,l.a.createElement(z.a,{className:"px-md-1",md:"6"},l.a.createElement(q.a,null,l.a.createElement(R.a,{className:"btn-fill",color:"primary",type:"submit"},"Search")))))))))}a(179);var oa=function(e){var t=e.materials,a=e.onDelete,n=e.onUpdate,i=e.onUpload;return l.a.createElement(X.a,{filterable:!0,data:t.map(function(e){return{id:e.id,old_costing_id:e.old_costing_id,client:e.client,description:"".concat(e.description),provider:e.provider?e.provider:"",type:e.type,ingested:e.ingested,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",onClick:function(){n(e.id)}},l.a.createElement("i",{className:"fa fa-edit"})),e.ingested?l.a.createElement(l.a.Fragment,null):l.a.createElement(R.a,{color:"primary",size:"sm",className:"btn-icon btn-link",onClick:function(){return i(e.id)}},l.a.createElement("i",{className:"fa fa-upload"})),l.a.createElement(R.a,{color:"danger",size:"sm",className:"btn-icon btn-link",onClick:function(){return a(e.id)}},l.a.createElement("i",{className:"fa fa-times"})))}}),columns:[{Header:"Code",accessor:"old_costing_id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["old_costing_id"]})},filterAll:!0},{Header:"Description",accessor:"description",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["description"]})},filterAll:!0},{Header:"Client",accessor:"client",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["client"]})},filterAll:!0},{Header:"Provider",accessor:"provider",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["provider"]})},filterAll:!0},{Header:"Type",accessor:"type",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["type"]})},filterAll:!0},{Header:"Actions",accessor:"actions",sortable:!1,filterable:!1,width:150}],defaultPageSize:10})},sa={input:function(e){return Object(A.a)({},e,{color:"#e14eca",Zindex:"100"})}},ra=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e)))._isMounted=!1,a.userToken=localStorage.getItem("userToken")||"",a.valid_time=localStorage.getItem("valid_time")||"",a.Access=JSON.parse(localStorage.getItem("Access")||"{}"),a._loadingMaterials=!1,a.costingURL="https://api.vulcanoapparel.com/api/v1",a.fenixURL="https://api.vulcanoapparel.com/api/v1",a.defaultMaterialForm={description:"",client:null,type_material:null,measure:null,provider:null,min:0,scale:null,size:{},factory:null},a.defaultEditMaterialForm={description:"",client:null,type_material:null,measure:null,provider:null,min:0,scale:null,size:{},factory:null},a.toggle=function(e){a.state.tab!==e&&a.setState({tab:e})},a.logOut=function(){a._isMounted=!1,localStorage.clear(),a.componentWillUnmount(),a.props.history.push("/auth/login")},a.handleError=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.response?e.response:{},n=e.message?e.message:"";if(void 0!==t.status&&401===t.status)a.logOut();else{var l="";if(void 0!==t.data)for(var i=0,o=Object.entries(t.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;a.notify("tr","warning",l)}},a.checkPageMode=function(){var e,t,a;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="",a="modal-white";break;default:e="bg-dark",t="text-primary",a="modal-black"}return{bg:e,hc:t,mc:a}},a.notify=function(e,t,n){var i;i={place:e,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:t,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&a._isMounted&&a.refs.notificationAlert.notificationAlert(i)},a.importOnChange=function(e){a.setState({importId:e})},a.importOnSubmit=function(e){if(""===e||null===e)return!1;a.setState({loading:!0});var t=new FormData;t.append("id",e),t.append("factory",a.state.selectedOption),ae.a.post(a.costingURL+"/materialp/bring_old_material/",t,{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this.setState({loading:!1,materialInfo:e.data}),Object.keys(e.data).length>0?this.toggleImportModal():this.notify("tr","warning","Material not found")}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.handleError(e,"import material")}.bind(Object(P.a)(a)))},a.toggleImportModal=function(){a._isMounted&&a.setState({importModal:!a.state.importModal})},a.fnImportMaterial=function(e,t,n){var l,i=0,o=a.state.materialInfo;if(""===e||null===e)return!1;for(l=0;l<a.state.materialMeasures.length;l++)o.measure===a.state.materialMeasures[l].label&&(i=a.state.materialMeasures[l].value);a.setState({loading:!0});var s=new FormData;s.append("old_code",e),s.append("description",o.description),s.append("type_material",o.costing_type_material?o.costing_type_material:o.type_material),s.append("measure",i),s.append("min",o.min),s.append("provider",o.costing_provider_id?o.costing_provider_id:o.provider.trim()),s.append("client",o.costing_client_id?o.costing_client_id:o.client),s.append("factory","".concat(o.factory.id)),s.append("size",n.value),ae.a.post(a.costingURL+"/materialp/create_new_material_from_old_material/",s,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.setState({loading:!1,materialInfo:{},importId:null}),this.toggleImportModal(),this.getProductionMaterials(),this.notify("tr","success","Material Imported! Please review the provider")}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.handleError(e,"create material ")}.bind(Object(P.a)(a)))},a._loadingClients=!1,a.getClients=function(){ae.a.get(a.costingURL+"/client/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadingClients=!0;var t=e.data;this.setState({clients:t.map(function(e){return{value:e.id,label:e.name,abbreviation:e.abbreviation}})})}.bind(Object(P.a)(a)))},a._loadingCompanies=!1,a.setCompanyName=function(){a._loadingCompanies=!0,a.setState({companyName:[{name:"Texsun",code:"01"},{name:"Texfor",code:"02"}].map(function(e){return{label:e.name,value:e.code}})})},a._loadingMaterialType=!1,a.getMaterialType=function(){ae.a.get(a.costingURL+"/material_type/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadingMaterialType=!0;var t=e.data;this.setState({materialTypes:t.map(function(e){return{value:e.id,label:e.name}})})}.bind(Object(P.a)(a)))},a._loadingMaterialMeasures=!1,a.getMaterialMeasures=function(){ae.a.get(a.costingURL+"/material_measure/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadingMaterialMeasures=!0;var t=e.data;this.setState({materialMeasures:t.map(function(e){return{value:e.id,label:e.name}})})}.bind(Object(P.a)(a)))},a._loadingProviders=!1,a.getProviders=function(){ae.a.get(a.costingURL+"/provider/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadingProviders=!0;var t=e.data;this.setState({providers:t.map(function(e){return{value:e.id,label:e.name}})})}.bind(Object(P.a)(a)))},a._loadingSizes=!1,a.getSizes=function(e){ae.a.get("".concat(a.costingURL,"/material_size/?client=").concat(e),{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadingSizes=!0;var t=e.data;this.setState({sizes:t})}.bind(Object(P.a)(a)))},a._loadingScales=!1,a.getScales=function(){ae.a.get("".concat(a.costingURL,"/material_scale/"),{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadingScales=!0;var t=e.data;this.setState({scales:t})}.bind(Object(P.a)(a)))},a.AddNewMaterial=function(e){var t=e.client,n=e.description,l=e.measure,i=e.type_material,o=e.min,s=e.provider,r=e.size,c=e.factory;if(null===t||""===n||null===l||null===i||null===s||r==={}||null===c)a.notify("tr","warning","Please fill all the fields of the material form");else{a.setState({loading:!0});var d=new FormData,m=[];Object.keys(r).map(function(e){return r[e]&&m.push(e),e}),d.append("description",n.trim()),d.append("type_material",i.value),d.append("measure",l.value),d.append("min",o),d.append("provider",s.value),d.append("client",t.value),d.append("size",m.join()),d.append("factory",c.value),ae.a.post(a.costingURL+"/materialp/create_new_material_from_old_material/",d,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.setState({loading:!1,materialForm:{description:"",client:null,type_material:null,measure:null,provider:null,min:0,scale:null,size:{},factory:null}}),this.getProductionMaterials(),this.notify("tr","success","Material Created!"),this.setState({loading:!1,materialForm:{description:"",client:null,type_material:null,measure:null,provider:null,min:0,scale:null,size:{},factory:null}})}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1,materialForm:{description:"",client:null,type_material:null,measure:null,provider:null,min:0,scale:null,size:{},factory:null}}),this.handleError(e,"Please try creating again")}.bind(Object(P.a)(a)))}},a._loadedMaterials=!1,a.getProductionMaterials=function(){ae.a.get(a.costingURL+"/materialp/",{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._loadedMaterials=!0,this.setState({materials:e.data})}.bind(Object(P.a)(a)))},a.toggleLoading=function(){a._isMounted&&a.setState({loading:!a.state.loading})},a._loadedMaterials=!1,a.deleteProductionMaterial=function(e){a.toggleLoading(),ae.a.delete("".concat(a.fenixURL,"/materialp/").concat(e,"/"),{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.notify("tr","success","Material deleted!"),this.toggleLoading(),this.getProductionMaterials()}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"delete  Material")}.bind(Object(P.a)(a)))},a._uploadMaterials=!1,a.uploadProductionMaterial=function(e){var t=new FormData;t.append("id",e),a.toggleLoading(),ae.a.post(a.fenixURL+"/materialp/ingest_one_material/",t,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.notify("tr","success","Material added to Sistemas Integrados!"),this.toggleLoading(),this.getProductionMaterials()}.bind(Object(P.a)(a))).catch(function(e){this.handleError(e,"Material not added")}.bind(Object(P.a)(a)))},a._updateMaterial=!1,a.updateProductionMaterial=function(e){ae.a.get("".concat(a.costingURL,"/materialp/").concat(e,"/"),{headers:{Authorization:"Token "+a.userToken}}).then(function(e){this._updateMaterial=!0,this.toggle("4"),this.setState({editMaterial:{description:e.data.description,client:e.data.client.name,measure:e.data.measure.name,type:e.data.type.name,min:e.data.min,provider:void 0,factory:e.data.factory[0].name,sizes:e.data.size},editmaterialForm:{id:e.data.id,description:e.data.description,client:e.data.client,measure:e.data.measure,type:e.data.type,min:e.data.min,provider:e.data.provider,size:e.data.size,factory:e.data.factory}}),this.setState({sizesMaterial:e.data.size})}.bind(Object(P.a)(a)))},a.editMaterial=function(e){var t=e.id,n=e.client,l=e.description,i=e.measure,o=e.type,s=e.min,r=e.provider,c=e.size,d=e.factory;if(null===n||""===l||null===i||null===o||null===r||c==={}||null===d)a.notify("tr","warning","Please fill all the fields of the material form");else{a.setState({loading:!0});var m=new FormData;m.append("id",t),m.append("description",l.trim()),m.append("type",void 0===o.value?a.state.editmaterialForm.type.id:o.value),m.append("measure",void 0===i.value?a.state.editmaterialForm.measure.id:i.value),m.append("min",s),m.append("provider",void 0===r.value?a.state.editmaterialForm.provider.id:r.value),m.append("client",void 0===n.value?a.state.editmaterialForm.client.id:n.value),m.append("factory",void 0===d.value?"0".concat(a.state.editmaterialForm.factory[0].id):d.value),ae.a.patch("".concat(a.costingURL,"/materialp/").concat(t,"/"),m,{headers:{Authorization:"Token "+a.userToken}}).then(function(){this.setState({loading:!1,materialForm:this.defaultMaterialForm,sizes:[]}),this.getProductionMaterials(),this.notify("tr","success","Material Changed!"),this.toggle("1")}.bind(Object(P.a)(a))).catch(function(e){this.setState({loading:!1}),this.handleError(e,"edit material")}.bind(Object(P.a)(a)))}},a.state={tab:"1",loading:!1,importLoading:!1,importId:null,importModal:!1,materialInfo:{},materialForm:a.defaultMaterialForm,editmaterialForm:a.defaultEditMaterialForm,clients:null,materialTypes:null,companyName:null,selectedOption:"1",materialMeasures:null,providers:null,sizes:null,materials:[],scales:[],editMaterial:[],importScale:null,importSize:null,importMeasure:null},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getClients(),this.setCompanyName(),this.getMaterialType(),this.getMaterialMeasures(),this.getProviders(),this.getScales(),this.getProductionMaterials()}},{key:"render",value:function(){var e=this,t=this.state,a=t.tab,n=t.materialInfo,i=t.importId,o=t.materialForm,s=t.editmaterialForm,r=t.clients,c=t.materialTypes,d=t.companyName,m=t.materialMeasures,u=t.providers,p=t.materials,h=t.scales,g=t.editMaterial,f=this.checkPageMode(),b="bg-ligh"===f.bg?"inverted":"";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:this.state.loading?{display:"flex"}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(b," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement("div",{className:"content"},l.a.createElement(L.a,{isOpen:this.state.importModal,toggle:this.toggleImportModal,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content-center",toggle:this.toggleImportModal},"Import Material."),l.a.createElement(H.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:4},l.a.createElement("b",null,"Old Code:")),l.a.createElement(z.a,{sm:8},i),l.a.createElement(z.a,{sm:4},l.a.createElement("b",null,"Description:")),l.a.createElement(z.a,{sm:8},n.description),l.a.createElement(z.a,{sm:4},l.a.createElement("b",null,"Type:")),l.a.createElement(z.a,{sm:8},n.type_material),l.a.createElement(z.a,{sm:4},l.a.createElement("b",null,"Measure:")),l.a.createElement(z.a,{sm:8},n.measure),l.a.createElement(z.a,{sm:4},l.a.createElement("b",null,"Minimum:")),l.a.createElement(z.a,{sm:8},n.min),l.a.createElement(z.a,{sm:4},l.a.createElement("b",null,"Provider:")),l.a.createElement(z.a,{sm:8},n.provider),l.a.createElement(z.a,{sm:4},l.a.createElement("b",null,"Client:")),l.a.createElement(z.a,{sm:8},n.client),l.a.createElement(z.a,{sm:4},l.a.createElement("b",null,"Scale:")),l.a.createElement(z.a,{sm:8},this._loadingScales&&l.a.createElement(W.a,{styles:sa,options:h.map(function(e){return{value:e.id,label:e.name,sizes:e.sizes}}),className:"react-select",classNamePrefix:"react-select",onChange:function(t){e.setState({importScale:t})},value:this.state.importScale,placeholder:"Select Scale"}),l.a.createElement("br",null)),l.a.createElement(z.a,{sm:4},l.a.createElement("b",null,"Size:")),l.a.createElement(z.a,{sm:8},this._loadingScales&&this.state.importScale&&l.a.createElement(W.a,{styles:sa,options:this.state.importScale.sizes.map(function(e,t){return{value:e.id,label:e.name}}),className:"react-select",classNamePrefix:"react-select",onChange:function(t){e.setState({importSize:t})},value:this.state.importSize,placeholder:"Select Size"})))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleImportModal},"Close"),this.state.importScale&&this.state.importSize&&l.a.createElement(R.a,{color:"primary",onClick:function(){return e.fnImportMaterial(e.state.importId,e.state.importScale,e.state.importSize)}},"Import"))),l.a.createElement(_t.a,{tabs:!0},l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"1"===a?"active":"",onClick:function(){e.toggle("1")},style:"bg-ligh"===f.bg?{color:"black",borderColor:"black"}:{}},"Materials")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"2"===a?"active":"",onClick:function(){e.toggle("2")},style:"bg-ligh"===f.bg?{color:"black",borderColor:"black"}:{}},"Create")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"3"===a?"active":"",onClick:function(){e.toggle("3")},style:"bg-ligh"===f.bg?{color:"black",borderColor:"black"}:null},"Import"))),l.a.createElement(St.a,{activeTab:a},l.a.createElement(Ot.a,{tabId:"4"},l.a.createElement(v.a,null,l.a.createElement(_.a,null,"Edit Material",l.a.createElement("hr",null),l.a.createElement(y.a,null,l.a.createElement(V.a,{onSubmit:function(t){t.preventDefault(),e.editMaterial(s)}},l.a.createElement(q.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12,md:8},l.a.createElement(k.a,null,l.a.createElement(z.a,{md:6},l.a.createElement(S.a,null,"Client")),l.a.createElement(z.a,{md:6},this._loadingClients&&l.a.createElement(W.a,{options:r,menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:sa,onChange:function(t){e.setState({editmaterialForm:Object(A.a)({},s,{client:t})})},selectedValue:s.client,placeholder:g.client}),l.a.createElement("br",null)),l.a.createElement(z.a,{md:6},l.a.createElement(S.a,null,"Description")),l.a.createElement(z.a,{md:6},l.a.createElement(J.a,{type:"text",maxLength:"150",onChange:function(t){return e.setState({editmaterialForm:Object(A.a)({},s,{description:t.target.value})})},value:s.description}),l.a.createElement("br",null)),l.a.createElement(z.a,{md:6},l.a.createElement(S.a,null,"Factory")),l.a.createElement(z.a,{md:6},this._loadingCompanies&&l.a.createElement(W.a,{options:d,menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:sa,onChange:function(t){e.setState({editmaterialForm:Object(A.a)({},s,{factory:t})})},placeholder:g.factory}),l.a.createElement("br",null)),l.a.createElement(z.a,{md:6},l.a.createElement(S.a,null,"Type")),l.a.createElement(z.a,{md:6},this._loadingMaterialType&&l.a.createElement(W.a,{options:c,menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:sa,onChange:function(t){e.setState({editmaterialForm:Object(A.a)({},s,{type:t})})},selectedValue:s.type,placeholder:g.type}),l.a.createElement("br",null)),l.a.createElement(z.a,{md:6},l.a.createElement(S.a,null,"Measure")),l.a.createElement(z.a,{md:6},this._loadingMaterialMeasures&&l.a.createElement(W.a,{options:m,menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:sa,onChange:function(t){e.setState({editmaterialForm:Object(A.a)({},s,{measure:t})})},selectedValue:s.measure,placeholder:g.measure}),l.a.createElement("br",null)),l.a.createElement(z.a,{md:6},l.a.createElement(S.a,null,"Min")),l.a.createElement(z.a,{md:6},l.a.createElement(J.a,{type:"number",onChange:function(t){return e.setState({editmaterialForm:Object(A.a)({},s,{min:t.target.value})})},value:s.min,placeholder:g.min}),l.a.createElement("br",null)),l.a.createElement(z.a,{md:6},l.a.createElement(S.a,null,"Provider")),l.a.createElement(z.a,{md:6},this._loadingProviders&&l.a.createElement(W.a,{options:u,menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:sa,onChange:function(t){e.setState({editmaterialForm:Object(A.a)({},s,{provider:t})})},selectedValue:s.provider}),l.a.createElement("br",null)),l.a.createElement(z.a,{md:6},l.a.createElement(S.a,null,"Sizes")),l.a.createElement(z.a,{md:6},this._updateMaterial&&g.sizes?l.a.createElement(l.a.Fragment,null,g.sizes.map(function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,null,e.name,", \xa0"))})):l.a.createElement(l.a.Fragment,null,"El material tiene una unica talla "))))),l.a.createElement(k.a,null,l.a.createElement(z.a,{className:"px-md-1",md:"6"},l.a.createElement(q.a,null,l.a.createElement(R.a,{className:"btn-fill",color:"primary",type:"submit"},"Save Changes"))))))))))),l.a.createElement(St.a,{activeTab:a},l.a.createElement(Ot.a,{tabId:"1"},l.a.createElement(oa,{materials:p,onDelete:this.deleteProductionMaterial,onUpdate:this.updateProductionMaterial,onUpload:this.uploadProductionMaterial})),l.a.createElement(Ot.a,{tabId:"2"},l.a.createElement(v.a,null,l.a.createElement(_.a,null,l.a.createElement("h5",{className:"title"},"Create Material")),l.a.createElement(y.a,null,l.a.createElement(V.a,{onSubmit:function(t){t.preventDefault(),e.AddNewMaterial(o)}},l.a.createElement(q.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12,md:8},l.a.createElement(k.a,null,l.a.createElement(z.a,{md:6},l.a.createElement(S.a,null,"Client")),l.a.createElement(z.a,{md:6},this._loadingClients&&l.a.createElement(W.a,{options:r,menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:sa,onChange:function(t){e.setState({materialForm:Object(A.a)({},o,{client:t})})},value:o.client,placeholder:"Select client"}),l.a.createElement("br",null)),l.a.createElement(z.a,{md:6},l.a.createElement(S.a,null,"Description")),l.a.createElement(z.a,{md:6},l.a.createElement(J.a,{type:"text",maxLength:"142",onChange:function(t){return e.setState({materialForm:Object(A.a)({},o,{description:t.target.value})})},value:o.description,placeholder:"Enter description"}),l.a.createElement("br",null)),l.a.createElement(z.a,{md:6},l.a.createElement(S.a,null,"Company")),l.a.createElement(z.a,{md:6},this._loadingCompanies&&l.a.createElement(W.a,{options:d,menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:sa,onChange:function(t){e.setState({materialForm:Object(A.a)({},o,{factory:t})})},value:o.factory,placeholder:"Select company"}),l.a.createElement("br",null)),l.a.createElement(z.a,{md:6},l.a.createElement(S.a,null,"Type")),l.a.createElement(z.a,{md:6},this._loadingMaterialType&&l.a.createElement(W.a,{options:c,menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:sa,onChange:function(t){e.setState({materialForm:Object(A.a)({},o,{type_material:t})})},value:o.type_material,placeholder:"Select type"}),l.a.createElement("br",null)),l.a.createElement(z.a,{md:6},l.a.createElement(S.a,null,"Measure")),l.a.createElement(z.a,{md:6},this._loadingMaterialMeasures&&l.a.createElement(W.a,{options:m,menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:sa,onChange:function(t){e.setState({materialForm:Object(A.a)({},o,{measure:t})})},value:o.measure,placeholder:"Select measure"}),l.a.createElement("br",null)),l.a.createElement(z.a,{md:6},l.a.createElement(S.a,null,"Min")),l.a.createElement(z.a,{md:6},l.a.createElement(J.a,{type:"number",onChange:function(t){return e.setState({materialForm:Object(A.a)({},o,{min:t.target.value})})},value:o.min,placeholder:"Enter minimum"}),l.a.createElement("br",null)),l.a.createElement(z.a,{md:6},l.a.createElement(S.a,null,"Provider")),l.a.createElement(z.a,{md:6},this._loadingProviders&&l.a.createElement(W.a,{options:u,menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",styles:sa,onChange:function(t){e.setState({materialForm:Object(A.a)({},o,{provider:t})})},value:o.provider,placeholder:"Select Provider"}),l.a.createElement("br",null)),l.a.createElement(z.a,{md:6},l.a.createElement(S.a,null,"Scale")),l.a.createElement(z.a,{md:6},this._loadingScales&&l.a.createElement(W.a,{styles:sa,options:h.map(function(e){return{value:e.id,label:e.name,sizes:e.sizes}}),menuPortalTarget:document.body,className:"react-select",classNamePrefix:"react-select",onChange:function(t){e.setState({materialForm:Object(A.a)({},o,{scale:t})})},value:o.scale,placeholder:"Select Scale"}),l.a.createElement("br",null)),l.a.createElement(z.a,{md:6}),l.a.createElement(z.a,{md:6},this._loadingScales&&o.scale&&o.scale.sizes.map(function(t,a){return l.a.createElement(q.a,{check:!0,key:a},l.a.createElement(S.a,{check:!0},l.a.createElement(J.a,{type:"checkbox",value:t.id,onChange:function(a){var n=o.size;n[t.id]=a.target.checked,e.setState({materialForm:Object(A.a)({},o,{size:n})})},checked:!!o.size[t.id]&&o.size[t.id]})," ",t.name,l.a.createElement("span",{className:"form-check-sign"},l.a.createElement("span",{className:"check"}))))}),l.a.createElement("br",null))))),l.a.createElement(k.a,null,l.a.createElement(z.a,{className:"px-md-1",md:"6"},l.a.createElement(q.a,null,l.a.createElement(R.a,{className:"btn-fill",color:"primary",type:"submit"},"Add"))))))))),l.a.createElement(Ot.a,{tabId:"3"},l.a.createElement(v.a,null,l.a.createElement(_.a,null,l.a.createElement("h5",{className:"title"},"Import Material")),l.a.createElement(y.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12,md:4},l.a.createElement("div",null,l.a.createElement("label",null,l.a.createElement("input",{type:"radio",value:"1",name:"company",checked:"1"===this.state.selectedOption,onChange:function(){return e.setState({selectedOption:"1"})}})," Zuntex"),l.a.createElement("br",null),l.a.createElement("label",null,l.a.createElement("input",{type:"radio",value:"2",name:"company",onChange:function(){return e.setState({selectedOption:"2"})}})," JYT "),l.a.createElement("br",null),l.a.createElement("label",null,l.a.createElement("input",{type:"radio",value:"3",name:"company",onChange:function(){return e.setState({selectedOption:"3"})}})," Trechento ")))),l.a.createElement(ia,{onChange:this.importOnChange,onSubmit:this.importOnSubmit,ID:this.state.importId})))))))}}]),t}(l.a.Component),ca=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e._isMounted=!1,e._ClientsLoaded=!1,e._UserLoaded=!1,e.defaultColorForm={color_class:null,client:null,name:"",client_code:""},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.RemoveColor=function(t){e.setState({loadingColors:!0}),ae.a.delete("https://api.vulcanoapparel.com/api/v1"+"/color_by_client/".concat(t,"/"),{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.setState({loadingColors:!1}),this.componentDidMount(),this.notify("tr","success","Color Removed!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"RemoveColor"),this.setState({loadingColors:!1}),this.componentDidMount()}.bind(Object(P.a)(e)))},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.handleSelectChange=function(t){for(var a,n=[],l=0,i=t.target.options.length;l<i;l++)(a=t.target.options[l]).selected&&n.push(a.value);e.setState({selectedClients:n})},e.handleUserSubmit=function(t){t.preventDefault(),e.updateUser(e.state.selectedUser.value,{clients:e.state.selectedClients})},e._loadedColorClass=!1,e.loadColorClass=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/color_by_client/get_color_class/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedColorClass=!0,this.setState({colorsClasses:e.data.map(function(e){return{value:e.id,label:e.name}})})}.bind(Object(P.a)(e)))},e.loadFormColor=function(t){e.setState({ColorsForm:t})},e._loadedColorClass=!1,e.loadColorClass=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/color_by_client/get_color_class/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedColorClass=!0,this.setState({colorsClasses:e.data.map(function(e){return{value:e.id,label:e.name}})})}.bind(Object(P.a)(e)))},e.getClients=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/clients/get_all_clients/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._ClientsLoaded=!0,this._isMounted&&this.setState({clients:e.data})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"getClients")}.bind(Object(P.a)(e)))},e.createColor=function(t){t.preventDefault();var a=e.state.ColorsForm;a.name.length>25?e.notify("tr","warning","name cannot be more than 25 characters"):(e.setState({loadingColors:!0}),ae.a.post("https://api.vulcanoapparel.com/api/v1/color_by_client/",a,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"application/json"}}).then(function(){this.setState({loadingColors:!1}),this.componentDidMount(),this.loadFormColor(this.defaultColorForm),console.log(this.defaultColorForm),this.notify("tr","success","Color created!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"createColor"),this.setState({loadingColors:!1}),this.loadFormColor(this.defaultColorForm),console.log(this.defaultColorForm)}.bind(Object(P.a)(e))))},e.editColor=function(t){t.preventDefault();var a=e.state.ColorsForm;if(a.name.length>25)e.notify("tr","warning","name cannot be more than 25 characters");else{e.setState({loadingColors:!0});a.id;var n=Object(At.a)(a,["id"]);ae.a.patch("https://api.vulcanoapparel.com/api/v1"+"/color_by_client/".concat(a.id,"/"),n,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"application/json"}}).then(function(){this.setState({loadingColors:!1}),this.componentDidMount(),this.loadFormColor(this.defaultColorForm),this.notify("tr","success","Color edited!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"editColor"),this.setState({loadingColors:!1}),this.componentDidMount()}.bind(Object(P.a)(e)))}},e._loadedColors=!1,e.loadColors=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/color_by_client/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedColors=!0,this.setState({colors:e.data})}.bind(Object(P.a)(e)))},e._userClientsLoaded=!1,e.getUserClients=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/clients/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._userClientsLoaded=!0,this._isMounted&&this.setState({clientsOptions:e.data.map(function(e){return{value:e.id,label:"".concat(e.company," / ").concat(e.name," / ").concat(e.abbreviation)}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"getUserClients")}.bind(Object(P.a)(e)))},e.state={loading:!1,pathToTechpack:void 0,clients:[],client:{},users:[],user:{},selectedUser:null,selectedClients:[],selectCompany:{},colorsClasses:[],selectedClient:[],clientsOptions:[],ColorsForm:e.defaultColorForm,loadingColors:!1,colors:[]},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getClients(),this.getUserClients(),this.loadColorClass(),this.loadColors(),this._isMounted=!0}},{key:"render",value:function(){var e=this,t=this.state.clientsOptions.find(function(t){return t.value===e.state.ColorsForm.client});return l.a.createElement("div",{className:"content"},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:4},l.a.createElement("h3",null,"Create Color"),l.a.createElement(V.a,{onSubmit:function(t){e.state.ColorsForm.id?e.editColor(t):e.createColor(t)}},l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Cliente"),this._ClientsLoaded&&l.a.createElement(W.a,{options:this.state.clientsOptions,value:t||null,onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{client:t.value}))}})),l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Color Name"),l.a.createElement(J.a,{type:"text",maxLength:"25",value:this.state.ColorsForm.name,onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{name:t.target.value}))}})),l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Client Code"),l.a.createElement(J.a,{type:"text",value:this.state.ColorsForm.client_code,onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{client_code:t.target.value}))}})),l.a.createElement("div",{className:"clearfix"},this.state.ColorsForm.id&&l.a.createElement(R.a,{type:"button",size:"sm",color:"secundary",disabled:this.state.loadingColors,className:"float-left",onClick:function(){return e.loadFormColor(e.defaultColorForm)}},"Clear"),l.a.createElement(R.a,{type:"submit",color:"primary",size:"sm",disabled:this.state.loadingColors,className:"float-left"},this.state.ColorsForm.id?"Update Color":"Create Color"),this.state.loadingColors&&l.a.createElement("div",{className:"BOMSloader float-left"})))),l.a.createElement(z.a,{xs:8},l.a.createElement("h3",null,"Color List"),this._loadedColors&&l.a.createElement(X.a,{data:this.state.colors.map(function(t){return Object(A.a)({},t,{client:t.client.name,actions:l.a.createElement("div",{className:"clearfix"},l.a.createElement(R.a,{size:"sm",color:"danger",className:"float-right",onClick:function(){e.RemoveColor(t.id)}},l.a.createElement("i",{className:"tim-icons icon-simple-remove"})),l.a.createElement(R.a,{size:"sm",color:"info",className:"float-right",onClick:function(){e.loadFormColor({id:t.id,client:t.client.id,name:t.name,client_code:t.client_code})}},l.a.createElement("i",{className:"tim-icons icon-pencil"})))})}),filterable:!0,defaultPageSize:5,columns:[{Header:"Client",accessor:"client",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["client"]})},filterAll:!0},{Header:"Name",accessor:"name",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["name"]})},filterAll:!0},{Header:"Actions",accessor:"actions",sortable:!1,filterable:!1,width:200}]}))))))}}]),t}(l.a.Component),da=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e._isMounted=!1,e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.deleteHeaders=function(t){e.toggleLoading(),ae.a.delete("https://api.vulcanoapparel.com/api/v1/bom_header/"+t+"/",{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.notify("tr","success","BOM deleted!"),this.toggleLoading(),this.getBomsHeaders(),this.getProviders()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"delete  BOM")}.bind(Object(P.a)(e)))},e.OpenSheet=function(t,a,n){console.log(t,a,n);e.props.history.push({pathname:"/admin/boms",state:{bomHeader:a,costingId:t,costingName:n,editProcess:!1}})},e.goToCreate=function(){e.props.history.push({pathname:"/admin/boms"})},e.loadrender=function(t){e.setState({bomsHeader:t})},e._loadedBomsHeaders=!1,e.getBomsHeaders=function(){e.toggleLoading(),ae.a.get(e.costingURL+"/bom_header/get_account_approve_list/?flag=N",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedBomsHeaders=!0,this.setState({bomsHeaders:e.data.map(function(e){return{header:e.id,bom_style:e.bom_style.name,client:e.client,costing:e.bom_style.costing,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",onClick:function(a){t.OpenSheet(e.bom_style.costing_id,e.id,e.bom_style.name)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(R.a,{color:"danger",size:"sm",className:"btn-icon btn-link",onClick:function(){return t.deleteHeaders(e.id)}},l.a.createElement("i",{className:"fa fa-times"})))}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"boms headers")})},e.state={loading:!1,bomsHeaders:void 0,clients:[],user:{}},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getBomsHeaders()}},{key:"render",value:function(){var e=this.state.loading,t="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:e?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(t," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement("h1",null,"BOMS"),l.a.createElement(R.a,{onClick:this.goToCreate},"+ New BOM"),this._loadedBomsHeaders&&l.a.createElement(X.a,{responsive:!0,data:this.state.bomsHeaders,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"Style",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["bom_style"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"Client",accessor:"client",sortable:!0,filterable:!0},{Header:"Costing",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["costing_name"]})},filterAll:!0},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1,width:150}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"}))}}]),t}(l.a.Component),ma=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.Role=localStorage.getItem("role")||"",e.styleId=0,e.defaultEmbellishmentLine={id:0,color:0,name:"",embroidery_description:"",laser_description:"",washed_description:"",ironing_description:"",serigraphy_description:"",sublimate_description:"",materials:[]},e._isMounted=!1,e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.handleReview=function(t){e.props.history.push({pathname:"/admin/approve_boms",state:{bomHeader:t}})},e.handleReviewAll=function(t,a){e.props.history.push({pathname:"/admin/approve_boms",state:{bomHeader:t,allColors:a}})},e.handleDuplicate=function(t){e.toggleLoading();var a=new FormData;a.append("bom_id",t),ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/clone_bom/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.toggleLoading(),this.notify("tr","success","BOM duplicated!"),this.getBomsHeaders()}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError("tr","success","Error Duplicating BOM")}.bind(Object(P.a)(e)))},e.duplicateHeader=function(){var t=e.state,a=t.header,n=t.header.embellishment_description;if(""!==a.bom_style)if(0!==n.length){var l=!0;if(n.map(function(e){return 0===e.color&&(l=!1),0===e.materials.length&&(l=!1),e}),l){e.toggleLoading();var i=new Date,o=Object(A.a)({},a,{bom_style:"".concat(a.bom_style,"-").concat(i.getDate()+"-"+i.getSeconds()),sms_flag:!0===a.sms_flag?a.sms_flag=1:a.sms_flag=0,sms_multiplier:a.sms_multiplier||""===a.sms_multiplier?a.sms_multiplier:0});ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/",o,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.toggleLoading(),this.notify("tr","success","BOM duplicated! saved as: ".concat(a.bom_style,"-").concat(i.getDate()))}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"save bom"),this.notify("tr","Error","BOM saved!")}.bind(Object(P.a)(e)))}else e.notify("tr","warning","Invalid Process data, missing color and/or materials")}else e.notify("tr","warning","BOM processes required");else e.notify("tr","warning","BOM style required")},e.handleApprove=function(t){var a=new FormData;a.append("flag","C"),a.append("bom_id",t),ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/change_status/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","BOM Approved!"),this.componentDidMount()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.handleReturn=function(t){var a=new FormData;a.append("flag","A"),a.append("bom_id",t),ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/change_status/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","BOM Returned!"),this.componentDidMount()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleReturn")}.bind(Object(P.a)(e)))},e.handleReject=function(t){e.toggleLoading();var a=void 0;a="Costing"===e.Role||"admin"===e.Role?"A":"N";var n=new FormData;n.append("flag","".concat(a)),n.append("bom_id",t),ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/change_status/",n,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.toggleLoading(),this._isMounted&&this.notify("tr","success","CostSheet Returned!"),this.componentDidMount()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleReject")}.bind(Object(P.a)(e)))},e.toggleRejectModal=function(){e._isMounted&&e.setState({rejectModal:!e.state.rejectModal})},e._loadedBomsHeaders=!1,e.getBomsHeaders=function(){var t=void 0;t="Costing"===e.Role||"admin"===e.Role||"Costing Manager"===e.Role?"/get_account_approve_list/?flag=C":"/get_account_approve_list/?flag=A",e.toggleLoading(),ae.a.get(e.costingURL+"/bom_header".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedBomsHeaders=!0;var a=e.data;this.setState({bomsHeaders:a.map(function(e){return{bom_style:e.bom_style.name,client:e.client,costing_id:e.bom_style.costing,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:""},l.a.createElement(R.a,{onClick:function(){return t.handleReview(e.id)},color:"info",size:"sm"},"Review & Approve ",l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("br",null)))}})}),this.toggleLoading(),this.getBomsHeadersReturn()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"boms headers")}.bind(Object(P.a)(e)))},e._loadedBomsHeaders=!1,e.getBomsHeadersReturn=function(){e.toggleLoading(),ae.a.get(e.costingURL+"/bom_header/get_account_approve_list/?flag=D",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedBomsHeadersReturn=!0,this.setState({bomsHeadersReturn:e.data.map(function(e){return{bom_style:e.bom_style.name,costing_id:e.bom_style.costing,client:e.client,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:""},l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{onClick:function(){return t.handleReturn(e.id)},color:"danger",size:"sm"},"Return BOM ",l.a.createElement("i",{className:"fa fa-times"})))))}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"boms headers")}.bind(Object(P.a)(e)))},e.processToReject=function(t){e.state.rejectedColors.includes(t)?(e.state.rejectedColors.indexOf(t),e.state.rejectedColors.splice(e.state.rejectedColors.indexOf(t))):e.state.rejectedColors.push(t)},e.rejectColors=function(){e.toggleLoading(),e.toggleRejectModal();var t=e.state.rejectedColors.toString(),a=new FormData;a.append("bom_id",e.props.location.state.bomHeader),a.append("procces_returned",t),ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/return_bom_costing/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","Colors Returned!"),this.componentDidMount();this.props.history.push({pathname:"/admin/managments_boms"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleReject")}.bind(Object(P.a)(e)))},e.toggle=function(t){e.state.tab!==t&&e.setState({tab:t})},e.state={loading:!1,rejectModal:!1,bomsHeaders:[],bomsHeadersReturn:[],clients:[],user:{},costsheets:[],selectedCostSheet:{},selectedCostSheetOptions:{},colors:[],costingSketch:null,processes:[],header:{client:0,costing_id:0,description:"",cutting_cost:0,sewing_cost:0,thread:0,packing:0,serigraphy:0,sms_flag:!1,sms_multiplier:0,bom_style:"",embellishment_description:[]},headerReturn:{client:0,costing_id:0,description:"",cutting_cost:0,sewing_cost:0,thread:0,packing:0,serigraphy:0,sms_flag:!1,sms_multiplier:0,bom_style:"",embellishment_description:[]},modalMaterials:{isOpen:!1,index:null,edit:!1,matIndex:null},materials:[],materialForm:{material:null,consumption:"",bom_material_id:0}},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getBomsHeaders()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.bomsHeaders,i=t.bomsHeadersReturn,o=t.tab,s=void 0===o?"1":o,r=this.checkPageMode(),c="bg-ligh"===r.bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(c," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(_t.a,{tabs:!0},l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"1"===s?"active":"",onClick:function(){e.toggle("1")},style:"bg-ligh"===r.bg?{color:"black",borderColor:"black"}:{}},"Approve")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"2"===s?"active":"",onClick:function(){e.toggle("2")},style:"bg-ligh"===r.bg?{color:"black",borderColor:"black"}:{}},"Return"))),this._loadedBomsHeaders&&l.a.createElement(St.a,{activeTab:s},l.a.createElement(Ot.a,{tabId:"1"},l.a.createElement("h1",null,"Approve BOM"),l.a.createElement(X.a,{responsive:!0,data:n,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"Style",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["bom_style"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"Client",accessor:"client",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["client"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"Costing",accessor:"costing_id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["costing_id"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1,width:250}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"}))),this._loadedBomsHeadersReturn&&l.a.createElement(St.a,{activeTab:s},l.a.createElement(Ot.a,{tabId:"2"},l.a.createElement("h1",null,"Return Boms Approved"),l.a.createElement(X.a,{responsive:!0,data:i,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"Style .",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["bom_style"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"Client",accessor:"client",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["client"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"Costing",accessor:"costing_id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["costing_id"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1,width:250}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"}))))}}]),t}(l.a.Component),ua=a(87),pa=a.n(ua),ha=(l.a.Component,l.a.Component,{input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}}),ga=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e._isMounted=!1,e.fenixURL="http://testing.zuntexapparel.com/api/v1",e.costingURL="https://api.vulcanoapparel.com/api/v1",e._seasons=!1,e.getSeason=function(){e.toggleLoading(),ae.a.get(e.costingURL+"/seasons/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._seasons=!0,this.setState({seasons:e.data.map(function(e){return{value:e.id,label:"".concat(e.name)}})})}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"Error Loading Seasons")}.bind(Object(P.a)(e)))},e.toggleEditModal=function(){e._isMounted&&e.setState({editModal:!e.state.editModal})},e._editStyle=!1,e.editStyle=function(t,a,n){e._editStyle=!0,e.toggleEditModal(),e.setState({editedStyle:a,editForm:{idStyle:a,editName:n,editCosting:t}})},e.toggleAddMaterial=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=e.state.modalMaterials;e.setState({modalMaterials:Object(A.a)({},l,{isOpen:!l.isOpen,index:t,edit:a,matIndex:n})}),t&&!1===a&&null===n&&e.setState({materialForm:{material:null,consumption:null}})},e.toggleAddSeason=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=e.state.modalSeason;e.setState({modalSeason:Object(A.a)({},l,{isOpen:!l.isOpen,index:t,edit:a,matIndex:n})})},e.toggleEditMaterial=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.state.modalMaterials;e.setState({modalEditMat:!e.state.modalEditMat}),t&&!1===a&&null===n&&e.setState({materialForm:{material:null,consumption:null}})},e._loadedMaterials=!1,e.getProductionMaterials=function(){e.toggleLoading(),ae.a.get(e.costingURL+"/materialp/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedMaterials=!0,this.setState({Allmaterials:e.data.map(function(e){return{bom_material_id:0,old_costing_id:e.old_costing_id,value:e.id,label:"".concat(e.description,"/ ").concat(e.old_costing_id),name:e.description,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{size:"sm",color:"info",className:"btn-icon btn-link",onClick:function(){t.loadFormMaterial({id:e.id,label:"".concat(e.description,"/ ").concat(e.old_costing_id)})}},l.a.createElement("i",{className:"tim-icons icon-pencil"})),l.a.createElement(R.a,{size:"sm",color:"danger",className:"btn-icon btn-link",onClick:function(){t.RemoveMaterial(e.id)}},l.a.createElement("i",{className:"tim-icons icon-simple-remove"})))}})})}.bind(Object(P.a)(e)))},e.editMaterialEmbellishment=function(){var t=Object(Ge.a)(e.state.material_consumption),a=Object(Ge.a)(e.state.materials);t[e.state.materialEditForm.index]=e.state.materialEditForm.consumption,a[e.state.materialEditForm.index].consumption=e.state.materialEditForm.consumption,e.setState({material_consumption:t,materials:a,materialEditForm:{material:null,consumption:null}}),e.toggleEditMaterial()},e.addMaterialToEmbellishment=function(){var t=e.state,a=(t.header,t.header.embellishment_description,t.materialForm);t.modalMaterials;if(!a.consumption||a.consumption<0||null===a.material)return e.notify("tr","warning","Material inputs required"),!1;var n=Object(Ge.a)(e.state.material_list),l=Object(Ge.a)(e.state.material_consumption),i=Object(Ge.a)(e.state.materials);if(n.find(function(e){return e===a.material.value}))return e.notify("tr","warning","Material already exists in this style"),!1;i.push(a),n.push(a.material.value),l.push(a.consumption),console.log("llego hasta aqui"),e.setState({material_list:n,material_consumption:l,materials:i,materialForm:{material:null,consumption:null,bom_material_id:0,old_costing_id:null,measure:null}}),e.toggleAddMaterial()},e.loadFormMaterial=function(t){var a=Object(Ge.a)(e.state.material_list),n=(a.find(function(e){return e===t.id}),a.findIndex(function(e){return e===t.id}));e.setState({materialEditForm:{material:t.label,consumption:e.state.material_consumption[n],index:n},modalMaterials:{edit:!0}}),e.toggleEditMaterial()},e.RemoveMaterial=function(t){var a=Object(Ge.a)(e.state.material_list).findIndex(function(e){return e===t}),n=Object(Ge.a)(e.state.material_list),l=Object(Ge.a)(e.state.material_consumption),i=Object(Ge.a)(e.state.materials);n.splice(a,1),l.splice(a,1),i.splice(a,1),e.setState({material_list:n,material_consumption:l,materials:i})},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e._selectedCostsheet=!1,e.getSelectedCostSheet=function(t){e.toggleLoading(),ae.a.get(e.costingURL+"/costingHeader/new_BOM/?costing_id=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._selectedCostsheet=!0,this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"selected")}.bind(Object(P.a)(e)))},e.costingValue=function(t){e.setState({valueClientCostsheets:t})},e.getColors=function(t){e.toggleLoading(),ae.a.get(e.costingURL+"/color_by_client/get_color_style/?costing=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingStyles=!0,this._isMounted&&this.setState({colors:e.data.map(function(e){return{value:e.id,label:"".concat(e.name),name:e.name}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Failed Load Colors")}.bind(Object(P.a)(e)))},e.getDestinations=function(){e.toggleLoading(),ae.a.get(e.costingURL+"/destionation/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingStyles=!0,this._isMounted&&this.setState({places:e.data.map(function(e){return{value:e.id,label:"".concat(e.name," / ").concat(e.clients),name:e.name}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Failed Load Sizes Scales")}.bind(Object(P.a)(e)))},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e._loadedStyles=!1,e.getStyles=function(){e.toggleLoading(),ae.a.get(e.costingURL+"/style/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedStyles=!0,this.setState({StylesList:e.data.map(function(e){return Object(A.a)({},e,{actions:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",disabled:!1,onClick:function(a){t.editStyle(e.costing_id,e.id,e.name)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(R.a,{color:"danger",size:"sm",className:"btn-icon btn-link",disabled:!1,onClick:function(){return t.deleteStyle(e.id)}},l.a.createElement("i",{className:"fa fa-times"})))})})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){})},e._loadingCostSheets=!1,e.costingHistory=function(){ae.a.get(e.costingURL+"/costingHeader/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingCostSheets=!0,this._isMounted&&this.setState({costsheets:e.data.map(function(e){return{value:e.id,label:"".concat(e.id," / ").concat(e.client.name," / ").concat(e.season.name," / ").concat(e.style),data:e,client:e.client.name}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"costing History")}.bind(Object(P.a)(e)))},e.handleSelectChangePlaces=function(t){for(var a,n=[],l=0,i=t.target.options.length;l<i;l++)(a=t.target.options[l]).selected&&n.push(a.value);e.setState({selectedPlaces:n})},e.handleSelectChange=function(t){for(var a,n=[],l=0,i=t.target.options.length;l<i;l++)(a=t.target.options[l]).selected&&n.push(a.value);e.setState({selectedColors:n})},e.state={editModal:!1,editModalSeason:!1,loading:!1,styleName:void 0,costingId:0,costsheets:[],valueClientCostsheets:null,selectedCostSheet:{},selectedCostSheetOptions:{},StylesList:[],materials:[],seasons:[],selectedColors:[],selectedPlaces:[],seasonSelectNew:null,seasonSelectOld:null,material_list:[],Allmaterials:[],material_consumption:[],editedStyle:void 0,header:{embellishment_description:[]},editForm:{idStyle:void 0,editName:void 0,editCosting:void 0,editPlaces:void 0,editColors:void 0},modalMaterials:{isOpen:!1,index:null,edit:!1,matIndex:null},modalSeason:{isOpen:!1,index:null,edit:!1,matIndex:null},materialEditForm:{material:null,consumption:""},modalEditMat:!1,materialForm:{material:null,consumption:""}},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"duplicateSeason",value:function(e,t){console.log(e,t),this.toggleLoading();var a=new FormData;a.append("new",e),a.append("old",t),ae.a.post("https://api.vulcanoapparel.com/api/v1/style/",a,{headers:{Authorization:"Token "+this.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","Season Duplicated!")}.bind(this)).catch(function(e){this.handleError(e,"Network Error")}.bind(this)),this.componentDidMount()}},{key:"CreateStyle",value:function(e,t,a){if(this.toggleLoading(),t.length>20)this.notify("tr","warning","name cannot be more than 20 characters");else{var n=new FormData;n.append("name",t),n.append("costing_id",e),0===a&&n.append("colors",this.state.selectedColors),0===a&&n.append("destinations",this.state.selectedPlaces),0===a&&n.append("materials",this.state.material_list.join()),0===a&&n.append("consumptions",this.state.material_consumption.join()),ae.a.post("https://api.vulcanoapparel.com/api/v1/style/",n,{headers:{Authorization:"Token "+this.userToken}}).then(function(){this.toggleLoading(),this.setState({styleName:void 0,selectedColors:[],selectedPlaces:[],materials:[],material_consumption:[]}),this._isMounted&&this.notify("tr","success","Style Created!")}.bind(this)).catch(function(e){this.handleError(e,"Network Error")}.bind(this)),this.componentDidMount()}}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.costingHistory(),this.getStyles(),this.getDestinations(),this.getProductionMaterials(),this.getSeason()}},{key:"deleteStyle",value:function(e){this.toggleLoading(),ae.a.delete(this.costingURL+"/style/"+e+"/",{headers:{Authorization:"Token "+this.userToken}}).then(function(){this.notify("tr","success","Style deleted!"),this.toggleLoading(),this.componentDidMount()}.bind(this)).catch(function(e){this.handleError(e,"delete  style")}.bind(this))}},{key:"updateStyle",value:function(){this.toggleLoading(),this.toggleEditModal();var e=new FormData;e.append("style",this.state.editedStyle),e.append("name",this.state.editForm.editName),e.append("colors",this.state.editForm.editName),e.append("destinations",this.state.editForm.editName),ae.a.post("https://api.vulcanoapparel.com/api/v1/style/update_style/",e,{headers:{Authorization:"Token "+this.userToken}}).then(function(){this.toggleLoading(),this._isMounted&&this.notify("tr","success","Style Updated!"),this.componentDidMount()}.bind(this)).catch(function(e){this.handleError(e,"Network Error")}.bind(this))}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.costsheets,i=t.StylesList,o=t.materialEditForm,s=t.materialForm,r=t.modalMaterials,c=t.selectedCostSheetOptions,d="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(d," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement(L.a,{isOpen:this.state.editModal,toggle:this.toggleEditModal,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content-center",toggle:this.toggleImportModal},"Edit Style"),l.a.createElement(H.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,"Style Name"),l.a.createElement(J.a,{type:"text",placeholder:"Style Name",name:"name",defaultValue:this.state.editForm.editName,onChange:function(t){e.setState({editForm:{editName:t.target.value}})}})))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleEditModal},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){return e.updateStyle()}},"Save Changes"))),l.a.createElement(L.a,{isOpen:this.state.modalMaterials.isOpen,toggle:this.toggleAddMaterial,modalClassName:this.checkPageMode().mc},l.a.createElement(H.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Material"),l.a.createElement(z.a,{sm:9},this.state.Allmaterials&&l.a.createElement(W.a,{options:this.state.Allmaterials,value:this.state.materialForm.material,onChange:function(t){console.log(t),e.setState({materialForm:Object(A.a)({},s,{material:t})})}}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Consumption"),l.a.createElement(z.a,{sm:9},l.a.createElement(J.a,{type:"number",value:s.consumption,onChange:function(t){e.setState({materialForm:Object(A.a)({},s,{consumption:t.target.value,actions:s.material.actions,material_name:s.material.name||s.material.description,old_costing_id:s.old_costing_id||s.material.old_costing_id})})}})))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleAddMaterial},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){r.edit?e.editMaterialEmbellishment():e.addMaterialToEmbellishment()}},"ADD"))),l.a.createElement(L.a,{isOpen:this.state.modalEditMat,toggle:this.toggleEditMaterial,modalClassName:this.checkPageMode().mc},l.a.createElement(H.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Material"),l.a.createElement(z.a,{sm:9},this.state.materialEditForm&&"".concat(this.state.materialEditForm.material))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Consumption"),l.a.createElement(z.a,{sm:9},l.a.createElement(J.a,{type:"number",placeholder:o.consumption,onChange:function(t){e.setState({materialEditForm:Object(A.a)({},o,{consumption:t.target.value,index:o.index})})}})))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleAddMaterial},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){e.editMaterialEmbellishment()}},"ADD"))),l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:5},l.a.createElement("h3",null,"Style Creation"),l.a.createElement(S.a,null,"Style Name"),l.a.createElement(J.a,{type:"text",maxLength:20,placeholder:"Style Name",name:"name",onChange:function(t){e.setState({styleName:t.target.value})}}),l.a.createElement(S.a,null,"CostSheet"),this._loadingCostSheets?l.a.createElement(W.a,{placeholder:"Search CostSheet",styles:ha,options:n,onChange:function(t){e.getSelectedCostSheet(t.value),e.getColors(t.value),e.setState({selectedCostSheetOptions:t}),console.log(t,"option")},value:c}):l.a.createElement("div",{className:"BOMSloader"}),this.state.selectedCostSheetOptions.data&&"THE NORTH FACE"===this.state.selectedCostSheetOptions.data.client.name?l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,null,"Select Colors for Style"),l.a.createElement(J.a,{id:"colors",type:"select",name:"selectMulti",multiple:!0,onChange:this.handleSelectChange,value:this.state.selectedColors,style:{height:"100px"}},this.state.colors&&this.state.colors.map(function(e,t){return l.a.createElement("option",{key:t,value:e.value},e.name)})),l.a.createElement(S.a,null,"Select Destinations"),l.a.createElement(J.a,{id:"destinations",type:"select",name:"selectMulti",multiple:!0,onChange:this.handleSelectChangePlaces,value:this.state.selectedPlaces,style:{height:"100px"}},this.state.places&&this.state.places.map(function(e,t){return l.a.createElement("option",{key:t,value:e.value},e.name)}))):l.a.createElement(l.a.Fragment,null),l.a.createElement(R.a,{type:"submit",color:"primary",disabled:!c.value||!this.state.styleName,onClick:function(){e.CreateStyle(c.value,e.state.styleName,0)}},"Create Style")),this.state.selectedCostSheetOptions.data&&"THE NORTH FACE"===this.state.selectedCostSheetOptions.data.client.name?l.a.createElement(z.a,{sm:7},l.a.createElement("h3",null,"Materials \xa0",l.a.createElement(R.a,{type:"submit",color:"info",size:"sm",onClick:function(){e.toggleAddMaterial()}},"+")),l.a.createElement(X.a,{responsive:!0,data:this.state.materials,filterable:!0,columns:[{Header:"Material",accessor:"material_name",sortable:!1,filterable:!1},{Header:"Consumo",accessor:"consumption",sortable:!1,filterable:!1,width:100},{Header:"Code",accessor:"old_costing_id",sortable:!1,filterable:!1,width:200},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1,width:100}],defaultPageSize:5}),l.a.createElement("br",null)):l.a.createElement(z.a,{sm:7},l.a.createElement("h3",null,"Styles"),l.a.createElement(X.a,{responsive:!0,data:i,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"Style",accessor:"name",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["name"]})},filterAll:!0,sortable:!0,filterable:!0,width:250},{Header:"Costing",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["costing"]})},filterAll:!0},{Header:"ACTIONS",accessor:"actions",sortable:!1,filterable:!1,width:150}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"}))))))}}]),t}(l.a.Component),fa=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.Role=localStorage.getItem("role")||"",e.styleId=0,e.defaultEmbellishmentLine={id:0,color:0,name:"",embroidery_description:"",laser_description:"",washed_description:"",ironing_description:"",serigraphy_description:"",sublimate_description:"",materials:[]},e._isMounted=!1,e._setLenght=!0,e.totales=new Array([]),e._getConsumptionMaterials=!0,e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.handleReview=function(t){e.props.history.push({pathname:"/admin/resume_bom",state:{bomHeader:t}})},e._loadingStyles=!1,e.getStyles=function(){ae.a.get(e.costingURL+"/bom_header/get_free_styles_for_bom/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingStyles=!0,this._isMounted&&this.setState({styleList:e.data.map(function(e){return{value:e.id,label:"".concat(e.name," / ").concat(e.costing),costing_id:e.costing_id,name:e.name}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"costing History")}.bind(Object(P.a)(e)))},e.handleDuplicate=function(t){e.setState({bomDup:t}),e.toggleViewModal()},e.openBom=function(t,a,n){e.props.history.push({pathname:"/admin/color_boms",state:{bomHeader:a,costingId:t,costingName:n,editProcess:!0}})},e.duplicateBom=function(t,a){if(e.toggleLoading(),a){e.toggleViewModal();var n=new FormData;n.append("bom_id",t),n.append("style_id",a),ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/clone_bom/",n,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.notify("tr","success","BOM duplicated!"),this.getBomsHeaders(),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError("tr","success","Error Duplicating BOM")}.bind(Object(P.a)(e)))}else e.notify("tr","warning","Please select a style for duplicate the bom")},e._loadedBomsHeadersColor=!1,e.getBomsHeadersColor=function(t){e.setState({bom_id:t}),ae.a.get(e.costingURL+"/bom_header/get_colors_for_bom/?bom=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({tableHeaders:e.data.colors.map(function(e,t){return{Header:e,id:t}}),pathToTechpack:e.data.pathToTechpack,bomsHeaders:e.data.materials.map(function(e,t){return{id_local:t,id:e.old_costing_id,description:e.description,measure:e.measure,consumptions:e.consumptions.map(function(e){return{color:e.color,consumption:e.consumption}})}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"boms headers")}.bind(Object(P.a)(e)))},e._loadedBomsHeaders=!1,e.getBomsHeaders=function(){e.toggleLoading(),ae.a.get(e.costingURL+"/bom_header/get_boms/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedBomsHeaders=!0;var a=e.data;this.setState({bomsHeadersList:a.map(function(e){return{bom_style:e.style_name,client:e.client_name,costing_id:e.costing_name,actions:l.a.createElement(l.a.Fragment,null,"Generacion"!==t.Role&&"Patronajes"!==t.Role?l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{onClick:function(){return t.handleReview(e.bom_id)},color:"info",size:"sm"},"Review ",l.a.createElement("i",{className:"fa fa-search"})),l.a.createElement(R.a,{onClick:function(){return t.handleDuplicate(e.bom_id)},color:"primary",size:"sm"},"Duplicate ",l.a.createElement("i",{className:"fa fa-clone"})),l.a.createElement("br",null),l.a.createElement(R.a,{size:"sm",color:"success",onClick:function(){return t.openBom(e.costing_id,e.bom_id,e.style_name)}},"Add Colors ",l.a.createElement("i",{className:"fa fa-plus"}))):l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{size:"sm",color:"success",onClick:function(){return t.openBom(e.costing_id,e.bom_id,e.style_name)}},"Review Colors & Process")))}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"boms headers")}.bind(Object(P.a)(e)))},e.toggleViewModal=function(){e._isMounted&&e.setState({viewModal:!e.state.viewModal})},e.state={viewEdit:!1,loading:!1,bomsHeaders:[],bomsHeadersList:[],bomsHeadersReturn:[],clients:[],user:{},costsheets:[],selectedCostSheet:{},selectedCostSheetOptions:{},colors:[],costingSketch:null,processes:[],tableHeaders:[],header:{client:0,costing_id:0,description:"",cutting_cost:0,sewing_cost:0,thread:0,packing:0,serigraphy:0,sms_flag:!1,sms_multiplier:0,bom_style:"",embellishment_description:[]},headerReturn:{client:0,costing_id:0,description:"",cutting_cost:0,sewing_cost:0,thread:0,packing:0,serigraphy:0,sms_flag:!1,sms_multiplier:0,bom_style:"",embellishment_description:[]},modalMaterials:{isOpen:!1,index:null,edit:!1,matIndex:null},materials:[],materialForm:{material:null,consumption:"",bom_material_id:0}},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"setArrayLenght",value:function(e){this.totales=Array(e.length).fill(0),this._setLenght=!1}},{key:"getConsumptionByColor",value:function(e,t){var a=0,n=0,l=0;for(a in e)for(n in t)for(l in e[a].consumptions)t[n].Header===e[a].consumptions[l].color&&(this.totales[n]=(parseFloat(this.totales[n])+parseFloat(e[a].consumptions[l].consumption)).toFixed(2),this._getConsumptionMaterials=!1)}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getBomsHeaders(),this.getStyles()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.bomsHeaders,i=t.tableHeaders,o=t.bomsHeadersList,s="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(s," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(L.a,{isOpen:this.state.viewModal,toggle:this.toggleViewModal,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content",toggle:this.toggleViewModal}),n&&i&&l.a.createElement(H.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,"Duplicate BOM"),l.a.createElement("p",null,"Please select the style for this copy"),l.a.createElement(W.a,{options:this.state.styleList,onChange:function(t){e.setState(Object(A.a)({},e.state,{selectedStyle:t}))}})))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleViewModal},"Cancel"),l.a.createElement(R.a,{color:"primary",onClick:function(){return e.duplicateBom(e.state.bomDup,e.state.selectedStyle.value)}},"Duplicate"))),this._loadedBomsHeaders&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"BOMS History"),l.a.createElement(X.a,{responsive:!0,data:o,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"Style",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["bom_style"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"Client",accessor:"client",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["client"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"Costing",accessor:"costing_id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["costing_id"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"})))}}]),t}(l.a.Component),ba=a(166),Ea=a.n(ba),va=a(99),ya=a.n(va),_a=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{if(void 0!==a.data)for(var l=0,i=Object.entries(a.data);l<i.length;l++){var o=i[l],s=Object(F.a)(o,2),r=s[0],c=s[1];"".concat(r,": ").concat(c,"\t")}else n}},e.getBomsHeaders=function(t){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/bom_header/get_colors_for_bom/?bom=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({materials:[e.data.materials_with_same_consumption]}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"costing History")}.bind(Object(P.a)(e)))},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.state={loading:!1,materials:null},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getBomsHeaders(this.props.id)}},{key:"render",value:function(){var e=this.state.loading,t="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:e?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(t," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement(k.a,{className:"justify-content-center mt-5"},l.a.createElement(z.a,{sm:"12"},this.state.materials&&l.a.createElement("div",{className:"col-lg-12  bg-white rounded shadow"},l.a.createElement("div",{className:ya.a.colRight},l.a.createElement(_e.a,{striped:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:ya.a.thID},"Id"),l.a.createElement("th",{className:ya.a.thDESC},"Description"),l.a.createElement("th",{className:ya.a.tdWidth},"Measure"),l.a.createElement("th",{className:ya.a.tdWidth},"Consumptions"))),l.a.createElement("tbody",null,this.state.materials[0].map(function(e){return l.a.createElement("tr",null,l.a.createElement("th",{className:ya.a.id,scope:"row"},e.old_costing_id),l.a.createElement("td",{className:ya.a.tdDESC},e.description),l.a.createElement("td",{className:ya.a.tdFont},e.measure),l.a.createElement("td",{className:ya.a.tdFont},e.consumptions))}))))))))}}]),t}(l.a.Component),Ca=a(281),ka=a.n(Ca),Sa=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.getBomsHeaders=function(t){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/bom_header/get_colors_for_bom/?bom=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({colors:[e.data.colors]}),this.setState({materials:[e.data.materials_with_different_consumption]})}.bind(Object(P.a)(e))).catch(function(e){})},e.state={materials:null,colors:null},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getBomsHeaders(this.props.id)}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{className:"justify-content-center mt-5"},l.a.createElement(z.a,{sm:"12"},this.state.materials&&l.a.createElement("div",{className:"col-lg-12  bg-white rounded shadow"},l.a.createElement("div",{className:ka.a.colRight},l.a.createElement(_e.a,{striped:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Materials"),this.state.colors[0].map(function(e){return l.a.createElement("th",null,e)}))),l.a.createElement("tbody",null,this.state.materials[0].map(function(e){return l.a.createElement("tr",null,l.a.createElement("th",{scope:"row",className:ka.a.tdFont},l.a.createElement("tr",null,e.old_costing_id," "),e.description),e.consumptions.map(function(e){return l.a.createElement("td",null,e)}))}))))))))}}]),t}(l.a.Component),Oa=a(192),Ma=a.n(Oa),wa=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.getBomsHeaders=function(t){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/bom_header/get_colors_for_bom/?bom=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({colors:e.data.colors}),this.setState({consumptions:e.data.summation_consumptions_dict}),this.showHeaderInfo(t)}.bind(Object(P.a)(e))).catch(function(e){})},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.state={colors:[],consumptions:[]},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getBomsHeaders(this.props.id)}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{className:"justify-content-center mt-5"},l.a.createElement(z.a,{md:"12",className:Ma.a.colRight},l.a.createElement(_e.a,{striped:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{style:{textAlign:"center"}},"Color"),l.a.createElement("th",null,"ID"))),l.a.createElement("tbody",{style:{height:"230px",overflowX:"auto",overflowY:"auto"}},this.state.colors.map(function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",{className:Ma.a.tdFont,style:{textAlign:"center"}},t),l.a.createElement("td",{className:Ma.a.tdFont},e.state.consumptions[t]?e.state.consumptions[t].toFixed(3):e.state.consumptions[t]))}))))))}}]),t}(l.a.Component),xa=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e._isMounted=!1,e.steps=[{stepName:"Same Consumptions",stepIcon:"tim-icons icon-single-02",component:_a},{stepName:"Materials X Colors",stepIcon:"tim-icons icon-settings-gear-63",component:Sa},{stepName:"Colors and Consumptions",stepIcon:"tim-icons icon-delivery-fast",component:wa}],e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e._techPackLoaded=!1,e.downloadTechPack=function(t){ge("https://api.vulcanoapparel.com/api/v1/costingHeader/download/?key="+t,{params:{key:t},headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t={file:e};window.open(t.file),this.notify("tr","success"," downloaded!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"download file")}.bind(Object(P.a)(e)))},e.showHeaderInfo=function(t){e.toggleLoading(),ae.a.get(e.costingURL+"/bom_header/".concat(t,"/"),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._selectedHeader=!0;var t=this.state.header,a=e.data;this._isMounted&&this.setState({header:Object(A.a)({},t,{approvalStatus:a.approvalStatus,bom_style:a.bom_style,description:a.description,sms_flag:a.sms_flag,sms_multiplier:a.sms_multiplier,cutting_cost:a.cutting_cost.toFixed(4),sewing_cost:a.sewing_cost.toFixed(4),thread:a.thread.toFixed(4),packing:a.packing.toFixed(4),serigraphy:a.serigraphy.toFixed(4),return_flag:a.return_flag,production_techpack:a.production_techpack,embellishment_description:a.embellishment_description.map(function(e){return{id:e.id,color:e.color_id,value:"".concat(e.color),embroidery_description:e.embroidery_description,ironing_description:e.ironing_description,laser_description:e.laser_description,serigraphy_description:e.serigraphy_description,sublimate_description:e.sublimate_description,washed_description:e.washed_description,uid:e.id,returned_flag:e.returned_flag,materials:e.materials.map(function(e){return{bom_material_id:e.id,material_id:e.material.id,label:"".concat(e.material.description," / ").concat(e.material.size.name," / ").concat(e.material.client.abbreviation),consumption:e.material_consumption}})}})})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"selected")}.bind(Object(P.a)(e)))},e._setLenght=!0,e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.handleReject=function(t){var a=new FormData;a.append("flag","A"),a.append("bom_id",t),ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/change_status/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","CostSheet Returned!"),this.componentDidMount()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleReject")}.bind(Object(P.a)(e)))},e.toggleRejectModal=function(){e._isMounted&&e.setState({rejectModal:!e.state.rejectModal})},e._checkedMaterials=!1,e.checkedStatus=function(t,a){t.some(function(e){return!1===e||t.length!==a.length})?e._checkedMaterials=!1:e._checkedMaterials=!0},e.rejectColors=function(){e.toggleLoading(),e.toggleRejectModal();var t=e.state.rejectedColors.toString(),a=new FormData;a.append("bom_id",e.props.location.state.bomHeader),a.append("procces_returned",t),ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/return_bom_costing/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","Colors Returned!"),this.componentDidMount();this.props.history.push({pathname:"/admin/managments_boms"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleReject")}.bind(Object(P.a)(e)))},e.handleApproveCosting=function(t){e.toggleLoading();var a=new FormData;"A"===e.state.header.approvalStatus?a.append("flag","C"):a.append("flag","D"),a.append("bom_id",t),ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/change_status/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.toggleLoading(),this._isMounted&&this.notify("tr","success","BOM Approved!"),this.componentDidMount();this.props.history.push({pathname:"/admin/managments_boms"})}.bind(Object(P.a)(e))).catch(function(e){this.notify("tr","warning",e)}.bind(Object(P.a)(e)))},e.getBomsHeaders=function(t){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/bom_header/get_colors_for_bom/?bom=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this.setColors(e.data.colors)}.bind(Object(P.a)(e))).catch(function(e){})},e.processToReject=function(t){e.state.rejectedColors.includes(t)?(e.state.rejectedColors.indexOf(t),e.state.rejectedColors.splice(e.state.rejectedColors.indexOf(t))):e.state.rejectedColors.push(t)},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.state={bom_id:0,rejectModal:!1,loading:!1,rejectedColors:[],tableHeaders:void 0,bomsHeaders:[],header:{client:"",client_id:0,costing_id:0,description:"",cutting_cost:0,sewing_cost:0,thread:0,packing:0,serigraphy:0,sms_flag:!1,sms_multiplier:0,bom_style:"",return_flag:!1,embellishment_description:[]}},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"setArrayLenght",value:function(e){this.totales=Array(e.length).fill(0),this._setLenght=!1}},{key:"setColors",value:function(e){this.setState({tableHeaders:e})}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getBomsHeaders(this.props.location.state.bomHeader),this.showHeaderInfo(this.props.location.state.bomHeader)}},{key:"render",value:function(){var e=this,t=this.props.location,a=this.state.loading,n="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"content",style:{marginTop:"-50px"}},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(n," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(z.a,{className:"mr-auto ml-auto",md:"11"},l.a.createElement(k.a,{className:"justify-content-md-center"},l.a.createElement(z.a,{md:"auto"},l.a.createElement("div",{style:{fontSize:"26px",marginBottom:"-27px"}},this.state.header.bom_style))),l.a.createElement(Ea.a,{steps:[{stepName:"Same Consumptions",stepIcon:"tim-icons icon-single-02",component:l.a.createElement(_a,{id:t.state.bomHeader})},{stepName:"Materials x Colors",stepIcon:"tim-icons icon-settings-gear-63",component:l.a.createElement(Sa,{id:t.state.bomHeader})},{stepName:"Colors and Consumptions",stepIcon:"tim-icons icon-delivery-fast",component:l.a.createElement(wa,{id:t.state.bomHeader})}],navSteps:!0,title:"",headerTextCenter:!0,finishButtonClasses:"btn-wd btn-info invisible",finishButtonClick:function(){return e.handleApproveCosting(t.state.bomHeader)},finishButtonText:"Approve",nextButtonClasses:"btn-wd btn-info",previousButtonClasses:"btn-wd",progressbar:!0,color:"blue"}),l.a.createElement("div",{style:{marginTop:"-7.5%",marginLeft:"40%"}},l.a.createElement(R.a,{color:"primary",onClick:function(){return e.downloadTechPack(e.state.header.production_techpack)}},"Download Techpack")))))}}]),t}(l.a.Component),Na=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e._isMounted=!1,e.steps=[{stepName:"Same Consumptions",stepIcon:"tim-icons icon-single-02",component:_a},{stepName:"Materials X Colors",stepIcon:"tim-icons icon-settings-gear-63",component:Sa},{stepName:"Colors and Consumptions",stepIcon:"tim-icons icon-delivery-fast",component:wa}],e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e._techPackLoaded=!1,e.downloadTechPack=function(t){ge("https://api.vulcanoapparel.com/api/v1/costingHeader/download/?key="+t,{params:{key:t},headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t={file:e};window.open(t.file),this.notify("tr","success"," downloaded!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"download file")}.bind(Object(P.a)(e)))},e.showHeaderInfo=function(t){e.toggleLoading(),ae.a.get(e.costingURL+"/bom_header/".concat(t,"/"),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._selectedHeader=!0;var t=this.state.header,a=e.data;this._isMounted&&this.setState({header:Object(A.a)({},t,{approvalStatus:a.approvalStatus,bom_style:a.bom_style,description:a.description,sms_flag:a.sms_flag,sms_multiplier:a.sms_multiplier,cutting_cost:a.cutting_cost.toFixed(4),sewing_cost:a.sewing_cost.toFixed(4),thread:a.thread.toFixed(4),packing:a.packing.toFixed(4),serigraphy:a.serigraphy.toFixed(4),return_flag:a.return_flag,production_techpack:a.production_techpack,embellishment_description:a.embellishment_description.map(function(e){return{id:e.id,color:e.color_id,value:"".concat(e.color),embroidery_description:e.embroidery_description,ironing_description:e.ironing_description,laser_description:e.laser_description,serigraphy_description:e.serigraphy_description,sublimate_description:e.sublimate_description,washed_description:e.washed_description,uid:e.id,ingested_flag:e.ingested_flag,returned_flag:e.returned_flag,materials:e.materials.map(function(e){return{bom_material_id:e.id,material_id:e.material.id,label:"".concat(e.material.description," / ").concat(e.material.size.name," / ").concat(e.material.client.abbreviation),consumption:e.material_consumption}})}})})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"selected")}.bind(Object(P.a)(e)))},e._setLenght=!0,e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.handleReject=function(t){var a=new FormData;a.append("flag","A"),a.append("bom_id",t),ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/change_status/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","CostSheet Returned!"),this.componentDidMount()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleReject")}.bind(Object(P.a)(e)))},e.toggleRejectModal=function(){e._isMounted&&e.setState({rejectModal:!e.state.rejectModal})},e._checkedMaterials=!1,e.checkedStatus=function(t,a){t.some(function(e){return!1===e||t.length!==a.length})?e._checkedMaterials=!1:e._checkedMaterials=!0},e.rejectColors=function(){if(0===e.state.rejectedColors.length)e.notify("tr","warning","Please Check colors to reject"),e.toggleRejectModal();else{e.toggleLoading(),e.toggleRejectModal(),console.log("print del colors to reject",e.state.rejectedColors);var t=e.state.rejectedColors.toString(),a=new FormData;a.append("bom_id",e.props.location.state.bomHeader),a.append("procces_returned",t),ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/return_bom_costing/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","Colors Returned!"),this.componentDidMount();this.props.history.push({pathname:"/admin/managments_boms"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleReject")}.bind(Object(P.a)(e)))}},e.handleApproveCosting=function(t){e.toggleLoading();var a=new FormData;e.state.header.approvalStatus,a.append("flag","D"),a.append("bom_id",t),ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/change_status/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.toggleLoading(),this._isMounted&&this.notify("tr","success","BOM Approved!"),this.componentDidMount();this.props.history.push({pathname:"/admin/managments_boms"})}.bind(Object(P.a)(e))).catch(function(e){this.notify("tr","warning",e)}.bind(Object(P.a)(e)))},e.getBomsHeaders=function(t){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/bom_header/get_colors_for_bom/?bom=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this.setColors(e.data.colors)}.bind(Object(P.a)(e))).catch(function(e){})},e.processToReject=function(t){return e.state.rejectedColors.includes(t)?(e.state.rejectedColors.indexOf(t),e.state.rejectedColors.splice(e.state.rejectedColors.indexOf(t))):(e.state.rejectedColors.push(t),console.log("colors: ",e.state.rejectedColors)),console.log("rejected colors: ",e.state.rejectedColors),e.setState({colorsToSend:e.state.rejectedColors}),e.state.colorsToSend},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.state={bom_id:0,rejectModal:!1,loading:!1,rejectedColors:[],colorsToSend:[],tableHeaders:void 0,bomsHeaders:[],header:{client:"",client_id:0,costing_id:0,description:"",cutting_cost:0,sewing_cost:0,thread:0,packing:0,serigraphy:0,sms_flag:!1,sms_multiplier:0,bom_style:"",return_flag:!1,embellishment_description:[]}},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"setArrayLenght",value:function(e){this.totales=Array(e.length).fill(0),this._setLenght=!1}},{key:"setColors",value:function(e){this.setState({tableHeaders:e})}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getBomsHeaders(this.props.location.state.bomHeader),this.showHeaderInfo(this.props.location.state.bomHeader)}},{key:"render",value:function(){var e=this,t=this.props.location,a=this.state.loading,n="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"content",style:{marginTop:"-50px"}},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(n," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(z.a,{className:"mr-auto ml-auto",md:"11"},l.a.createElement(k.a,{className:"justify-content-md-center"},l.a.createElement(z.a,{md:"auto"},l.a.createElement("div",{style:{fontSize:"26px",marginBottom:"-27px"}},this.state.header.bom_style))),l.a.createElement(Ea.a,{steps:[{stepName:"Same Consumptions",stepIcon:"tim-icons icon-single-02",component:l.a.createElement(_a,{id:t.state.bomHeader})},{stepName:"Materials x Colors",stepIcon:"tim-icons icon-settings-gear-63",component:l.a.createElement(Sa,{id:t.state.bomHeader})},{stepName:"Colors and Consumptions",stepIcon:"tim-icons icon-delivery-fast",component:l.a.createElement(wa,{id:t.state.bomHeader})}],navSteps:!0,title:"",headerTextCenter:!0,finishButtonClasses:"btn-wd btn-info",finishButtonClick:function(){return e.handleApproveCosting(t.state.bomHeader)},finishButtonText:"Approve",nextButtonClasses:"btn-wd btn-info",previousButtonClasses:"btn-wd",progressbar:!0,color:"blue"}),l.a.createElement("div",{style:{marginTop:"-7.5%",marginLeft:"40%"}},l.a.createElement(R.a,{color:"warning",onClick:this.toggleRejectModal},"Reject"),l.a.createElement(R.a,{color:"primary",onClick:function(){return e.downloadTechPack(e.state.header.production_techpack)}},"Download Techpack"))),l.a.createElement(L.a,{isOpen:this.state.rejectModal,toggle:this.toggleRejecttModal,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content-center",toggle:this.toggleImportModal},"Reject Colors"),l.a.createElement(H.a,null,"Select the colors for reject",l.a.createElement(k.a,null,this.state.header.embellishment_description&&this.state.tableHeaders&&this.state.header.embellishment_description.map(function(t,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{sm:6},l.a.createElement("b",null,t.value)),l.a.createElement(z.a,{sm:6},l.a.createElement(J.a,{type:"checkbox",className:"check",value:0!==e.state.header.embellishment_description.length?e.state.header.embellishment_description[a].id:t,onChange:function(t){console.log(e.state.header.embellishment_description[a].id),e.processToReject(e.state.header.embellishment_description[a].id)}}))))}))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleRejectModal},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){return e.rejectColors()}},"Reject Colors")))))}}]),t}(l.a.Component),Ta={input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}},ja={opacity:100,visibility:"visible"},Aa=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.uploadChangeFilePO=function(t){var a=e.state.selectedClientPo;for(var n in e.toggleLoading(),e.state.fileList){var l=new FormData;l.append("file",e.state.fileList[0]),l.append("clients",e.state.flagBuy?"-1":e.state.clientList[n]),ae.a.post("https://api.vulcanoapparel.com/api/v1/po/create_po/",l,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(){this.toggleLoading(),this.componentDidMount(),this.notify("tr","success","Upload File PO ")}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.componentDidMount(),this.notify("tr","warning","Bad document format ")}.bind(Object(P.a)(e)))}e.toggleUploadPOModal(),a.label=""},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.openPo=function(t){e.props.history.push({pathname:"/admin/resume_po",state:{poId:t}})},e.getPOS=function(){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1/po/get_my_po/?flag=U",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedBomsHeaders=!0,this.setState({productOrder:e.data.map(function(e){return{client_id:e.client_id,create_date:e.created_at.split(" ",1),delivery_place:e.delivery_place,po_number:e.po_number,po_id:e.id,status:e.status,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",onClick:function(){t.openPo(e.id)}},l.a.createElement("i",{className:"fas fa-search"})),l.a.createElement(R.a,{color:"danger",size:"sm",className:"btn-icon btn-link",onClick:function(){t.deletePO(e.id)}},l.a.createElement("i",{className:"fas fa-trash-alt"})))}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.getPoResume=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/admin/get_resume_pos/?client=".concat(e.state.selectedClientPo),{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.componentDidMount(),window.open("https://api.vulcanoapparel.com/api/v1"+"/admin/get_resume_pos/?client=".concat(this.state.selectedClientPo)),this.notify("tr","success","Resume downloaded!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Get Resume failed")}.bind(Object(P.a)(e)))},e.deletePO=function(t){e.toggleLoading();var a=new FormData;a.append("po_id",t),ae.a.post(e.costingURL+"/po/clients_delete_po/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.notify("tr","success","Po Deleted!"),this.toggleLoading(),this.componentDidMount()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"PO not Deleted"),this.toggleLoading()}.bind(Object(P.a)(e)))},e._clientsLoaded=!1,e.getClients=function(){ae.a.get(e.costingURL+"/clients/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({clients:e.data.map(function(e){return{value:e.id,label:e.name,abbreviation:e.abbreviation}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.approveAllPos=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/po/approve_all_pos/?client=".concat(e.state.selectedClientPo.value),{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.notify("tr","success","Pos Approved!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"PO not Approved")}.bind(Object(P.a)(e)))},e.toggleUploadAllPOsModal=function(){e.setState({uploadAllPO:!e.state.uploadAllPO})},e.toggleUploadPOModal=function(){e.setState({uploadPO:!e.state.uploadPO})},e.toggleGetResumeModal=function(){e.setState({resumePO:!e.state.resumePO})},e.addClientToList=function(t){var a=Object(Ge.a)(e.state.clientList);a.push(t.value),e.setState({clientList:a})},e.addFileToList=function(t){e.setState({selectedFile:t.target.files[0]});var a=Object(Ge.a)(e.state.fileList);a.push(t.target.files[0]),e.setState({fileList:a})},e.addEvent=function(){var t=Object(Ge.a)(e.state.filesForm);t.push("1"),e.setState({filesForm:t})},e.resetModal=function(){e.setState({filesForm:["1"]})},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.state={loading:!1,productOrder:null,styles_po:null,filesForm:["1"],selectedFile:null,uploadPO:!1,uploadAllPO:!1,resumePO:!1,clientList:[],fileList:[],flagBuy:!1},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getClients(),this.getPOS()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.uploadPO,i=t.resumePO,o=t.clients,s=t.filesForm,r=t.productOrder,c=this.checkPageMode(),d="bg-ligh"===c.bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(d," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(L.a,{isOpen:n,toggle:this.toggleUploadPOModal,modalClassName:this.checkPageMode().mc},l.a.createElement(H.a,null,l.a.createElement("h3",null,"Upload PO Files"),l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,null,s&&s.map(function(t){return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{sm:7},l.a.createElement(W.a,{placeholder:"Select Client",styles:Ta,options:o,onChange:function(t){e.setState({selectedClientPo:t}),e.addClientToList(t)}})),l.a.createElement(z.a,{sm:3},l.a.createElement(q.a,{id:"formGroup_pathToTechpack",className:"text-center"},l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm"},l.a.createElement("input",{type:"file",onChange:e.addFileToList,name:"pathToCP_POS",id:"input_pathToTechpack",multiple:"multiple"}),l.a.createElement("i",{className:"tim-icons icon-cloud-upload-94"}),"\xa0Po File"))))}),l.a.createElement(z.a,{sm:2},this.state.selectedClientPo&&"VANS"===this.state.selectedClientPo.label&&l.a.createElement(R.a,{className:"btn-simple",color:"primary",size:"sm",onClick:this.addEvent},l.a.createElement("i",{class:"fas fa-plus"}))),l.a.createElement(z.a,{sm:2},this.state.selectedClientPo&&"THE NORTH FACE"===this.state.selectedClientPo.label&&l.a.createElement(q.a,{check:!0},l.a.createElement(S.a,{check:!0},l.a.createElement(J.a,{type:"checkbox",style:ja,checked:this.state.flagBuy,onChange:function(){return e.setState({flagBuy:!e.state.flagBuy})}})," ","BUY"))))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:function(){e.toggleUploadPOModal(),e.resetModal()}},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(t){return e.uploadChangeFilePO(t)}},"Save Changes")))),l.a.createElement(L.a,{isOpen:i,toggle:this.toggleGetResumeModal,modalClassName:this.checkPageMode().mc},l.a.createElement(H.a,null,l.a.createElement("h3",null,"Download PO Resume"),l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,null,s&&s.map(function(t){return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{sm:7},l.a.createElement(W.a,{placeholder:"Select Client",styles:Ta,options:o,onChange:function(t){e.setState({selectedClientPo:t.value}),e.addClientToList(t)}})),l.a.createElement(z.a,{sm:3},l.a.createElement(q.a,{id:"formGroup_pathToTechpack",className:"text-center"},l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm",onClick:function(){e.getPoResume(),console.log(e.state.selectedClientPo)}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"\xa0Download"))))}))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:function(){e.toggleGetResumeModal(),e.resetModal()}},"Close")))),l.a.createElement(k.a,{className:"justify-content-center mt-5"},l.a.createElement(z.a,{md:{size:10,order:2}},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:"9"},l.a.createElement("h1",null,"All POs")),l.a.createElement(z.a,{sm:"3"},l.a.createElement(q.a,{id:"formGroup_pathToTechpack",className:"text-center"},l.a.createElement("h4",null,"\xa0 \xa0Add File for a new PO"),l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm",onClick:function(){return e.toggleUploadPOModal()}},l.a.createElement("i",{className:"tim-icons icon-cloud-upload-94"}),"\xa0 Upload PO File"),l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm",onClick:function(){return e.toggleGetResumeModal()}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"\xa0 Get PO Resume"))),l.a.createElement("br",null),r&&l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{className:"".concat(c.bg," border")},l.a.createElement(y.a,null,l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:r,filterable:!0,showPaginationTop:!0,showPaginationBottom:!1,className:"-striped -highlight primary-pagination",columns:[{Header:"PO Number",accessor:"po_number",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},filterAll:!0},{Header:"Delivery Place",accessor:"delivery_place",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["delivery_place"]})},filterAll:!0},{Header:"Status",accessor:"status",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["status"]})},filterAll:!0},{Header:"Created At",accessor:"create_date",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["create_date"]})},filterAll:!0},{Header:"Actions",accessor:"actions",sortable:!1,filterable:!1,width:100}]}),"IT Admin"===this.Role&&l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{sm:5,color:"primary",onClick:function(){e.toggleUploadAllPOsModal()}},"Approve All POS"),l.a.createElement(L.a,{isOpen:this.state.uploadAllPO,toggle:this.toggleUploadAllPOsModal,modalClassName:this.checkPageMode().mc},l.a.createElement(H.a,null,l.a.createElement("h3",null,"Approve All Pos"),l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:7},l.a.createElement(W.a,{placeholder:"Select Client",styles:Ta,options:this.state.clients,onChange:function(t){e.setState({selectedClientPo:t})}})),l.a.createElement(z.a,{sm:3},l.a.createElement(q.a,{id:"formGroup_pathToTechpack",className:"text-center"},l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm",onClick:this.approveAllPos},"Approve"))))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:function(){e.toggleUploadAllPOsModal(),e.resetModal()}},"Close"))))))))))))))}}]),t}(l.a.Component),Fa=a(129),Pa=a.n(Fa),La=function(e){var t=e.OpenPO,a=e.poList;e.getStylesFromBOM;return l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{className:"card-tasks text-left"},l.a.createElement(_.a,null,l.a.createElement("p",{className:"card-category d-inline"},"PO No.")),l.a.createElement(y.a,null,l.a.createElement("div",{className:"table-responsive table-full-width"},l.a.createElement(_e.a,null,l.a.createElement("tbody",null,a&&a.map(function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("p",{className:"title"},e.po_number),l.a.createElement("p",{className:"text-muted"},e.clients_style)),l.a.createElement("td",{className:"td-actions text-right"},l.a.createElement(R.a,{color:"link",type:"button",onClick:function(){t(e.id)}},l.a.createElement("i",{className:"tim-icons icon-zoom-split"}))))})))))))},Da=function(e){var t=e.newStyle,a=e.selectedPO,n=e.approvePo,i=e.deliveryPlaceInfo,o=(e.getColorsForStyle,e.editedProcecss),s=e.openModal,r=e.openModalStyle,c=(e.openModalColor,e.openModalPrice),d=(e.getStylesFromBOM,e.getColorsFromStyle),m=e.openModalScale,u=e.openModalPlace;e.getColorFromPO;return console.log(a),l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,null,a?l.a.createElement(y.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-primary",sm:2},"No. PO: "),l.a.createElement(z.a,{sm:3},a.po_number),l.a.createElement(S.a,{for:"exampleEmail",className:"text-primary",sm:3},"Client Delivery Place:"),l.a.createElement(z.a,{sm:4},a.clients_delivery_place)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-primary",sm:2},"Client:"),l.a.createElement(z.a,{sm:3},a.client.name),l.a.createElement(S.a,{for:"exampleEmail",className:"text-primary",sm:3},"Delivery Place:"),l.a.createElement(z.a,{sm:4},a.real_delivery_place_label?a.real_delivery_place_label:i.name,l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",onClick:function(){u(a.id)}},l.a.createElement("i",{className:"fa fa-edit"})))),l.a.createElement("div",{className:"".concat(Pa.a.sizeTable," ")},a.details.map(function(e,n){return l.a.createElement("div",{className:"".concat(e.bordered," blockquote")},l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:4},l.a.createElement("p",{className:"card-category d-inline"},"Client Style: ",e.clients_style,l.a.createElement("br",null),"Style: ",e.style_label?e.style_label:l.a.createElement(l.a.Fragment,null,null===e.style?"None":e.style),l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",onClick:function(){o(n),r()}},l.a.createElement("i",{className:"fa fa-edit"})))),l.a.createElement(z.a,{sm:4},l.a.createElement("p",{className:"card-category d-inline"},"Export Date Client: ",e.clients_export_date,l.a.createElement("br",null),"Export Date: ",e.exportation_date?e.exportation_date:"None",l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",onClick:function(){o(n),s(e.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("br",null),"Scale: ",e.scale_label?e.scale_label:l.a.createElement(l.a.Fragment,null,null===e.scale?"None":e.scale),l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",onClick:function(){o(n),m(e.id)}},l.a.createElement("i",{className:"fa fa-edit"})))),l.a.createElement(z.a,{sm:4},l.a.createElement("p",{className:"card-category "},"Color Client: ",e.clients_color,l.a.createElement("br",null),"Color: ",e.color_label?e.color_label:l.a.createElement(l.a.Fragment,null,null===e.color?"None":e.color.name),l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",onClick:function(){var a=e.id_style;!0===t.styleHasCHange&&null!==t.newStyle&&(a=t.newStyle.id),d(a),o(n)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("br",null),"Unit Price: ",e.unit_price,l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",onClick:function(){o(n),c(e.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("br",null)))),l.a.createElement(_e.a,null,l.a.createElement("tbody",null,l.a.createElement("tr",null,a.details[n].sizes.map(function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("td",null,l.a.createElement("p",{className:"title"},e.clients_size),l.a.createElement("p",{className:"text-muted"},e.quantity),l.a.createElement("p",{className:"title"},"Price"),l.a.createElement("p",{className:"text-muted"},e.clients_unit_price)))}),l.a.createElement("td",null,l.a.createElement("p",{className:"title"},"Total"),l.a.createElement("p",{className:"text-muted"},a.details[n].total))))))})),l.a.createElement(R.a,{color:"primary",onClick:function(){n(a.id)}},"Approve PO")):l.a.createElement(y.a,null,"Please select a PO")))},Ha={input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}},Ia=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.toggleEditModal=function(){e.setState({editModal:!e.state.editModal})},e.toggleEditModalStyle=function(){e.setState({editModalStyle:!e.state.editModalStyle})},e.toggleEditModalColor=function(){e.setState({editModalColor:!e.state.editModalColor})},e.toggleEditModalPrice=function(){e.setState({editModalPrice:!e.state.editModalPrice})},e.toggleEditModalScale=function(){e.setState({editModalScale:!e.state.editModalScale})},e.toggleEditModalPlace=function(){e.setState({editModalPlace:!e.state.editModalPlace})},e.toggleModalNewPlace=function(){e.setState({newModalPlace:!e.state.newModalPlace})},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e._loadingStyles=!1,e.getStyles=function(){ae.a.get(e.costingURL+"/style/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingStyles=!0,this._isMounted&&this.setState({styles1:e.data.map(function(e){return{value:e.id,label:"".concat(e.costing),costing_id:e.costing_id,name:e.name}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"costing History")}.bind(Object(P.a)(e)))},e.getColors=function(t){ae.a.get(e.costingURL+"/color_by_client/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingStyles=!0,this._isMounted&&this.setState({colors:e.data.map(function(e){return{value:e.id,label:"".concat(e.name),name:e.name}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Failed Load Colors")}.bind(Object(P.a)(e)))},e.getColorsFromStyle=function(t){ae.a.get(e.costingURL+"/po/get_colors_for_style_po/?bom_id=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this.setState({colorInBom:e.data.map(function(e){return{value:e.id,label:"".concat(e.name),name:e.name}})}),this.toggleEditModalColor()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Failed Load Colors")}.bind(Object(P.a)(e)))},e.getAllColors=function(){ae.a.get(e.costingURL+"/color_by_client/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingStyles=!0,this._isMounted&&this.setState({colorsAll:e.data.map(function(e){return{value:e.id,label:"".concat(e.name),name:e.name}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Failed Load Colors")}.bind(Object(P.a)(e)))},e.getStylesFromBOM=function(t){ae.a.get(e.costingURL+"/po/get_styles_from_bom/?client_id=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingStyles=!0,this._isMounted&&this.setState({styles:e.data.map(function(e){return{value:e.id,label:"".concat(e.name),costing_id:e.costing_id,name:e.name,id_style:e.id_style,id:e.id}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Failed Load Colors")}.bind(Object(P.a)(e)))},e.getColorFromPO=function(t){ae.a.get(e.costingURL+"/color_by_client/get_colors_by_client/?client=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingStyles=!0,this._isMounted&&this.setState({colors:e.data.map(function(e){return{value:e.id,label:"".concat(e.name),name:e.name}})}),this.toggleEditModalColor()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Failed Load Colors")}.bind(Object(P.a)(e)))},e.getScales=function(){ae.a.get(e.costingURL+"/material_scale/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingStyles=!0,this._isMounted&&this.setState({scales:e.data.map(function(e){return{value:e.id,label:"".concat(e.name," / ").concat(e.client.name),name:e.name}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Failed Load Sizes Scales")}.bind(Object(P.a)(e)))},e.getPlaces=function(){ae.a.get(e.costingURL+"/destionation/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingStyles=!0,this._isMounted&&this.setState({places:e.data.map(function(e){return{value:e.id,label:"".concat(e.name," / ").concat(e.clients),name:e.name}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Failed Load Sizes Scales")}.bind(Object(P.a)(e)))},e.getPoList=function(){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1/po/get_my_po/?flag=U",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({productOrder:e.data}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading()}.bind(Object(P.a)(e)))},e.postApprove=function(){e.toggleLoading(),ae.a.post("https://api.vulcanoapparel.com/api/v1/po/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({productOrder:[e.data]}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading()}.bind(Object(P.a)(e)))},e._clientsLoaded=!1,e.getClients=function(){ae.a.get(e.costingURL+"/clients/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({clients:e.data.map(function(e){return{value:e.id,label:e.name,abbreviation:e.abbreviation}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.getCallendar=function(){for(var t=[],a=[],n=[],l=1;l<32;l++)t.push({label:l});for(var i=1;i<13;i++)a.push({label:i});for(var o=2021;o<2121;o++)n.push({label:o});e.setState({days:t,months:a,years:n})},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.OpenPO=function(t){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/po/".concat(t,"/"),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({newStyle:null,selectedPO:e.data,deliveryPlaceInfo:{id:"".concat("None"!==e.data.real_delivery_place?e.data.real_delivery_place.split(" ",1):"None"),name:"".concat("None"!==e.data.real_delivery_place?e.data.real_delivery_place.split(" - ")[0].slice(1,-3):"None")}}),this.toggleLoading(),this.getStylesFromBOM(this.state.selectedPO.client.id),this.setState({clientId:this.state.selectedPO.client.id})}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading()}.bind(Object(P.a)(e)))},e.approvePo=function(t){var a=Object(Ge.a)(e.state.selectedPO.details),n=[];for(var l in a){if(null===a[l].style)return void e.notify("tr","warning","Please fill all styles");if("None"===a[l].color||null===a[l].color)return void e.notify("tr","warning","Please fill all colors");if(null===a[l].exportation_date)return void e.notify("tr","warning","Please fill all exportation dates");if("None"===a[l].scale)return void e.notify("tr","warning","Please fill all scales");if("None"===e.state.selectedPO.real_delivery_place)return void e.notify("tr","warning","Please fill the Delivery Place");var i={detail_id:a[l].id,style:"".concat(Number.isInteger(a[l].style)?a[l].style:a[l].id_style),color:"".concat(a[l].color.id?a[l].color.id:a[l].color),exportation_date:a[l].exportation_date,unit_price:"".concat(a[l].unit_price?a[l].unit_price:a[l].sizes[0].clients_unit_price),scale:"".concat(Number.isInteger(a[l].scale)?a[l].scale:a[l].id_scale),clients_color:a[l].clients_color,clients_export_date:a[l].clients_export_date,clients_style:a[l].clients_style};n.push(i)}var o={po_number:e.state.selectedPO.po_number,real_delivery_place:"".concat(Number.isInteger(e.state.selectedPO.real_delivery_place)?e.state.selectedPO.real_delivery_place:e.state.deliveryPlaceInfo.id),details:n};ae.a.post(e.costingURL+"/po/approve_po/",o,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.notify("tr","success","Po Approved!"),this.componentDidMount()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"PO not Approved")}.bind(Object(P.a)(e)))},e.deletePO=function(t){e.toggleLoading();var a=new FormData;a.append("id",t),a.append("flag","D"),ae.a.post(e.costingURL+"/po/change_status_po/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.notify("tr","success","Po Deleted!"),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"PO not Deleted"),this.toggleLoading()}.bind(Object(P.a)(e)))},e.createPlace=function(){if(e.toggleLoading(),void 0!==e.state.newPlacename||void 0!==e.state.newPlaceClient||void 0!==e.state.newPlaceMin||void 0!==e.state.newPlaceMax||void 0!==e.state.newPlaceCode){var t=new FormData;t.append("name",e.state.newPlacename),t.append("client",e.state.newPlaceClient.value),t.append("min",e.state.newPlaceMin),t.append("max",e.state.newPlaceMax),t.append("clients_code",e.state.newPlaceCode),t.append("sales_person",e.state.newPlacePerson?e.state.newPlacePerson:"None"),t.append("commission",e.state.newPlaceCommision?e.state.newPlaceCommision:"0.0"),ae.a.post(e.costingURL+"/destionation/",t,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.notify("tr","success","Place Created!"),this.toggleLoading(),this.componentDidMount()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"PO not Deleted"),this.toggleLoading()}.bind(Object(P.a)(e)))}else e.notify("tr","warning","Please fill all before create")},e.editExpDate=function(){var t=new FormData;t.append("po_id",e.state.POSelected.id),t.append("export_date","".concat(e.state.selectedYear.label,"-").concat(e.state.selectedMonth.label,"-").concat(e.state.selectedDay.label)),e.toggleLoading(),ae.a.post(e.costingURL+"/po/change_export_date_po/",t,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.toggleLoading(),this.notify("tr","success","Exportation Date Changed!"),this.componentDidMount()}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"Date not changed")}.bind(Object(P.a)(e)))},e.editedProcecss=function(t){e.setState({editedProcess:t})},e.getColorsForStyle=function(){ae.a.get(e.costingURL+"/color_by_client/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingStyles=!0,this._isMounted&&this.setState({colors:e.data.map(function(e){return{value:e.id,label:"".concat(e.name),name:e.name}})}),this.toggleEditModalColor()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Failed Load Colors")}.bind(Object(P.a)(e)))},e.editStyle=function(t){var a=Object(Ge.a)(e.state.selectedPO.details),n=a[e.state.editedProcess];n.style=t.value,n.style_label=t.label,e.setState({selectedPO:Object(A.a)({},e.state.selectedPO,{details:a})}),e.toggleEditModalStyle()},e.editDate=function(){var t=Object(Ge.a)(e.state.selectedPO.details);t[e.state.editedProcess].exportation_date="".concat(e.state.selectedYear.label,"-").concat(e.state.selectedMonth.label,"-").concat(e.state.selectedDay.label),e.setState({selectedPO:Object(A.a)({},e.state.selectedPO,{details:t})}),e.toggleEditModal()},e.editColor=function(t){var a=Object(Ge.a)(e.state.selectedPO.details),n=a[e.state.editedProcess];n.color=t.value,n.color_label=t.name,e.setState({selectedPO:Object(A.a)({},e.state.selectedPO,{details:a})}),e.toggleEditModalColor()},e.editScale=function(t){var a=Object(Ge.a)(e.state.selectedPO.details),n=a[e.state.editedProcess];n.scale=t.value,n.scale_label=t.name,e.setState({selectedPO:Object(A.a)({},e.state.selectedPO,{details:a})}),e.toggleEditModalScale()},e.editPrice=function(t){var a=Object(Ge.a)(e.state.selectedPO.details);a[e.state.editedProcess].unit_price=e.state.selectedPrice,e.setState({selectedPO:Object(A.a)({},e.state.selectedPO,{details:a})}),e.toggleEditModalPrice()},e.editPlace=function(t){e.setState({selectedPO:Object(A.a)({},e.state.selectedPO,{real_delivery_place:t.value,real_delivery_place_label:t.label})}),e.toggleEditModalPlace()},e.loadColors=function(e){},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.state={loading:!1,productOrder:null,POSelected:null,styles_bom_for_po:null,styles_per_po:[],unique_styles_po:[],editModal:!1,editModalStyle:!1,editModalColor:!1,editModalPrice:!1,editModalScale:!1,editModalPlace:!1,newModalPlace:!1,styleHasCHange:!1,style_costing:[],days:[],months:[],year:[],styles:[],styles1:[],colors:[]},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getPoList(),this.getCallendar(),this.getStyles(),this.getScales(),this.getClients(),this.getPlaces()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.scales,i=t.styles,o=t.selectedPO,s=t.deliveryPlaceInfo,r=t.productOrder,c=t.editModal,d=t.editModalStyle,m=t.editModalColor,u=t.editModalPrice,p=t.editModalScale,h=t.editModalPlace,g=t.newModalPlace,f=t.days,b=t.months,E=t.years,y=t.places,_=t.clients,C=t.colorsAll;console.log("here:",i);var O="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(O," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement(L.a,{isOpen:c,toggle:this.toggleEditModal,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content-center",toggle:this.toggleImportModal},"Edit Exportation Date"),l.a.createElement(H.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,"Exportation Date"),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:4},l.a.createElement(W.a,{placeholder:"mm",styles:Ha,options:b,onChange:function(t){e.setState({selectedMonth:t})}})),l.a.createElement(z.a,{sm:4},l.a.createElement(W.a,{placeholder:"dd",styles:Ha,options:f,onChange:function(t){e.setState({selectedDay:t})}})),l.a.createElement(z.a,{sm:4},l.a.createElement(W.a,{placeholder:"yyyy",styles:Ha,options:E,onChange:function(t){e.setState({selectedYear:t})}})))))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:function(){return e.toggleEditModal()}},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){return e.editDate()}},"Save Changes"))),l.a.createElement(L.a,{isOpen:d,toggle:this.toggleEditModalStyle,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content-center",toggle:this.toggleImportModal},"Edit Style PO"),l.a.createElement(H.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null," Choose Style To Change"),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},this._loadingStyles?l.a.createElement(W.a,{placeholder:"Search Style",styles:Ha,options:i,onChange:function(t){e.setState({newStyle:t,styleHasCHange:!0})}}):l.a.createElement("div",{className:"BOMSloader"})))))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleEditModalStyle},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){return e.editStyle(e.state.newStyle)}},"Save Changes"))),l.a.createElement(L.a,{isOpen:m,toggle:this.toggleEditModalColor,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content-center",toggle:this.toggleImportModal},"Edit Color"),l.a.createElement(H.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,"Select Color"),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(W.a,{placeholder:"Select Color",styles:Ha,options:this.state.colorInBom?this.state.colorInBom:C,onChange:function(t){e.setState({selectedColor:t})}})))))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:function(){e.toggleEditModalColor(),e.setState({newStyle:null,colorsInBom:[]})}},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){e.editColor(e.state.selectedColor),e.setState({newStyle:null,colorsInBom:[]})}},"Save Changes"))),l.a.createElement(L.a,{isOpen:p,toggle:this.toggleEditModalScale,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content-center",toggle:this.toggleImportModal},"Edit Scale"),l.a.createElement(H.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,"Select Scale"),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(W.a,{placeholder:"Select Scale",styles:Ha,options:n,onChange:function(t){e.setState({selectedScale:t})}})))))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:function(){return e.toggleEditModalScale()}},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){return e.editScale(e.state.selectedScale)}},"Save Changes"))),l.a.createElement(L.a,{isOpen:u,toggle:this.toggleEditModalPrice,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content-center",toggle:this.toggleImportModal},"Edit Unit Price"),l.a.createElement(H.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,"Change Unit Price"),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(J.a,{type:"text",placeholder:"Input Unit Price",onChange:function(t){e.setState({selectedPrice:t.target.value})}})))))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:function(){return e.toggleEditModalPrice()}},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){return e.editPrice(e.state.selectedPrice)}},"Save Changes"))),l.a.createElement(L.a,{isOpen:h,toggle:this.toggleEditModalPlace,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content-center",toggle:this.toggleImportModal},"Select Delivery Place"),l.a.createElement(H.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,"Select Delivery Place"),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:10},l.a.createElement(W.a,{placeholder:"Select Place",styles:Ha,options:y,onChange:function(t){e.setState({selectedPlace:t})}})),l.a.createElement(z.a,{sm:2},l.a.createElement(R.a,{color:"primary",size:"sm",onClick:function(){e.toggleEditModalPlace(),e.toggleModalNewPlace()}},l.a.createElement("i",{class:"fas fa-plus"}))))))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:function(){return e.toggleEditModalPlace()}},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){return e.editPlace(e.state.selectedPlace)}},"Save Changes"))),l.a.createElement(L.a,{isOpen:g,toggle:this.toggleModalNewPlace,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content-center",toggle:this.toggleImportModal},"Create New Delivery Place"),l.a.createElement(H.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,"Create New Delivery Place"),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},"Place Name",l.a.createElement(J.a,{type:"text",placeholder:"Place Name",onChange:function(t){e.setState({newPlacename:t.target.value})}})),l.a.createElement(z.a,{sm:6},"Client",l.a.createElement(W.a,{placeholder:"Select Client ",styles:Ha,options:_,onChange:function(t){e.setState({newPlaceClient:t})}})),l.a.createElement(z.a,{sm:3},"Min",l.a.createElement(J.a,{type:"text",placeholder:"Min",onChange:function(t){e.setState({newPlaceMin:t.target.value})}})),l.a.createElement(z.a,{sm:3},"Max",l.a.createElement(J.a,{type:"text",placeholder:"Max",onChange:function(t){e.setState({newPlaceMax:t.target.value})}})),l.a.createElement(z.a,{sm:6},"Sales Person",l.a.createElement(J.a,{type:"text",placeholder:"Sales Person",onChange:function(t){e.setState({newPlacePerson:t.target.value})}})),l.a.createElement(z.a,{sm:6},"Commission",l.a.createElement(J.a,{type:"text",placeholder:"Commission",onChange:function(t){e.setState({newPlaceCommision:t.target.value})}})),l.a.createElement(z.a,{sm:12},"Client Code",l.a.createElement(J.a,{type:"text",placeholder:"Code for the place",onChange:function(t){e.setState({newPlaceCode:t.target.value})}})))))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:function(){return e.toggleModalNewPlace()}},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){e.createPlace(),e.toggleModalNewPlace(),e.toggleEditModalPlace()}},"Create Place"))),l.a.createElement(k.a,{className:"justify-content-center mt-5"},l.a.createElement(z.a,{sm:3},l.a.createElement(v.a,null,l.a.createElement(La,{poList:r,OpenPO:this.OpenPO}))),l.a.createElement(z.a,{sm:9},l.a.createElement(Da,{selectedPO:o,deliveryPlaceInfo:s,newStyle:this.state,approvePo:this.approvePo,getColorsForStyle:this.getColorsForStyle,getColorFromPO:this.getColorFromPO,getColor:this.state.colors,editedProcecss:this.editedProcecss,openModal:this.toggleEditModal,getColorsFromStyle:this.getColorsFromStyle,openModalStyle:this.toggleEditModalStyle,openModalColor:this.toggleEditModalColor,openModalPrice:this.toggleEditModalPrice,openModalScale:this.toggleEditModalScale,openModalPlace:this.toggleEditModalPlace}))))}}]),t}(l.a.Component),Ra={input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}},za=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Role=localStorage.getItem("role")||"",e._isMounted=!1,e.costingURL="https://api.vulcanoapparel.com/api/v1",e.styleId=0,e.defaultEmbellishmentLine={id:0,color:0,name:"",embroidery_description:"",laser_description:"",washed_description:"",ironing_description:"",serigraphy_description:"",sublimate_description:"",materials:[]},e.handleFileChangeTechPack=function(){var t=Object(T.a)(N.a.mark(function t(a,n){var l,i,o;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l=n,i=a,(o=new FormData).append("file",i),o.append("id",l),t.next=7,pe("https://api.vulcanoapparel.com/api/v1/bom_header/upload_production_techpacks/",{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}},o,"file",["pdf","img","png","jpg"]).then(function(){this.notify("tr","success","Techpack uploaded")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e),this.notify("tr","error","Techpack uploaded fail")}.bind(Object(P.a)(e)));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e._sketchLoaded=!1,e.downloadSketch=function(t){var a=e.costingURL+"/costingHeader/download/?key="+t,n={params:{key:t},headers:{Authorization:"Token "+e.userToken}};ae.a.get(a,n).then(function(e){this._sketchLoaded=!0,this.setState({costingSketch:e.data.url})}.bind(Object(P.a)(e)))},e._loadingCostSheets=!1,e.costingHistory=function(){ae.a.get(e.costingURL+"/costingHeader/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingCostSheets=!0,this._isMounted&&this.setState({costsheets:e.data.map(function(e){return{value:e.id,label:"".concat(e.id," / ").concat(e.client.name," / ").concat(e.season.name," / ").concat(e.style),data:e}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"costing History")}.bind(Object(P.a)(e)))},e._loadingStyles=!1,e.getStyles=function(){var t=new FormData;t.append("id",e.props.location.state.costingId),ae.a.post(e.costingURL+"/bom_header/get_boms_for_edit/",t,{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingStyles=!0,this._isMounted&&this.setState({styleList:e.data.map(function(e){return{bom_id:e.bom_style.id,value:e.id,label:e.bom_style.name,costing_id:e.bom_style.costing_id,name:e.bom_style.name}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"costing History")}.bind(Object(P.a)(e)))},e._selectedCostsheet=!1,e.getSelectedCostSheet=function(t){e.toggleLoading(),ae.a.get(e.costingURL+"/costingHeader/new_BOM/?costing_id=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._selectedCostsheet=!0;var t=this.state.header,a=e.data;this._isMounted&&this.setState({selectedCostSheet:e.data,header:Object(A.a)({},t,{client:a.client,costing_id:a.costing_id,costing_style:a.style,cutting_cost:a.cutting_cost.toFixed(4),sewing_cost:a.sewing_cost.toFixed(4),bom_style:a.bom_style})}),this.getColors(a.client),this.toggleLoading(),this.getProductionMaterials(a.client),this.downloadSketch(e.data.picture)}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"selected")}.bind(Object(P.a)(e)))},e._selectedHeader=!1,e.showHeaderInfo=function(t){e.toggleLoading(),ae.a.get(e.costingURL+"/bom_header/".concat(t,"/"),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._selectedHeader=!0;var t=this.state.header,a=e.data;this._isMounted&&this.setState({costsheetSelected:a.client,techpack:a.production_techpack,header:Object(A.a)({},t,{client_id:a.client,return_flag:a.return_flag,bom_style:a.bom_style.name,description:a.description,sms_flag:a.sms_flag,sms_multiplier:a.sms_multiplier,cutting_cost:a.cutting_cost.toFixed(4),sewing_cost:a.sewing_cost.toFixed(4),thread:a.thread.toFixed(4),packing:a.packing.toFixed(4),serigraphy:a.serigraphy.toFixed(4),embellishment_description:a.embellishment_description.map(function(e){return{id:e.id,color:e.color_id,value:"".concat(e.color),embroidery_description:e.embroidery_description,ironing_description:e.ironing_description,laser_description:e.laser_description,serigraphy_description:e.serigraphy_description,sublimate_description:e.sublimate_description,washed_description:e.washed_description,uid:e.id,editable:e.ingested_flag,returned_flag:e.returned_flag,materials:e.materials.map(function(e){return{bom_material_id:e.id,material_id:e.material.id,label:"".concat(e.material.description," / ").concat(e.material.size.name," / ").concat(e.old_costing_id," / ").concat(e.material.client.abbreviation),consumption:e.material_consumption,measure:e.material.measure.name,old_costing_id:e.material.old_costing_id}})}})})}),this.getColors(t.client),this.getProductionMaterials(t.client)}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"selected")}.bind(Object(P.a)(e)))},e._colorsLoaded=!1,e.getColors=function(t){t||(t=1),e.toggleLoading(),ae.a.get(e.costingURL+"/color_by_client/get_colors_by_client/?client=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._colorsLoaded=!0,this._isMounted&&this.setState({colors:e.data.map(function(e){return{value:e.id,label:"".concat(e.name),data:e}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"selected")}.bind(Object(P.a)(e)))},e.addColorProcessCopy=function(){var t=e.state.header.embellishment_description;e.setState({header:Object(A.a)({},e.state.header,{embellishment_description:t})})},e._loadingComponentStyles=!1,e.getProcessClient=function(){ae.a.get(e.costingURL+"/bom_header/get_bom_colors/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingComponentStyles=!0,this._isMounted&&this.setState({StylesWithProcess:e.data.map(function(e){return{value:e.id,label:"".concat(e.style_name," / ").concat(e.color__name),name:e.style_name}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Error Loading Components")}.bind(Object(P.a)(e)))},e.setAllProces=function(){var t=[];e.state.StylesWithProcess&&e.state.StylesWithProcess.map(function(e,a){return t.push(e),console.log(t),{label:a}}),console.log(t),e.setState({all_components:t})},e._loadingSelectedComponentStyles=!1,e.getOneProcess=function(t){var a=new FormData;a.append("process_id",t),ae.a.post(e.costingURL+"/bom_header/get_one_process/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingSelectedComponentStyles=!0,this._isMounted&&this.setState({newProcessSelected:e.data})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Error Loading Components")}.bind(Object(P.a)(e)))},e.poolProcessModal=function(){e.setState({processModal:!e.state.processModal})},e.addOldColorProcess=function(){var t=e.state.newProcessSelected,a=new Date,n={id:0,uid:a.getDate()+a.getHours()+a.getSeconds(),value:t.color,color:t.color_id,editable:!1,embroidery_description:t.embroidery_description,ironing_description:t.ironing_description,laser_description:t.laser_description,serigraphy_description:t.serigraphy_description,sublimate_description:t.sublimate_description,washed_description:t.washed_description,materials:t.materials.map(function(e){return{bom_material_id:0,material_id:e.material.id,label:e.material.description,consumption:e.material_consumption,old_costing_id:e.material.old_costing_id,measure:e.material.measure.name}})},l=e.state.header.embellishment_description,i="".concat(a.getDate()+a.getHours()+a.getSeconds()),o=Object(A.a)({},e.defaultEmbellishmentLine,{uid:i,editable:!1});l=[].concat(Object(Ge.a)(l),[o]),e.setState({header:Object(A.a)({},e.state.header,{embellishment_description:e.state.header.embellishment_description.push(n)})}),e.addColorProcessCopy()},e.addColorProcess=function(){var t=e.state.header.embellishment_description,a=Date.now(),n=Object(A.a)({},e.defaultEmbellishmentLine,{uid:a,editable:!1});t=[].concat(Object(Ge.a)(t),[n]),e.setState({header:Object(A.a)({},e.state.header,{embellishment_description:t})})},e.duplicateColorProcess=function(t){var a=new Date,n={id:0,uid:a.getDate()+a.getHours()+a.getSeconds(),value:void 0,color:void 0,editable:!1,embroidery_description:t.embroidery_description,ironing_description:t.ironing_description,laser_description:t.laser_description,serigraphy_description:t.serigraphy_description,sublimate_description:t.sublimate_description,washed_description:t.washed_description,materials:t.materials.map(function(e){return{bom_material_id:0,material_id:e.material_id,label:e.label,consumption:e.consumption,old_costing_id:e.old_costing_id,measure:e.measure}})},l=e.state.header.embellishment_description,i="".concat(a.getDate()+a.getHours()+a.getSeconds()),o=Object(A.a)({},e.defaultEmbellishmentLine,{uid:i,editable:!1});l=[].concat(Object(Ge.a)(l),[o]),e.setState({header:Object(A.a)({},e.state.header,{embellishment_description:e.state.header.embellishment_description.push(n)})}),e.addColorProcessCopy()},e.removeColorProcess=function(t){var a=e.state.header.embellishment_description.filter(function(e){return e.uid!==t});e.setState({header:Object(A.a)({},e.state.header,{embellishment_description:a})})},e.handleProcessColorChange=function(t,a,n){var l=e.state.header.embellishment_description;l[t][a]=n,e.setState({header:Object(A.a)({},e.state.header,{embellishment_description:l}),colorEdit:n})},e.toggleAddMaterial=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=e.state.modalMaterials;e.setState({modalMaterials:Object(A.a)({},l,{isOpen:!l.isOpen,index:t,edit:a,matIndex:n})}),t&&!1===a&&null===n&&e.setState({materialForm:{material:null,consumption:null}})},e._loadedMaterials=!1,e.getProductionMaterials=function(t){e.toggleLoading(),ae.a.get(e.costingURL+"/materialp/get_materialp_by_client/?client=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedMaterials=!0,this.setState({materials:e.data.map(function(e){return{bom_material_id:0,old_costing_id:e.old_costing_id,value:e.material_id,label:"".concat(e.description," /  ").concat(e.old_costing_id," / ").concat(e.client_abbreviation),measure:e.measure_name}})}),this.setAllProces()}.bind(Object(P.a)(e)))},e.addMaterialToEmbellishment=function(){var t=e.state,a=t.header,n=t.header.embellishment_description,l=t.materialForm,i=t.modalMaterials;if(!l.consumption||l.consumption<0||null===l.material)return e.notify("tr","warning","Material inputs required"),!1;var o=n[i.index].materials;if(o.find(function(e){return e.material_id===l.material.value}))return e.notify("tr","warning","Material already exists in this process"),!1;n[i.index].materials=[].concat(Object(Ge.a)(o),[{material_id:l.material.value,consumption:l.consumption,bom_material_id:0,old_costing_id:l.material.old_costing_id,measure:l.material.measure}]),e.setState({header:Object(A.a)({},a,{embellishment_description:n}),materialForm:{material:null,consumption:null,bom_material_id:0,old_costing_id:null,measure:null}}),e.toggleAddMaterial()},e.removeMaterialEmbellishment=function(t,a){var n=e.state,l=n.header,i=n.header.embellishment_description,o=i[t].materials;i[t].materials=o.filter(function(e){return e.material_id!==a}),e.setState({header:Object(A.a)({},l,{embellishment_description:i})})},e.editMaterialToggle=function(t,a,n){e.setState({materialForm:{material:a.material,consumption:a.consumption,bom_material_id:0,old_costing_id:a.material.old_costing_id,measure:a.material.measure}}),e.toggleAddMaterial(t,!0,n)},e.editMaterialEmbellishment=function(){var t=e.state,a=t.header,n=t.header.embellishment_description,l=t.materialForm,i=t.modalMaterials,o=i.index,s=i.matIndex;n[o].materials[s]={material_id:l.material.value,consumption:l.consumption,bom_material_id:0,old_costing_id:l.old_costing_id,measure:l.measure},e.setState({header:Object(A.a)({},a,{embellishment_description:n}),materialForm:{material:null,consumption:null,bom_material_id:0,old_costing_id:null,measure:null}}),e.toggleAddMaterial()},e.formHelper=function(t){if("techpack"in t){var a=t.techpack;e.setState({techpack:a})}"formdata"in t&&e.setState({formdata:Object(A.a)({},e.state.formdata,Object(j.a)({},t.formdata.key,t.formdata.value))}),e.setState({path_to_techpack:t})},e.updateHeader=function(t,a){var n=e.state,l=n.header,i=n.header.embellishment_description;if(0!==i.length){var o=!0;if(i.map(function(e){return 0===e.color&&(o=!1),0===e.materials.length&&(o=!1),e}),o){var s=Object(A.a)({},l,{client:void 0,style:e.state.selectedStyle.value,id:e.props.location.state.bomHeader,bom_id:e.props.location.state.bomHeader,sms_flag:!0===l.sms_flag?l.sms_flag=1:l.sms_flag=0,sms_multiplier:l.sms_multiplier||""===l.sms_multiplier?l.sms_multiplier:0});void 0===e.state.techpack?e.notify("tr","warning","Techpack missing."):ae.a.post(e.costingURL+"/bom_header/update_bom_header/",s,{headers:{Authorization:"Token "+e.userToken}}).then(function(e){void 0===this.state.techpack?this.notify("tr","warning","SHOUDNT BE."):(this.handleFileChangeTechPack(this.state.techpack,e.data.id),this.notify("tr","success","BOM saved!"))}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"save bom")}.bind(Object(P.a)(e)))}else e.notify("tr","warning","Invalid Process data, missing color and/or materials")}else e.notify("tr","warning","BOM processes required")},e.duplicateHeader=function(t){e.toggleLoading();var a=new FormData;a.append("bom_id",t),ae.a.post(e.costingURL+"/bom_header/clone_bom/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.toggleLoading(),this.notify("tr","success","BOM duplicated!");this.props.history.push({pathname:"/admin/detail_boms"})}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"save bom")}.bind(Object(P.a)(e)))},e.createHeader=function(){var t=e.state,a=t.header,n=t.header.embellishment_description;if(0!==n.length){var l=!0;if(n.map(function(e){return 0===e.color&&(l=!1),0===e.materials.length&&(l=!1),e}),l){var i=Object(A.a)({},a,{bom_style:void 0,style:e.state.selectedStyle.value,client:void 0,client_id:void 0,costing_id:void 0,sms_flag:!0===a.sms_flag?a.sms_flag=1:a.sms_flag=0,sms_multiplier:a.sms_multiplier||""===a.sms_multiplier?a.sms_multiplier:0});void 0===e.state.techpack?e.notify("tr","warning","Techpack missing."):ae.a.post(e.costingURL+"/bom_header/",i,{headers:{Authorization:"Token "+e.userToken}}).then(function(e){if(void 0===this.state.techpack)this.notify("tr","warning","SHOUDNT BE.");else{this.handleFileChangeTechPack(this.state.techpack,e.data.id),this.notify("tr","success","BOM saved!");this.props.history.push({pathname:"/admin/detail_boms"})}}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"save bom")}.bind(Object(P.a)(e)))}else e.notify("tr","warning","Invalid Process data, missing color and/or materials")}else e.notify("tr","warning","BOM processes required")},e.handleSelectChangeStyles=function(t,a){for(var n,l=[],i=[],o=0,s=t.target.options.length;o<s;o++)(n=t.target.options[o]).selected&&(i.push(n.value),l.push(n.id),1);e.setState({stylesArray:i}),e.setState({BOMArray:l}),console.log("bom",t.target.options[0].id)},e.toggleCopyBOM=function(){e.setState({modalCopyBOM:!e.state.modalCopyBOM})},e.getIdBomCopy=function(t,a){for(var n=0;n<a.length;n++)void 0===a[n]&&a.splice(n,1);if(0===a.length)e.setState({modalCopyBOM:!0}),e.notify("tr","warning","You should select a destination");else{e.toggleLoading();var l=new FormData;l.append("bom_id",t),l.append("boms_id",a.join(",")),ae.a.post(e.costingURL+"/bom_header/copy_boms/",l,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this.toggleLoading(),this.notify("tr","success","BOM's copied successfully!"),this._clientsLoaded=!0,this._isMounted&&this.setState({costingIdSelected:e.data.costing_id,dest_id:e.data.selected_id})}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"clients")}.bind(Object(P.a)(e)))}},e.state={loading:!1,costsheets:[],styleList:[],BOMArray:[],formdata:{},editProcess:!1,modalCopyBOM:!1,techpack:void 0,selectedCostSheet:{},selectedCostSheetOptions:{},selectedStyle:{},stylesArray:[],destSelected:[],selectedArray:[],colors:[],dest_id:[],all_dests:[],costingSketch:null,processes:[],path_to_techpack:void 0,costsheetSelected:null,colorEdit:null,processNew:[],header:{client:"",client_id:0,costing_id:0,description:"",cutting_cost:0,sewing_cost:0,thread:0,packing:0,serigraphy:0,sms_flag:!1,sms_multiplier:0,bom_style:"",return_flag:!1,embellishment_description:[]},modalMaterials:{isOpen:!1,index:null,edit:!1,matIndex:null},materials:[],materialForm:{material:null,consumption:"",bom_material_id:0}},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"getBomHeader",value:function(e,t){console.log(t),ae.a.get(this.costingURL+"/costingHeader/new_BOM/?costing_id=".concat(t),{headers:{Authorization:"Token "+this.userToken}}).then(function(e){var t=this.state.header,a=e.data;this._isMounted&&this.setState({selectedCostSheet:e.data,header:Object(A.a)({},t,{return_flag:a.return_flag,client:a.client,thread:a.thread,costing_id:a.costing_id,costing_style:a.style,cutting_cost:a.cutting_cost.toFixed(4),sewing_cost:a.sewing_cost.toFixed(4),bom_style:a.bom_style,sms_flag:a.sms_flag,description:a.description})})}.bind(this)).catch(function(e){this.handleError(e,"Not Found BOM")}.bind(this))}},{key:"getBomProcess",value:function(e,t){ae.a.get(this.costingURL+"/bom_header/"+t+"/",{headers:{Authorization:"Token "+this.userToken}}).then(function(e){this._isMounted&&this.setState({})})}},{key:"componentDidMount",value:function(){if(this._isMounted=!0,this.costingHistory(),this.getStyles(),this.getProcessClient(),this.props.location.state){var e={value:this.props.location.state.costingId,label:this.props.location.state.costingName,header:this.props.location.state.bomHeader};this.getSelectedCostSheet(this.props.location.state.costingId),this.setState({selectedCostSheetOptions:e,selectedStyle:e.label,editProcess:this.props.location.state.bomHeader}),this.showHeaderInfo(this.props.location.state.bomHeader)}else this.props.history.push("/admin/all_boms")}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"deleteStyle",value:function(e){this.toggleLoading(),ae.a.delete(this.costingURL+"/bom_header/"+e+"/",{headers:{Authorization:"Token "+this.userToken}}).then(function(){this.notify("tr","success","Style deleted!"),this.toggleLoading(),this.componentDidMount()}.bind(this)).catch(function(e){this.handleError(e,"delete  style")}.bind(this))}},{key:"sendForApproval",value:function(e){this.toggleLoading();var t=new FormData;t.append("flag","A"),t.append("bom_id",e),ae.a.post(this.costingURL+"/bom_header/change_status/",t,{headers:{Authorization:"Token "+this.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","CostSheet sent for Approve!"),this.componentDidMount();this.props.history.push({pathname:"/admin/detail_boms"}),this.setState({selectedStyle:{}})}.bind(this)).catch(function(e){this.handleError(e,"handleApprove")}.bind(this))}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedCostSheet,n=t.colors,i=t.styleList,o=t.selectedStyle,s=t.processModal,r=t.loading,c=t.costingSketch,d=t.header,m=t.modalMaterials,u=t.materials,p=t.materialForm,h="bg-ligh"===this.checkPageMode().bg?"inverted":"",g=d.sms_multiplier,f=parseFloat(d.cutting_cost),b=parseFloat(d.sewing_cost),E=parseFloat(d.thread),_=parseFloat(d.packing),O=parseFloat(d.serigraphy),M=d.sms_flag?parseFloat(d.cutting_cost)*parseFloat(g||0):parseFloat(d.cutting_cost),w=d.sms_flag?parseFloat(d.sewing_cost)*parseFloat(g||0):parseFloat(d.sewing_cost),x=d.sms_flag?parseFloat(d.thread)*parseFloat(g||0):parseFloat(d.thread),N=d.sms_flag?parseFloat(d.packing)*parseFloat(g||0):parseFloat(d.packing),T=d.sms_flag?parseFloat(d.serigraphy)*parseFloat(g||0):parseFloat(d.serigraphy);return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:r?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(h," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement(L.a,{isOpen:this.state.modalCopyBOM,toggle:this.toggleCopyBOM,modalClassName:this.checkPageMode().mc},l.a.createElement(H.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:6},"Destinos de BOM")),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Select Destinations"),l.a.createElement(z.a,{sm:9},l.a.createElement(W.a,{options:this.state.styleList.filter(function(t){return t.costing_id===e.props.location.state.costingId.toString()}),onChange:function(t){e.setState({destSelected1:t})}}))),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},"Destinos")),this.state.destSelected.map(function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,e.label))))})))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:function(){e.toggleCopyBOM(),e.setState({destSelected:[],destSelected1:[],dest_id:[],costing_id:null})}},"Close"),l.a.createElement(R.a,{color:"secondary",onClick:function(){e.setState({destSelected:[],dest_id:[],costing_id:null})}},"Clear"),l.a.createElement(R.a,{color:"primary",onClick:function(){e.state.destSelected1?e.state.destSelected1.value in e.state.dest_id?e.notify("tr","warning","Destination already selected!"):e.setState({destSelected:[].concat(Object(Ge.a)(e.state.destSelected),[e.state.destSelected1]),dest_id:[].concat(Object(Ge.a)(e.state.dest_id),[e.state.destSelected1.value])}):e.notify("tr","warning","You should select a destination")}},"ADD"),l.a.createElement(R.a,{color:"primary",onClick:function(){var t=[],a=[];e.state.styleList.filter(function(t){return t.costing_id===e.props.location.state.costingId.toString()}).map(function(e){t.push(e),a.push(e.value)}),e.setState({destSelected:t,dest_id:a})}},"SELECT ALL"),l.a.createElement(R.a,{color:"primary",onClick:function(){e.toggleCopyBOM(),e.getIdBomCopy(e.state.editProcess,e.state.dest_id),e.setState({destSelected:[],dest_id:[],costing_id:null})}},"COPY"))),l.a.createElement(L.a,{isOpen:m.isOpen,toggle:this.toggleAddMaterial},l.a.createElement("div",{className:"modal-header"},l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.toggleAddMaterial},l.a.createElement("i",{className:"tim-icons icon-simple-remove"})),l.a.createElement("h5",{className:"modal-title"},"Add Material")),l.a.createElement(H.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Material"),l.a.createElement(z.a,{sm:9},this._loadedMaterials&&l.a.createElement(W.a,{options:u,value:p.material,onChange:function(t){e.setState({materialForm:Object(A.a)({},p,{material:t}),processNew:t})}}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Consumption"),l.a.createElement(z.a,{sm:9},l.a.createElement(J.a,{type:"number",value:p.consumption,onChange:function(t){e.setState({materialForm:Object(A.a)({},p,{consumption:t.target.value,bom_material_id:0,old_costing_id:p.old_costing_id||p.material.old_costing_id,measure:p.measure||p.material.measure})})}})))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleAddMaterial},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){m.edit?e.editMaterialEmbellishment():e.addMaterialToEmbellishment()}},"ADD"))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement("h1",null,"BOMs"),"Generacion"!==this.Role&&"Patronajes"!==this.Role?l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:3},"CostSheet"),l.a.createElement(z.a,{sm:9},this._loadingStyles?l.a.createElement(W.a,{placeholder:"Search Style",styles:Ra,options:i,onChange:function(t){e.getSelectedCostSheet(t.costing_id),e.setState(Object(A.a)({},e.state,{selectedStyle:t,header:Object(A.a)({},d)}))}}):l.a.createElement("div",{className:"BOMSloader"}))):l.a.createElement(l.a.Fragment,null),l.a.createElement("br",null),this._selectedCostsheet&&l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:6},l.a.createElement(aa,{selectedCostSheet:a,selectedStyle:o,helper:function(t){return e.formHelper(t)},nameFile:this.state.techpack,header:d,onChange:function(t,a){return e.setState({header:Object(A.a)({},d,Object(j.a)({},t,a))})}})),l.a.createElement(z.a,{sm:6},this._sketchLoaded&&l.a.createElement(v.a,{body:!0,outline:!0,color:"primary"},l.a.createElement(Fe.a,{top:!0,src:c,alt:a.picture,style:"Generacion"!==this.Role&&"Patronajes"!==this.Role?{maxWidth:"300px",maxHeight:"300px"}:{maxWidth:"400px",maxHeight:"400px"}})),"Generacion"!==this.Role&&"Patronajes"!==this.Role?l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(C.a,null,"Precios"),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:6},l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:4},"Corte"),l.a.createElement(z.a,{sm:8},l.a.createElement(J.a,{type:"number",min:"0",value:f,onChange:function(t){e.setState({header:Object(A.a)({},d,{cutting_cost:parseFloat(t.target.value)})})}}),l.a.createElement(S.a,{sm:12},"x SMS flag: ",M.toFixed(4))))),l.a.createElement(z.a,{sm:6},l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:4},"Costura"),l.a.createElement(z.a,{sm:8},l.a.createElement(J.a,{type:"number",min:"0",value:b,onChange:function(t){e.setState({header:Object(A.a)({},d,{sewing_cost:t.target.value})})}}),l.a.createElement(S.a,{sm:12},"x SMS flag: ",w.toFixed(4))))),l.a.createElement(z.a,{sm:6},l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:4},"Hilo"),l.a.createElement(z.a,{sm:8},l.a.createElement(J.a,{type:"number",placeholder:"0",min:"0",onChange:function(t){e.setState({header:Object(A.a)({},d,{thread:t.target.value})})},value:E}),l.a.createElement(S.a,{sm:12}," x SMS flag: ",x.toFixed(4))))),l.a.createElement(z.a,{sm:6},l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:4},"Empaque"),l.a.createElement(z.a,{sm:8},l.a.createElement(J.a,{type:"number",placeholder:"0",min:"0",onChange:function(t){e.setState({header:Object(A.a)({},d,{packing:t.target.value})})},value:_}),l.a.createElement(S.a,{sm:12},"x SMS flag: ",N.toFixed(4))))),l.a.createElement(z.a,{sm:6},l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:4},"Serigrafia"),l.a.createElement(z.a,{sm:8},l.a.createElement(J.a,{type:"number",placeholder:"0",min:"0",onChange:function(t){e.setState({header:Object(A.a)({},d,{serigraphy:t.target.value})})},value:O}),l.a.createElement(S.a,{sm:12},"x SMS flag: ",T.toFixed(4))))))))):l.a.createElement(l.a.Fragment,null))),"TNF - THE NORTH FACE - ZUNTEX"===this.state.costsheetSelected&&"Generacion"!==this.Role&&"Patronajes"!==this.Role&&l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{color:"primary",size:"sm",onClick:function(){e.toggleCopyBOM()},className:"float-left mb-10"},"Copy BOM ",l.a.createElement("i",{className:"fa fa-copy"}))),l.a.createElement("br",null),this._selectedCostsheet&&l.a.createElement(v.a,{body:!0,outline:!0,color:"primary"},l.a.createElement(C.a,null,l.a.createElement("div",{className:"clearfix"}),"Procesos/Colores","Generacion"!==this.Role&&"Patronajes"!==this.Role?l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{color:"primary",size:"sm",onClick:function(){return e.addColorProcess()},className:"float-right"},"Add Color"),l.a.createElement(R.a,{color:"primary",size:"sm",onClick:function(){e.setAllProces(),e.poolProcessModal(),console.log(e.state.StylesWithProcess)},className:"float-right"},"Create from preview color"),l.a.createElement(L.a,{isOpen:s,toggle:this.poolProcessModal,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content-center",toggle:this.toggleImportModal},"Select the process"),l.a.createElement(H.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,"Style / Color"),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},this.state.StylesWithProcess&&l.a.createElement(W.a,{placeholder:"Select Process",styles:Ra,options:this.state.all_components,onChange:function(t){e.setState({selectedPro:t}),e.getOneProcess(t.value)}})))))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:function(){return e.poolProcessModal()}},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){e.poolProcessModal(),e.addOldColorProcess()}},"Save Changes")))):l.a.createElement(l.a.Fragment,null)),l.a.createElement(y.a,null,d.embellishment_description.map(function(t,a){return l.a.createElement(l.a.Fragment,null,d.return_flag||t.returned_flag?l.a.createElement(l.a.Fragment,null,d.return_flag&&t.returned_flag?l.a.createElement(ea,{key:a,color:t,index:a,onChange:e.handleProcessColorChange,onRemove:e.removeColorProcess,onDuplicate:e.duplicateColorProcess,colorsList:n,addMaterial:e.toggleAddMaterial,materialsList:u,removeMaterial:e.removeMaterialEmbellishment,editMaterial:e.editMaterialToggle,materialDisabled:t.editable}):l.a.createElement(l.a.Fragment,null,l.a.createElement(ea,{key:a,color:t,index:a,onChange:e.handleProcessColorChange,onRemove:e.removeColorProcess,onDuplicate:e.duplicateColorProcess,colorsList:n,addMaterial:e.toggleAddMaterial,materialsList:u,removeMaterial:e.removeMaterialEmbellishment,editMaterial:e.editMaterialToggle,materialDisabled:t.editable}))):l.a.createElement(l.a.Fragment,null,l.a.createElement(ea,{key:a,color:t,index:a,onChange:e.handleProcessColorChange,onRemove:e.removeColorProcess,onDuplicate:e.duplicateColorProcess,colorsList:n,addMaterial:e.toggleAddMaterial,materialsList:u,removeMaterial:e.removeMaterialEmbellishment,editMaterial:e.editMaterialToggle,materialDisabled:t.editable})))}))),this._selectedCostsheet&&!1===this._selectedHeader?l.a.createElement(R.a,{color:"primary",onClick:function(){return e.createHeader()}},"Save as New"):l.a.createElement("p",null),this._selectedCostsheet&&this._selectedHeader&&"Generacion"!==this.Role&&"Patronajes"!==this.Role&&l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{onClick:function(){return e.updateHeader(e.props.location.state.bomHeader)}},"Save Changes"),l.a.createElement(R.a,{color:"danger",onClick:function(){return e.sendForApproval(e.props.location.state.bomHeader)}},"Send for Approve")))}}]),t}(l.a.Component),Ba=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.getPOS=function(t){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/po/".concat(t,"/"),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedBomsHeaders=!0,this.setState({productOrder:e.data,productOrderDetail:e.data.details.map(function(e,a){return{id:e,scale:e.scale,style:e.clients_style,color:e.clients_color,exportation_date:e.clients_export_date,sizes:e.sizes,actions:l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",onClick:function(){t.setState({selectedColor:a}),t.toggleDetails()}},l.a.createElement("i",{className:"fas fa-search"}))}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.toggleDetails=function(){e.setState({modalDetail:!e.state.modalDetail})},e.state={loading:!1,productOrder:null,styles_po:null,activePo:[1,2,3,4,5],selectedFile:null,modalDetail:!1,selectedColor:0},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"goBack",value:function(){this.props.history.push({pathname:"/admin/po_client"})}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.props.location.state&&this.getPOS(this.props.location.state.poId)}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.productOrder,i=t.productOrderDetail,o=t.selectedColor,s=t.modalDetail,r=this.checkPageMode(),c="bg-ligh"===r.bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(c," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(L.a,{isOpen:s,toggle:this.toggleDetails,modalClassName:this.checkPageMode().mc,className:"modal-lg"},l.a.createElement(H.a,null,l.a.createElement("h3",null,"Sizes Details"),this.state.productOrderDetail?l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:i[o].sizes,usePagination:!1,showPaginationTop:!0,showPaginationBottom:!1,className:"-striped -highlight primary-pagination",columns:[{Header:"Size",accessor:"clients_size"},{Header:"Quantity",accessor:"quantity"},{Header:"Unit Price",accessor:"clients_unit_price"}]}):"undefined"),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:function(){return e.toggleDetails()}},"Close"))),l.a.createElement(k.a,{className:"justify-content-center mt-5"},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:"4"},l.a.createElement(R.a,{className:"btn-simple",color:"info",onClick:function(){return e.goBack()}},l.a.createElement("i",{class:"fas fa-arrow-left"})," \xa0 Back")),l.a.createElement(z.a,{sm:"8"},l.a.createElement("br",null),l.a.createElement("h1",null,"Purchase Order Details"))),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:"12"},n&&l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{className:"".concat(r.bg," border")},l.a.createElement(y.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:1}),l.a.createElement(z.a,{sm:5},l.a.createElement(q.a,{row:!0},l.a.createElement(z.a,{sm:4},l.a.createElement("div",{for:"exampleEmail",className:"text-primary"},"PO Number:")),l.a.createElement(z.a,{sm:4},l.a.createElement("p",null,"\xa0",n.po_number)))),l.a.createElement(z.a,{sm:5},l.a.createElement(q.a,{row:!0},l.a.createElement(z.a,{sm:4},l.a.createElement("div",{for:"exampleEmail",className:"text-primary"},"Delivery Place:")),l.a.createElement(z.a,{sm:6},l.a.createElement("p",null,"\xa0",n.clients_delivery_place)))),l.a.createElement(z.a,{sm:1}),l.a.createElement(z.a,{sm:1}),l.a.createElement(z.a,{sm:5},l.a.createElement(q.a,{row:!0},l.a.createElement(z.a,{sm:4},l.a.createElement("div",{for:"exampleEmail",className:"text-primary"},"Client:")),l.a.createElement(z.a,{sm:6},l.a.createElement("p",null,"\xa0",n.client.name)))),l.a.createElement(z.a,{sm:5},l.a.createElement(q.a,{row:!0},l.a.createElement(z.a,{sm:4},l.a.createElement("div",{for:"exampleEmail",className:"text-primary"}))))),l.a.createElement("hr",null),l.a.createElement(X.a,{responsive:!0,defaultPageSize:10,data:i,filterable:!0,className:"-striped -highlight primary-pagination",columns:[{Header:"Scale",accessor:"scale",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["scale"]})},filterAll:!0},{Header:"Style",accessor:"style",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["style"]})},filterAll:!0},{Header:"Color",accessor:"color",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["color"]})},filterAll:!0},{Header:"Export Date",accessor:"exportation_date",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["exportation_date"]})},filterAll:!0},{Header:"Details",accessor:"actions",width:100}]}))))))))))}}]),t}(l.a.Component),Ua=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.Role=localStorage.getItem("role")||"",e.styleId=0,e.defaultEmbellishmentLine={id:0,color:0,name:"",embroidery_description:"",laser_description:"",washed_description:"",ironing_description:"",serigraphy_description:"",sublimate_description:"",materials:[]},e._isMounted=!1,e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.closePO=function(t){e.toggleLoading();var a=new FormData;a.append("po_id",t),ae.a.post("https://api.vulcanoapparel.com/api/v1/po/close_po/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.notify("tr","success","PO Closed"),this.componentDidMount()}.bind(Object(P.a)(e))).catch(function(e){this.componentDidMount(),this.notify("tr","warning","Error Closing PO")}.bind(Object(P.a)(e)))},e._loadedPoIngested=!1,e.getPoIngested=function(){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1/po/get_all_my_po/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedBomsHeaders=!0,this.setState({poIngested:e.data.map(function(e){return{id:e.id,delivery_place:e.clients_delivery_place,po_number:e.po_number,status:"".concat("U"===e.status?"Uploaded":"I"===e.status?"Ingested":"Closed"),actions:l.a.createElement(l.a.Fragment,null,"I"===e.status&&l.a.createElement(R.a,{color:"info",size:"sm",onClick:function(){return t.closePO(e.id)}},"Close ",l.a.createElement("i",{class:"fas fa-check"})))}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading()}.bind(Object(P.a)(e)))},e._loadedPoClosed=!1,e.getPoClosed=function(){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1/po/get_my_po/?flag=C",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({poClosed:e.data.map(function(e){return{id:e.id,created_at:e.created_at.split(" ",1),delivery_place:e.delivery_place.split(" ")[1],po_number:e.po_number,clients_id:e.clients_id}})})}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading()}.bind(Object(P.a)(e)))},e.toggle=function(t){e.state.tab!==t&&e.setState({tab:t})},e.state={loading:!1},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getPoIngested(),this.getPoClosed()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.poIngested,n="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:t?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(n," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement("h1",null,"POs On Progress"),l.a.createElement(X.a,{responsive:!0,data:a,rows:10,defaultPageSize:10,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"PO Number",accessor:"po_number",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"Delivery Place",accessor:"delivery_place",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["delivery_place"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"Status",accessor:"status",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["status"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1,width:150}],showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"}))))}}]),t}(l.a.Component),Wa={input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}},Va=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.getPoList=function(){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1/po/get_my_po/?flag=I",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({productOrder:e.data.map(function(e,t){return{value:e.id,label:e.po_number,delivery_place:e.delivery_place,id:t}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading()}.bind(Object(P.a)(e)))},e.selectedPO=function(t){(function(){this.setState({selectedPO:t})}).bind(Object(P.a)(e))},e.getSelectedPo=function(){e.toggleLoading();var t=e.state.consultedPO,a=new FormData;a.append("po",t.value),ae.a.post("https://api.vulcanoapparel.com/api/v1/po/validate_cuts_for_po/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({selectedPO:e.data.data}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleReject")}.bind(Object(P.a)(e)))},e.processToReject=function(t){e.state.rejectDetail.includes(t)?(e.state.rejectDetail.indexOf(t),e.state.rejectDetail.splice(e.state.rejectDetail.indexOf(t))):e.state.rejectDetail.push(t)},e.rejectDetail=function(){e.toggleLoading(),console.log(e.state.rejectDetail);var t=e.state.rejectDetail.toString(),a=new FormData;a.append("po",e.state.selectedPO.id),a.append("details",t),ae.a.post("https://api.vulcanoapparel.com/api/v1/po/extraction_with_no_cut/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","Extraction Done!"),this.setState({selectedPO:void 0,consultedPO:void 0}),this.componentDidMount()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleReject")}.bind(Object(P.a)(e)))},e._selectedPO=void 0,e.state={loading:!1,rejectDetail:[]},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getPoList()}},{key:"render",value:function(){var e=this,t=this.props.loading,a="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:t?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(a," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement(k.a,{className:"justify-content-center mt-5"},l.a.createElement(z.a,{sm:7},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:10},l.a.createElement(W.a,{placeholder:"Select PO",styles:Wa,options:this.state.productOrder,onChange:function(t){e.setState({consultedPO:t})}})),l.a.createElement(z.a,{sm:1},l.a.createElement(R.a,{color:"primary",size:"sm",onClick:function(){e.getSelectedPo()}},l.a.createElement("i",{className:"tim-icons icon-zoom-split"}))),this.state.selectedPO&&l.a.createElement(z.a,{sm:1},l.a.createElement(R.a,{color:"danger",size:"sm",onClick:function(){e.rejectDetail()}},"X"))),console.log(this.state.selectedPO),this.state.selectedPO&&l.a.createElement(l.a.Fragment,null,this.state.selectedPO.details.map(function(t){return l.a.createElement("div",{className:"".concat(Pa.a.borderedSmall)},l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:1},l.a.createElement("div",{className:Pa.a.checkbox},l.a.createElement(J.a,{type:"checkbox",className:Pa.a.checkitem,value:t.value,onChange:function(a){e.processToReject(t.id)}}))),l.a.createElement(z.a,{sm:10},t.style.name," - ",t.color.name,l.a.createElement("br",null),l.a.createElement(_e.a,null,l.a.createElement("tbody",null,l.a.createElement("tr",null,t.sizes.map(function(e){return l.a.createElement("td",null,e.clients_size,l.a.createElement("br",null),e.quantity)})))))))}))))),l.a.createElement(z.a,{sm:5})))}}]),t}(l.a.Component),qa={input:function(e){return Object(A.a)({},e,{color:"#e14eca"})}},Ja=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.addCard=function(e){return l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"DM:",l.a.createElement("br",null),l.a.createElement(S.a,null,l.a.createElement(q.a,null,l.a.createElement(W.a,{onChange:function(e){}})))),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Component Name: ",l.a.createElement(S.a,null,"nameComponent[dm.component_name]")),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Color Style: ",l.a.createElement(S.a,null,"index.color"))),l.a.createElement(q.a,null,l.a.createElement(W.a,{onChange:function(e){}})),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleText",sm:12,className:"text-primary"},"Description"),l.a.createElement(z.a,{sm:12},l.a.createElement(J.a,{type:"textarea",onChange:function(e){}})))))},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.toggleEditModal=function(){e.setState({editModal:!e.state.editModal})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.getStyle=function(){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1/style/styles_for_combos/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedBomsHeaders=!0,this.setState({styleOptions:e.data.map(function(e){return{id:e.id,costing_id:e.costing,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:""},l.a.createElement(R.a,{onClick:function(){t.getStyleInfo(e.id),console.log("mamadas")},color:"info",size:"sm"},"EDIT ",l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("br",null)))}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.getClients=function(){e.toggleLoading();var t=[];ae.a.get("https://api.vulcanoapparel.com/api/v1/clients/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){e.data.map(function(e){t.push({value:e.id,label:e.name})}),console.log(t),this.setState({client:t}),console.log(this.setState.client)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.getSeasons=function(){e.toggleLoading();var t=[];ae.a.get("https://api.vulcanoapparel.com/api/v1/seasons/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,e.data.map(function(e){t.push({value:e.id,label:e.name})}),this.setState({season:t})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.get_costing_and_boms=function(t,a){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/combos/get_costings_and_boms/?base_style=".concat(a,"&season=").concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({boms_styles:e.data.boms_styles,costing_styles:e.data.costing_styles})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.post_costing_and_boms=function(t,a,n){console.log(t,a,n);var l=new FormData;l.append("season",t),l.append("client",n),l.append("base_style",a),ae.a.post("https://api.vulcanoapparel.com/api/v1/combos/",l,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.componentDidMount(),this.notify("tr","success","Created")}.bind(Object(P.a)(e))).catch(function(e){this.componentDidMount(),this.notify("tr","warning","Error")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e))),e.setState({styleName:"",selectedPSeason:null,selectedClient:null,costing_styles:[],boms_styles:[],editModal:!e.state.editModal,vTabs:"vt3"})},e.getStyleCombo=function(){e.toggleLoading(),(new FormData).append("flag","N"),ae.a.get("https://api.vulcanoapparel.com/api/v1/combos/?flag=N",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedBomsHeaders=!0,this.setState({styleOptionsCombo:e.data.map(function(e){return{id:e.id,costing_id:e.styles,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:""},l.a.createElement(R.a,{onClick:function(){return t.handleReview(e.id)},color:"info",size:"sm"},"EDIT ",l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("br",null)))}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e._clientsLoaded=!1,e.getStyleInfo=function(t){t=t.flatMap(function(e){return e.split(" ")[0]}),console.log("ids",t);var a=new FormData;a.append("styles",t),ae.a.post(e.costingURL+"/combos/get_info_style/",a,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({styles_po:e.data,clientSelect:e.data.style&&e.data.style.client}),console.log("client",this.state.clientSelect),this.downloadSketch(this.state.styles_po.costing&&this.state.styles_po.costing.pathToSketch)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.getStyleInfoCombo=function(t){var a=new FormData;a.append("style",t),ae.a.post(e.costingURL+"/combos_components/get_resume/",a,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({stylesCombo:e.data.combos,stylesStyle:e.data.styles})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.getdataSelect=function(t){e.setState({DMselect:t.map(function(e){return{value:e.id,label:"".concat(e.dm," ")}})})},e.getColorFabric=function(){ae.a.get(e.costingURL+"/colors_fabrics/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({colorFabric:e.data.map(function(e){return{value:e.id,label:"".concat(e.color," ")}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.getInfoStyle=function(t,a){var n=new FormData;n.append("styles",t),ae.a.post(e.costingURL+"/combos/get_info_style",n,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({styleSelected:e.data}),this.downloadSketch(this.state.styles_po.costing&&this.state.styles_po.costing.pathToSketch),this.changepage(a,e.data)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.changepage=function(t,a){e.props.history.push({pathname:"/admin/account_components",state:{styleSelected:a,stylesCombo:t,styles_po:e.state.styles_po,flag:"N",costingSketch:e.state.costingSketch,colorFabric:e.state.colorFabric}})},e.handleReview=function(t){var a=new FormData;e.toggleLoading();var n=t;a.append("style",n.id),ae.a.get(e.costingURL+"/combos/".concat(t,"/"),{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){var t=this;this._clientsLoaded=!0,this._isMounted&&this.setState({stylesCombo:e.data}),this.downloadSketch(this.state.styles_po.costing&&this.state.styles_po.costing.pathToSketch),setTimeout(function(){t.toggleLoading(),t.changepage(e.data,e.data)},4e3)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.getStyleWCombo=function(t){ae.a.get(e.costingURL+"/combos/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._isMounted&&this.setState({styleWcombo:e.data.map(function(e){return{id:e.id,costing_id:e.styles,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:""},l.a.createElement(R.a,{onClick:function(){return t.handleReview(e.id)},color:"info",size:"sm"},"Review ",l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("br",null)))}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e._sketchLoaded=!1,e.downloadSketch=function(t){var a=e.costingURL+"/costingHeader/download/?key="+t,n={params:{key:t},headers:{Authorization:"Token "+e.userToken}};ae.a.get(a,n).then(function(e){this._sketchLoaded=!0,this.setState({costingSketch:e.data.url})}.bind(Object(P.a)(e)))},e.downloadTechPack=function(t){ge("https://api.vulcanoapparel.com/api/v1/costingHeader/download/?key="+t,{params:{key:t},headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t={file:e};window.open(t.file),this.notify("tr","success"," downloaded!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"download file")}.bind(Object(P.a)(e)))},e.handleSelectChange=function(t){for(var a,n=[],l=0,i=t.target.options.length;l<i;l++)(a=t.target.options[l]).selected&&(n.push(a.value),console.log("opt",a.value));e.setState({selectedStyle:n})},e.changeFlag=function(t){var a=new FormData;a.append("style",t[0]),a.append("flag","A"),ae.a.post(e.costingURL+"/combos_components/change_cc_status/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","APPROVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/create_combocomponent"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.approveCombo=function(t,a){console.log(a);var n,l,i={combos:null};l=a.flatMap(function(e){return parseInt(e.split(" ")[0])}),n=t.flatMap(function(e){return e.flatMap(function(e){return[e]})}),i.combos=n,console.log(i),ae.a.patch(e.costingURL+"/combos/".concat(a),{components:n},{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","SAVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/create_combocomponent"}),this.changeFlag(l)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.orderCombos=function(t,a){var n,l,i={combos:null};l=a.flatMap(function(e){return parseInt(e.split(" ")[0])}),n=t.flatMap(function(e){return e.flatMap(function(e){return[e]})}),i.combos=n,i+=l,console.log("order",i),ae.a.post(e.costingURL+"/combos_components/",i={styles:l,combos:n},{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","SAVED!");this.props.history.push({pathname:"/admin/create_combocomponent"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.validateCombos=function(t){t.flatMap(function(e){return e.flatMap(function(e){return[e]})}),e.approveCombo(t,e.state.selectedStyle)},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.state={vTabs:"vt3",season:[],client:[],boms_styles:[],selectedPSeason:null,costing_styles:[],styleName:"",editModal:!1,loading:!1,styleOptions:[],styleOptionsCombo:[],style:{},styleComboSelected:null,stylesCombo:[],stylesStyle:[],styleSelected:null,description:[],styles_po:[],costingSketch:null,techpack:null,combos:[],colorFabric:null,component_name:null,selectedStyle:[],validate:!1,styleWcombo:[],DMselect:null,ColorSelect:null,flag:"",clientSelect:null},e.createService=l.a.createRef(),e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getClients(),this.getColorFabric(),this.getStyleCombo(),this.getStyleWCombo(),this.getSeasons()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.styles_po,i=this.checkPageMode();n.colors&&n.colors.map(function(e,t){return n.dms&&n.dms.map(function(t,a){return{dm:t.id,color:e.id,description:"",color_fabric:""}})});var o="bg-ligh"===i.bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(o," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(_t.a,{pills:!0,className:"nav-pills-info nav-pills-icons"},l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"vt2"===this.state.vTabs?"active":"",onClick:function(){return e.setState({vTabs:"vt2"})}},"Combos History")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"vt3"===this.state.vTabs?"active":"",onClick:function(){return e.setState({vTabs:"vt3"})}},"Edit Combos")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"vt4"===this.state.vTabs?"active":"",onClick:function(){return e.setState({vTabs:"vt4",editModal:!e.state.editModal})}},"Create Combos"))),l.a.createElement(St.a,{activeTab:this.state.vTabs},l.a.createElement(Ot.a,{tabId:"vt2"},l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(X.a,{responsive:!0,data:this.state.styleWcombo,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"ID",accessor:"id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["id"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"Costing",accessor:"costing_id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["costing_id"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1,width:250}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"})))),l.a.createElement(Ot.a,{tabId:"vt3"},l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(X.a,{responsive:!0,data:this.state.styleOptionsCombo,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"ID",accessor:"id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["id"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"style list",accessor:"costing_id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["costing_id"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1,width:250}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"})))),l.a.createElement(Ot.a,{tabId:"vt4"},l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(L.a,{isOpen:this.state.editModal,toggle:this.toggleEditModal,modalClassName:this.checkPageMode().mc},l.a.createElement(D.a,{className:"justify-content-center",toggle:this.toggleImportModal},"Get Combos by Style and Season"),l.a.createElement(H.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,"Style "),l.a.createElement(J.a,{type:"text",placeholder:this.state.styleName,name:"name",onChange:function(t){e.setState({styleName:t.target.value})}})),l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,"Select Season"),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(W.a,{placeholder:"Select Season",styles:qa,options:this.state.season,onChange:function(t){e.setState({selectedPSeason:t})}})))),l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,"Select Client"),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(W.a,{placeholder:"Select Client",styles:qa,options:this.state.client,onChange:function(t){e.setState({selectedClient:t})}}))))),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:6},l.a.createElement(S.a,null,"Style ")),l.a.createElement(z.a,{sm:6},l.a.createElement(S.a,null,"Costing"))),this.state.boms_styles.map(function(t,a){return l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:6},l.a.createElement(S.a,null,t)),l.a.createElement(z.a,{sm:6},l.a.createElement(S.a,null,e.state.costing_styles[a])))})))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:function(){e.toggleEditModal(),e.setState({styleName:"",selectedPSeason:null,selectedClient:null,costing_styles:[],boms_styles:[]})}},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){return e.get_costing_and_boms(e.state.selectedPSeason.value,e.state.styleName)}},"Get"),l.a.createElement(R.a,{color:"primary",onClick:function(){return e.post_costing_and_boms(e.state.selectedPSeason.value,e.state.styleName,e.state.selectedClient.value)}},"Create"))))))))}}]),t}(l.a.Component),Ga=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.getStyle=function(){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1/bom_header/get_account_approve_list/?flag=D",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({styleOptions:e.data.map(function(e){return{value:e.id,idBom:e.bom_style.id,label:"".concat(e.bom_style.costing," ")}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e._clientsLoaded=!1,e.getStyleInfo=function(t){var a=new FormData;a.append("styles",t),ae.a.post(e.costingURL+"/combos_components/get_info_style/",a,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({styles_po:e.data}),this.downloadSketch(this.state.styles_po.costing&&this.state.styles_po.costing.pathToSketch)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.getColorFabric=function(){ae.a.get(e.costingURL+"/colors_fabrics/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({colorFabric:e.data.map(function(e){return{value:e.id,label:"".concat(e.color," ")}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.addEvent=function(){var t=Object(Ge.a)(e.state.filesForm);t.push("1"),e.setState({filesForm:t}),console.log(e.state.filesForm)},e.handleChange=function(t,a){e.setState({style:Object(A.a)({},e.state.style,Object(j.a)({},t,a))})},e._sketchLoaded=!1,e.downloadSketch=function(t){var a=e.costingURL+"/costingHeader/download/?key="+t,n={params:{key:t},headers:{Authorization:"Token "+e.userToken}};ae.a.get(a,n).then(function(e){this._sketchLoaded=!0,this.setState({costingSketch:e.data.url})}.bind(Object(P.a)(e)))},e.downloadTechPack=function(t){ge("https://api.vulcanoapparel.com/api/v1/costingHeader/download/?key="+t,{params:{key:t},headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t={file:e};window.open(t.file),this.notify("tr","success"," downloaded!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"download file")}.bind(Object(P.a)(e)))},e.rejectCombo=function(t){var a=new FormData;a.append("style",t),a.append("flag","N"),ae.a.post(e.costingURL+"/combos_components/change_cc_status/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","APPROVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/review_component"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.approveCombo=function(t){console.log(t);var a=new FormData;a.append("style",t),a.append("flag","F"),ae.a.post(e.costingURL+"/combos_components/change_cc_status/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","APPROVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/review_component"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.orderCombos=function(t){var a,n={combos:null};a=t.flatMap(function(e){return e.flatMap(function(e){return[e]})}),n.combos=a,console.log(n),ae.a.post(e.costingURL+"/combos_components/",n,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","SAVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/create_combocomponent"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.state={loading:!1,styleOptions:[],style:{},description:[],styles_po:[],costingSketch:null,techpack:null,combos:[],colorFabric:null,styleSelected:null,stylesCombo:[]},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getColorFabric(),this.downloadSketch(this.props.location.state.styleSelected.costing&&this.props.location.state.styleSelected.costing.pathToSketch)}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.costingSketch,i="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(i," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(k.a,{className:"justify-content-center mt-5"},l.a.createElement(z.a,{md:{size:11,order:1}},l.a.createElement(k.a,null,this.props.location.state.styleSelected.style&&l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{sm:"6"},l.a.createElement(v.a,null,l.a.createElement(_.a,null,"CostSheet Info"),l.a.createElement(y.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"Client"),l.a.createElement(z.a,{sm:8},this.props.location.state.styleSelected.costing&&this.props.location.state.styleSelected.costing.client.name)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"Style"),l.a.createElement(z.a,{sm:8},this.props.location.state.styleSelected.costing&&this.props.location.state.styleSelected.costing.style)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"Season"),l.a.createElement(z.a,{sm:8},this.props.location.state.styleSelected.costing&&this.props.location.state.styleSelected.costing.season.name)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"BOM Style"),l.a.createElement(z.a,{sm:8},this.props.location.state.styleSelected.style&&this.props.location.state.styleSelected.style.name)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"Techpack"),l.a.createElement(R.a,{color:"info",className:"btn-simple",size:"sm",onClick:function(){return e.downloadTechPack(e.props.location.state.styleSelected.costing&&e.props.location.state.styleSelected.costing.pathToTechpack)}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"TECHPACK"))))),l.a.createElement(z.a,{sm:"6"},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"Sketch"),l.a.createElement(z.a,{sm:8},l.a.createElement(Fe.a,{top:!0,src:n&&n,alt:"skecth",style:{maxWidth:"300px",maxHeight:"300px"}})))))),l.a.createElement(l.a.Fragment,null,this.props.location.state.stylesCombo&&this.props.location.state.stylesCombo.map(function(e,t){return l.a.createElement(z.a,{sm:"4"},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"DM:",l.a.createElement("br",null),l.a.createElement(S.a,null,e.dm)),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Component Name: ",l.a.createElement(S.a,null,e.component)),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Color Style: ",l.a.createElement(S.a,null,e.color_bom)),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Color Fabric: ",l.a.createElement(S.a,null,e.color_fabric.color)),l.a.createElement(S.a,{for:"exampleText",sm:12,className:"text-primary"},"Description"),l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,e.description))))))})," "),!1===this.props.location.state.flag&&l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{sm:{size:"2",offset:7}},l.a.createElement(R.a,{className:"btn-fill",color:"warning",type:"button",onClick:function(t){e.rejectCombo(e.props.location.state.styleSelected.style&&e.props.location.state.styleSelected.style.id)}},"REJECT")),l.a.createElement(z.a,{sm:{size:"3",offset:0}},l.a.createElement(R.a,{className:"btn-fill",color:"success",type:"button",onClick:function(t){e.approveCombo(e.props.location.state.styleSelected.style&&e.props.location.state.styleSelected.style.id)}},"APPROVE"))))))))}}]),t}(l.a.Component),$a=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.getStyleWCombo=function(t){ae.a.get(e.costingURL+"/combos/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._isMounted&&this.setState({styleWcombo:e.data.map(function(e){return{id:e.id,costing_id:e.styles,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:""},l.a.createElement(R.a,{onClick:function(){return t.handleReview(e.id)},color:"info",size:"sm"},"Review ",l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("br",null)))}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.getStyle=function(){e.toggleLoading(),(new FormData).append("flag","A"),ae.a.get("https://api.vulcanoapparel.com/api/v1/combos/?flag=A",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedBomsHeaders=!0;var a=e.data;this.setState({styleOptions:a.map(function(e){return{id:e.id,value:e.id,costing_id:e.styles,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:""},l.a.createElement(R.a,{onClick:function(){return t.handleReview(e.id)},color:"info",size:"sm"},"Review & Approve ",l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("br",null)))}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e._clientsLoaded=!1,e.getStyleInfo=function(t,a){var n=new FormData;n.append("styles",t),ae.a.post(e.costingURL+"/combos_components/get_info_style/",n,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({styles_po:e.data}),this.downloadSketch(this.state.styles_po.costing&&this.state.styles_po.costing.pathToSketch)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.getColorFabric=function(){ae.a.get(e.costingURL+"/colors_fabrics/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({colorFabric:e.data.map(function(e){return{value:e.id,label:"".concat(e.color," ")}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.addEvent=function(){var t=Object(Ge.a)(e.state.filesForm);t.push("1"),e.setState({filesForm:t})},e.handleChange=function(t,a){e.setState({style:Object(A.a)({},e.state.style,Object(j.a)({},t,a))})},e._sketchLoaded=!1,e.downloadSketch=function(t){var a=e.costingURL+"/costingHeader/download/?key="+t,n={params:{key:t},headers:{Authorization:"Token "+e.userToken}};ae.a.get(a,n).then(function(e){this._sketchLoaded=!0,this.setState({costingSketch:e.data.url})}.bind(Object(P.a)(e)))},e.downloadTechPack=function(t){ge("https://api.vulcanoapparel.com/api/v1/costingHeader/download/?key="+t,{params:{key:t},headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t={file:e};window.open(t.file),this.notify("tr","success"," downloaded!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"download file")}.bind(Object(P.a)(e)))},e.approveCombo=function(t){console.log(t),t=t.flatMap(function(e){return e.split(" ")[0]});var a=new FormData;a.append("style",t),a.append("flag","A"),ae.a.post(e.costingURL+"/combos_components/change_cc_status/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","APPROVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/create_combocomponent"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.orderCombos=function(t){var a,n={combos:null};a=t.flatMap(function(e){return e.flatMap(function(e){return[e]})}),n.combos=a,ae.a.post(e.costingURL+"/combos_components/",n,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","SAVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/create_combocomponent"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.handleReview=function(t){var a=t;(new FormData).append("style",a.id),ae.a.get(e.costingURL+"/combos/".concat(t,"/"),{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({stylesCombo:e.data.combos}),this.downloadSketch(this.state.styles_po.costing&&this.state.styles_po.costing.pathToSketch),this.changepage(e.data,e.data)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.getInfoStyle=function(t,a){var n=new FormData;n.append("styles",t),ae.a.post(e.costingURL+"/combos_components/get_info_style/",n,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({styleSelected:e.data}),this.downloadSketch(this.state.styles_po.costing&&this.state.styles_po.costing.pathToSketch),this.changepage(a,e.data)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.changepage=function(t,a){console.log(e.state.styleSelected);e.props.history.push({pathname:"/admin/account_components",state:{styleSelected:a,stylesCombo:t,styles_po:e.state.styles_po,flag:"A"}})},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.state={loading:!1,vTabs:"vt1",styleOptions:[],style:{},description:[],styles_po:[],costingSketch:null,techpack:null,combos:[],colorFabric:null,styleSelected:null,stylesCombo:[],flag:"",styleWcombo:[]},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getStyle(),this.getColorFabric(),this.getStyleWCombo()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.styleOptions,i="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(i," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(_t.a,{pills:!0,className:"nav-pills-info nav-pills-icons"},l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"vt1"===this.state.vTabs?"active":"",onClick:function(){return e.setState({vTabs:"vt1"})}},"Approve Combos")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"vt2"===this.state.vTabs?"active":"",onClick:function(){return e.setState({vTabs:"vt2"})}},"Combos History"))),l.a.createElement(St.a,{activeTab:this.state.vTabs},l.a.createElement(Ot.a,{tabId:"vt1"},l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(X.a,{responsive:!0,data:n,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"Style",accessor:"costing_id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["costing_id"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1,width:250}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"})))),l.a.createElement(Ot.a,{tabId:"vt2"},l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(X.a,{responsive:!0,data:this.state.styleWcombo,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"Style",accessor:"id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["id"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"Costing",accessor:"costing_id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["costing_id"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1,width:250}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"}))))))}}]),t}(l.a.Component),Ya=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.addCard=function(e){return l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"DM:",l.a.createElement("br",null),l.a.createElement(S.a,null,l.a.createElement(q.a,null,l.a.createElement(W.a,{onChange:function(e){}})))),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Component Name: ",l.a.createElement(S.a,null,"nameComponent[dm.component_name]")),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Color Style: ",l.a.createElement(S.a,null,"index.color"))),l.a.createElement(q.a,null,l.a.createElement(W.a,{onChange:function(e){}})),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleText",sm:12,className:"text-primary"},"Description"),l.a.createElement(z.a,{sm:12},l.a.createElement(J.a,{type:"textarea",onChange:function(e){}})))))},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.getStyle=function(){e.toggleLoading(),(new FormData).append("flag","F"),ae.a.get("https://api.vulcanoapparel.com/api/v1/combos/?flag=F",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedBomsHeaders=!0;var a=e.data;this.setState({styleOptions:a.map(function(e){return{id:e.id,value:e.id,costing_id:e.styles,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:""},l.a.createElement(R.a,{onClick:function(){return t.handleReview(e.id)},color:"info",size:"sm"},"Review & Approve ",l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("br",null)))}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.getStyleCombo=function(){e.toggleLoading();var t=new FormData;t.append("flag","N"),ae.a.post("https://api.vulcanoapparel.com/api/v1/combos_components/get_styles_list/",t,{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({styleOptionsCombo:e.data.map(function(e){return{value:e.id,label:"".concat(e.costing," ")}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.handleReview=function(t){var a=t;(new FormData).append("style",a.id),ae.a.get(e.costingURL+"/combos/".concat(t,"/"),{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({stylesCombo:e.data.combos}),this.downloadSketch(this.state.styles_po.costing&&this.state.styles_po.costing.pathToSketch),this.changepage(e.data,e.data)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.getInfoStyle=function(t,a){var n=new FormData;n.append("styles",t),ae.a.post(e.costingURL+"/combos_components/get_info_style/",n,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({styleSelected:e.data}),this.downloadSketch(this.state.styles_po.costing&&this.state.styles_po.costing.pathToSketch),this.changepage(a,e.data)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.changepage=function(t,a){console.log(e.state.styleSelected);e.props.history.push({pathname:"/admin/account_components",state:{styleSelected:a,stylesCombo:t,styles_po:e.state.styles_po,flag:"F"}})},e.getStyleInfoCombo=function(t){var a=new FormData;a.append("style",t),ae.a.post(e.costingURL+"/combos_components/get_resume/",a,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({stylesCombo:e.data.combos,stylesStyle:e.data.styles})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.getdataSelect=function(t){e.setState({DMselect:t.map(function(e){return{value:e.id,label:"".concat(e.dm," ")}})})},e.getColorFabric=function(){ae.a.get(e.costingURL+"/colors_fabrics/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({colorFabric:e.data.map(function(e){return{value:e.id,label:"".concat(e.color," ")}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e._sketchLoaded=!1,e.downloadSketch=function(t){var a=e.costingURL+"/costingHeader/download/?key="+t,n={params:{key:t},headers:{Authorization:"Token "+e.userToken}};ae.a.get(a,n).then(function(e){this._sketchLoaded=!0,this.setState({costingSketch:e.data.url})}.bind(Object(P.a)(e)))},e.downloadTechPack=function(t){ge("https://api.vulcanoapparel.com/api/v1/costingHeader/download/?key="+t,{params:{key:t},headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t={file:e};window.open(t.file),this.notify("tr","success"," downloaded!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"download file")}.bind(Object(P.a)(e)))},e.handleSelectChange=function(t){for(var a,n=[],l=0,i=t.target.options.length;l<i;l++)(a=t.target.options[l]).selected&&(n.push(a.value),console.log(a));e.setState({selectedStyle:n})},e.approveCombo=function(t,a){console.log(a);var n,l,i={combos:null};l=a.flatMap(function(e){return parseInt(e.split(" ")[0])}),n=t.flatMap(function(e){return e.flatMap(function(e){return[e]})}),i.combos=n,console.log(i),ae.a.post(e.costingURL+"/combos_components/",i={styles:l,combos:n},{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","SAVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/create_combocomponent"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)));var o=new FormData;o.append("style",l),o.append("flag","F"),ae.a.post(e.costingURL+"/combos_components/change_cc_status/",o,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","APPROVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/create_combocomponent"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.orderCombos=function(t,a){var n,l,i={combos:null};l=a.flatMap(function(e){return parseInt(e.split(" ")[0])}),n=t.flatMap(function(e){return e.flatMap(function(e){return[e]})}),i.combos=n,i+=l,console.log("order",i),ae.a.post(e.costingURL+"/combos_components/",i={styles:l,combos:n},{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","SAVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/create_combocomponent"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.validateCombos=function(t){t.flatMap(function(e){return e.flatMap(function(e){return[e]})}),e.approveCombo(t,e.state.selectedStyle)},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.state={vTabs:"vt1",loading:!1,styleOptions:[],styleOptionsCombo:[],style:{},styleComboSelected:null,stylesCombo:[],stylesStyle:[],description:[],styles_po:[],costingSketch:null,techpack:null,combos:[],colorFabric:null,component_name:null,selectedStyle:[],validate:!1,flag:"",DMselect:null,ColorSelect:null},e.createService=l.a.createRef(),e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getStyle(),this.getColorFabric()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.styleOptions,n="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:t?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(n," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(St.a,{activeTab:this.state.vTabs},l.a.createElement(Ot.a,{tabId:"vt1"},l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(X.a,{responsive:!0,data:a,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"Style",accessor:"costing_id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["costing_id"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1,width:250}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"})))),l.a.createElement(Ot.a,{tabId:"vt2"},l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(X.a,{responsive:!0,data:this.state.styleWcombo,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"Style",accessor:"id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["id"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"Costing",accessor:"costing_id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["costing_id"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1,width:250}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"}))))))}}]),t}(l.a.Component),Xa=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.addCard=function(e){return l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"DM:",l.a.createElement("br",null),l.a.createElement(S.a,null,l.a.createElement(q.a,null,l.a.createElement(W.a,{onChange:function(e){}})))),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Component Name: ",l.a.createElement(S.a,null,"nameComponent[dm.component_name]")),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Color Style: ",l.a.createElement(S.a,null,"index.color"))),l.a.createElement(q.a,null,l.a.createElement(W.a,{onChange:function(e){}})),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleText",sm:12,className:"text-primary"},"Description"),l.a.createElement(z.a,{sm:12},l.a.createElement(J.a,{type:"textarea",onChange:function(e){}})))))},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.getStyle=function(){e.toggleLoading(),(new FormData).append("flag","A"),ae.a.get("https://api.vulcanoapparel.com/api/v1/combos/?flag=C",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedBomsHeaders=!0;var a=e.data;this.setState({styleOptions:a.map(function(e){return{id:e.id,value:e.id,costing_id:e.styles,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:""},l.a.createElement(R.a,{onClick:function(){return t.handleReview(e.id)},color:"info",size:"sm"},"Send for Approval ",l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("br",null)))}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.getStyleCombo=function(){e.toggleLoading();var t=new FormData;t.append("flag","N"),ae.a.post("https://api.vulcanoapparel.com/api/v1/combos_components/get_styles_list/",t,{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({styleOptionsCombo:e.data.map(function(e){return{value:e.id,label:"".concat(e.costing," ")}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.handleReview=function(t){console.log("aqui estoy, esto traigo",t);var a=new FormData;e.toggleLoading();var n=t;a.append("style",n.id),ae.a.get(e.costingURL+"/combos/".concat(t,"/"),{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){console.log("response",e),this._clientsLoaded=!0,this._isMounted&&this.setState({stylesCombo:e.data}),this.downloadSketch(this.state.styles_po.costing&&this.state.styles_po.costing.pathToSketch),this.toggleLoading(),this.changepage(e.data,e.data)}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.getInfoStyle=function(t,a){var n=new FormData;n.append("styles",t),ae.a.post(e.costingURL+"/combos_components/get_info_style/",n,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({styleSelected:e.data}),this.downloadSketch(this.state.styles_po.costing&&this.state.styles_po.costing.pathToSketch),this.changepage(a,e.data)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.changepage=function(t,a){e.props.history.push({pathname:"/admin/account_components",state:{styleSelected:a,stylesCombo:t,styles_po:e.state.styles_po,flag:"C"}})},e.getStyleInfoCombo=function(t){var a=new FormData;a.append("style",t),ae.a.post(e.costingURL+"/combos_components/get_resume/",a,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({stylesCombo:e.data.combos,stylesStyle:e.data.styles})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.getdataSelect=function(t){e.setState({DMselect:t.map(function(e){return{value:e.id,label:"".concat(e.dm," ")}})})},e.getColorFabric=function(){ae.a.get(e.costingURL+"/colors_fabrics/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({colorFabric:e.data.map(function(e){return{value:e.id,label:"".concat(e.color," ")}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e._sketchLoaded=!1,e.downloadSketch=function(t){var a=e.costingURL+"/costingHeader/download/?key="+t,n={params:{key:t},headers:{Authorization:"Token "+e.userToken}};ae.a.get(a,n).then(function(e){this._sketchLoaded=!0,this.setState({costingSketch:e.data.url})}.bind(Object(P.a)(e)))},e.downloadTechPack=function(t){ge("https://api.vulcanoapparel.com/api/v1/costingHeader/download/?key="+t,{params:{key:t},headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t={file:e};window.open(t.file),this.notify("tr","success"," downloaded!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"download file")}.bind(Object(P.a)(e)))},e.handleSelectChange=function(t){for(var a,n=[],l=0,i=t.target.options.length;l<i;l++)(a=t.target.options[l]).selected&&(n.push(a.value),console.log(a));e.setState({selectedStyle:n})},e.approveCombo=function(t,a){console.log(a);var n,l,i={combos:null};l=a.flatMap(function(e){return parseInt(e.split(" ")[0])}),n=t.flatMap(function(e){return e.flatMap(function(e){return[e]})}),i.combos=n,console.log(i),ae.a.post(e.costingURL+"/combos_components/",i={styles:l,combos:n},{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","SAVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/create_combocomponent"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)));var o=new FormData;o.append("style",l),o.append("flag","A"),ae.a.post(e.costingURL+"/combos_components/change_cc_status/",o,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","APPROVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/create_combocomponent"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.orderCombos=function(t,a){var n,l,i={combos:null};l=a.flatMap(function(e){return parseInt(e.split(" ")[0])}),n=t.flatMap(function(e){return e.flatMap(function(e){return[e]})}),i.combos=n,i+=l,console.log("order",i),ae.a.post(e.costingURL+"/combos_components/",i={styles:l,combos:n},{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","SAVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/create_combocomponent"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.validateCombos=function(t){t.flatMap(function(e){return e.flatMap(function(e){return[e]})}),e.approveCombo(t,e.state.selectedStyle)},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.state={vTabs:"vt1",loading:!1,styleOptions:[],styleOptionsCombo:[],style:{},styleComboSelected:null,stylesCombo:[],stylesStyle:[],description:[],styles_po:[],costingSketch:null,techpack:null,combos:[],colorFabric:null,component_name:null,selectedStyle:[],validate:!1,flag:"",DMselect:null,ColorSelect:null},e.createService=l.a.createRef(),e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getStyle()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.styleOptions,i="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(i," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(_t.a,{pills:!0,className:"nav-pills-info nav-pills-icons"},l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"vt1"===this.state.vTabs?"active":"",onClick:function(){return e.setState({vTabs:"vt1"})}},"Approve Combos")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"vt2"===this.state.vTabs?"active":"",onClick:function(){return e.setState({vTabs:"vt2"})}},"Combos History"))),l.a.createElement(St.a,{activeTab:this.state.vTabs},l.a.createElement(Ot.a,{tabId:"vt1"},l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(X.a,{responsive:!0,data:n,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"Style",accessor:"costing_id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["costing_id"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1,width:250}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"})))),l.a.createElement(Ot.a,{tabId:"vt2"},l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(X.a,{responsive:!0,data:this.state.styleWcombo,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"Style",accessor:"id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["id"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"Costing",accessor:"costing_id",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["costing_id"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1,width:250}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"})))),l.a.createElement(Ot.a,{tabId:"vt3"},l.a.createElement(Ya,null))))}}]),t}(l.a.Component),Ka=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.colorSelector=function(){var t=[];return e.state.colorFabric.map(function(e,a){t[a]={id:e.id,color:e.color}}),e.setState({colorFabs:t}),console.log(t),t},e.toggleAddColor=function(){e.setState({modalAddColor:!e.state.modalAddColor})},e._loadedColors=!1,e.getColors=function(t){var a=[],n=[];ae.a.get(e.costingURL+"/color_by_client/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedColors=!0,this._clientsLoaded=!0,e.data.map(function(e){a.push({value:e.id,label:e.name}),n.push(e.id)}),this.setState({colors:a}),this.colorSelector(),console.log("el estado:",this.state.colorFabric)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Failed Load Colors")}.bind(Object(P.a)(e)))},e.getCostingHeaders=function(){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1/costingHeader/get_costings_without_productions_colors/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this,a=e.data;this.setState({costing_styles:a.map(function(e){return{id:e.id,costingStyle:e.costing_style,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:""},l.a.createElement(R.a,{onClick:function(){t.toggleAddColor(),t.setCostingId(e.id)},color:"info",size:"sm"},"Add ",l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement("br",null)))}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e._clientsLoaded=!1,e.getProdColors=function(t,a){e.toggleLoading();var n=new FormData;n.append("costing_id",e.state.costing_id),n.append("colors",e.state.colores_id.join(",")),console.log(n),ae.a.post(e.costingURL+"/costingHeader/update_production_colors/",n,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this.toggleLoading(),this.componentDidMount(),this._clientsLoaded=!0,this._isMounted&&this.setState({colorSelected:e.data.color_id,costingIdSelected:e.data.costing_id})}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.handleSelectChange=function(t){for(var a,n=[],l=0,i=t.target.options.length;l<i;l++)(a=t.target.options[l]).selected&&(n.push(a.value),console.log("opt",a.value));e.setState({selectedStyle:n})},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.state={vTabs:"vt",loading:!1,styleOptions:[],styleOptionsCombo:[],style:{},styleComboSelected:null,stylesCombo:[],stylesStyle:[],styleSelected:null,costing_styles:[],colorSelected:[],costingIdSelected:[],description:[],clients:{},colors:[],colores_id:[],colorsSelect:[],modalAddColor:!1,styles_po:[],costingSketch:null,techpack:null,combos:[],colorFabric:[],colorFabs:[],component_name:null,selectedStyle:[],costing_id:null,validate:!1,styleWcombo:[],DMselect:null,ColorSelect:null,flag:"",clientSelect:null},e.createService=l.a.createRef(),e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"setCostingId",value:function(e){this.setState({costing_id:e})}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getCostingHeaders(),this.getColors()}},{key:"render",value:function(){var e=this,t=this.state.loading,a="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:t?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(a," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(L.a,{isOpen:this.state.modalAddColor,toggle:this.toggleAddColor,modalClassName:this.checkPageMode().mc},l.a.createElement(H.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:6},"Colors")),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"Select Colors"),l.a.createElement(z.a,{sm:9},l.a.createElement(W.a,{options:this.state.colors,onChange:function(t){e.setState({colorsSelect1:t})}}))),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},"Colores")),this.state.colorsSelect.map(function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,e.label))))})))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:function(){e.toggleAddColor(),e.setState({colorsSelect:[],colorsSelect1:[],colores_id:[],costing_id:null})}},"Close"),l.a.createElement(R.a,{color:"primary",onClick:function(){e.setState({colorsSelect:[].concat(Object(Ge.a)(e.state.colorsSelect),[e.state.colorsSelect1]),colores_id:[].concat(Object(Ge.a)(e.state.colores_id),[e.state.colorsSelect1.value])})}},"ADD"),l.a.createElement(R.a,{color:"primary",onClick:function(){e.setState({colorsSelect:[],colores_id:[]})}},"CLEAR"),l.a.createElement(R.a,{color:"success",onClick:function(){e.getProdColors(),e.setState({colorsSelect:[],colorsSelect1:[],colores_id:[],costing_id:null})}},"SAVE"))),l.a.createElement(_t.a,{pills:!0,className:"nav-pills-info nav-pills-icons"},l.a.createElement(Ct.a,null,l.a.createElement(kt.a,null,"Costing Colors")),l.a.createElement(l.a.Fragment,null,l.a.createElement("br",null))),l.a.createElement(St.a,{activeTab:this.state.vTabs},l.a.createElement(Ot.a,{tabId:"vt"},l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(X.a,{responsive:!0,data:this.state.costing_styles,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="costingStyle"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="costing_id"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"style list",accessor:"costingStyle",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["costingStyle"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"ACTIONS",accessor:"actions",sortable:!1,filterable:!1,width:150}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"}))))))}}]),t}(l.a.Component),Qa=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.getStyle=function(){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1/bom_header/get_account_approve_list/?flag=D",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({styleOptions:e.data.map(function(e){return{value:e.id,idBom:e.bom_style.id,label:"".concat(e.bom_style.costing," ")}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e._clientsLoaded=!1,e.getStyleInfo=function(t){var a=new FormData;a.append("styles",t),ae.a.post(e.costingURL+"/combos_components/get_info_style/",a,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({styles_po:e.data}),this.downloadSketch(this.state.styles_po.costing&&this.state.styles_po.costing.pathToSketch)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.getColorFabric=function(){ae.a.get(e.costingURL+"/colors_fabrics/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({colorFabric:e.data.map(function(e){return{value:e.id,label:"".concat(e.color," ")}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.addEvent=function(){var t=Object(Ge.a)(e.state.filesForm);t.push("1"),e.setState({filesForm:t}),console.log(e.state.filesForm)},e.handleChange=function(t,a){e.setState({style:Object(A.a)({},e.state.style,Object(j.a)({},t,a))})},e._sketchLoaded=!1,e.downloadSketch=function(t){var a=e.costingURL+"/costingHeader/download/?key="+t,n={params:{key:t},headers:{Authorization:"Token "+e.userToken}};ae.a.get(a,n).then(function(e){this._sketchLoaded=!0,this.setState({costingSketch:e.data.url})}.bind(Object(P.a)(e)))},e.downloadTechPack=function(t){ge("https://api.vulcanoapparel.com/api/v1/costingHeader/download/?key="+t,{params:{key:t},headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t={file:e};window.open(t.file),this.notify("tr","success"," downloaded!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"download file")}.bind(Object(P.a)(e)))},e.rejectCombo=function(t){var a=new FormData;a.append("style",t),a.append("flag","N"),ae.a.post(e.costingURL+"/combos_components/change_cc_status/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","APPROVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/review_component"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.approveCombo=function(t){console.log(t);var a=new FormData;a.append("style",t),a.append("flag","F"),ae.a.post(e.costingURL+"/combos_components/change_cc_status/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","APPROVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/review_component"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.orderCombos=function(t){var a,n={combos:null};a=t.flatMap(function(e){return e.flatMap(function(e){return[e]})}),n.combos=a,console.log(n),ae.a.post(e.costingURL+"/combos_components/",n,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this._isMounted&&this.notify("tr","success","SAVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/create_combocomponent"})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.state={loading:!1,styleOptions:[],style:{},description:[],styles_po:[],costingSketch:null,techpack:null,combos:[],colorFabric:null,styleSelected:null,stylesCombo:[]},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getColorFabric(),this.downloadSketch(this.props.location.state.styleSelected.costing&&this.props.location.state.styleSelected.costing.pathToSketch)}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.styleOptions,i=t.styles_po,o=t.costingSketch,s=this.checkPageMode(),r=(i.colors&&i.colors.map(function(e,t){return i.dms&&i.dms.map(function(t,a){return{dm:t.id,color:e.id,style:i.style.id,description:"",color_fabric:""}})}),n.map(function(e){return{value:e.id,label:"".concat(e.costing," ")}}),"bg-ligh"===s.bg?"inverted":"");return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(r," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(k.a,{className:"justify-content-center mt-5"},l.a.createElement(z.a,{md:{size:11,order:1}},l.a.createElement(k.a,null,this.props.location.state.styleSelected.style&&l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{sm:"6"},l.a.createElement(v.a,null,l.a.createElement(_.a,null,"CostSheet Info"),l.a.createElement(y.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"Client"),l.a.createElement(z.a,{sm:8},this.props.location.state.styleSelected.costing&&this.props.location.state.styleSelected.costing.client.name)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"Style"),l.a.createElement(z.a,{sm:8},this.props.location.state.styleSelected.costing&&this.props.location.state.styleSelected.costing.style)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"Season"),l.a.createElement(z.a,{sm:8},this.props.location.state.styleSelected.costing&&this.props.location.state.styleSelected.costing.season.name)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"BOM Style"),l.a.createElement(z.a,{sm:8},this.props.location.state.styleSelected.style&&this.props.location.state.styleSelected.style.name)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"Techpack"),l.a.createElement(R.a,{color:"info",className:"btn-simple",size:"sm",onClick:function(){return e.downloadTechPack(e.props.location.state.styleSelected.costing&&e.props.location.state.styleSelected.costing.pathToTechpack)}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"TECHPACK"))))),l.a.createElement(z.a,{sm:"6"},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"Sketch"),l.a.createElement(z.a,{sm:8},l.a.createElement(Fe.a,{top:!0,src:o&&o,alt:"skecth",style:{maxWidth:"300px",maxHeight:"300px"}})))))),l.a.createElement(l.a.Fragment,null,this.props.location.state.stylesCombo&&this.props.location.state.stylesCombo.map(function(e,t){return l.a.createElement(z.a,{sm:"4"},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"DM:",l.a.createElement("br",null),l.a.createElement(S.a,null,e.dm)),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Component Name: ",l.a.createElement(S.a,null,e.component)),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Color Style: ",l.a.createElement(S.a,null,e.color_bom)),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Color Fabric: ",l.a.createElement(S.a,null,e.color_fabric.color)),l.a.createElement(S.a,{for:"exampleText",sm:12,className:"text-primary"},"Description"),l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,e.description))))))})," "),!1===this.props.location.state.flag&&l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{sm:{size:"2",offset:7}},l.a.createElement(R.a,{className:"btn-fill",color:"warning",type:"button",onClick:function(t){e.rejectCombo(e.props.location.state.styleSelected.style&&e.props.location.state.styleSelected.style.id)}},"REJECT")),l.a.createElement(z.a,{sm:{size:"3",offset:0}},l.a.createElement(R.a,{className:"btn-fill",color:"success",type:"button",onClick:function(t){e.approveCombo(e.props.location.state.styleSelected.style&&e.props.location.state.styleSelected.style.id)}},"APPROVE"))))))))}}]),t}(l.a.Component);function Za(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(_e.a,{striped:!0,size:"sm",style:{marginBottom:"0rem"}},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{style:{textAlign:"center"}},"Po Number"),l.a.createElement("th",{style:{textAlign:"center"}},"Season"),l.a.createElement("th",{style:{textAlign:"center"}},"Client"),l.a.createElement("th",{style:{textAlign:"center"}},"State")),l.a.createElement("tr",null,l.a.createElement("td",{style:{textAlign:"center"}}),l.a.createElement("td",{style:{textAlign:"center"}}),l.a.createElement("td",{style:{textAlign:"center"}}),l.a.createElement("td",{style:{textAlign:"center"}})))))}a(767);var en=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.toggleresumeModal=function(){e.setState({resumeModal:!e.state.resumeModal})},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status);else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.getClients=function(){e.componentWillUnmount();var t=[];ae.a.get("https://api.vulcanoapparel.com/api/v1/clients/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){e.data.map(function(e){t.push({value:e.id,label:e.name})}),this.setState({clientsList:t})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.getActiveCombos=function(){var t=[];ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/combos/combo_status_tracker/?id=".concat(e.state.clientId),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){0===e.data.length?(this.toggleLoading(),this.notify("tr","warning","Not found combos!"),this.setState({combosExist:!1,showTracker:!1})):(this.toggleLoading(),this.notify("tr","success","Found Combos!"),this.setState({combosExist:!0}),this.setState({styleWcombo:e.data}),this.state.styleWcombo.map(function(e){t.push({label:e.base_style,name:e.costing_style,value:e.id,combo_status:e.approvalStatus,client:e.client,season:e.costing_season})}),this.setState({combosList:t}))}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e)}.bind(Object(P.a)(e)))},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.state={loading:!1,showTracker:!1,combosExist:!0,resumeModal:!1,combos:{},styleWcombo:[],combosList:[],clientsList:[],seasonList:[],comboState:"",comboName:"",comboCStyle:"",comboClient:"",comboSeason:"",clientId:""},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getClients()}},{key:"render",value:function(){var e=this,t=this.state.loading,a="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:t?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(a," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(L.a,{isOpen:this.state.resumeModal,toggle:this.toggleresumeModal,size:"lg",style:{margin:"1vh auto 0px"}},l.a.createElement(D.a,{toggle:this.toggleresumeModal,tag:"h2"},this.state.setName),l.a.createElement(H.a,null,l.a.createElement(Za,{resume:!0}))),l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:2},l.a.createElement("h6",null,"Combo Status Tracker"),l.a.createElement(z.a,null,l.a.createElement(V.a,null,l.a.createElement(S.a,null,l.a.createElement("h4",null,"Search Combos")),l.a.createElement(q.a,null,l.a.createElement(W.a,{options:this.state.clientsList,placeholder:"Select Client...",onChange:function(t){e.setState({comboClient:t.label,clientId:t.value})}}),l.a.createElement("br",null),l.a.createElement(R.a,{onClick:function(){e.state.comboClient?(e.setState({showTracker:!0,setInTracker:e.state.comboState,setName:e.state.comboName,setCosting:e.state.comboCStyle,setClient:e.state.comboClient,setSeason:e.state.comboSeason}),e.getActiveCombos()):e.notify("tr","warning","You should select a client!")},color:"info",size:"sm"},"Search Combos ",l.a.createElement("i",{className:"fa fa-search"})),this.state.showTracker&&this.state.combosExist?l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),l.a.createElement(S.a,null,l.a.createElement("h4",null,"Select Combo")),l.a.createElement(W.a,{options:this.state.combosList,placeholder:"Select Combo...",onChange:function(t){e.setState({comboSelected1:t,comboName:t.label,comboState:t.combo_status,comboCStyle:t.name,comboClient:t.client,comboSeason:t.season})}}),l.a.createElement("br",null),l.a.createElement(R.a,{onClick:function(){e.state.comboState?e.setState({setInTracker:e.state.comboState,setName:e.state.comboName,setCosting:e.state.comboCStyle,setClient:e.state.comboClient,setSeason:e.state.comboSeason}):e.notify("tr","warning","You should select a combo!")},color:"info",size:"sm"},"Review Combo Status ",l.a.createElement("i",{className:"fa fa-search"}))):l.a.createElement(l.a.Fragment,null)))))),"N"===this.state.setInTracker&&this.state.combosExist?l.a.createElement(l.a.Fragment,null,this.state.combosExist?l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:12},l.a.createElement(z.a,null,l.a.createElement(V.a,null,l.a.createElement("h4",null,"Combo Details:"),l.a.createElement(q.a,null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("h5",null,"Combo Style: ",this.state.setName)),l.a.createElement("li",null,l.a.createElement("h5",null,"Client: ",this.state.setClient)),l.a.createElement("li",null,l.a.createElement("h5",null,"Season: ",this.state.setSeason)),l.a.createElement("li",null,l.a.createElement("h5",null,"Costsheet Style: ",this.state.setCosting))))))))):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{class:"card card-timeline px-2 border-none"},l.a.createElement("ul",{class:"bs4-order-tracking"},l.a.createElement("li",{class:"step active"},l.a.createElement("div",{class:"stepOption",id:"poStep",title:"Click para revisar las POs que contienen este estilo",onClick:function(){e.toggleresumeModal()}},l.a.createElement("i",{class:"tim-icons icon-bag-16"})),l.a.createElement("br",null),"CPO Ingresada"),l.a.createElement("li",{class:"step active"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-components"})),l.a.createElement("br",null),"Ingreso de Componentes"),l.a.createElement("li",{class:"step"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-zoom-split"})),l.a.createElement("br",null),"Aprobacion de Componentes"),l.a.createElement("li",{class:"step"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-notes"})),l.a.createElement("br",null),"Ingreso de Consumos"),l.a.createElement("li",{class:"step"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-upload"})),l.a.createElement("br",null),"Aprobacion de Consumos"))),l.a.createElement("hr",null),l.a.createElement("div",{className:"messageCombo"},l.a.createElement("h4",{className:"messTxt"},"El combo ",this.state.setName," se encuentra pendiente de ingreso de componentes y envio a aprobaci\xf3n"))):"A"===this.state.setInTracker&&this.state.combosExist?l.a.createElement(l.a.Fragment,null,this.state.combosExist?l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:12},l.a.createElement(z.a,null,l.a.createElement(V.a,null,l.a.createElement("h4",null,"Combo Details:"),l.a.createElement(q.a,null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("h5",null,"Combo Style: ",this.state.setName)),l.a.createElement("li",null,l.a.createElement("h5",null,"Client: ",this.state.setClient)),l.a.createElement("li",null,l.a.createElement("h5",null,"Season: ",this.state.setSeason)),l.a.createElement("li",null,l.a.createElement("h5",null,"Costsheet Style: ",this.state.setCosting))))))))):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{class:"card card-timeline px-2 border-none"},l.a.createElement("ul",{class:"bs4-order-tracking"},l.a.createElement("li",{class:"step active"},l.a.createElement("div",{class:"stepOption",id:"poStep",onClick:function(){e.toggleresumeModal()}},l.a.createElement("i",{class:"tim-icons icon-bag-16"})),l.a.createElement("br",null),"CPO Ingresada"),l.a.createElement("li",{class:"step active"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-components"})),l.a.createElement("br",null),"Ingreso de Componentes"),l.a.createElement("li",{class:"step active"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-zoom-split"})),l.a.createElement("br",null),"Aprobacion de Componentes"),l.a.createElement("li",{class:"step"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-notes"})),l.a.createElement("br",null),"Ingreso de Consumos"),l.a.createElement("li",{class:"step"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-upload"})),l.a.createElement("br",null),"Aprobacion de Consumos"))),l.a.createElement("hr",null),l.a.createElement("div",{className:"messageCombo"},l.a.createElement("h4",{className:"messTxt"},"El combo ",this.state.setName," se encuentra pendiente de aprobaci\xf3n de componentes y envio a ingreso de consumos"))):"C"===this.state.setInTracker&&this.state.combosExist?l.a.createElement(l.a.Fragment,null,this.state.combosExist?l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:12},l.a.createElement(z.a,null,l.a.createElement(V.a,null,l.a.createElement("h4",null,"Combo Details:"),l.a.createElement(q.a,null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("h5",null,"Combo Style: ",this.state.setName)),l.a.createElement("li",null,l.a.createElement("h5",null,"Client: ",this.state.setClient)),l.a.createElement("li",null,l.a.createElement("h5",null,"Season: ",this.state.setSeason)),l.a.createElement("li",null,l.a.createElement("h5",null,"Costsheet Style: ",this.state.setCosting))))))))):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{class:"card card-timeline px-2 border-none"},l.a.createElement("ul",{class:"bs4-order-tracking"},l.a.createElement("li",{class:"step active"},l.a.createElement("div",{class:"stepOption",id:"poStep",onClick:function(){e.toggleresumeModal()}},l.a.createElement("i",{class:"tim-icons icon-bag-16"})),l.a.createElement("br",null),"CPO Ingresada"),l.a.createElement("li",{class:"step active"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-components"})),l.a.createElement("br",null),"Ingreso de Componentes"),l.a.createElement("li",{class:"step active"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-zoom-split"})),l.a.createElement("br",null),"Aprobacion de Componentes"),l.a.createElement("li",{class:"step active"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-notes"})),l.a.createElement("br",null),"Ingreso de Consumos"),l.a.createElement("li",{class:"step"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-upload"})),l.a.createElement("br",null),"Aprobacion de Consumos"))),l.a.createElement("hr",null),l.a.createElement("div",{className:"messageCombo"},l.a.createElement("h4",{className:"messTxt"},"El combo ",this.state.setName," se encuentra pendiente de ingreso de consumos y envio a aprobaci\xf3n"))):"F"===this.state.setInTracker&&this.state.combosExist?l.a.createElement(l.a.Fragment,null,this.state.combosExist?l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:12},l.a.createElement(z.a,null,l.a.createElement(V.a,null,l.a.createElement("h4",null,"Combo Details:"),l.a.createElement(q.a,null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("h5",null,"Combo Style: ",this.state.setName)),l.a.createElement("li",null,l.a.createElement("h5",null,"Client: ",this.state.setClient)),l.a.createElement("li",null,l.a.createElement("h5",null,"Season: ",this.state.setSeason)),l.a.createElement("li",null,l.a.createElement("h5",null,"Costsheet Style: ",this.state.setCosting))))))))):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{class:"card card-timeline px-2 border-none"},l.a.createElement("ul",{class:"bs4-order-tracking"},l.a.createElement("li",{class:"step active"},l.a.createElement("div",{class:"stepOption",id:"poStep",onClick:function(){e.toggleresumeModal()}},l.a.createElement("i",{class:"tim-icons icon-bag-16"})),l.a.createElement("br",null),"CPO Ingresada"),l.a.createElement("li",{class:"step active"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-components"})),l.a.createElement("br",null),"Ingreso de Componentes"),l.a.createElement("li",{class:"step active"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-zoom-split"})),l.a.createElement("br",null),"Aprobacion de Componentes"),l.a.createElement("li",{class:"step active"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-notes"})),l.a.createElement("br",null),"Ingreso de Consumos"),l.a.createElement("li",{class:"step active"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-upload"})),l.a.createElement("br",null),"Aprobacion de Consumos"))),l.a.createElement("hr",null),l.a.createElement("div",{className:"messageCombo"},l.a.createElement("h4",{className:"messTxt"},"El combo ",this.state.setName," se encuentra pendiente de aprobaci\xf3n de consumos para ingresar a Sistemas Integrados"))):l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),l.a.createElement("div",{class:"card card-timeline px-2 border-none"},l.a.createElement("ul",{class:"bs4-order-tracking"},l.a.createElement("li",{class:"step"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-bag-16"})),l.a.createElement("br",null),"CPO Ingresada"),l.a.createElement("li",{class:"step"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-components"})),l.a.createElement("br",null),"Ingreso de Componentes"),l.a.createElement("li",{class:"step"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-zoom-split"})),l.a.createElement("br",null),"Aprobacion de Componentes"),l.a.createElement("li",{class:"step"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-notes"})),l.a.createElement("br",null),"Ingreso de Consumos"),l.a.createElement("li",{class:"step"},l.a.createElement("div",{class:"stepOption"},l.a.createElement("i",{class:"tim-icons icon-upload"})),l.a.createElement("br",null),"Aprobacion de Consumos"))))))))}}]),t}(l.a.Component),tn=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.toggleresumeModal=function(){e.setState({resumeModal:!e.state.resumeModal})},e.getClients=function(){e.componentWillUnmount();var t=[];ae.a.get("https://api.vulcanoapparel.com/api/v1/clients/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){e.data.map(function(e){t.push({value:e.id,label:e.name})}),this.setState({clientsList:t})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status);else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.getActiveCombosStyles=function(){var t=[],a=e.state.clientId;ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/combos/get_active_combos/?id=".concat(a),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var a=this;if(0===e.data.length)this.toggleLoading(),this.notify("tr","warning","No Data Available"),this.setState({combosExist:!1,showCombos:!1});else{this.toggleLoading(),this.notify("tr","sucess","Found Combos!"),this.setState({combosExist:!0});var n=e.data;this.setState({styleWcombo:n.map(function(e){return{label:e.name,state:e.state,actions:l.a.createElement(l.a.Fragment,null,"Combo Created"===e.state?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:""},l.a.createElement(R.a,{onClick:function(){a.toggleresumeModal(),a.setState({setName:e.name})},color:"info",size:"sm"},"POs Review ",l.a.createElement("i",{className:"fa fa-search"})),l.a.createElement("br",null))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:""},l.a.createElement(R.a,{onClick:function(){a.toggleresumeModal()},color:"info",disabled:!0,size:"sm"},"POs Review ",l.a.createElement("i",{className:"fa fa-search"})),l.a.createElement("br",null))))}})}),this.setState({combosList:t})}}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e)}.bind(Object(P.a)(e)))},e.downloadCombosReport=function(){var t=e.state.clientId;ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/admin/get_active_combos/?id=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.componentDidMount(),window.open("https://api.vulcanoapparel.com/api/v1"+"/admin/get_active_combos/?id=".concat(t)),this.notify("tr","success","Report downloaded!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Download failed")}.bind(Object(P.a)(e)))},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.state={loading:!1,vTabs:"vt",showCombos:!1,combosExist:!0,activeCombosList:[],clientsList:[],resumeModal:!1,combosList:[],comboState:"",comboName:"",styleWcombo:[],clientId:"",comboClient:""},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getClients()}},{key:"render",value:function(){var e=this,t=this.state.loading,a="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:t?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(a," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(L.a,{isOpen:this.state.resumeModal,toggle:this.toggleresumeModal,size:"lg",style:{margin:"1vh auto 0px"}},l.a.createElement(D.a,{toggle:this.toggleresumeModal,tag:"h2"},this.state.setName),l.a.createElement(H.a,null,l.a.createElement(Za,{resume:!0}))),l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:2},l.a.createElement("h6",null,"Active Combos List"),l.a.createElement(z.a,null,l.a.createElement(V.a,null,l.a.createElement(S.a,null,l.a.createElement("h4",null,"Search Combos")),l.a.createElement(q.a,null,l.a.createElement(W.a,{options:this.state.clientsList,placeholder:"Select Client...",onChange:function(t){e.setState({comboClient:t.label,comboState:t.state,clientId:t.value})}}),l.a.createElement("br",null),l.a.createElement(R.a,{onClick:function(){e.state.comboClient?(e.setState({showCombos:!0,setInTracker:e.state.comboState,setName:e.state.comboName,setCosting:e.state.comboCStyle,setClient:e.state.comboClient,setSeason:e.state.comboSeason}),e.getActiveCombosStyles()):e.notify("tr","warning","You should select a client!")},color:"info",size:"sm"},"Search Combos ",l.a.createElement("i",{className:"fa fa-search"})),this.state.showCombos&&this.state.combosExist?l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),l.a.createElement(R.a,{onClick:function(){return e.downloadCombosReport()},color:"info",className:"btn-simple",size:"sm"},"Download Combos Report"," ",l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}))):l.a.createElement(l.a.Fragment,null)))))),this.state.showCombos&&this.state.combosExist?l.a.createElement(l.a.Fragment,null,l.a.createElement(St.a,{activeTab:this.state.vTabs},l.a.createElement(Ot.a,{tabId:"vt"},l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(X.a,{responsive:!0,data:this.state.styleWcombo,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="label"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="state"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"style list",accessor:"label",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["label"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"state",accessor:"state",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["state"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"ACTIONS",accessor:"actions",sortable:!1,filterable:!1,width:250}],defaultPageSize:5,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"codigo",desc:!0}],className:"-striped -highlight primary-pagination"})))))):l.a.createElement(l.a.Fragment,null))))}}]),t}(l.a.Component),an=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.getStyle=function(){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1/bom_header/get_account_approve_list/?flag=D",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({styleOptions:e.data.map(function(e){return{value:e.id,idBom:e.bom_style.id,label:"".concat(e.bom_style.costing," ")}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.changeFlag=function(t){var a=new FormData;a.append("combo",t),"N"===e.props.location.state.flag?a.append("flag","A"):"A"===e.props.location.state.flag?a.append("flag","C"):"C"===e.props.location.state.flag?a.append("flag","F"):a.append("flag","D"),e.toggleLoading(),ae.a.post(e.costingURL+"/combos/change_status/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){var e;this.toggleLoading(),this.componentDidMount(),e="A"===this.props.location.state.flag?"/admin/review_component":"N"===this.props.location.state.flag?"/admin/create_combocomponent":"/admin/consumption_component",this.props.history.push({pathname:e})}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.approveCombo=function(t){var a={components:["id","color_fabric","description"],combo:t};e.toggleLoading(),a.components=e.props.location.state.styleSelected.components.map(function(e){return{id:e.id,color_fabric:e.color_fabric_id,description:e.description}}),ae.a.post(e.costingURL+"/combos/junior_approve/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.toggleLoading(),this._isMounted&&this.notify("tr","success","SAVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/create_combocomponent"}),this.changeFlag(t)}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.accountApprove=function(t,a){e.toggleLoading(),ae.a.post(e.costingURL+"/combos/account_approve/",{combo:t},{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.toggleLoading(),this._isMounted&&this.notify("tr","success","APPROVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/review_component"})}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.approveConsumptions=function(t){e.toggleLoading();var a={components:["id","name","consumption"],combo:t};a.components=e.state.dmsArray.map(function(e){return{id:e.dm_name,name:e.component_name,consumption:e.consumption}}),console.log(a.components),ae.a.post(e.costingURL+"/combos/consumptions_approve/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.toggleLoading(),this._isMounted&&this.notify("tr","success","APPROVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/review_component"})}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.fabricsApproveConsumptions=function(t){e.toggleLoading();var a={components:["id","old_si_code","name","consumption"],combo:t};a.components=e.state.dmsArray.map(function(e){return{id:e.dm_name,name:e.component_name,old_si_code:e.old_si_code,consumption:e.consumption}}),ae.a.post(e.costingURL+"/combos/fabrics_approve/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.toggleLoading(),this._isMounted&&this.notify("tr","success","APPROVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/review_component"})}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.orderCombos=function(t,a){var n,l,i={combos:null};e.toggleLoading(),l=a.flatMap(function(e){return parseInt(e.split(" ")[0])}),n=t.flatMap(function(e){return e.flatMap(function(e){return[e]})}),i.combos=n,i+=l,ae.a.post(e.costingURL+"/combos_components/",i={styles:l,combos:n},{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.toggleLoading(),this._isMounted&&this.notify("tr","success","SAVED!");this.props.history.push({pathname:"/admin/create_combocomponent"})}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.validateCombos=function(t){t.flatMap(function(e){return e.flatMap(function(e){return[e]})}),e.approveCombo(e.state.selectedStyle.id)},e._clientsLoaded=!1,e.getStyleInfo=function(t){var a=new FormData;a.append("styles",t),e.toggleLoading(),ae.a.post(e.costingURL+"/combos_components/get_info_style/",a,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this._clientsLoaded=!0,this.toggleLoading(),this._isMounted&&this.setState({styles_po:e.data}),this.downloadSketch(this.state.styles_po.costing&&this.state.styles_po.costing.pathToSketch)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.getColorFabric=function(){ae.a.get(e.costingURL+"/colors_fabrics/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({colorFabric:e.data.map(function(e){return{value:e.id,label:"".concat(e.color," ")}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.addEvent=function(){var t=Object(Ge.a)(e.state.filesForm);t.push("1"),e.setState({filesForm:t})},e.handleChange=function(t,a){e.setState({style:Object(A.a)({},e.state.style,Object(j.a)({},t,a))})},e._sketchLoaded=!1,e.downloadSketch=function(t){var a=e.costingURL+"/costingHeader/download/?key="+t,n={params:{key:t},headers:{Authorization:"Token "+e.userToken}};ae.a.get(a,n).then(function(e){this._sketchLoaded=!0,this.setState({costingSketch:e.data.url})}.bind(Object(P.a)(e)))},e.downloadTechPack=function(t){ge("https://api.vulcanoapparel.com/api/v1/costingHeader/download/?key="+t,{params:{key:t},headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t={file:e};window.open(t.file),this.notify("tr","success"," downloaded!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"download file")}.bind(Object(P.a)(e)))},e.rejectCombo=function(t){var a=new FormData;switch(a.append("combo",t),e.props.location.state.flag){case"A":a.append("flag","N");break;case"F":a.append("flag","C")}ae.a.post(e.costingURL+"/combos/return_combo/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.componentDidMount(),this._isMounted&&this.notify("tr","success","REJECTED!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.orderCombos=function(t){var a,n={combos:null};a=t.flatMap(function(e){return e.flatMap(function(e){return[e]})}),e.toggleLoading(),n.combos=a,ae.a.post(e.costingURL+"/combos_components/",n,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.toggleLoading(),this._isMounted&&this.notify("tr","success","SAVED!"),this.componentDidMount();this.props.history.push({pathname:"/admin/create_combocomponent"})}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.handleError(e,"handleApprove")}.bind(Object(P.a)(e)))},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.handleConsumptions=function(t,a,n){console.log(e.state.dmsArray),e.state.dmsArray.map(function(e){e.dm_id===n&&e.component_name===a&&(e.consumption=t)})},e.getFabrics=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/fabrics/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingFabric=!0,this._isMounted&&this.setState({fabrics:e.data.map(function(e){return{value:e.id,label:"".concat(e.dm," ")}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"get fabrics")}.bind(Object(P.a)(e)))},e.selectColorFabric=function(t,a,n){e.props.location.state.styleSelected.components[n].color_fabric_id=t.value,console.log(e.props.location.state.styleSelected.components[n].color_fabric_id)},e.state={loading:!1,styleOptions:[],style:{},description:[],styles_po:[],costingSketch:null,techpack:null,combos:[],colorFabric:null,styleSelected:null,stylesCombo:[],comboc:[],dmsArray:[],stylesArray:[],bomstyle:0,colorStArray:[[]],cstarr:[],colorFabsArray:[],colorFbArray:[],cfabs:[],fabrics:[],Components:[]},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getFabrics(),this.getColorFabric(),this.downloadSketch(this.props.location.state.stylesCombo&&this.props.location.state.stylesCombo.pathtoTechpack),this.setState({stylesCombo:this.props.location.state.stylesCombo})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.costingSketch,i=this.state.dmsArray,o=this.state.stylesCombo.components,s="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(s," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(k.a,{className:"justify-content-center mt-5"},l.a.createElement(z.a,{md:{size:11,order:1}},l.a.createElement(k.a,null,this.props.location.state.stylesCombo&&l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{sm:"6"},l.a.createElement(v.a,null,l.a.createElement(_.a,null,"CostSheet Info"),l.a.createElement(y.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"Client"),l.a.createElement(z.a,{sm:8},this.props.location.state.stylesCombo.client&&this.props.location.state.stylesCombo.client)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"Style"),l.a.createElement(z.a,{sm:8},this.props.location.state.stylesCombo.costing_style&&this.props.location.state.stylesCombo.costing_style)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"Season"),l.a.createElement(z.a,{sm:8},this.props.location.state.stylesCombo&&this.props.location.state.stylesCombo.costing_season)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"BOM Style"),l.a.createElement(z.a,{sm:8},this.props.location.state.stylesCombo&&this.props.location.state.stylesCombo.costing_style)),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"Techpack"),l.a.createElement(R.a,{color:"info",className:"btn-simple",size:"sm",onClick:function(){return e.downloadTechPack(e.props.location.state.stylesCombo&&e.props.location.state.stylesCombo.pathtoTechpack)}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"TECHPACK"))))),l.a.createElement(z.a,{sm:"6"},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:4},"Sketch"),l.a.createElement(z.a,{sm:8},l.a.createElement(Fe.a,{top:!0,src:n&&n,alt:"skecth",style:{maxWidth:"300px",maxHeight:"300px"}})))))),l.a.createElement(l.a.Fragment,null,"F"===this.props.location.state.flag||"C"===this.props.location.state.flag?this.state.dmsArray.map(function(t,a){return l.a.createElement(z.a,{sm:"4"},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"DM: ",l.a.createElement(S.a,null,t.dm_name)),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Component Name: ",l.a.createElement(S.a,null,t.component_name)),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Color Styles: ",l.a.createElement(S.a,null,t.style_colors)),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Color Fabrics: ",l.a.createElement(S.a,null,"A"===e.props.location.state.flag||"C"===e.props.location.state.flag?t.color_fabric.color:"F"===e.props.location.state.flag||"C"===e.props.location.state.flag?l.a.createElement(l.a.Fragment,null,t.cfabrics):l.a.createElement(W.a,{options:e.props.location.state.colorFabric,onChange:function(e){i[a].color_fabric=t.value}}))),l.a.createElement(S.a,{for:"exampleText",sm:12,className:"text-info"},"Description"),l.a.createElement(z.a,{sm:12},l.a.createElement(S.a,null,"A"===e.props.location.state.flag||"F"===e.props.location.state.flag||"C"===e.props.location.state.flag?t.description:l.a.createElement(J.a,{type:"textarea",onChange:function(e){o[a]&&(o[a].description=e.target.value)}}))),"C"===e.props.location.state.flag&&l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{for:"exampleText",sm:12,className:"text-primary"},"CONSUMPTION"),l.a.createElement(z.a,{sm:"12"},l.a.createElement(J.a,{type:"input",onChange:function(a){e.handleConsumptions(a.target.value,t.component_name,t.dm_id)}}))),"F"===e.props.location.state.flag&&l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{for:"exampleText",sm:12,className:"text-primary"},"Fabric Internal Code"),l.a.createElement(z.a,{sm:"12"},l.a.createElement(J.a,{type:"input",placeholder:t.old_si_code,onChange:function(e){i[a].old_si_code=e.target.value}})),l.a.createElement(S.a,{for:"exampleText",sm:12,className:"text-primary"},"CONSUMPTION"),l.a.createElement(z.a,{sm:"12"},l.a.createElement(J.a,{type:"input",placeholder:t.consumption,onChange:function(e){i[a].consumption=parseFloat(e.target.value)}})))))))}):this.props.location.state.stylesCombo&&this.props.location.state.stylesCombo.components.map(function(t,a){return l.a.createElement(z.a,{sm:"4"},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"DM: ",l.a.createElement(S.a,null,t.dm_name)),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Component Name: ",l.a.createElement(S.a,null,t.component_name)),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Color Styles: ",l.a.createElement(S.a,null,t.color_bom_name)),l.a.createElement(S.a,{for:"exampleEmail",className:"text-info",sm:12},"Color Fabrics: ",l.a.createElement(S.a,{sm:"8"},"A"===e.props.location.state.flag?t.color_fabric.color:"F"===e.props.location.state.flag?l.a.createElement(l.a.Fragment,null,t.color_fabric.color):l.a.createElement(W.a,{options:e.props.location.state.colorFabric,onChange:function(n){return e.selectColorFabric(n,t.id,a)}}))),l.a.createElement(S.a,{for:"exampleText",sm:12,className:"text-info"},"Description:"),l.a.createElement(z.a,{sm:12},"A"===e.props.location.state.flag||"F"===e.props.location.state.flag?t.description:l.a.createElement(J.a,{type:"textarea",onChange:function(t){o[a]&&(o[a].description=t.target.value),e.props.location.state.styleSelected.components[a].description=t.target.value}})),"F"===e.props.location.state.flag&&l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{for:"exampleText",sm:12,className:"text-primary"},"CODE"),l.a.createElement(z.a,{sm:"12"},l.a.createElement(J.a,{type:"input",onChange:function(e){o[a]&&(o[a].code=e.target.value)}})),l.a.createElement(S.a,{for:"exampleText",sm:12,className:"text-primary"},"CONSUMPTION"),l.a.createElement(z.a,{sm:"12"},l.a.createElement(J.a,{type:"input",onChange:function(t){e.consumptions(t)}})))))))})," "),"A"===this.props.location.state.flag&&l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{sm:{size:"2",offset:7}},l.a.createElement(R.a,{className:"btn-fill",color:"warning",type:"button",onClick:function(){e.rejectCombo(e.props.location.state.styleSelected.id)}},"REJECT")),l.a.createElement(z.a,{sm:{size:"3",offset:0}},l.a.createElement(R.a,{className:"btn-fill",color:"success",type:"button",onClick:function(){e.accountApprove(e.props.location.state.styleSelected.id,1039)}},"APPROVE"))),"F"===this.props.location.state.flag?l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{sm:{size:"2",offset:7}},l.a.createElement(R.a,{className:"btn-fill",color:"warning",type:"button",onClick:function(t){e.rejectCombo(e.props.location.state.styleSelected&&e.props.location.state.styleSelected.id)}},"REJECT")),l.a.createElement(z.a,{sm:{size:"3",offset:0}},l.a.createElement(R.a,{className:"btn-fill",color:"success",type:"button",onClick:function(t){e.fabricsApproveConsumptions(e.props.location.state.styleSelected.id)}},"APPROVE"))):l.a.createElement(l.a.Fragment,null),"C"===this.props.location.state.flag&&l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{sm:{size:"2",offset:7}}),l.a.createElement(z.a,{sm:{size:"3",offset:0}},l.a.createElement(R.a,{className:"btn-fill",color:"success",type:"button",onClick:function(t){e.approveConsumptions(e.props.location.state.styleSelected.id)}},"SEND FOR APPROVE"))),"N"===this.props.location.state.flag&&l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{sm:{size:"2",offset:7}}),l.a.createElement(z.a,{sm:{size:"3",offset:0}},l.a.createElement(R.a,{className:"btn-fill",color:"success",type:"button",onClick:function(t){e.approveCombo(e.props.location.state.styleSelected.id)}},"SEND FOR APPROVE"))))))))}}]),t}(l.a.Component),nn=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).state={},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null)}}]),t}(l.a.Component),ln=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e._isMounted=!1,e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.toggleresumeModal=function(){e.setState({resumeModal:!e.state.resumeModal})},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.OpenSheet=function(t,a,n,l,i,o){e.props.history.push({pathname:"/admin/generate_oc",state:{idx:o,CPO:t,tolerance:a,style:n,color:l,scale:i}})},e._loadedBomsHeaders=!1,e.getPOHeaders=function(){ae.a.get(e.costingURL+"/po/get_CPO_for_generate/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedBomsHeaders=!0,this.setState({CPOs:e.data.map(function(e,a){return{id:e.id,po:e.po,style:e.style,color:e.color,status:e.status,scale:e.scale,tolerance:e.tolerance,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",onClick:function(a){t.OpenSheet(e.po,e.tolerance,e.style,e.color,e.scale,e.id)}},l.a.createElement("i",{className:"fa fa-edit"})))}})})}.bind(Object(P.a)(e))).catch(function(e){})},e.state={loading:!1,CPOs:void 0,clients:[],user:{},resumeModal:!1},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getPOHeaders()}},{key:"render",value:function(){var e=this.state.loading,t="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:e?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(t," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement("h1",null,"INVENTARIO CPOS"),this._loadedBomsHeaders&&l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:this.state.CPOs,filterable:!0,className:"-striped -highlight primary-pagination",defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"CPO",accessor:"po",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po"]})},sortable:!0,filterable:!0},{Header:"ESTILO",accessor:"style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["style"]})},sortable:!0,filterable:!0},{Header:"COLOR",accessor:"color",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["color"]})},sortable:!0,filterable:!0},{Header:"ESCALA",accessor:"scale",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["scale"]})},sortable:!0,filterable:!0},{Header:"ACTION",accessor:"actions",sortable:!1,filterable:!1,width:150}]}))}}]),t}(l.a.Component),on=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).state={},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null)}}]),t}(l.a.Component),sn=a(282),rn=a.n(sn),cn=(a(366),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.addFileToList=function(t){e.setState({selectedFile:t.target.files[0]});var a=Object(Ge.a)(e.state.fileList);a.push(t.target.files[0]),e.setState({fileList:a})},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.changepage=function(t,a){console.log(e.state.styleSelected);e.props.history.push({pathname:"/admin/account_components",state:{styleSelected:a,stylesCombo:t,styles_po:e.state.styles_po,flag:!0}})},e.handleReview=function(t){var a=new FormData,n=t;a.append("style",n.id),ae.a.post(e.costingURL+"/combos_components/get_resume/",a,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({stylesCombo:e.data.combos}),this.getInfoStyle(n.id,e.data.combos)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.handleSelectChange=function(t){for(var a,n=[],l=0,i=t.target.options.length;l<i;l++)(a=t.target.options[l]).selected&&(n.push(a.value),console.log("opt",a.value));e.setState({selectedStyle:n})},e.toggleAddMaterial=function(t){var a=e.state.modalReport;e.setState({modalReport:Object(A.a)({},a,{isOpen:!a.isOpen,name:t})})},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.getDMReport=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/fabrics/get_dms_for_report/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._ClientsLoaded=!0,this._isMounted&&this.setState({dm:e.data.map(function(e){return{value:e.id,label:e.dm}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"getClients")}.bind(Object(P.a)(e)))},e.getClients=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/clients/get_all_clients/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._ClientsLoaded=!0,this._isMounted&&this.setState({clients:e.data.map(function(e){return{value:e.id,label:e.name}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"getClients")}.bind(Object(P.a)(e)))},e.getSeasons=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/seasons/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingSeasons=!0,this._isMounted&&this.setState({season:e.data.map(function(e){return{value:e.id,label:e.name}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e)}.bind(Object(P.a)(e)))},e.GETREPORTDM=function(t){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/fabrics/get_historic_prices_dm/?dm=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingSeasons=!0,this._isMounted&&this.setState({tableDM:e.data}),this.openDmTable(t)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e)}.bind(Object(P.a)(e)))},e.getReports=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/user/get_reports_for_users/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._ClientsLoaded=!0,this._isMounted&&this.setState({reports:e.data.map(function(e){return{id:e.id,name:e.name,icon:e.icon,link:e.link}})}),console.log("los logs",this.state.reports)}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"getClients")}.bind(Object(P.a)(e)))},e.openDmTable=function(t){e.props.history.push({pathname:"/admin/prices_for_dms",state:{history:e.state.tableDM,dm:t}})},e.downloadReport=function(t,a){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/export_fabrics_costing_report/?client=".concat(t,"&season=").concat(a),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this.componentDidMount(),this.notify("tr","success","Report downloaded!"),this.toggleAddMaterial(),window.open("https://api.vulcanoapparel.com/api/v1"+"/export_fabrics_costing_report/?client=".concat(t,"&season=").concat(a))}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Report")}.bind(Object(P.a)(e)))},e.downloadClientReport=function(t,a,n){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/admin/export_production_by_line/?start_date=".concat(a,"&end_date=").concat(n,"&client=").concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this.componentDidMount(),this.notify("tr","success","Report downloaded!"),this.toggleAddMaterial(),window.open("https://api.vulcanoapparel.com/api/v1"+"/admin/export_production_by_line/?start_date=".concat(a,"&end_date=").concat(n,"&client=").concat(t))}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Report")}.bind(Object(P.a)(e)))},e.clientCountReport=function(t){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/admin/get_prices_for_styles/?client=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this.componentDidMount(),this.notify("tr","success","Report downloaded!"),this.toggleAddMaterial(),window.open("https://api.vulcanoapparel.com/api/v1"+"/admin/get_prices_for_styles/?client=".concat(t))}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Report")}.bind(Object(P.a)(e)))},e.columbiasReport=function(t){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/administration/get_columbia_report/?month=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this.componentDidMount(),this.notify("tr","success","Report downloaded!"),this.toggleLoading(),this.toggleAddMaterial(),window.open("https://api.vulcanoapparel.com/api/v1"+"/administration/get_columbia_report/?month=".concat(t))}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Report"),this.toggleLoading()}.bind(Object(P.a)(e)))},e.getReportBuys=function(t,a){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/admin/get_report_buys/?month=".concat(t,"&year=").concat(a),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this.componentDidMount(),this.notify("tr","success","Report downloaded!"),this.toggleLoading(),window.open("https://api.vulcanoapparel.com/api/v1"+"/admin/get_report_buys/?month=".concat(t,"&year=").concat(a))}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Report"),this.toggleLoading()}.bind(Object(P.a)(e)))},e.getReportSecsThirds=function(t){e.toggleLoading();var a=new FormData;a.append("file",e.state.fileList[0]),ae.a.post("https://api.vulcanoapparel.com/api/v1/bom_header/get_report_2nd_3rd/",a,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"},method:"GET",responseType:"blob"}).then(function(e){this.toggleLoading(),this.componentDidMount();var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","Reporte 2das y 3ras.xlsx"),document.body.appendChild(a),a.click(),console.log(e.headers),this.notify("tr","success")}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.componentDidMount(),this.notify("tr","warning","Bad document format ")}.bind(Object(P.a)(e)))},e.stylePerSeason=function(){var t=e.state.seasonSelect,a=e.state.clientSelect;e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/admin/get_report_season/?season=".concat(t,"&client=").concat(a),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this.componentDidMount(),this.notify("tr","success","Report downloaded!"),this.toggleLoading(),window.open("https://api.vulcanoapparel.com/api/v1"+"/admin/get_report_season/?season=".concat(t,"&client=").concat(a))}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Report"),this.toggleLoading()}.bind(Object(P.a)(e)))},e.addFileToList=function(t){var a=Object(Ge.a)(e.state.fileList);a.push(t.target.files[0]),e.setState({fileList:a,selectedFile:t.target.files[0]})},e.state={vTabs:"vt1",loading:!1,date:"",date1:"",modalReport:{isOpen:!1,index:null,edit:!1,matIndex:null,name:""},clients:[],reports:[],clientSelect:null,season:[],seasonSelect:null,dm:[],dmSelect:null,selectedFile:null,tableDM:[],fileList:[]},e.createService=l.a.createRef(),e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getClients(),this.getSeasons(),this.getDMReport(),this.getReports()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.modalReport,i=t.clients,o=t.season,s=t.dm,r="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(r," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(L.a,{isOpen:n.isOpen,toggle:this.toggleAddMaterial},l.a.createElement("div",{className:"modal-header"},l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.toggleAddMaterial},l.a.createElement("i",{className:"tim-icons icon-simple-remove"})),l.a.createElement("h5",{className:"modal-title"},"DM Prices"===n.name?"DM":"REPORT")),l.a.createElement(H.a,null,"DM Prices"===n.name?l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"DM"),l.a.createElement(z.a,{sm:9},l.a.createElement(W.a,{options:s,onChange:function(t){e.setState({dmSelect:t.label})}}))):"Columbia's Report"===n.name?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{className:"modal-title"},"Ingrese el numero de mes"),l.a.createElement(J.a,{type:"number",min:"1",max:"12",placeholder:"Numero de mes",id:"columbia-month"}),l.a.createElement(R.a,{color:"primary",onClick:function(){return e.columbiasReport(document.getElementById("columbia-month").value)}},"DOWNLOAD REPORT")):"Gasto de Compras"===n.name?l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{md:"6"},l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Mes"),l.a.createElement(J.a,{type:"number",min:"1",max:"12",placeholder:"Numero de mes",id:"bought-month"}))),l.a.createElement(z.a,{md:"6"},l.a.createElement(q.a,null,l.a.createElement(S.a,null,"A\xf1o"),l.a.createElement(J.a,{type:"number",min:"2005",max:"2025",placeholder:"Numero de a\xf1o",id:"bought-year"})))):"Production by Line"===n.name?l.a.createElement(l.a.Fragment,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"CLIENT"),l.a.createElement(z.a,{sm:9},l.a.createElement(W.a,{options:i,onChange:function(t){e.setState({clientSelect:t.value})}}))),l.a.createElement(z.a,{md:"6"},l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Fecha Inicio"),l.a.createElement(rn.a,{inputProps:{className:"form-control"},timeFormat:!1,value:this.state.date,onChange:function(t){e.setState({date:"".concat(t._d.getFullYear(),"-").concat(t._d.getMonth()+1,"-").concat(t._d.getDate())})},formNoValidate:!0}))),l.a.createElement(z.a,{md:"6"},l.a.createElement(S.a,null,"Fecha Final"),l.a.createElement(rn.a,{inputProps:{className:"form-control"},timeFormat:!1,value:this.state.date1,onChange:function(t){e.setState({date1:"".concat(t._d.getFullYear(),"-").concat(t._d.getMonth()+1,"-").concat(t._d.getDate())})},formNoValidate:!0}))):"Prices for Styles"===n.name?l.a.createElement(l.a.Fragment,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"CLIENT"),l.a.createElement(z.a,{sm:9},l.a.createElement(W.a,{options:i,onChange:function(t){e.setState({clientSelect:t.value})}})))):"Styles per Season"===n.name?l.a.createElement(l.a.Fragment,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"CLIENT"),l.a.createElement(z.a,{sm:9},l.a.createElement(W.a,{options:i,onChange:function(t){e.setState({clientSelect:t.value})}}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"SEASON"),l.a.createElement(z.a,{sm:9},l.a.createElement(W.a,{options:o,onChange:function(t){e.setState({seasonSelect:t.value})}})))):"Report sec and third"===n.name?l.a.createElement(l.a.Fragment,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:6},"Upload File"),l.a.createElement(z.a,{sm:6},l.a.createElement(q.a,{id:"formGroup_pathToTechpack",className:"text-center"},l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm"},l.a.createElement("input",{type:"file",onChange:this.addFileToList,name:"pathToCP_POS",id:"input_pathToTechpack",multiple:"multiple"}),l.a.createElement("i",{className:"tim-icons icon-cloud-upload-94"}),"\xa0  Upload File"))))):l.a.createElement(l.a.Fragment,null,l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"CLIENT"),l.a.createElement(z.a,{sm:9},l.a.createElement(W.a,{options:i,onChange:function(t){e.setState({clientSelect:t.value})}}))),l.a.createElement(q.a,{row:!0},l.a.createElement(S.a,{sm:3},"SEASON"),l.a.createElement(z.a,{sm:9},l.a.createElement(W.a,{options:o,onChange:function(t){e.setState({seasonSelect:t.value})}}))))),l.a.createElement(I.a,null,l.a.createElement(R.a,{color:"secondary",onClick:this.toggleAddMaterial},"Close"),"DM Prices"===n.name?l.a.createElement(R.a,{color:"primary",onClick:function(){e.GETREPORTDM(e.state.dmSelect)}},"SEARCH"):"Production by Line"===n.name?l.a.createElement(R.a,{color:"primary",onClick:function(){e.downloadClientReport(e.state.clientSelect,e.state.date,e.state.date1)}},"DOWNLOAD"):"Prices for Styles"===n.name?l.a.createElement(R.a,{color:"primary",onClick:function(){e.clientCountReport(e.state.clientSelect)}},"DOWNLOAD"):"Gasto de Compras"===n.name?l.a.createElement(R.a,{color:"primary",onClick:function(){return e.getReportBuys(document.getElementById("bought-month").value,document.getElementById("bought-year").value)}},"DOWNLOAD"):"Report sec and third"===n.name?l.a.createElement(R.a,{color:"primary",onClick:function(t){e.getReportSecsThirds(t)}},"Generate Report"):"Styles per Season"===n.name?l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{color:"primary",onClick:function(){e.stylePerSeason()}},"DOWNLOAD")):l.a.createElement(R.a,{color:"primary",onClick:function(){e.downloadReport(e.state.clientSelect,e.state.seasonSelect)}},"DOWNLOAD"))),l.a.createElement(k.a,null,l.a.createElement(z.a,{className:"ml-auto mr-auto",md:"8"},l.a.createElement(v.a,{className:"card-plain card-subcategories"},l.a.createElement(_.a,null,l.a.createElement(C.a,{className:"text-center mt-5",tag:"h4"},"Reports"),l.a.createElement("br",null)),l.a.createElement(y.a,null,l.a.createElement(_t.a,{className:"nav-pills-info nav-pills-icons justify-content-center",pills:!0},this.state.reports.map(function(t,a){return l.a.createElement(Ct.a,null,t.name.includes("Jersey")||t.name.includes("Inventory")||t.name.includes("Libras")||t.name.includes("SAM's")||t.name.includes("Rollos")?l.a.createElement("a",{href:"".concat("https://api.vulcanoapparel.com/api/v1").concat(t.link),target:"_blank",rel:"noopener noreferrer",download:!0},l.a.createElement(kt.a,{"data-toggle":"tab"},l.a.createElement("i",{className:"tim-icons ".concat(t.icon)}),t.name)):l.a.createElement(kt.a,{"data-toggle":"tab",onClick:function(){return e.toggleAddMaterial(t.name)}},l.a.createElement("i",{className:"tim-icons ".concat(t.icon)}),t.name))})))))))}}]),t}(l.a.Component)),dn=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e._isMounted=!1,e._ClientsLoaded=!1,e._UserLoaded=!1,e.defaultColorForm={client:null,name:"",lab_dip:""},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.RemoveColor=function(t){e.setState({loadingColors:!0}),ae.a.delete("https://api.vulcanoapparel.com/api/v1"+"/colors_fabrics/".concat(t,"/"),{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.setState({loadingColors:!1}),this.componentDidMount(),this.notify("tr","success","Fabric Color Removed!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"RemoveColor"),this.setState({loadingColors:!1}),this.componentDidMount()}.bind(Object(P.a)(e)))},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.handleSelectChange=function(t){for(var a,n=[],l=0,i=t.target.options.length;l<i;l++)(a=t.target.options[l]).selected&&n.push(a.value);e.setState({selectedClients:n})},e.handleUserSubmit=function(t){t.preventDefault(),e.updateUser(e.state.selectedUser.value,{clients:e.state.selectedClients})},e._loadedColorClass=!1,e.loadColorClass=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/color_by_client/get_color_class/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedColorClass=!0,this.setState({colorsClasses:e.data.map(function(e){return{value:e.id,label:e.name}})})}.bind(Object(P.a)(e)))},e.loadFormColor=function(t){e.setState({ColorsForm:t})},e._loadedColorClass=!1,e.loadColorClass=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/color_by_client/get_color_class/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedColorClass=!0,this.setState({colorsClasses:e.data.map(function(e){return{value:e.id,label:e.name}})})}.bind(Object(P.a)(e)))},e.getClients=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/clients/get_all_clients/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._ClientsLoaded=!0,this._isMounted&&this.setState({clients:e.data})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"getClients")}.bind(Object(P.a)(e)))},e.createColor=function(t){t.preventDefault();var a=e.state.ColorsForm;a.name.length>25?e.notify("tr","warning","name cannot be more than 25 characters"):(e.setState({loadingColors:!0}),ae.a.post("https://api.vulcanoapparel.com/api/v1/colors_fabrics/",a,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"application/json"}}).then(function(){this.setState({loadingColors:!1}),this.componentDidMount(),this.loadFormColor(this.defaultColorForm),console.log(this.defaultColorForm),this.notify("tr","success","Color created!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"createColor"),this.setState({loadingColors:!1}),this.loadFormColor(this.defaultColorForm),console.log(this.defaultColorForm)}.bind(Object(P.a)(e))))},e.editColor=function(t){t.preventDefault();var a=e.state.ColorsForm;if(a.name.length>25)e.notify("tr","warning","name cannot be more than 25 characters");else{e.setState({loadingColors:!0});a.id;var n=Object(At.a)(a,["id"]);ae.a.patch("https://api.vulcanoapparel.com/api/v1"+"/color_by_client/".concat(a.id,"/"),n,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"application/json"}}).then(function(){this.setState({loadingColors:!1}),this.componentDidMount(),this.loadFormColor(this.defaultColorForm),this.notify("tr","success","Color edited!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"editColor"),this.setState({loadingColors:!1}),this.componentDidMount()}.bind(Object(P.a)(e)))}},e._loadedColors=!1,e.loadColors=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/colors_fabrics/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedColors=!0,this.setState({colors:e.data})}.bind(Object(P.a)(e)))},e._userClientsLoaded=!1,e.getUserClients=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1/clients/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._userClientsLoaded=!0,this._isMounted&&this.setState({clientsOptions:e.data.map(function(e){return{value:e.id,label:"".concat(e.company," / ").concat(e.name," / ").concat(e.abbreviation)}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"getUserClients")}.bind(Object(P.a)(e)))},e.state={loading:!1,pathToTechpack:void 0,clients:[],client:{},users:[],user:{},selectedUser:null,selectedClients:[],selectCompany:{},colorsClasses:[],selectedClient:[],clientsOptions:[],ColorsForm:e.defaultColorForm,loadingColors:!1,colors:[]},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getClients(),this.getUserClients(),this.loadColorClass(),this.loadColors(),this._isMounted=!0}},{key:"render",value:function(){var e=this,t=this.state.clientsOptions.find(function(t){return t.value===e.state.ColorsForm.client});return l.a.createElement("div",{className:"content"},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(k.a,null,l.a.createElement(z.a,{xs:4},l.a.createElement("h3",null,"Create Fabric Color"),l.a.createElement(V.a,{onSubmit:function(t){e.state.ColorsForm.id?e.editColor(t):e.createColor(t)}},l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Cliente"),this._ClientsLoaded&&l.a.createElement(W.a,{options:this.state.clientsOptions,value:t||null,onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{client:t.value}))}})),l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Color Name"),l.a.createElement(J.a,{type:"text",value:this.state.ColorsForm.name,onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{name:t.target.value}))}})),l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Lab Dip"),l.a.createElement(J.a,{type:"text",value:this.state.ColorsForm.lab_dip,onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{lab_dip:t.target.value}))}})),l.a.createElement("div",{className:"clearfix"},this.state.ColorsForm.id&&l.a.createElement(R.a,{type:"button",size:"sm",color:"secundary",disabled:this.state.loadingColors,className:"float-left",onClick:function(){return e.loadFormColor(e.defaultColorForm)}},"Clear"),l.a.createElement(R.a,{type:"submit",color:"primary",size:"sm",disabled:this.state.loadingColors,className:"float-left"},this.state.ColorsForm.id?"Update Color":"Create Fabric Color"),this.state.loadingColors&&l.a.createElement("div",{className:"BOMSloader float-left"})))),l.a.createElement(z.a,{xs:8},l.a.createElement("h3",null,"Color List"),this._loadedColors&&l.a.createElement(X.a,{data:this.state.colors.map(function(t){return Object(A.a)({},t,{name:t.color,client:t.color,actions:l.a.createElement("div",{className:"clearfix"},l.a.createElement(R.a,{size:"sm",color:"danger",className:"float-right",onClick:function(){e.RemoveColor(t.id)}},l.a.createElement("i",{className:"tim-icons icon-simple-remove"})),l.a.createElement(R.a,{size:"sm",color:"info",className:"float-right",onClick:function(){e.loadFormColor({id:t.id,name:t.color,lab_dip:t.lab_dip})}},l.a.createElement("i",{className:"tim-icons icon-pencil"})))})}),filterable:!0,defaultPageSize:5,columns:[{Header:"Client",accessor:"client",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["client"]})},filterAll:!0},{Header:"Name",accessor:"name",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["name"]})},filterAll:!0},{Header:"Actions",accessor:"actions",sortable:!1,filterable:!1,width:200}]}))))))}}]),t}(l.a.Component),mn=a(389),un=a.n(mn),pn=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e._isMounted=!1,e.costingURL="https://api.vulcanoapparel.com/api/v1",e.styleId=0,e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.GETREPORTDM=function(t){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/fabrics/get_historic_prices_dm/?dm=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingSeasons=!0,this._isMounted&&this.setState({tableDM:e.data})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e)}.bind(Object(P.a)(e)))},e.goBack=function(){e.props.history.push({pathname:"/admin/fabric_reports"})},e.state={viewEdit:!1,loading:!1},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.props.location.state&&this.GETREPORTDM(this.props.location.state.dm)}},{key:"render",value:function(){var e=this,t=this.state.loading,a="bg-ligh"===this.checkPageMode().bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement(un.a,{className:"btn-simple",color:"info",onClick:function(){return e.goBack()}},l.a.createElement("i",{class:"fas fa-arrow-left"})," \xa0 Back"),l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:t?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(a," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(v.a,null,l.a.createElement(_.a,{style:{alignSelf:"center"}},"DM REPORT"),l.a.createElement("hr",null),l.a.createElement(y.a,null,l.a.createElement(X.a,{responsive:!0,data:this.state.tableDM,filterable:!0,defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"DM",accessor:"dm_modified",filterAll:!0,sortable:!0,filterable:!0,width:500},{Header:"Modified By",accessor:"modified_by",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["modified_by"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"Price Dark",accessor:"priceDark",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["priceDark"]})},filterAll:!0,sortable:!0,filterable:!0,with:100},{Header:"Price Medimum",accessor:"priceMedium",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["priceMedium"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"Price Special",accessor:"priceSpecial",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["priceSpecial"]})},filterAll:!0,sortable:!0,filterable:!0},{Header:"Price White",accessor:"priceWhite",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["priceWhite"]})},filterAll:!0,sortable:!0,filterable:!0}],defaultPageSize:10,showPaginationTop:!0,showPaginationBottom:!1,defaultSorted:[{id:"dm_modified",desc:!0}],className:"-striped -highlight primary-pagination"}))))}}]),t}(l.a.Component),hn=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.uploadChangeFilePO=function(t){var a=e.state.selectedClientPo;for(var n in e.toggleLoading(),e.state.fileList){var l=new FormData;l.append("file",e.state.fileList[0]),l.append("clients",e.state.flagBuy?"-1":e.state.clientList[n]),ae.a.post("https://api.vulcanoapparel.com/api/v1/po/create_po/",l,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(){this.toggleLoading(),this.componentDidMount(),this.notify("tr","success","Upload File PO ")}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.componentDidMount(),this.notify("tr","warning","Bad document format ")}.bind(Object(P.a)(e)))}e.toggleUploadPOModal(),a.label=""},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.openPo=function(t){e.props.history.push({pathname:"/admin/resume_po",state:{poId:t}})},e.getPOS=function(){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1/po/get_my_po/?flag=U",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedBomsHeaders=!0,this.setState({productOrder:e.data.map(function(e){return{client_id:e.client_id,create_date:e.created_at.split(" ",1),delivery_place:e.delivery_place,po_number:e.po_number,po_id:e.id,status:e.status,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",onClick:function(){t.openPo(e.id)}},l.a.createElement("i",{className:"fas fa-search"})),l.a.createElement(R.a,{color:"danger",size:"sm",className:"btn-icon btn-link",onClick:function(){t.deletePO(e.id)}},l.a.createElement("i",{className:"fas fa-trash-alt"})))}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.getPoResume=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/admin/get_resume_pos/?client=".concat(e.state.selectedClientPo),{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.componentDidMount(),window.open("https://api.vulcanoapparel.com/api/v1"+"/admin/get_resume_pos/?client=".concat(this.state.selectedClientPo)),this.notify("tr","success","Resume downloaded!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Get Resume failed")}.bind(Object(P.a)(e)))},e.deletePO=function(t){e.toggleLoading();var a=new FormData;a.append("po_id",t),ae.a.post(e.costingURL+"/po/clients_delete_po/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.notify("tr","success","Po Deleted!"),this.toggleLoading(),this.componentDidMount()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"PO not Deleted"),this.toggleLoading()}.bind(Object(P.a)(e)))},e._clientsLoaded=!1,e.getClients=function(){ae.a.get(e.costingURL+"/clients/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({clients:e.data.map(function(e){return{value:e.id,label:e.name,abbreviation:e.abbreviation}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.approveAllPos=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/po/approve_all_pos/?client=".concat(e.state.selectedClientPo.value),{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.notify("tr","success","Pos Approved!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"PO not Approved")}.bind(Object(P.a)(e)))},e.toggleUploadAllPOsModal=function(){e.setState({uploadAllPO:!e.state.uploadAllPO})},e.toggleUploadPOModal=function(){e.setState({uploadPO:!e.state.uploadPO})},e.toggleGetResumeModal=function(){e.setState({resumePO:!e.state.resumePO})},e.addClientToList=function(t){var a=Object(Ge.a)(e.state.clientList);a.push(t.value),e.setState({clientList:a})},e.addFileToList=function(t){e.setState({selectedFile:t.target.files[0]});var a=Object(Ge.a)(e.state.fileList);a.push(t.target.files[0]),e.setState({fileList:a})},e.addEvent=function(){var t=Object(Ge.a)(e.state.filesForm);t.push("1"),e.setState({filesForm:t})},e.resetModal=function(){e.setState({filesForm:["1"]})},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.state={loading:!1,productOrder:null,styles_po:null,filesForm:["1"],selectedFile:null,uploadPO:!1,uploadAllPO:!1,resumePO:!1,clientList:[],fileList:[],flagBuy:!1},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getClients(),this.getPOS()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.productOrder,i=this.checkPageMode(),o="bg-ligh"===i.bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(o," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(k.a,{className:"justify-content-center mt-5"},l.a.createElement(z.a,{md:{size:12,order:2}},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(_.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:"9"},l.a.createElement("h1",null,"Client Balance")),l.a.createElement(z.a,{sm:"3"}),l.a.createElement(y.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(S.a,null,"CLIENT"),l.a.createElement(W.a,{options:this.state.clientsOptions,onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{client:t.value}))}})),l.a.createElement(z.a,null,l.a.createElement(S.a,null,"TIPO DE MATERIAL"),l.a.createElement(W.a,{options:this.state.clientsOptions,onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{client:t.value}))}})),l.a.createElement(z.a,null,l.a.createElement("br",null),l.a.createElement(R.a,{type:"submit",color:"primary",size:"sm",disabled:this.state.loadingColors,className:"float-left"},"Clear")),l.a.createElement(z.a,null,l.a.createElement(q.a,{id:"formGroup_pathToTechpack",className:"text-center"},l.a.createElement("h4",null,"\xa0 \xa0Actions"),l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm",onClick:function(){e.getPoResume(),console.log(e.state.selectedClientPo)}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"\xa0Convert to Excel"),l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm",onClick:function(){e.getPoResume(),console.log(e.state.selectedClientPo)}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"\xa0Download Report"))))),l.a.createElement("br",null),n&&l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{className:"".concat(i.bg," border")},l.a.createElement(y.a,null,l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:n,filterable:!0,showPaginationBottom:!0,className:"-striped -highlight primary-pagination",columns:[{Header:"TIPO",accessor:"po_number",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},filterAll:!0},{Header:"CODIGO",accessor:"delivery_place",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["delivery_place"]})},filterAll:!0},{Header:"DESCRIPCION",accessor:"po_number",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},filterAll:!0},{Header:"CONSUMO CPO",accessor:"delivery_place",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["delivery_place"]})},filterAll:!0},{Header:"CONSUMO OT",accessor:"po_number",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},filterAll:!0},{Header:"EXISTENCIA",accessor:"delivery_place",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["delivery_place"]})},filterAll:!0},{Header:"PEDIDOS",accessor:"po_number",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},filterAll:!0},{Header:"DIFERENCIAL",accessor:"po_number",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},filterAll:!0}]})))))))))))}}]),t}(l.a.Component),gn=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.uploadChangeFilePO=function(t){var a=e.state.selectedClientPo;for(var n in e.toggleLoading(),e.state.fileList){var l=new FormData;l.append("file",e.state.fileList[0]),l.append("clients",e.state.flagBuy?"-1":e.state.clientList[n]),ae.a.post("https://api.vulcanoapparel.com/api/v1/po/create_po/",l,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(){this.toggleLoading(),this.componentDidMount(),this.notify("tr","success","Upload File PO ")}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.componentDidMount(),this.notify("tr","warning","Bad document format ")}.bind(Object(P.a)(e)))}e.toggleUploadPOModal(),a.label=""},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.openPo=function(t){e.props.history.push({pathname:"/admin/resume_po",state:{poId:t}})},e.getPOS=function(){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1/po/get_my_po/?flag=I",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedBomsHeaders=!0,this.setState({productOrder:e.data.map(function(e){return{label:e.po_number,value:e.id,consumption:e.consumption,consumption_ot:e.consumption_ot,description:e.description,diference:e.diference,inventory:e.inventory,material_costing_id:e.material_costing_id,pedidos:e.orders,type:e.type}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.getPoResume=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/admin/get_resume_pos/?client=".concat(e.state.selectedClientPo),{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.componentDidMount(),window.open("https://api.vulcanoapparel.com/api/v1"+"/admin/get_resume_pos/?client=".concat(this.state.selectedClientPo)),this.notify("tr","success","Resume downloaded!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Get Resume failed")}.bind(Object(P.a)(e)))},e.deletePO=function(t){e.toggleLoading();var a=new FormData;a.append("po_id",t),ae.a.post(e.costingURL+"/po/clients_delete_po/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.notify("tr","success","Po Deleted!"),this.toggleLoading(),this.componentDidMount()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"PO not Deleted"),this.toggleLoading()}.bind(Object(P.a)(e)))},e._clientsLoaded=!1,e.getClients=function(){ae.a.get(e.costingURL+"/clients/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({clients:e.data.map(function(e){return{value:e.id,label:e.name,abbreviation:e.abbreviation}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.approveAllPos=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/po/approve_all_pos/?client=".concat(e.state.selectedClientPo.value),{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.notify("tr","success","Pos Approved!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"PO not Approved")}.bind(Object(P.a)(e)))},e.toggleUploadAllPOsModal=function(){e.setState({uploadAllPO:!e.state.uploadAllPO})},e.toggleUploadPOModal=function(){e.setState({uploadPO:!e.state.uploadPO})},e.toggleGetResumeModal=function(){e.setState({resumePO:!e.state.resumePO})},e.addClientToList=function(t){var a=Object(Ge.a)(e.state.clientList);a.push(t.value),e.setState({clientList:a})},e.addFileToList=function(t){e.setState({selectedFile:t.target.files[0]});var a=Object(Ge.a)(e.state.fileList);a.push(t.target.files[0]),e.setState({fileList:a})},e.addEvent=function(){var t=Object(Ge.a)(e.state.filesForm);t.push("1"),e.setState({filesForm:t})},e.resetModal=function(){e.setState({filesForm:["1"]})},e.searchPO=function(){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/materialp/balance_of_materials_in_PO/?po=".concat(e.state.selectedPO),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this.notify("tr","success","OK!"),this._loadedBomsHeaders=!0,this.setState({tableMaterial:e.data.map(function(e){return{label:e.po_number,value:e.id,consumption:e.consumption,consumption_ot:e.consumption_ot,description:e.description,diference:e.diference,inventory:e.inventory,material_costing_id:e.material_costing_id,pedidos:e.orders,type:e.type}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"not OK")}.bind(Object(P.a)(e)))},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.state={loading:!1,productOrder:[],selectedPO:null,styles_po:null,filesForm:["1"],selectedFile:null,uploadPO:!1,uploadAllPO:!1,resumePO:!1,clientList:[],fileList:[],flagBuy:!1,tableMaterial:[]},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getClients(),this.getPOS()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=(t.productOrder,this.checkPageMode()),i="bg-ligh"===n.bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(i," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(k.a,{className:"justify-content-center mt-5"},l.a.createElement(z.a,{md:{size:12,order:2}},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(_.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:"9"},l.a.createElement("h1",null,"CPO Balance")),l.a.createElement(z.a,{sm:"3"}),l.a.createElement(y.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(S.a,null,"CPO"),l.a.createElement(W.a,{options:this.state.productOrder,onChange:function(t){e.setState({selectedPO:t.label})}})),l.a.createElement(z.a,null,l.a.createElement("br",null),l.a.createElement(R.a,{type:"submit",color:"primary",size:"sm",disabled:this.state.loadingColors,className:"float-left",onClick:function(){return e.searchPO()}},"Search")),l.a.createElement(z.a,null,l.a.createElement(q.a,{id:"formGroup_pathToTechpack",className:"text-center"},l.a.createElement("h4",null,"\xa0 \xa0Actions"),l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm",onClick:function(){e.getPoResume(),console.log(e.state.selectedClientPo)}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"\xa0Convert to Excel"),l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm",onClick:function(){e.getPoResume(),console.log(e.state.selectedClientPo)}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"\xa0Download Report"))))),l.a.createElement("br",null),this.state.tableMaterial&&l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{className:"".concat(n.bg," border")},l.a.createElement(y.a,null,l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:this.state.tableMaterial,filterable:!0,showPaginationBottom:!0,className:"-striped -highlight primary-pagination",columns:[{Header:"CODIGO",accessor:"material_costing_id",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["material_costing_id"]})},filterAll:!0,width:125},{Header:"DESCRIPTION",accessor:"description",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["description"]})},filterAll:!0},{Header:"CONSUMO",accessor:"consumption",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["consumption"]})},filterAll:!0,width:125},{Header:"CONSUMO OT",accessor:"consumption_ot",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["consumption_ot"]})},filterAll:!0,width:125},{Header:"INVENTARIO",accessor:"inventory",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["inventory"]})},filterAll:!0,width:125},{Header:"DIFERENCIA",accessor:"diference",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["diference"]})},filterAll:!0,width:125},{Header:"EXISTENCIA",accessor:"delivery_place",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["delivery_place"]})},filterAll:!0,width:125},{Header:"PEDIDOS",accessor:"pedidos",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["pedidos"]})},filterAll:!0,width:125},{Header:"TIPO",accessor:"type",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["type"]})},filterAll:!0,width:125}]})))))))))))}}]),t}(l.a.Component),fn=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e._isMounted=!1,e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.toggleresumeModal=function(){e.setState({resumeModal:!e.state.resumeModal})},e.toggle=function(t){e.state.tab!==t&&e.setState({tab:t})},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.getPoResume=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/admin/get_resume_pos/?client=".concat(e.state.selectedClientPo),{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.componentDidMount(),window.open("https://api.vulcanoapparel.com/api/v1"+"/admin/get_resume_pos/?client=".concat(this.state.selectedClientPo)),this.notify("tr","success","Resume downloaded!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Get Resume failed")}.bind(Object(P.a)(e)))},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.OpenSheet=function(t,a,n){console.log(t,a,n);e.props.history.push({pathname:"/admin/boms",state:{bomHeader:a,costingId:t,costingName:n,editProcess:!1}})},e.goToCreate=function(){e.props.history.push({pathname:"/admin/boms"})},e.loadrender=function(t){e.setState({bomsHeader:t})},e._loadedMaterials=!1,e.getProductionMaterials=function(){e.toggleLoading(),ae.a.get(e.costingURL+"/inventory/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedMaterials=!0,this.toggleLoading(),this.setState({materials:e.data.map(function(e){return{type:e.material_type,code:e.material_code,desc:e.material_desc,unit:e.material_unit,quants:e.quantity}})})}.bind(Object(P.a)(e)))},e.state={loading:!1,bomsHeaders:void 0,clients:[],user:{},resumeModal:!1,tab:"1"},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getProductionMaterials()}},{key:"render",value:function(){var e=this,t=this.state,a=t.tab,n=t.loading,i=this.checkPageMode(),o="bg-ligh"===i.bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:n?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(o," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(_t.a,{tabs:!0},l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"1"===a?"active":"",onClick:function(){e.toggle("1")},style:"bg-ligh"===i.bg?{color:"black",borderColor:"black"}:{}},"Inventario")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"2"===a?"active":"",onClick:function(){e.toggle("2")},style:"bg-ligh"===i.bg?{color:"black",borderColor:"black"}:{}},"Movimientos por material")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"3"===a?"active":"",onClick:function(){e.toggle("3")},style:"bg-ligh"===i.bg?{color:"black",borderColor:"black"}:null},"Reporte Ingresos")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"4"===a?"active":"",onClick:function(){e.toggle("4")},style:"bg-ligh"===i.bg?{color:"black",borderColor:"black"}:null},"Reporte Salidas"))),l.a.createElement("br",null),this._loadedMaterials&&l.a.createElement(St.a,{activeTab:a},l.a.createElement(Ot.a,{tabId:"1"},l.a.createElement("h1",null,"Inventario General"),l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(q.a,{id:"formGroup_pathToTechpack",className:"text-center"},l.a.createElement("h4",null,"\xa0 \xa0Actions"),l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm",onClick:function(){e.getPoResume(),console.log(e.state.selectedClientPo)}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"\xa0Convert to Excel"),l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm",onClick:function(){e.getPoResume(),console.log(e.state.selectedClientPo)}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"\xa0Download Report")))),l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:this.state.materials,filterable:!0,className:"-striped -highlight primary-pagination",columns:[{Header:"TIPO",accessor:"type",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["type"]})},filterAll:!0,width:150},{Header:"codigo",accessor:"code",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["code"]})},filterAll:!0,width:150},{Header:"descripcion",accessor:"desc",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["desc"]})},filterAll:!0},{Header:"u. medida",accessor:"unit",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["unit"]})},filterAll:!0,width:150},{Header:"UNIDADES",accessor:"quants",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["quants"]})},filterAll:!0,width:150}]}))),this._loadedMaterials&&l.a.createElement(St.a,{activeTab:a},l.a.createElement(Ot.a,{tabId:"2"},l.a.createElement("h1",null,"Consulta De Movimientos Por Material"),l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:this.state.bomsHeaders,filterable:!0,className:"-striped -highlight primary-pagination",defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"CODIGO",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"DESCRIPCION",accessor:"client",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"TIPO",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0},{Header:"LOCALIZACION",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"ACTIVO",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150}]}))),this._loadedMaterials&&l.a.createElement(St.a,{activeTab:a},l.a.createElement(Ot.a,{tabId:"3"},l.a.createElement("h1",null,"Reporte de Ingresos"),l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(q.a,null,l.a.createElement(S.a,{for:"exampleDate"},"FECHA INICIAL"),l.a.createElement(J.a,{type:"date",name:"date",id:"exampleDate",placeholder:"date placeholder"}))),l.a.createElement(z.a,null,l.a.createElement(q.a,null,l.a.createElement(S.a,{for:"exampleDate"},"FECHA FINAL"),l.a.createElement(J.a,{type:"date",name:"date",id:"exampleDate",placeholder:"date placeholder"}))),l.a.createElement(z.a,null,l.a.createElement(q.a,{id:"formGroup_pathToTechpack",className:"text-center"},l.a.createElement("h4",null,"\xa0 \xa0Actions"),l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm",onClick:function(){e.getPoResume(),console.log(e.state.selectedClientPo)}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"\xa0Convert to Excel")))),l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:this.state.bomsHeaders,filterable:!0,className:"-striped -highlight primary-pagination",defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"FECHA",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"T_MOVTO",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"DOCTO",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"DESCRIPCION DOCTO.",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:200},{Header:"CODIGO",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"descripcion",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0},{Header:"UNIDADES",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"COSTO U.",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"COSTO T.",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150}]}))),this._loadedMaterials&&l.a.createElement(St.a,{activeTab:a},l.a.createElement(Ot.a,{tabId:"4"},l.a.createElement("h1",null,"Reporte de Salidas"),l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(q.a,null,l.a.createElement(S.a,{for:"exampleDate"},"FECHA INICIAL"),l.a.createElement(J.a,{type:"date",name:"date",id:"exampleDate",placeholder:"date placeholder"}))),l.a.createElement(z.a,null,l.a.createElement(q.a,null,l.a.createElement(S.a,{for:"exampleDate"},"FECHA FINAL"),l.a.createElement(J.a,{type:"date",name:"date",id:"exampleDate",placeholder:"date placeholder"}))),l.a.createElement(z.a,null,l.a.createElement(q.a,{id:"formGroup_pathToTechpack",className:"text-center"},l.a.createElement("h4",null,"\xa0 \xa0Actions"),l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm",onClick:function(){e.getPoResume(),console.log(e.state.selectedClientPo)}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"\xa0Convert to Excel")))),l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:this.state.bomsHeaders,filterable:!0,className:"-striped -highlight primary-pagination",defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"FECHA",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"T_MOVTO",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"DOCTO",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"DESCRIPCION DOCTO.",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:200},{Header:"CODIGO",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"descripcion",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0},{Header:"UNIDADES",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"COSTO U.",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"COSTO T.",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150}]}))))}}]),t}(l.a.Component),bn=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e._isMounted=!1,e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e.toggleresumeModal=function(){e.setState({resumeModal:!e.state.resumeModal})},e.toggle=function(t){e.state.tab!==t&&e.setState({tab:t})},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.getClients=function(){var t=[];ae.a.get("https://api.vulcanoapparel.com/api/v1/clients/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){e.data.map(function(e){return t.push({value:e.id,label:e.name}),e}),this._isMounted&&this.setState({clientOptions:t})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"get clients")}.bind(Object(P.a)(e)))},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.OpenSheet=function(t,a,n){console.log(t,a,n);e.props.history.push({pathname:"/admin/boms",state:{bomHeader:a,costingId:t,costingName:n,editProcess:!1}})},e.goToCreate=function(){e.props.history.push({pathname:"/admin/boms"})},e.loadrender=function(t){e.setState({bomsHeader:t})},e._loadedMaterials=!1,e.getProductionMaterials=function(){e.toggleLoading(),ae.a.get(e.costingURL+"/inventory/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadedMaterials=!0,this.toggleLoading(),this.setState({materials:e.data.map(function(e){return{type:e.material_type,code:e.material_code,desc:e.material_desc,unit:e.material_unit,quants:e.quantity}})})}.bind(Object(P.a)(e)))},e.state={loading:!1,bomsHeaders:void 0,clients:[],user:{},resumeModal:!1,tab:"1"},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getProductionMaterials()}},{key:"render",value:function(){var e=this,t=this.state,a=t.tab,n=t.loading,i=this.checkPageMode(),o="bg-ligh"===i.bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:n?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(o," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(_t.a,{tabs:!0},l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"1"===a?"active":"",onClick:function(){e.toggle("1")},style:"bg-ligh"===i.bg?{color:"black",borderColor:"black"}:{}},"Inventario")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"2"===a?"active":"",onClick:function(){e.toggle("2")},style:"bg-ligh"===i.bg?{color:"black",borderColor:"black"}:{}},"Movimientos por Tela")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"3"===a?"active":"",onClick:function(){e.toggle("3")},style:"bg-ligh"===i.bg?{color:"black",borderColor:"black"}:null},"Reporte Ingresos")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"4"===a?"active":"",onClick:function(){e.toggle("4")},style:"bg-ligh"===i.bg?{color:"black",borderColor:"black"}:null},"Reporte Salidas"))),l.a.createElement("br",null),this._loadedMaterials&&l.a.createElement(St.a,{activeTab:a},l.a.createElement(Ot.a,{tabId:"1"},l.a.createElement("h1",null,"Inventario General"),l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(q.a,{id:"formGroup_pathToTechpack",className:"text-center"},l.a.createElement("h4",null,"\xa0 \xa0Actions"),l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm",onClick:function(){e.getPoResume(),console.log(e.state.selectedClientPo)}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"\xa0Convert to Excel"),l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm",onClick:function(){e.getPoResume(),console.log(e.state.selectedClientPo)}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"\xa0Download Report")))),l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:this.state.materials,filterable:!0,className:"-striped -highlight primary-pagination",columns:[{Header:"TIPO",accessor:"type",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["type"]})},filterAll:!0,width:150},{Header:"codigo",accessor:"code",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["code"]})},filterAll:!0,width:150},{Header:"descripcion",accessor:"desc",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["desc"]})},filterAll:!0},{Header:"u. medida",accessor:"unit",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["unit"]})},filterAll:!0,width:150},{Header:"UNIDADES",accessor:"quants",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["quants"]})},filterAll:!0,width:150}]}))),this._loadedMaterials&&l.a.createElement(St.a,{activeTab:a},l.a.createElement(Ot.a,{tabId:"2"},l.a.createElement("h1",null,"Consulta De Movimientos Por Tela"),l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:this.state.bomsHeaders,filterable:!0,className:"-striped -highlight primary-pagination",defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"CODIGO",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"DESCRIPCION",accessor:"client",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"TIPO",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0},{Header:"LOCALIZACION",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"ACTIVO",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150}]}))),this._loadedMaterials&&l.a.createElement(St.a,{activeTab:a},l.a.createElement(Ot.a,{tabId:"3"},l.a.createElement("h1",null,"Reporte de Ingresos"),l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(q.a,null,l.a.createElement(S.a,{for:"exampleDate"},"FECHA INICIAL"),l.a.createElement(J.a,{type:"date",name:"date",id:"exampleDate",placeholder:"date placeholder"}))),l.a.createElement(z.a,null,l.a.createElement(q.a,null,l.a.createElement(S.a,{for:"exampleDate"},"FECHA FINAL"),l.a.createElement(J.a,{type:"date",name:"date",id:"exampleDate",placeholder:"date placeholder"}))),l.a.createElement(z.a,null,l.a.createElement(q.a,{id:"formGroup_pathToTechpack",className:"text-center"},l.a.createElement("h4",null,"\xa0 \xa0Actions"),l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm",onClick:function(){e.getPoResume(),console.log(e.state.selectedClientPo)}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"\xa0Convert to Excel")))),l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:this.state.bomsHeaders,filterable:!0,className:"-striped -highlight primary-pagination",defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"FECHA",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"T_MOVTO",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"DOCTO",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"DESCRIPCION DOCTO.",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:200},{Header:"CODIGO",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"descripcion",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0},{Header:"UNIDADES",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"COSTO U.",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"COSTO T.",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150}]}))),this._loadedMaterials&&l.a.createElement(St.a,{activeTab:a},l.a.createElement(Ot.a,{tabId:"4"},l.a.createElement("h1",null,"Reporte de Salidas"),l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(q.a,null,l.a.createElement(S.a,{for:"exampleDate"},"FECHA INICIAL"),l.a.createElement(J.a,{type:"date",name:"date",id:"exampleDate",placeholder:"date placeholder"}))),l.a.createElement(z.a,null,l.a.createElement(q.a,null,l.a.createElement(S.a,{for:"exampleDate"},"FECHA FINAL"),l.a.createElement(J.a,{type:"date",name:"date",id:"exampleDate",placeholder:"date placeholder"}))),l.a.createElement(z.a,null,l.a.createElement(q.a,{id:"formGroup_pathToTechpack",className:"text-center"},l.a.createElement("h4",null,"\xa0 \xa0Actions"),l.a.createElement(R.a,{className:"btn-simple",color:"info",size:"sm",onClick:function(){e.getPoResume(),console.log(e.state.selectedClientPo)}},l.a.createElement("i",{className:"tim-icons icon-cloud-download-93"}),"\xa0Convert to Excel")))),l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:this.state.bomsHeaders,filterable:!0,className:"-striped -highlight primary-pagination",defaultFilterMethod:function(e,t){var a=e.pivotId||e.id,n="codigo"===e.id?parseFloat(e.value):e.value.toLowerCase(),l="codigo"===a?t[a]:t[a].toLowerCase();return void 0===t[a]||String(l).startsWith(n)},columns:[{Header:"FECHA",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"T_MOVTO",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"DOCTO",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"DESCRIPCION DOCTO.",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:200},{Header:"CODIGO",accessor:"bom_style",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"descripcion",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0},{Header:"UNIDADES",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"COSTO U.",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150},{Header:"COSTO T.",accessor:"costing",filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},sortable:!0,filterable:!0,width:150}]}))))}}]),t}(l.a.Component),En=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.uploadChangeFilePO=function(t){var a=e.state.selectedClientPo;for(var n in e.toggleLoading(),e.state.fileList){var l=new FormData;l.append("file",e.state.fileList[0]),l.append("clients",e.state.flagBuy?"-1":e.state.clientList[n]),ae.a.post("https://api.vulcanoapparel.com/api/v1/po/create_po/",l,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(){this.toggleLoading(),this.componentDidMount(),this.notify("tr","success","Upload File PO ")}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.componentDidMount(),this.notify("tr","warning","Bad document format ")}.bind(Object(P.a)(e)))}e.toggleUploadPOModal(),a.label=""},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.openPo=function(t){e.props.history.push({pathname:"/admin/resume_po",state:{poId:t}})},e.getPOS=function(){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1/po/get_my_po/?flag=U",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedBomsHeaders=!0,this.setState({productOrder:e.data.map(function(e){return{client_id:e.client_id,create_date:e.created_at.split(" ",1),delivery_place:e.delivery_place,po_number:e.po_number,po_id:e.id,status:e.status,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",onClick:function(){t.openPo(e.id)}},l.a.createElement("i",{className:"fas fa-search"})),l.a.createElement(R.a,{color:"danger",size:"sm",className:"btn-icon btn-link",onClick:function(){t.deletePO(e.id)}},l.a.createElement("i",{className:"fas fa-trash-alt"})))}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.getPoResume=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/admin/get_resume_pos/?client=".concat(e.state.selectedClientPo),{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.componentDidMount(),window.open("https://api.vulcanoapparel.com/api/v1"+"/admin/get_resume_pos/?client=".concat(this.state.selectedClientPo)),this.notify("tr","success","Resume downloaded!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Get Resume failed")}.bind(Object(P.a)(e)))},e._clientsLoaded=!1,e.getClients=function(){ae.a.get(e.costingURL+"/clients/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({clients:e.data.map(function(e){return{value:e.id,label:e.name,abbreviation:e.abbreviation}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.toggleUploadAllPOsModal=function(){e.setState({uploadAllPO:!e.state.uploadAllPO})},e.toggleUploadPOModal=function(){e.setState({uploadPO:!e.state.uploadPO})},e.toggleGetResumeModal=function(){e.setState({resumePO:!e.state.resumePO})},e.addClientToList=function(t){var a=Object(Ge.a)(e.state.clientList);a.push(t.value),e.setState({clientList:a})},e.addFileToList=function(t){e.setState({selectedFile:t.target.files[0]});var a=Object(Ge.a)(e.state.fileList);a.push(t.target.files[0]),e.setState({fileList:a})},e.addEvent=function(){var t=Object(Ge.a)(e.state.filesForm);t.push("1"),e.setState({filesForm:t})},e.getDate=function(){var t=new Date,a=parseInt(t.getDate())+"/"+parseInt(t.getMonth()+1)+"/"+parseInt(t.getFullYear());e.setState({date:a})},e.updateCurrency=function(){e.getCurrencyChange()},e.getCurrencyChange=function(){ae.a.get("https://currency-converter-by-api-ninjas.p.rapidapi.com/v1/convertcurrency",{params:{have:"USD",want:"GTQ",amount:"1"},headers:{"X-RapidAPI-Key":"fc5a59240cmshadf1e1fff76c353p1d6b57jsnbc64aaaef1ec","X-RapidAPI-Host":"currency-converter-by-api-ninjas.p.rapidapi.com"}}).then(function(e){var t=e.data;setTimeout(function(){this.setState({newAmount:t.new_amount}),this.notify("tr","success","Exchange Updated!")}.bind(this),800)}.bind(Object(P.a)(e)))},e.resetModal=function(){e.setState({filesForm:["1"]})},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.state={loading:!1,productOrder:null,styles_po:null,filesForm:["1"],selectedFile:null,uploadPO:!1,uploadAllPO:!1,resumePO:!1,clientList:[],fileList:[],flagBuy:!1},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getClients(),this.getDate(),this.getPOS(),this.getCurrencyChange()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.productOrder,i=this.checkPageMode(),o="bg-ligh"===i.bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(o," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(k.a,{className:"justify-content-center mt-5"},l.a.createElement(z.a,{md:{size:12,order:2}},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(_.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:"9"},l.a.createElement("h1",null,"Ingreso de Materiales")),l.a.createElement(y.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(S.a,null,"Orden de Compra"),l.a.createElement(W.a,{options:this.state.clients,onChange:function(t){e.setState({clientSelected:t.value})}})),l.a.createElement(z.a,null,l.a.createElement(S.a,{for:"exampleDate"},"Fecha"),l.a.createElement(J.a,{type:"readonly",name:"date",disabled:!0,id:"exampleDate",value:this.state.date,placeholder:this.state.date}))),l.a.createElement("br",null),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:"6"},l.a.createElement(S.a,null,"No. de Env\xedo"),l.a.createElement(J.a,{onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{client:t.value}))}})))),l.a.createElement(z.a,null,l.a.createElement("br",null),l.a.createElement(R.a,{type:"submit",color:"primary",size:"sm",onClick:function(){e.getMaterialOrder()},className:"float-left"},"Search ",l.a.createElement("i",{className:"fa fa-search"}))),l.a.createElement(z.a,{sm:"1",style:{textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},l.a.createElement(S.a,null,"Tipo de cambio"),l.a.createElement(J.a,{type:"readonly",id:"exampleDate",disabled:!0,placeholder:this.state.newAmount,value:this.state.newAmount,style:{textAlign:"center"}}),l.a.createElement("br",null),l.a.createElement(R.a,{type:"submit",color:"primary",size:"sm",onClick:function(){e.updateCurrency()},className:"float-left"},l.a.createElement("i",{className:"tim-icons icon-refresh-01"}))))),l.a.createElement("br",null),n&&l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{className:"".concat(i.bg," border")},l.a.createElement(y.a,null,l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:n,filterable:!0,showPaginationBottom:!0,className:"-striped -highlight primary-pagination",columns:[{Header:"CPO",accessor:"po_number",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},filterAll:!0,width:125},{Header:"CODIGO",accessor:"delivery_place",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["delivery_place"]})},filterAll:!0,width:125},{Header:"DESCRIPCION",accessor:"po_number",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},filterAll:!0},{Header:"U. PEDIDAS",accessor:"delivery_place",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["delivery_place"]})},filterAll:!0,width:125},{Header:"U. RECIBIDAS",accessor:"po_number",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},filterAll:!0,width:125},{Header:"UNIDADES",accessor:"delivery_place",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["delivery_place"]})},filterAll:!0,width:125},{Header:"COSTO",accessor:"po_number",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},filterAll:!0,width:125}]})))))))))))}}]),t}(l.a.Component);function vn(e){var t=e.po_number,a=e.total;return l.a.createElement(l.a.Fragment,null,l.a.createElement(_e.a,{striped:!0,size:"sm",style:{marginBottom:"0rem"}},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{style:{textAlign:"center"}},"CPO"),l.a.createElement("th",{style:{textAlign:"center"}},"ESTILO"),l.a.createElement("th",{style:{textAlign:"center"}},"COLOR"),l.a.createElement("th",{style:{textAlign:"center"}},"UNIDADES")),l.a.createElement("tr",null,l.a.createElement("td",{style:{textAlign:"center"}},t),l.a.createElement("td",{style:{textAlign:"center"}}),l.a.createElement("td",{style:{textAlign:"center"}}),l.a.createElement("td",{style:{textAlign:"center"}},a)))))}var yn=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.getDate=function(){var t=new Date,a=parseInt(t.getDate())+"/"+parseInt(t.getMonth()+1)+"/"+parseInt(t.getFullYear());e.setState({date:a})},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.handleCheckPo=function(t){e.state.selectedPo.push(t),console.log("Este es la PO",t.id)},e.handleCheckMaterial=function(t){e.state.selectedMaterial.push(t),console.log("Este es el material",t.id)},e.removePO=function(t){var a=Object(Ge.a)(e.state.selectedPo).findIndex(function(e){return e===t}),n=Object(Ge.a)(e.state.selectedPo);n.splice(a,1),e.setState({selectedPo:n})},e._MaterialProvider=!1,e.getMaterialP=function(){var t=e.state.providerSelected;e.setState({provedor:t},function(){}),e.toggleLoading(),e.state.Prov=t,ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/provider/get_type_for_provider/?provider_id=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;0===e.data.length?(this._MaterialProvider=!0,this.toggleLoading(),this.notify("tr","warning","NO MATERIAL DATA FOR THIS PROVIDER")):e.data.length>1&&(this.toggleLoading(),this._MaterialProvider=!0,this.setState({materialProvider:e.data.map(function(e,a){return{value:e.id,label:e.name,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{color:"info",type:"checkbox",onChange:function(n){t.state.accountArrP[a]?t.state.accountArrP.splice(a,1):t.state.accountArrP[a]=e.id},name:"selectedMaterial",size:"sm",className:"btn-icon btn-link"}))}})}),this.toggleLoading(),this.notify("tr","success","Successfully loaded!"))}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e._materialLoaded=!1,e.getMaterialOrderPo=function(){var t=e.state.clientSelected;e.toggleLoading(),e.setState({cliente:t},function(){}),ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/material_order/po_order/?client=".concat(t),{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;0===e.data.length?(this._materialLoaded=!0,this.toggleLoading(),this.notify("tr","warning","NO ORDER DATA FOR THIS CLIENT")):e.data.length>1&&(this._materialLoaded=!0,this.setState({materialOrder:e.data.map(function(e,a){return{value:e.id,date_order:e.date_order,po_number:e.po_number,status:e.status,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{color:"info",type:"checkbox",onChange:function(n){t.state.po_number=e.po_number,t.state.accountArr[a]?t.state.accountArr.splice(a,1):t.state.accountArr[a]=e.id},checked:t.state.checked[e.id],name:"selectedMaterial",size:"sm",className:"btn-icon btn-link"}))}})}),this.toggleLoading(),this.notify("tr","success","Successfully loaded!"))}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e._loadingShowData=!1,e.ShowData=function(){e.toggleLoading();var t={provider:e.state.providerSelected,type_material:e.state.accountArrPJson,pos_list:e.state.accountArrJson};ae.a.post(e.costingURL+"/material_order/search_mat/",t,{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;if(this.toggleLoading(),console.log(e.data),0===e.data.length)this._loadingShowData=!0,this.notify("tr","warning","NO ORDER DATA FOR THIS CLIENT");else if(e.data.length>1){this._loadingShowData=!0;var a=e.data;this.setState({allMaterials:a.map(function(e,a){return{value:e.id,id_material:e.material,description:e.description,balance:e.balance,total:e.total,price:e.price,actions:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center"}},l.a.createElement(z.a,null,l.a.createElement(R.a,{color:"info",size:"sm",className:"btn-icon btn-link",onClick:function(){t.state.material_id=parseInt(e.id),t.state.mat_code=e.material,t.state.total=e.total,t.state.price=e.price,t.state.description=e.description;var n={material_id:t.state.material_id,quantity:t.state.total,po:t.state.accountArrJson[0]};t.state.selectedMaterial[a]?t.state.selectedMaterial.splice(a,1):t.state.selectedMaterial[a]=n,t.toggleresumeModal()}},l.a.createElement("i",{className:"fa fa-edit"}))),l.a.createElement(z.a,null,l.a.createElement(S.a,null,t.state.orderNumber))))}})}),this._isMounted&&this.notify("tr","success","Generated!")}}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e._clientsLoaded=!1,e.getClients=function(){ae.a.get(e.costingURL+"/clients/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({clients:e.data.map(function(e){return{value:e.id,label:e.name,abbreviation:e.abbreviation}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e._loadingProviders=!1,e.getProductionProvider=function(){ae.a.get(e.costingURL+"/provider/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingProviders=!0;var t=e.data;this.setState({providers:t.map(function(e){return{value:e.id,label:e.name,currency:e.currency}})})}.bind(Object(P.a)(e)))},e.CreateOrder=function(t){e.toggleLoading(),ae.a.post(e.costingURL+"/order_mat/create_order/",t,{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this.toggleLoading(),this.notify("tr","success","Order Generated!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.toggleresumeModal=function(){e.setState({resumeModal:!e.state.resumeModal})},e.toggleUploadAllPOsModal=function(){e.setState({uploadAllPO:!e.state.uploadAllPO})},e.toggleUploadPOModal=function(){e.setState({uploadPO:!e.state.uploadPO})},e.toggleGetResumeModal=function(){e.setState({resumePO:!e.state.resumePO})},e.addClientToList=function(t){var a=Object(Ge.a)(e.state.clientList);a.push(t.value),e.setState({clientList:a})},e.addProviderToList=function(t){var a=Object(Ge.a)(e.state.providerList);a.push(t.value),e.setState({providerList:a})},e.addFileToList=function(t){e.setState({selectedFile:t.target.files[0]});var a=Object(Ge.a)(e.state.fileList);a.push(t.target.files[0]),e.setState({fileList:a})},e.addEvent=function(){var t=Object(Ge.a)(e.state.filesForm);t.push("1"),e.setState({filesForm:t})},e.resetModal=function(){e.setState({filesForm:["1"]})},e.loadComment=function(t){e.setState({commentForm:t}),console.log(t)},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.state={loading:!1,materialOrder:null,materialProvider:null,allMaterials:null,filesForm:["1"],selectedFile:null,uploadPO:!1,po_number:"",uploadAllPO:!1,resumePO:!1,clientSelected:null,selectedPo:[],selectedMaterial:[],fileList:[],cliente:null,material_id:null,checked:{},orderNumber:null,order:{},po_array:[],accountArr:[],pedido:null,mat_code:"",price:null,accountArrJson:[],total:null,accountArrP:[],accountArrPJson:[],resumeModal:!1,description:""},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getDate(),this.getClients(),this.getProductionProvider()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.materialOrder,i=t.materialProvider,o=t.allMaterials,s=(t.orderData,this.checkPageMode()),r="bg-ligh"===s.bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(r," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(L.a,{isOpen:this.state.resumeModal,toggle:this.toggleresumeModal,size:"lg",style:{margin:"1vh auto 0px"}},l.a.createElement(D.a,{toggle:this.toggleresumeModal,tag:"h2"},"Material Order"),l.a.createElement(H.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(S.a,null,"C\xf3digo:"),l.a.createElement(J.a,{value:this.state.mat_code}),l.a.createElement(S.a,null,"% Adicional:"),l.a.createElement(J.a,{placeholder:"5",onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{client:t.value}))}})),l.a.createElement(z.a,null,l.a.createElement(S.a,null,"Precio de Unidad:"),l.a.createElement(J.a,{placeholder:this.state.price,onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{client:t.value}))}}),l.a.createElement(S.a,null,"Este Pedido:"),l.a.createElement(J.a,{onChange:function(t){e.setState({pedido:t.target.value}),console.log(e.state.pedido)}})),l.a.createElement(z.a,null,l.a.createElement("br",null),l.a.createElement(R.a,{type:"submit",color:"primary",size:"sm",onClick:function(){e.setState({orderNumber:null!==e.state.pedido?e.state.pedido:0}),e.toggleresumeModal(),e.notify("tr","success","Pedido Guardado")},className:"float-left"},"Save ",l.a.createElement("i",{className:"fa fa-save"})))),l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(S.a,null,"Descripci\xf3n:"),l.a.createElement(J.a,{style:{width:"500px"},value:this.state.description}))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(vn,{po_number:this.state.po_number,total:this.state.total}))),l.a.createElement(k.a,{className:"justify-content-center mt-5"},l.a.createElement(z.a,{md:{size:12,order:2}},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(_.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:"9"},l.a.createElement("h1",null,"Ordenes de Compra por CPO")),l.a.createElement(y.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:"7"},l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(S.a,null,"Client"),this.Access.approve_boms.edit?l.a.createElement(W.a,{options:this.state.clients,onChange:function(t){e.setState({clientSelected:t.value})}}):l.a.createElement(l.a.Fragment,null)),l.a.createElement(z.a,null,l.a.createElement(S.a,{for:"exampleDate"},"Date"),l.a.createElement(J.a,{type:"readonly",name:"date",id:"exampleDate",value:this.state.date,placeholder:this.state.date}))),l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(S.a,null,"Provider"),l.a.createElement(W.a,{options:this.state.providers,onChange:function(t){e.setState({providerSelected:t.value})}}))),l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(S.a,null,"Comments"),l.a.createElement(J.a,{onChange:function(t){e.setState({commentsLabel:t.target.value})}})),l.a.createElement(z.a,{sm:"3"},l.a.createElement(S.a,null,"% Aditional"),l.a.createElement(J.a,{type:"text",id:"exampleDate",placeholder:"5",style:{textAlign:"center"}}))),l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(S.a,null,"Precio"),l.a.createElement(J.a,{onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{client:t.value}))}})),l.a.createElement(z.a,null,l.a.createElement(S.a,null,"P. Minimo"),l.a.createElement(J.a,{onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{client:t.value}))}})),l.a.createElement(z.a,null,l.a.createElement(S.a,null,"Moneda"),l.a.createElement(J.a,{options:this.state.providers,type:"text",id:"exampleDate",style:{textAlign:"center"},onChange:function(t){e.setState({providerSelected:t.currancy})}})),l.a.createElement(z.a,null,l.a.createElement(S.a,null,"Procedencia"),l.a.createElement(J.a,{type:"text",id:"exampleDate",style:{textAlign:"center"}})))),l.a.createElement(z.a,null,l.a.createElement("br",null),l.a.createElement(R.a,{type:"submit",color:"primary",size:"sm",onClick:function(){e.getMaterialOrderPo(),e.getMaterialP()},className:"float-left"},"Search ",l.a.createElement("i",{className:"fa fa-search"}))),l.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100%",marginTop:"10vh"}},l.a.createElement(k.a,{className:"".concat(s.bg," border"),style:{width:"100%"}},i&&l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:i,filterable:!0,showPaginationBottom:!0,className:"-striped -highlight primary-pagination",columns:[{Header:"Id_material",accessor:"value",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["value"]})},filterAll:!0},{Header:"Material",accessor:"label",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["label"]})},filterAll:!0},{Header:"SELECCIONAR",accessor:"actions",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["actions"]})},filterAll:!0,width:100}]}),l.a.createElement(R.a,{type:"submit",color:"primary",size:"1sm",onClick:function(t){e.state.accountArrJson=[],e.state.accountArrPJson=[];for(var a=0;a<e.state.accountArrP.length;a++)e.state.accountArrP[a]&&e.state.accountArrPJson.push(e.state.accountArrP[a]);for(var n=0;n<e.state.accountArr.length;n++)e.state.accountArr[n]&&e.state.accountArrJson.push(e.state.accountArr[n]);e.ShowData()},className:"Create"},"Create ",l.a.createElement("i",{className:"fa fa-plus"})))))),n&&l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:n,filterable:!0,showPaginationBottom:!0,className:"-striped -highlight primary-pagination",columns:[{Header:"CPO",accessor:"po_number",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},filterAll:!0},{Header:"SELECCIONAR",accessor:"actions",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["actions"]})},filterAll:!0,width:100}]}))))))))),l.a.createElement("br",null),o&&l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{className:"".concat(s.bg," border")},l.a.createElement(y.a,null,l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:o,filterable:!0,showPaginationBottom:!0,className:"-striped -highlight primary-pagination",columns:[{Header:"CODIGO MATERIAL",accessor:"id_material",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["id_material"]})},filterAll:!0,width:132},{Header:"DESCRIPCION",accessor:"description",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["description"]})},filterAll:!0},{Header:"BALANCE",accessor:"balance",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["balance"]})},filterAll:!0,width:150},{Header:"ESTE PEDIDO",accessor:"pedido",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["pedido"]})},filterAll:!0,width:150},{Header:"\xbfPEDIR?",accessor:"actions",sortable:!0,filterable:!0,width:100}]}),l.a.createElement(R.a,{type:"submit",color:"primary",size:"1sm",onClick:function(t){for(var a={client:e.state.clientSelected,provider:e.state.providerSelected,comments:e.state.commentsLabel,type_material:e.state.accountArrPJson[0],mats:e.state.selectedMaterial},n=[],l=0;l<e.state.selectedMaterial.length;l++)e.state.selectedMaterial[l]&&n.push(e.state.selectedMaterial[l]);e.CreateOrder(a)},className:"Generate"},"Generate Order ",l.a.createElement("i",{className:"fa fa-check"}))))))))))))}}]),t}(l.a.Component),_n=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e._isMounted=!1,e.toggle=function(t){e.state.tab!==t&&e.setState({tab:t})},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e._isMounted&&e._isMounted&&e.refs.notificationAlert.notificationAlert(i)},e._loadingProviders=!1,e.getProductionProvider=function(){ae.a.get(e.costingURL+"/provider/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._loadingProviders=!0;var t=e.data;this.setState({providers:t.map(function(e){return{value:e.id,label:e.name,abbreviation:e.abbreviation,address:e.address,phone:e.phone,contact:e.contact,time:e.time,currency:e.currency,company:e.company.name,status:e.status}})})}.bind(Object(P.a)(e)))},e.deleteProvider=function(t){e.toggleLoading(),ae.a.delete(e.costingURL+"/provider/".concat(t,"/"),{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.notify("tr","success","Provider Deleted!"),this.toggleLoading(),this.componentDidMount()}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading()}.bind(Object(P.a)(e)))},e.state={loading:!1,loadingColors:!1,providers:[],tab:"1"},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getProductionProvider(),this._isMounted=!0}},{key:"render",value:function(){var e=this,t=this.state,a=t.tab,n=t.loading,i=this.checkPageMode(),o="bg-ligh"===i.bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:n?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(o," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement(v.a,null,l.a.createElement(_.a,null,l.a.createElement(y.a,null,l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(_t.a,{tabs:!0},l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"1"===a?"active":"",onClick:function(){e.toggle("1")},style:"bg-ligh"===i.bg?{color:"black",borderColor:"black"}:{}},"Catalogo de provedores")),l.a.createElement(Ct.a,null,l.a.createElement(kt.a,{className:"2"===a?"active":"",onClick:function(){e.toggle("2")},style:"bg-ligh"===i.bg?{color:"black",borderColor:"black"}:{}},"Crear provedores"))),l.a.createElement("br",null),l.a.createElement(St.a,{activeTab:a},l.a.createElement(Ot.a,{tabId:"2"},l.a.createElement(z.a,{xs:4},l.a.createElement("h3",null,"Informacion de Provedores"),l.a.createElement(V.a,null,l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Codigo"),l.a.createElement(J.a,{type:"text",maxLength:"25",onChange:function(e){}})),l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Nombre"),l.a.createElement(J.a,{type:"text",onChange:function(e){}})),l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Direccion"),l.a.createElement(J.a,{type:"text",onChange:function(e){}})),l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Telefono"),l.a.createElement(J.a,{type:"text",onChange:function(e){}})),l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Contacto"),l.a.createElement(J.a,{type:"text",onChange:function(e){}})),l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Tiempo"),l.a.createElement(J.a,{type:"text",onChange:function(e){}})),l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Pagado en"),l.a.createElement(J.a,{type:"text",onChange:function(e){}})),l.a.createElement(q.a,null,l.a.createElement(S.a,null,"Moneda"),l.a.createElement(J.a,{type:"text",onChange:function(e){}}),l.a.createElement(R.a,{type:"button",size:"sm",color:"secundary",className:"float-left",onChange:function(e){}},"Submit")))))),l.a.createElement(St.a,{activeTab:a},l.a.createElement(Ot.a,{tabId:"1"},l.a.createElement(z.a,null,l.a.createElement("h3",null,"Catalogo de provedores"),this.getProductionProvider&&l.a.createElement(X.a,{data:this.state.providers.map(function(t){return Object(A.a)({},t,{id:t.value,actions:l.a.createElement("div",{className:"clearfix"},l.a.createElement(R.a,{size:"sm",color:"danger",className:"float-right",onClick:function(){e.deleteProvider(t.value)}},l.a.createElement("i",{className:"tim-icons icon-simple-remove"})),l.a.createElement(R.a,{size:"sm",color:"info",className:"float-right",onClick:function(){console.log(t)}},l.a.createElement("i",{className:"tim-icons icon-pencil"})))})}),filterable:!0,defaultPageSize:5,columns:[{Header:"Codigo",accessor:"value",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["value"]})},filterAll:!0,disabled:!1,width:80},{Header:"Nombre",accessor:"label",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["label"]})},filterAll:!0},{Header:"Direccion",accessor:"address",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["address"]})},filterAll:!0,disabled:!1},{Header:"Telefono",accessor:"phone",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["phone"]})},filterAll:!0,disabled:!1,width:130},{Header:"Contacto",accessor:"contact",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["contact"]})},filterAll:!0,disabled:!1,width:170},{Header:"Tiempo",accessor:"time",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["time"]})},filterAll:!0,disabled:!1,width:80},{Header:"Pagado",accessor:"company",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["company"]})},filterAll:!0,width:150},{Header:"Moneda",accessor:"currency",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["currency"]})},filterAll:!0,width:80},{Header:"Actions",accessor:"actions",sortable:!0,filterable:!0,width:140}]}))))))))}}]),t}(l.a.Component),Cn=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userToken=localStorage.getItem("userToken")||"",e.Access=JSON.parse(localStorage.getItem("Access")||"{}"),e.Role=localStorage.getItem("role")||"",e.costingURL="https://api.vulcanoapparel.com/api/v1",e.toggleLoading=function(){e._isMounted&&e.setState({loading:!e.state.loading})},e.notify=function(t,a,n){var i;i={place:t,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:a,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&e.refs.notificationAlert.notificationAlert(i)},e.uploadChangeFilePO=function(t){var a=e.state.selectedClientPo;for(var n in e.toggleLoading(),e.state.fileList){var l=new FormData;l.append("file",e.state.fileList[0]),l.append("clients",e.state.flagBuy?"-1":e.state.clientList[n]),ae.a.post("https://api.vulcanoapparel.com/api/v1/po/create_po/",l,{headers:{Authorization:"Token "+e.userToken,"Content-Type":"multipart/form-data"}}).then(function(){this.toggleLoading(),this.componentDidMount(),this.notify("tr","success","Upload File PO ")}.bind(Object(P.a)(e))).catch(function(e){this.toggleLoading(),this.componentDidMount(),this.notify("tr","warning","Bad document format ")}.bind(Object(P.a)(e)))}e.toggleUploadPOModal(),a.label=""},e.logOut=function(){e._isMounted=!1,localStorage.clear(),e.componentWillUnmount(),e.props.history.push("/auth/login")},e.handleError=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=t.response?t.response:{},n=t.message?t.message:"";if(void 0!==a.status&&401===a.status)e.logOut();else{var l="";if(void 0!==a.data)for(var i=0,o=Object.entries(a.data);i<o.length;i++){var s=o[i],r=Object(F.a)(s,2),c=r[0],d=r[1];l+="".concat(c,": ").concat(d,"\t")}else l=n;e.notify("tr","warning",l)}},e.openPo=function(t){e.props.history.push({pathname:"/admin/resume_po",state:{poId:t}})},e.getPOS=function(){e.toggleLoading(),ae.a.get("https://api.vulcanoapparel.com/api/v1/po/get_my_po/?flag=U",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){var t=this;this._loadedBomsHeaders=!0,this.setState({productOrder:e.data.map(function(e){return{client_id:e.client_id,create_date:e.created_at.split(" ",1),delivery_place:e.delivery_place,po_number:e.po_number,po_id:e.id,status:e.status,actions:l.a.createElement(l.a.Fragment,null,"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0",l.a.createElement(R.a,{color:"danger",size:"sm",className:"btn-icon btn-link",onClick:function(){t.deletePO(e.id)}},l.a.createElement("i",{className:"fas fa-trash-alt"})))}})}),this.toggleLoading()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"error Loading")}.bind(Object(P.a)(e)))},e.getPoResume=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/admin/get_resume_pos/?client=".concat(e.state.selectedClientPo),{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.componentDidMount(),window.open("https://api.vulcanoapparel.com/api/v1"+"/admin/get_resume_pos/?client=".concat(this.state.selectedClientPo)),this.notify("tr","success","Resume downloaded!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"Get Resume failed")}.bind(Object(P.a)(e)))},e.deletePO=function(t){e.toggleLoading();var a=new FormData;a.append("po_id",t),ae.a.post(e.costingURL+"/po/clients_delete_po/",a,{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.notify("tr","success","Po Deleted!"),this.toggleLoading(),this.componentDidMount()}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"PO not Deleted"),this.toggleLoading()}.bind(Object(P.a)(e)))},e._clientsLoaded=!1,e.getClients=function(){ae.a.get(e.costingURL+"/clients/",{headers:{Authorization:"Token "+e.userToken}}).then(function(e){this._clientsLoaded=!0,this._isMounted&&this.setState({clients:e.data.map(function(e){return{value:e.id,label:e.name,abbreviation:e.abbreviation}})})}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"clients")}.bind(Object(P.a)(e)))},e.approveAllPos=function(){ae.a.get("https://api.vulcanoapparel.com/api/v1"+"/po/approve_all_pos/?client=".concat(e.state.selectedClientPo.value),{headers:{Authorization:"Token "+e.userToken}}).then(function(){this.notify("tr","success","Pos Approved!")}.bind(Object(P.a)(e))).catch(function(e){this.handleError(e,"PO not Approved")}.bind(Object(P.a)(e)))},e.toggleUploadAllPOsModal=function(){e.setState({uploadAllPO:!e.state.uploadAllPO})},e.toggleUploadPOModal=function(){e.setState({uploadPO:!e.state.uploadPO})},e.toggleGetResumeModal=function(){e.setState({resumePO:!e.state.resumePO})},e.addClientToList=function(t){var a=Object(Ge.a)(e.state.clientList);a.push(t.value),e.setState({clientList:a})},e.addFileToList=function(t){e.setState({selectedFile:t.target.files[0]});var a=Object(Ge.a)(e.state.fileList);a.push(t.target.files[0]),e.setState({fileList:a})},e.addEvent=function(){var t=Object(Ge.a)(e.state.filesForm);t.push("1"),e.setState({filesForm:t})},e.getDate=function(){var t=new Date,a=parseInt(t.getDate())+"/"+parseInt(t.getMonth()+1)+"/"+parseInt(t.getFullYear());e.setState({date:a})},e.resetModal=function(){e.setState({filesForm:["1"]})},e.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},e.state={loading:!1,productOrder:null,styles_po:null,filesForm:["1"],selectedFile:null,uploadPO:!1,uploadAllPO:!1,resumePO:!1,clientList:[],fileList:[],flagBuy:!1},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.getClients(),this.getDate(),this.getPOS()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.productOrder,i=this.checkPageMode(),o="bg-ligh"===i.bg?"inverted":"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:a?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(o," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement(k.a,{className:"justify-content-center mt-5"},l.a.createElement(z.a,{md:{size:12,order:2}},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(_.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:"9"},l.a.createElement("h1",null,"Despacho de Materiales")),l.a.createElement(y.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(S.a,null,"Requisici\xf3n"),l.a.createElement(J.a,{onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{client:t.value}))}})),l.a.createElement(z.a,null,l.a.createElement(S.a,{for:"exampleDate"},"Fecha"),l.a.createElement(J.a,{type:"readonly",name:"date",disabled:"true",id:"exampleDate",value:this.state.date,placeholder:this.state.date}))),l.a.createElement("br",null),l.a.createElement(k.a,null,l.a.createElement(z.a,{sm:"6"},l.a.createElement(S.a,null,"Corte"),l.a.createElement(J.a,{onChange:function(t){e.loadFormColor(Object(A.a)({},e.state.ColorsForm,{client:t.value}))}})))),l.a.createElement(z.a,null,l.a.createElement("br",null),l.a.createElement(R.a,{type:"submit",color:"primary",size:"sm",onClick:function(){e.getMaterialOrder()},className:"float-left"},"Search ",l.a.createElement("i",{className:"fa fa-search"}))))),l.a.createElement("br",null),n&&l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{className:"".concat(i.bg," border")},l.a.createElement(y.a,null,l.a.createElement(X.a,{responsive:!0,defaultPageSize:5,data:n,filterable:!0,showPaginationBottom:!0,className:"-striped -highlight primary-pagination",columns:[{Header:"CODIGO",accessor:"delivery_place",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["delivery_place"]})},filterAll:!0,width:150},{Header:"DESCRIPCION",accessor:"po_number",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["po_number"]})},filterAll:!0},{Header:"UNIDADES",accessor:"delivery_place",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["delivery_place"]})},filterAll:!0,width:125},{Header:"ELIMINAR",accessor:"actions",sortable:!0,filterMethod:function(e,t){return Object(K.a)(t,e.value,{keys:["actions"]})},filterAll:!0,width:125}]})))))))))))}}]),t}(l.a.Component);var kn,Sn,On=function(e){var t=Object(Y.a)({},e);console.log("index",t.index,"data",t.data1[t.index]&&t.data1[t.index]);var a=0,n=0,i=0,o=0;return l.a.createElement("div",null,l.a.createElement(_e.a,{id:t.index,className:"tablesorter",style:{width:"2000px"},responsive:!0},l.a.createElement("thead",{className:"text-primary"},l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"100px"}},"Scale"),l.a.createElement("th",{style:{width:"100px"}},"Plies"),t.size.sizes.map(function(e,t){return l.a.createElement("th",{key:t,style:{width:"100px"}},e.clients_size)}),l.a.createElement("th",{style:{width:"100px"}},"Sizes"),l.a.createElement("th",{style:{width:"100px"}},"Sizes per Plies"),l.a.createElement("th",{style:{width:"100px"}},"Length (Yds)"),l.a.createElement("th",{style:{width:"100px"}},"%"),l.a.createElement("th",{style:{width:"100px"}},"Length + 2"),l.a.createElement("th",{style:{width:"100px"}},"Total Length"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"1"),l.a.createElement("td",null,l.a.createElement(J.a,{id:"plies".concat(t.index),type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0]&&t.data1[t.index][0].row1.plies,onChange:function(e){t.data1[t.index]&&(t.data1[t.index][0].row1.plies=parseInt(e.target.value)),console.log(t)}})),t.size.sizes.map(function(e,a){return l.a.createElement("td",{key:a,style:{width:"25px"}},l.a.createElement(J.a,{id:"".concat(e.clients_size," ").concat(a),type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row1.sizes[a],onChange:function(e){return t.data1[t.index][0].row1.sizes[a]=parseInt(e.target.value)}}))}),l.a.createElement("td",null,t.data1[t.index]&&t.data1[t.index][0].row1.sizes.map(function(e,t){a=parseInt(a)+parseInt(e)}),a),l.a.createElement("td",null,t.data1[t.index]&&parseInt(t.data1[t.index][0].row1.plies)*a),l.a.createElement("td",null,l.a.createElement(J.a,{id:"length1",type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row1.len,onChange:function(e){return t.data1[t.index][0].row1.len=parseInt(e.target.value)}})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"percent1",type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row1.percentage,onChange:function(e){return t.data1[t.index][0].row1.percentage=parseInt(e.target.value)}})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"lenP1",type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row1.lenP2,onChange:function(e){return t.data1[t.index][0].row1.lenP2=parseInt(e.target.value)}})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"totalLen1",type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row1.totalLen,onChange:function(e){return t.data1[t.index][0].row1.totalLen=parseInt(e.target.value)}}))),l.a.createElement("tr",null,l.a.createElement("td",null,"2"),l.a.createElement("td",null,l.a.createElement(J.a,{id:"plies".concat(t.index),type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row2.plies,onChange:function(e){return t.data1[t.index]&&(t.data1[t.index][0].row2.plies=parseInt(e.target.value))}})),t.size.sizes.map(function(e,a){return l.a.createElement("td",{key:a,style:{width:"25px"}},l.a.createElement(J.a,{id:"".concat(e.clients_size," ").concat(a),type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row2.sizes[a],onChange:function(e){return t.data1[t.index][0].row2.sizes[a]=parseInt(e.target.value)}}))}),l.a.createElement("td",null,t.data1[t.index]&&t.data1[t.index][0].row2.sizes.map(function(e,t){n=parseInt(n)+parseInt(e)}),n),l.a.createElement("td",null,t.data1[t.index]&&parseInt(t.data1[t.index][0].row2.plies)*n),l.a.createElement("td",null,l.a.createElement(J.a,{id:"length2",type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row2.len,onChange:function(e){return t.data1[t.index][0].row2.len=parseInt(e.target.value)}})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"percent2",type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row2.percentage,onChange:function(e){return t.data1[t.index][0].row2.percentage=parseInt(e.target.value)}})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"lenP2",type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row2.lenP2,onChange:function(e){return t.data1[t.index][0].row2.lenP2=parseInt(e.target.value)}})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"totalLen2",type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row2.totalLen,onChange:function(e){return t.data1[t.index][0].row2.totalLen=parseInt(e.target.value)}}))),l.a.createElement("tr",null,l.a.createElement("td",null,"3"),l.a.createElement("td",null,l.a.createElement(J.a,{id:"plies".concat(t.index),type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row3.plies,onChange:function(e){return t.data1[t.index][0].row3.plies=parseInt(e.target.value)}})),t.size.sizes.map(function(e,a){return l.a.createElement("td",{key:a,style:{width:"25px"}},l.a.createElement(J.a,{id:"".concat(e.clients_size," ").concat(a),type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row3.sizes[a],onChange:function(e){return t.data1[t.index][0].row3.sizes[a]=parseInt(e.target.value)}}))}),l.a.createElement("td",null,t.data1[t.index]&&t.data1[t.index][0].row3.sizes.map(function(e,t){i=parseInt(i)+parseInt(e)}),i),l.a.createElement("td",null,t.data1[t.index]&&parseInt(t.data1[t.index][0].row3.plies)*i),l.a.createElement("td",null,l.a.createElement(J.a,{id:"length3",type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row3.len,onChange:function(e){return t.data1[t.index][0].row3.len=parseInt(e.target.value)}})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"percent3",type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row3.percentage,onChange:function(e){return t.data1[t.index][0].row3.percentage=parseInt(e.target.value)}})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"lenP3",type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row3.lenP2,onChange:function(e){return t.data1[t.index][0].row3.lenP2=parseInt(e.target.value)}})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"totalLen3",type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row3.totalLen,onChange:function(e){return t.data1[t.index][0].row3.totalLen=parseInt(e.target.value)}}))),l.a.createElement("tr",null,l.a.createElement("td",null,"4"),l.a.createElement("td",null,l.a.createElement(J.a,{id:"plies".concat(t.index),type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row4.plies,onChange:function(e){return t.data1[t.index][0].row4.plies=parseInt(e.target.value)}})),t.size.sizes.map(function(e,a){return l.a.createElement("td",{key:a,style:{width:"25px"}},l.a.createElement(J.a,{id:"".concat(e.clients_size," ").concat(a),type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row4.sizes[a],onChange:function(e){return t.data1[t.index][0].row4.sizes[a]=parseInt(e.target.value)}}))}),l.a.createElement("td",null,t.data1[t.index]&&t.data1[t.index][0].row4.sizes.map(function(e,t){o=parseInt(o)+parseInt(e)}),o),l.a.createElement("td",null,t.data1[t.index]&&parseInt(t.data1[t.index][0].row4.plies)*o),l.a.createElement("td",null,l.a.createElement(J.a,{id:"length4",type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row4.len,onChange:function(e){return t.data1[t.index][0].row4.len=parseInt(e.target.value)}})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"percent4",type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row4.percentage,onChange:function(e){return t.data1[t.index][0].row4.percentage=parseInt(e.target.value)}})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"lenP4",type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row4.lenP2,onChange:function(e){return t.data1[t.index][0].row4.lenP2=parseInt(e.target.value)}})),l.a.createElement("td",null,l.a.createElement(J.a,{id:"totalLen4",type:"number",defaultValue:t.data1[t.index]&&t.data1[t.index][0].row4.totalLen,onChange:function(e){return t.data1[t.index][0].row4.totalLen=parseInt(e.target.value)}}))),l.a.createElement("tr",null,l.a.createElement("td",null,"TOTALES"),l.a.createElement("td",null),l.a.createElement("td",null,t.data1[t.index]&&t.data1[t.index][0].row1.sizes[0]||t.data1[t.index]&&t.data1[t.index][0].row2.sizes[0]||t.data1[t.index]&&t.data1[t.index][0].row3.sizes[0]||t.data1[t.index]&&t.data1[t.index][0].row4.sizes[0]?(t.data1[t.index]&&t.data1[t.index][0].row1.plies)*(t.data1[t.index]&&t.data1[t.index][0].row1.sizes[0])+(t.data1[t.index]&&t.data1[t.index][0].row2.plies)*(t.data1[t.index]&&t.data1[t.index][0].row2.sizes[0])+(t.data1[t.index]&&t.data1[t.index][0].row3.plies)*(t.data1[t.index]&&t.data1[t.index][0].row3.sizes[0])+(t.data1[t.index]&&t.data1[t.index][0].row4.plies)*(t.data1[t.index]&&t.data1[t.index][0].row4.sizes[0]):l.a.createElement(l.a.Fragment,null)),l.a.createElement("td",null,t.data1[t.index]&&t.data1[t.index][0].row1.sizes[1]||t.data1[t.index]&&t.data1[t.index][0].row2.sizes[1]||t.data1[t.index]&&t.data1[t.index][0].row3.sizes[1]||t.data1[t.index]&&t.data1[t.index][0].row4.sizes[1]?(t.data1[t.index]&&t.data1[t.index][0].row1.plies)*(t.data1[t.index]&&t.data1[t.index][0].row1.sizes[1])+(t.data1[t.index]&&t.data1[t.index][0].row2.plies)*(t.data1[t.index]&&t.data1[t.index][0].row2.sizes[1])+(t.data1[t.index]&&t.data1[t.index][0].row3.plies)*(t.data1[t.index]&&t.data1[t.index][0].row3.sizes[1])+(t.data1[t.index]&&t.data1[t.index][0].row4.plies)*(t.data1[t.index]&&t.data1[t.index][0].row4.sizes[1]):l.a.createElement(l.a.Fragment,null)),l.a.createElement("td",null,t.data1[t.index]&&t.data1[t.index][0].row1.sizes[2]||t.data1[t.index]&&t.data1[t.index][0].row2.sizes[2]||t.data1[t.index]&&t.data1[t.index][0].row3.sizes[2]||t.data1[t.index]&&t.data1[t.index][0].row4.sizes[2]?(t.data1[t.index]&&t.data1[t.index][0].row1.plies)*(t.data1[t.index]&&t.data1[t.index][0].row1.sizes[2])+(t.data1[t.index]&&t.data1[t.index][0].row2.plies)*(t.data1[t.index]&&t.data1[t.index][0].row2.sizes[2])+(t.data1[t.index]&&t.data1[t.index][0].row3.plies)*(t.data1[t.index]&&t.data1[t.index][0].row3.sizes[2])+(t.data1[t.index]&&t.data1[t.index][0].row4.plies)*(t.data1[t.index]&&t.data1[t.index][0].row4.sizes[2]):l.a.createElement(l.a.Fragment,null)),l.a.createElement("td",null,t.data1[t.index]&&t.data1[t.index][0].row1.sizes[3]||t.data1[t.index]&&t.data1[t.index][0].row2.sizes[3]||t.data1[t.index]&&t.data1[t.index][0].row3.sizes[3]||t.data1[t.index]&&t.data1[t.index][0].row4.sizes[3]?(t.data1[t.index]&&t.data1[t.index][0].row1.plies)*(t.data1[t.index]&&t.data1[t.index][0].row1.sizes[3])+(t.data1[t.index]&&t.data1[t.index][0].row2.plies)*(t.data1[t.index]&&t.data1[t.index][0].row2.sizes[3])+(t.data1[t.index]&&t.data1[t.index][0].row3.plies)*(t.data1[t.index]&&t.data1[t.index][0].row3.sizes[3])+(t.data1[t.index]&&t.data1[t.index][0].row4.plies)*(t.data1[t.index]&&t.data1[t.index][0].row4.sizes[3]):l.a.createElement(l.a.Fragment,null)),l.a.createElement("td",null,t.data1[t.index]&&t.data1[t.index][0].row1.sizes[4]||t.data1[t.index]&&t.data1[t.index][0].row2.sizes[4]||t.data1[t.index]&&t.data1[t.index][0].row3.sizes[4]||t.data1[t.index]&&t.data1[t.index][0].row4.sizes[4]?(t.data1[t.index]&&t.data1[t.index][0].row1.plies)*(t.data1[t.index]&&t.data1[t.index][0].row1.sizes[4])+(t.data1[t.index]&&t.data1[t.index][0].row2.plies)*(t.data1[t.index]&&t.data1[t.index][0].row2.sizes[4])+(t.data1[t.index]&&t.data1[t.index][0].row3.plies)*(t.data1[t.index]&&t.data1[t.index][0].row3.sizes[4])+(t.data1[t.index]&&t.data1[t.index][0].row4.plies)*(t.data1[t.index]&&t.data1[t.index][0].row4.sizes[4]):l.a.createElement(l.a.Fragment,null)),l.a.createElement("td",null,t.data1[t.index]&&t.data1[t.index][0].row1.sizes[5]||t.data1[t.index]&&t.data1[t.index][0].row2.sizes[5]||t.data1[t.index]&&t.data1[t.index][0].row3.sizes[5]||t.data1[t.index]&&t.data1[t.index][0].row4.sizes[5]?(t.data1[t.index]&&t.data1[t.index][0].row1.plies)*(t.data1[t.index]&&t.data1[t.index][0].row1.sizes[5])+(t.data1[t.index]&&t.data1[t.index][0].row2.plies)*(t.data1[t.index]&&t.data1[t.index][0].row2.sizes[5])+(t.data1[t.index]&&t.data1[t.index][0].row3.plies)*(t.data1[t.index]&&t.data1[t.index][0].row3.sizes[5])+(t.data1[t.index]&&t.data1[t.index][0].row4.plies)*(t.data1[t.index]&&t.data1[t.index][0].row4.sizes[5]):l.a.createElement(l.a.Fragment,null)),l.a.createElement("td",null,t.data1[t.index]&&t.data1[t.index][0].row1.sizes[6]||t.data1[t.index]&&t.data1[t.index][0].row2.sizes[6]||t.data1[t.index]&&t.data1[t.index][0].row3.sizes[6]||t.data1[t.index]&&t.data1[t.index][0].row4.sizes[6]?(t.data1[t.index]&&t.data1[t.index][0].row1.plies)*(t.data1[t.index]&&t.data1[t.index][0].row1.sizes[6])+(t.data1[t.index]&&t.data1[t.index][0].row2.plies)*(t.data1[t.index]&&t.data1[t.index][0].row2.sizes[6])+(t.data1[t.index]&&t.data1[t.index][0].row3.plies)*(t.data1[t.index]&&t.data1[t.index][0].row3.sizes[6])+(t.data1[t.index]&&t.data1[t.index][0].row4.plies)*(t.data1[t.index]&&t.data1[t.index][0].row4.sizes[6]):l.a.createElement(l.a.Fragment,null)),l.a.createElement("td",null,t.data1[t.index]&&t.data1[t.index][0].row1.sizes[7]||t.data1[t.index]&&t.data1[t.index][0].row2.sizes[7]||t.data1[t.index]&&t.data1[t.index][0].row3.sizes[7]||t.data1[t.index]&&t.data1[t.index][0].row4.sizes[7]?(t.data1[t.index]&&t.data1[t.index][0].row1.plies)*(t.data1[t.index]&&t.data1[t.index][0].row1.sizes[7])+(t.data1[t.index]&&t.data1[t.index][0].row2.plies)*(t.data1[t.index]&&t.data1[t.index][0].row2.sizes[7])+(t.data1[t.index]&&t.data1[t.index][0].row3.plies)*(t.data1[t.index]&&t.data1[t.index][0].row3.sizes[7])+(t.data1[t.index]&&t.data1[t.index][0].row4.plies)*(t.data1[t.index]&&t.data1[t.index][0].row4.sizes[7]):l.a.createElement(l.a.Fragment,null)),l.a.createElement("td",null,t.data1[t.index]&&t.data1[t.index][0].row1.sizes[8]||t.data1[t.index]&&t.data1[t.index][0].row2.sizes[8]||t.data1[t.index]&&t.data1[t.index][0].row3.sizes[8]||t.data1[t.index]&&t.data1[t.index][0].row4.sizes[8]?(t.data1[t.index]&&t.data1[t.index][0].row1.plies)*(t.data1[t.index]&&t.data1[t.index][0].row1.sizes[8])+(t.data1[t.index]&&t.data1[t.index][0].row2.plies)*(t.data1[t.index]&&t.data1[t.index][0].row2.sizes[8])+(t.data1[t.index]&&t.data1[t.index][0].row3.plies)*(t.data1[t.index]&&t.data1[t.index][0].row3.sizes[8])+(t.data1[t.index]&&t.data1[t.index][0].row4.plies)*(t.data1[t.index]&&t.data1[t.index][0].row4.sizes[8]):l.a.createElement(l.a.Fragment,null)),l.a.createElement("td",null,t.data1[t.index]&&t.data1[t.index][0].row1.sizes[9]||t.data1[t.index]&&t.data1[t.index][0].row2.sizes[9]||t.data1[t.index]&&t.data1[t.index][0].row3.sizes[9]||t.data1[t.index]&&t.data1[t.index][0].row4.sizes[9]?(t.data1[t.index]&&t.data1[t.index][0].row1.plies)*(t.data1[t.index]&&t.data1[t.index][0].row1.sizes[9])+(t.data1[t.index]&&t.data1[t.index][0].row2.plies)*(t.data1[t.index]&&t.data1[t.index][0].row2.sizes[9])+(t.data1[t.index]&&t.data1[t.index][0].row3.plies)*(t.data1[t.index]&&t.data1[t.index][0].row3.sizes[9])+(t.data1[t.index]&&t.data1[t.index][0].row4.plies)*(t.data1[t.index]&&t.data1[t.index][0].row4.sizes[9]):l.a.createElement(l.a.Fragment,null)),l.a.createElement("td",null,t.data1[t.index]&&t.data1[t.index][0].row1.sizes[10]||t.data1[t.index]&&t.data1[t.index][0].row2.sizes[10]||t.data1[t.index]&&t.data1[t.index][0].row3.sizes[10]||t.data1[t.index]&&t.data1[t.index][0].row4.sizes[10]?(t.data1[t.index]&&t.data1[t.index][0].row1.plies)*(t.data1[t.index]&&t.data1[t.index][0].row1.sizes[10])+(t.data1[t.index]&&t.data1[t.index][0].row2.plies)*(t.data1[t.index]&&t.data1[t.index][0].row2.sizes[10])+(t.data1[t.index]&&t.data1[t.index][0].row3.plies)*(t.data1[t.index]&&t.data1[t.index][0].row3.sizes[10])+(t.data1[t.index]&&t.data1[t.index][0].row4.plies)*(t.data1[t.index]&&t.data1[t.index][0].row4.sizes[10]):l.a.createElement(l.a.Fragment,null))),l.a.createElement("tr",null,l.a.createElement("td",null),l.a.createElement("td",null),t.size.sizes.map(function(e,a){return l.a.createElement("td",{key:a,style:{width:"25px"}},Math.round(e.quantity*(t.tolerance/100)+e.quantity))})))))},Mn=[{path:"/login",name:"Log in",icon:"tim-icons icon-bank",component:Vt,layout:"/auth",invisible:!0},{path:"/recover",name:"Recover Password",icon:"tim-icons icon-bank",component:qt,layout:"/auth",invisible:!0},{path:"/home",name:"Home",icon:"tim-icons icon-bank",component:w,layout:"/admin"},{path:"/fabric_reports",name:"Reporting",icon:"tim-icons icon-laptop",component:cn,layout:"/admin"},{path:"/approveListBom",name:"ApproveListBom",icon:"tim-icons icon-bank",component:Na,layout:"/admin"},{collapse:!0,name:"Costing",icon:"tim-icons icon-money-coins",state:"pagesCollapseCosting",views:[{collapse:!0,name:"Administration",state:"pagesCollapseAdmin",mini:"Admin",views:[{path:"/management",name:"Management",mini:"MN",component:xt,layout:"/admin"},{path:"/approve",name:"Approve",mini:"A",component:jt,layout:"/admin"},{path:"/clients",name:"Clients",mini:"CL",component:Ht,layout:"/admin"},{path:"/return_flags",name:"Return Flags",mini:"RT",component:Xt,layout:"/admin"}]},{path:"/costing",name:"Costing",component:Se,mini:"CT",layout:"/admin"},{path:"/fabrics",name:"Fabrics",component:rt,mini:"FC",layout:"/admin"},{path:"/materials",name:"Materials",mini:"MT",component:ht,layout:"/admin"},{path:"/pattern",name:"Pattern/Consumption",component:bt,mini:"PT",layout:"/admin"},{path:"/engineering",name:"Engineering",component:yt,mini:"EE",layout:"/admin"},{path:"/reports",name:"Reports",component:Qt,mini:"RT",layout:"/admin"}]},{collapse:!0,name:"BOMS",icon:"tim-icons icon-trophy",state:"pagesCollapseProduction",views:[{path:"/create_style",name:"Create Style",component:ga,mini:"TD",layout:"/admin"},{path:"/prod_materials",name:"Materials",component:ra,mini:"CL",layout:"/admin"},{path:"/prod_colors",name:"Colors",component:ca,mini:"CL",layout:"/admin"},{path:"/detail_boms",name:"Create BOM",component:da,mini:"CBL",layout:"/admin"},{path:"/all_boms",name:"BOMs",component:fa,mini:"CL",layout:"/admin"},{path:"/managments_boms",name:"Approve BOMs",component:ma,mini:"CL",layout:"/admin"}]},{collapse:!0,name:"PO CLIENT",icon:"tim-icons icon-vector",state:"pagesCollapsePo",views:[{path:"/po_client",name:"PO CLIENT",component:Aa,mini:"TD",layout:"/admin"},{path:"/po_account",name:"PO List",component:Ia,mini:"TD",layout:"/admin"},{path:"/po_extractions",name:"PO Extraction",component:Va,mini:"PE",layout:"/admin"},{path:"/po_history",name:"PO History",component:Ua,mini:"PH",layout:"/admin"}]},{collapse:!0,name:"Combos & Components",icon:"tim-icons icon-bag-16",state:"pagesCollapseC&C",views:[{path:"/active_combos",name:"Active Combos",component:tn,mini:"TD",layout:"/admin"},{path:"/combo_tracker",name:"Combo Status Tracker",component:en,mini:"TD",layout:"/admin"},{path:"/fabrics_component",name:"Color Fabrics",component:dn,mini:"TD",layout:"/admin"},{path:"/costing_colors",name:"Costing Colors",component:Ka,mini:"TD",layout:"/admin"},{path:"/create_combocomponent",name:"Entry Components",component:Ja,mini:"EC",layout:"/admin"},{path:"/review_component",name:"Approve Components",component:$a,mini:"TD",layout:"/admin"},{path:"/account_components",name:"Approve Components",component:an,mini:"TD",layout:"/admin",invisible:!0},{path:"/view_component_history",name:"View Components",component:Qa,mini:"TD",layout:"/admin",invisible:!0},{path:"/edit_combo",name:"Edit Components",component:Ga,mini:"TD",layout:"/admin",invisible:!0},{path:"/consumption_component",name:"Consumption Components",component:Xa,mini:"TD",layout:"/admin"},{path:"/approve_consumptions",name:"Approve Consumptions",component:En,mini:"TD",layout:"/admin"}]},{collapse:!0,name:"Balance",icon:"tim-icons icon-chart-bar-32",state:"pagesCollapseBalance",views:[{path:"/balance_cpo",name:"Balance por CPO",component:gn,mini:"TD",layout:"/admin"},{path:"/balance_client",name:"Balance por Cliente",component:hn,mini:"TD",layout:"/admin"}]},{collapse:!0,name:"GENERATION",icon:"tim-icons icon-map-big",state:"pagesCollapseGeneracion",views:[{path:"/info_cpos",name:"CPOS",component:ln,mini:"TD",layout:"/admin"},{path:"/cut_order",name:"ORDEN CORTE",component:nn,mini:"TD",layout:"/admin"},{path:"/cut_requisition",name:"Requisicion",component:on,mini:"TD",layout:"/admin"}]},{collapse:!0,name:"Materials",icon:"tim-icons icon-app",state:"pagesCollapseInventory",views:[{path:"/inventory",name:"inventory",component:fn,mini:"TD",layout:"/admin"},{path:"/material_incomes",name:"Material Incomes",component:En,mini:"TD",layout:"/admin"},{path:"/material_requisition",name:"material requisition",component:on,mini:"TD",layout:"/admin"},{path:"/material_dispatch",name:"dispatch of materials",component:Cn,mini:"TD",layout:"/admin"}]},{collapse:!0,name:"Fabrics",icon:"tim-icons icon-book-bookmark",state:"pagesCollapseFabrics",views:[{path:"/farbics_inventory",name:"inventory",component:bn,mini:"TD",layout:"/admin"},{path:"/farbics_incomes",name:"Fabrics Incomes",component:En,mini:"TD",layout:"/admin"},{path:"/farbics_requisition",name:"Fabrics requisition",component:on,mini:"TD",layout:"/admin"},{path:"/farbics_dispatch",name:"Dispatch fabrics",component:nn,mini:"TD",layout:"/admin"}]},{collapse:!0,name:"Purchases",icon:"tim-icons icon-money-coins",state:"pagesCollapsePurchases",views:[{path:"/purchase_po",name:"Orden de compra por CPO",component:yn,mini:"TD",layout:"/admin"}]},{path:"/all_suppliers",name:"Supplier",icon:"tim-icons icon-puzzle-10",component:_n,layout:"/admin"},{path:"/quick_costing",name:"Quick Costing",mini:"CR",component:Qe,layout:"/admin",invisible:!0},{path:"/quotation",name:"Quotation",mini:"Q",component:nt,layout:"/admin",invisible:!0},{path:"/generate_oc",name:"Generate Cutting Order",mini:"Q",component:function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).userToken=localStorage.getItem("userToken")||"",a.costingURL="https://api.vulcanoapparel.com/api/v1",a._isMounted=!1,a.checkPageMode=function(){var e,t;switch(document.body.classList.contains("white-content")){case!0:e="bg-ligh",t="";break;default:e="bg-dark",t="text-primary"}return{bg:e,hc:t}},a.notify=function(e,t,n){var i;i={place:e,message:l.a.createElement("div",null,l.a.createElement("div",null,n)),type:t,icon:"tim-icons icon-bell-55",autoDismiss:7},"<div></div>"===document.getElementsByClassName("react-notification-alert-container")[0].innerHTML&&a._isMounted&&a._isMounted&&a.refs.notificationAlert.notificationAlert(i)},a.logOut=function(){a._isMounted=!1,localStorage.clear(),a.componentWillUnmount(),a.props.history.push("/auth/login")},a.getPOSizes=function(){ae.a.get(a.costingURL+"/po/get_scale_for_po/?po_id=".concat(a.props.location.state.idx),{headers:{Authorization:"Token "+a.userToken}},{po_id:a.props.location.state.CPO}).then(function(e){var t=this;this._loadedBomsHeaders=!0,this.setState({CPOsizes:e.data,_loadedCPOs:!0}),e.data.map(function(e){return t.state.data.push([{row1:{plies:0,sizes:[0,0,0,0,0,0,0,0,0,0,0],totalsizes:0,sizeXplies:0,len:0,percentage:0,lenP2:0,totalLen:0},row2:{plies:0,sizes:[0,0,0,0,0,0,0,0,0,0,0],totalsizes:0,sizeXplies:0,len:0,percentage:0,lenP2:0,totalLen:0},row3:{plies:0,sizes:[0,0,0,0,0,0,0,0,0,0,0],totalsizes:0,sizeXplies:0,len:0,percentage:0,lenP2:0,totalLen:0},row4:{plies:0,sizes:[0,0,0,0,0,0,0,0,0,0,0],totalsizes:0,sizeXplies:0,len:0,percentage:0,lenP2:0,totalLen:0}}])})}.bind(Object(P.a)(a))).catch(function(e){})},a.toggleLoading=function(){a._isMounted&&a.setState({loading:!a.state.loading})},a.state={loading:!1,CPOsizes:void 0,_loadedCPOs:!1,clients:[],user:{},resumeModal:!1,data:[],info:{row1:{plies:0,sizes:[0,0,0,0,0,0,0,0,0,0,0],totalsizes:0,sizeXplies:0,len:0,percentage:0,lenP2:0,totalLen:0},row2:{plies:0,sizes:[0,0,0,0,0,0,0,0,0,0,0],totalsizes:0,sizeXplies:0,len:0,percentage:0,lenP2:0,totalLen:0},row3:{plies:0,sizes:[0,0,0,0,0,0,0,0,0,0,0],totalsizes:0,sizeXplies:0,len:0,percentage:0,lenP2:0,totalLen:0},row4:{plies:0,sizes:[0,0,0,0,0,0,0,0,0,0,0],totalsizes:0,sizeXplies:0,len:0,percentage:0,lenP2:0,totalLen:0}},row1:{plies:0,sizes:[0,0,0,0,0,0,0,0,0,0,0],totalsizes:0,sizeXplies:0,len:0,percentage:0,lenP2:0,totalLen:0},row2:{plies:0,sizes:[0,0,0,0,0,0,0,0,0,0,0],totalsizes:0,sizeXplies:0,len:0,percentage:0,lenP2:0,totalLen:0},row3:{plies:0,sizes:[0,0,0,0,0,0,0,0,0,0,0],totalsizes:0,sizeXplies:0,len:0,percentage:0,lenP2:0,totalLen:0},row4:{plies:0,sizes:[0,0,0,0,0,0,0,0,0,0,0],totalsizes:0,sizeXplies:0,len:0,percentage:0,lenP2:0,totalLen:0}},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getPOSizes(),this._isMounted=!0}},{key:"render",value:function(){var e=this,t=this.state.loading,a="bg-ligh"===this.checkPageMode().bg?"inverted":"",n=[];return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"blackdiv",id:"blackdiv",style:t?{display:""}:{display:"none"}},l.a.createElement("div",{className:"ui segment"},l.a.createElement("div",{className:"ui active transition ".concat(a," visible dimmer")},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"ui text loader"},"Loading"))),l.a.createElement("div",{style:{minHeight:400}},l.a.createElement("p",null,"\xa0")))),l.a.createElement("div",{className:"react-notification-alert-container"},l.a.createElement(U.a,{ref:"notificationAlert"})),l.a.createElement("h1",null,"CUTTING ORDERS"),l.a.createElement(k.a,{className:"justify-content-center mt-5"},l.a.createElement(z.a,{md:{size:10,order:2}},l.a.createElement(v.a,null,l.a.createElement(y.a,null,l.a.createElement(_.a,null,l.a.createElement(k.a,null,l.a.createElement(z.a,null,l.a.createElement(S.a,null,l.a.createElement("h2",null,"PO Style Detail:")),l.a.createElement(k.a,{style:{textAlign:"center"}},l.a.createElement(z.a,null,l.a.createElement(S.a,null,l.a.createElement("b",null,"No. de PO:")," ",l.a.createElement("p",null,this.props.location.state&&this.props.location.state.CPO))),l.a.createElement(z.a,null,l.a.createElement(S.a,null,l.a.createElement("b",null,"Estilo de PO:")," ",l.a.createElement("p",null,this.props.location.state&&this.props.location.state.style))),l.a.createElement(z.a,null,l.a.createElement(S.a,null,l.a.createElement("b",null,"Color de PO:")," ",l.a.createElement("p",null,this.props.location.state&&this.props.location.state.color))),l.a.createElement(z.a,null,l.a.createElement(S.a,null,l.a.createElement("b",null,"Escala de PO:")," ",l.a.createElement("p",null,this.props.location.state&&this.props.location.state.scale))),l.a.createElement(z.a,null,l.a.createElement(S.a,null,l.a.createElement("b",null,"Tolerancia")," ",l.a.createElement("p",null,this.props.location.state&&this.props.location.state.tolerance))))))))))),l.a.createElement("div",{className:"content scales"},this.state._loadedCPOs&&this.state.CPOsizes.map(function(t,a){return n.push({collapse:a,title:t.id,component:l.a.createElement(On,{size:t,data:e.state.data[a]&&e.state.data[a],data1:e.state.data&&e.state.data,row1:e.state.row1,row2:e.state.row2,row3:e.state.row3,row4:e.state.row4,index:a,tolerance:e.props.location.state.tolerance})})}),l.a.createElement(Xe,{tabs:n})))}}]),t}(l.a.Component),layout:"/admin",invisible:!0},{path:"*",name:"404 Not Found",component:Gt,layout:"/auth",invisible:!0},{path:"*",name:"404 Not Found",component:Gt,layout:"/admin",invisible:!0},{path:"/boms",name:"BOMs",component:la,mini:"CB",invisible:!0,layout:"/admin"},{path:"/color_boms",name:"BOMs",component:za,mini:"CB",invisible:!0,layout:"/admin"},{path:"/approve_boms",name:"Approve BOMs",component:Na,mini:"CL",invisible:!0,layout:"/admin"},{path:"/resume_bom",name:"Resume Bom",component:xa,mini:"CL",invisible:!0,layout:"/admin"},{path:"/resume_po",name:"Po Details",component:Ba,mini:"CL",invisible:!0,layout:"/admin"},{path:"/prices_for_dms",name:"Prices History",component:pn,mini:"CL",invisible:!0,layout:"/admin"}],wn=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(i)))).getRoutes=function(e){return e.map(function(e,t){return e.collapse?a.getRoutes(e.views):"/auth"===e.layout?l.a.createElement(d.a,{path:e.layout+e.path,component:e.component,key:t}):null})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){document.documentElement.classList.remove("nav-open")}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"wrapper wrapper-full-page",ref:"fullPages"},l.a.createElement("div",{className:"full-page "},l.a.createElement(c.a,null,this.getRoutes(Mn)),l.a.createElement(E,{fluid:!0}))))}}]),t}(l.a.Component),xn=a(130),Nn=(a(776),a(254)),Tn=a(255),jn=a(165),An=a(261),Fn=a(260),Pn=a(259),Ln=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).role=localStorage.getItem("role")||"",a.user_name=localStorage.getItem("user_name")||"",a._LogOutRedirect=l.a.createElement(m.a,{to:{pathname:"/auth/login"}}),a.updateColor=function(){window.innerWidth<993&&a.state.collapseOpen?a.setState({color:"bg-white"}):a.setState({color:"navbar-transparent"})},a.toggleCollapse=function(){a.state.collapseOpen?a.setState({color:"navbar-transparent"}):a.setState({color:"bg-white"}),a.setState({collapseOpen:!a.state.collapseOpen})},a.toggleModalSearch=function(){a.setState({modalSearch:!a.state.modalSearch})},a.logOut=function(e){e.preventDefault(),localStorage.clear(),a.setState({logOut:!0})},a.state={collapseOpen:!1,modalSearch:!1,color:"navbar-transparent",logOut:!1,name:""},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){if(window.addEventListener("resize",this.updateColor),""!==this.user_name){var e=this.user_name.split(" "),t=e[0].split("")[0],a=e[1].split("")[0];this.setState({name:t+a})}else if(""===this.role){var n=[],l=n,i=n;this.setState({name:l+i})}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateColor)}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.state.logOut?this._LogOutRedirect:"",l.a.createElement(Nn.a,{className:Rt()("navbar-absolute",Object(j.a)({},this.state.color,-1===this.props.location.pathname.indexOf("full-screen-map"))),expand:"lg"},l.a.createElement(b.a,{fluid:!0},l.a.createElement("div",{className:"navbar-wrapper"},l.a.createElement("div",{className:"navbar-minimize d-inline"},l.a.createElement(R.a,{className:"minimize-sidebar btn-just-icon",color:"link",onClick:this.props.handleMiniClick},l.a.createElement("i",{className:"tim-icons icon-align-center visible-on-sidebar-regular"}),l.a.createElement("i",{className:"tim-icons icon-bullet-list-67 visible-on-sidebar-mini"}))),l.a.createElement("div",{className:Rt()("navbar-toggle d-inline",{toggled:this.props.sidebarOpened})},l.a.createElement("button",{className:"navbar-toggler",type:"button",onClick:this.props.toggleSidebar},l.a.createElement("span",{className:"navbar-toggler-bar bar1"}),l.a.createElement("span",{className:"navbar-toggler-bar bar2"}),l.a.createElement("span",{className:"navbar-toggler-bar bar3"}))),l.a.createElement(Tn.a,{href:"#perry",onClick:function(e){return e.preventDefault()}},this.props.brandText)),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navigation","aria-expanded":"false","aria-label":"Toggle navigation",onClick:this.toggleCollapse},l.a.createElement("span",{className:"navbar-toggler-bar navbar-kebab"}),l.a.createElement("span",{className:"navbar-toggler-bar navbar-kebab"}),l.a.createElement("span",{className:"navbar-toggler-bar navbar-kebab"})),l.a.createElement($e.a,{navbar:!0,isOpen:this.state.collapseOpen},l.a.createElement(_t.a,{className:"ml-auto",navbar:!0},l.a.createElement(jn.a,{nav:!0},l.a.createElement(An.a,{caret:!0,color:"default","data-toggle":"dropdown",nav:!0,onClick:function(e){return e.preventDefault()}},l.a.createElement("div",{className:"photo"},l.a.createElement("label",{htmlFor:""},this.state.name)),l.a.createElement("b",{className:"caret d-none d-lg-block d-xl-block"}),l.a.createElement("p",{className:"d-lg-none"},"Log out")),l.a.createElement(Fn.a,{className:"dropdown-navbar",right:!0,tag:"ul"},l.a.createElement(kt.a,{tag:"li"},l.a.createElement(Pn.a,{className:"nav-item",onClick:this.logOut},"Log out")))),l.a.createElement("li",{className:"separator d-lg-none"}))))),l.a.createElement(L.a,{modalClassName:"modal-search",isOpen:this.state.modalSearch,toggle:this.toggleModalSearch},l.a.createElement("div",{className:"modal-header"},l.a.createElement(J.a,{id:"inlineFormInputGroup",placeholder:"BUSCAR",type:"text"}),l.a.createElement("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:this.toggleModalSearch},l.a.createElement("i",{className:"tim-icons icon-simple-remove"})))))}}]),t}(l.a.Component),Dn=a(794),Hn=(a(778),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).role=localStorage.getItem("role")||"",a.getCollapseStates=function(e){var t={};return e.map(function(e,n){return e.collapse&&(t=Object(A.a)(Object(j.a)({},e.state,a.getCollapseInitialState(e.views)),a.getCollapseStates(e.views),t)),null}),t},a.createLinks=function(e){var t=a.props.rtlActive;return e.map(function(e,n){if(e.invisible||!a.props.activeViews.includes(e.path)&&!e.collapse)return null;if(e.redirect)return null;if(e.collapse){var i={};return i[e.state]=!a.state[e.state],l.a.createElement("li",{className:a.activeRoute(e.layout+e.path),key:n},l.a.createElement("a",{href:"#perry","data-toggle":"collapse","aria-expanded":a.state[e.state],onClick:function(e){e.preventDefault(),a.setState(i)}},void 0!==e.icon?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:e.icon}),l.a.createElement("p",null,t?e.rtlName:e.name,l.a.createElement("b",{className:"caret"}))):l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"sidebar-mini-icon"},t?e.rtlMini:e.mini),l.a.createElement("span",{className:"sidebar-normal"},t?e.rtlName:e.name,l.a.createElement("b",{className:"caret"})))),l.a.createElement($e.a,{isOpen:a.state[e.state]},l.a.createElement("ul",{className:"nav"},a.createLinks(e.views))))}return l.a.createElement("li",{className:a.activeRoute(e.layout+e.path),key:n},l.a.createElement(Dn.a,{to:e.layout+e.path,activeClassName:"",onClick:a.props.closeSidebar},void 0!==e.icon?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:e.icon}),l.a.createElement("p",null,t?e.rtlName:e.name)):l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"sidebar-mini-icon"},t?e.rtlMini:e.mini),l.a.createElement("span",{className:"sidebar-normal"},t?e.rtlName:e.name))))})},a.activeRoute=function(e){return a.props.location.pathname===e?"active":""},a.userRole=function(){if(""!==a.role){var e=a.role.split(" "),t=e[0].split("")[0],n=e[1].split("")[0];a.setState({initials:t+n})}else if(""===a.role){var l=[],i=l,o=l;a.setState({initials:i+o})}},a.state=a.getCollapseStates(e.routes),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"getCollapseInitialState",value:function(e){for(var t=0;t<e.length;t++){if(e[t].collapse&&this.getCollapseInitialState(e[t].views))return!0;if(-1!==window.location.href.indexOf(e[t].path))return!0}return!1}},{key:"componentDidMount",value:function(){navigator.platform.indexOf("Win")>-1&&(kn=new xn.a(this.refs.sidebar)),this.userRole()}},{key:"componentWillUnmount",value:function(){navigator.platform.indexOf("Win")>-1&&kn.destroy()}},{key:"render",value:function(){var e=this.props,t=e.activeColor,a=e.logo,n=null,i=null;return void 0!==a&&(void 0!==a.outterLink?(n=l.a.createElement("a",{href:a.outterLink,className:"simple-text logo-mini",target:"_blank",onClick:this.props.closeSidebar},l.a.createElement("div",{className:"logo-img"},l.a.createElement("label",{className:"logo-imgs"},this.state.initials))),i=l.a.createElement("a",{href:a.outterLink,className:"simple-text logo-normal",target:"_blank",onClick:this.props.closeSidebar},a.text)):(n=l.a.createElement(Dn.a,{to:a.innerLink,className:"simple-text logo-mini",onClick:this.props.closeSidebar},l.a.createElement("div",{className:"logo-img"},l.a.createElement("img",{src:a.imgSrc,alt:"react-logo"}))),i=l.a.createElement(Dn.a,{to:a.innerLink,className:"simple-text logo-normal",onClick:this.props.closeSidebar},a.text))),l.a.createElement("div",{className:"sidebar",data:t},l.a.createElement("div",{className:"sidebar-wrapper",ref:"sidebar"},null!==n||null!==i?l.a.createElement("div",{className:"logo"},n,i):null,l.a.createElement(_t.a,null,this.createLinks(this.props.routes))))}}]),t}(l.a.Component)),In=a(283),Rn=a.n(In),zn=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).handleClick=function(){"dropdown"===a.state.classes?a.setState({classes:"dropdown show"}):a.setState({classes:"dropdown"})},a.handleActiveMode=function(){a.setState({darkMode:!a.state.darkMode}),document.body.classList.toggle("white-content")},a.state={classes:"dropdown",darkMode:!0},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){document.body.classList.contains("white-content")||this.handleActiveMode()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"fixed-plugin"},l.a.createElement("div",{className:this.state.classes},l.a.createElement("a",{href:"#perry",onClick:function(t){t.preventDefault(),e.handleClick()}},l.a.createElement("i",{className:"fa fa-cog fa-2x"})),l.a.createElement("ul",{className:"dropdown-menu show"},l.a.createElement("li",{className:"header-title"},"COLOR BARRA LATERAL"),l.a.createElement("li",{className:"adjustments-line"},l.a.createElement("div",{className:"badge-colors text-center"},l.a.createElement("span",{className:"primary"===this.props.activeColor?"badge filter badge-primary active":"badge filter badge-primary","data-color":"primary",onClick:function(){e.props.handleActiveClick("primary")}}),l.a.createElement("span",{className:"blue"===this.props.activeColor?"badge filter badge-info active":"badge filter badge-info","data-color":"info",onClick:function(){e.props.handleActiveClick("blue")}}),l.a.createElement("span",{className:"green"===this.props.activeColor?"badge filter badge-success active":"badge filter badge-success","data-color":"success",onClick:function(){e.props.handleActiveClick("green")}}),l.a.createElement("span",{className:"orange"===this.props.activeColor?"badge filter badge-warning active":"badge filter badge-warning","data-color":"warning",onClick:function(){e.props.handleActiveClick("orange")}}),l.a.createElement("span",{className:"red"===this.props.activeColor?"badge filter badge-danger active":"badge filter badge-danger","data-color":"danger",onClick:function(){e.props.handleActiveClick("red")}}))),l.a.createElement("li",{className:"header-title"},"BARRA LATERAL"),l.a.createElement("li",{className:"adjustments-line"},l.a.createElement("div",{className:"togglebutton switch-sidebar-mini"},l.a.createElement("span",{className:"label-switch"},"OFF"),l.a.createElement(Rn.a,{onChange:this.props.handleMiniClick,value:this.props.sidebarMini,onText:"",offText:""}),l.a.createElement("span",{className:"label-switch"},"ON"))),l.a.createElement("li",{className:"header-title"},"COLOR DE FONDO"),l.a.createElement("li",{className:"adjustments-line"},l.a.createElement("div",{className:"togglebutton switch-change-color mt-3"},l.a.createElement("span",{className:"label-switch"},"MODO CLARO"),l.a.createElement(Rn.a,{onChange:this.handleActiveMode,value:this.state.darkMode,onText:"",offText:""}),l.a.createElement("span",{className:"label-switch"},"MODO OSCURO"))))))}}]),t}(n.Component),Bn=a(390),Un=a.n(Bn),Wn=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e)))._isMounted=!1,a._Routes=[],a.role=localStorage.getItem("role")||"",a.access=JSON.parse(localStorage.getItem("permissions"))||"",a.views=localStorage.getItem("views")||"",a.viewsArray=[],a.userToken=localStorage.getItem("userToken")||"",a.user_id=localStorage.getItem("user_id")||"0",a.user_name=localStorage.getItem("user_name")||"",a.assembleNewRoutes=function(e){var t=[];return e.map(function(e){if(e.collapse){var n=a.assembleNewRoutes(e.views),l=e;n.length>0&&(l.views=n,t.push(l))}return"/admin"===e.layout&&a.viewsArray.includes(e.path)&&(e.collapse?e.views.length>0&&t.push(e):t.push(e)),1}),t},a.showNavbarButton=function(){document.documentElement.scrollTop>50||document.scrollingElement.scrollTop>50||a.refs.mainPanel.scrollTop>50?a._isMounted&&a.setState({opacity:1}):(document.documentElement.scrollTop<=50||document.scrollingElement.scrollTop<=50||a.refs.mainPanel.scrollTop<=50)&&a._isMounted&&a.setState({opacity:0})},a.getRoutes=function(e){var t=[];return e.map(function(e,n){return e.collapse&&e.views.length>0&&(t=[].concat(Object(Ge.a)(t),[a.getRoutes(e.views)])),"/admin"===e.layout&&a.viewsArray.includes(e.path)&&("views"in e?e.views.length>0&&t.push(l.a.createElement(d.a,{path:e.layout+e.path,component:e.component,key:n})):t.push(l.a.createElement(d.a,{path:e.layout+e.path,component:e.component,key:n}))),e}),t},a.getActiveRoute=function(e){for(var t=0;t<e.length;t++)if(e[t].collapse){var n=a.getActiveRoute(e[t].views);if("Default Brand Text"!==n)return n}else if(-1!==window.location.pathname.indexOf(e[t].layout+e[t].path))return e[t].name;return"Default Brand Text"},a.handleActiveClick=function(e){a._isMounted&&a.setState({activeColor:e})},a.handleMiniClick=function(){document.body.classList.contains("sidebar-mini")?a._isMounted&&a.setState({sidebarMini:!1}):a._isMounted&&a.setState({sidebarMini:!0}),document.body.classList.toggle("sidebar-mini")},a.toggleSidebar=function(){a._isMounted&&a.setState({sidebarOpened:!a.state.sidebarOpened}),document.documentElement.classList.toggle("nav-open")},a.closeSidebar=function(){a._isMounted&&a.setState({sidebarOpened:!1}),document.documentElement.classList.remove("nav-open")},a.state={activeColor:"primary",sidebarMini:!0,opacity:0,sidebarOpened:!1,userToken:""},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){if(this._isMounted=!0,localStorage.setItem("Access",JSON.stringify(this.access)),this.viewsArray=this.views.split(","),this._Routes=this.assembleNewRoutes(Mn),console.log("rutas",Mn),""!==this.userToken?this._isMounted&&this.setState({userToken:this.userToken}):(this._isMounted&&this.setState({userToken:""}),this._isMounted&&this.props.history.push("/auth/login")),navigator.platform.indexOf("Win")>-1){document.documentElement.className+=" perfect-scrollbar-on",document.documentElement.classList.remove("perfect-scrollbar-off"),Sn=new xn.a(this.refs.mainPanel);for(var e=document.querySelectorAll(".table-responsive"),t=0;t<e.length;t++)Sn=new xn.a(e[t])}window.addEventListener("scroll",this.showNavbarButton)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,navigator.platform.indexOf("Win")>-1&&(Sn.destroy(),document.documentElement.className+=" perfect-scrollbar-off",document.documentElement.classList.remove("perfect-scrollbar-on")),window.removeEventListener("scroll",this.showNavbarButton)}},{key:"componentDidUpdate",value:function(e){if(localStorage.setItem("Access",JSON.stringify(this.access)),this.viewsArray=this.views.split(","),e.location.pathname!==e.history.location.pathname){if(navigator.platform.indexOf("Win")>-1)for(var t=document.querySelectorAll(".table-responsive"),a=0;a<t.length;a++)Sn=new xn.a(t[a]);document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,this.refs.mainPanel.scrollTop=0}}},{key:"render",value:function(){return l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"navbar-minimize-fixed",style:{opacity:this.state.opacity}},l.a.createElement("button",{className:"minimize-sidebar btn btn-link btn-just-icon",onClick:this.handleMiniClick},l.a.createElement("i",{className:"tim-icons icon-align-center visible-on-sidebar-regular text-muted"}),l.a.createElement("i",{className:"tim-icons icon-bullet-list-67 visible-on-sidebar-mini text-muted"}))),l.a.createElement(Hn,Object.assign({},this.props,{routes:this._Routes,activeViews:this.viewsArray,activeColor:this.state.activeColor,logo:{outterLink:"/admin/home",text:this.user_name,imgSrc:Un.a},closeSidebar:this.closeSidebar,className:"sideb"})),l.a.createElement("div",{className:"main-panel",ref:"mainPanel",data:this.state.activeColor},l.a.createElement(Ln,Object.assign({},this.props,{handleMiniClick:this.handleMiniClick,brandText:this.getActiveRoute(this._Routes),sidebarOpened:this.state.sidebarOpened,toggleSidebar:this.toggleSidebar,className:"adminNav"})),l.a.createElement(c.a,null,this.getRoutes(this._Routes)),-1!==this.props.location.pathname.indexOf("full-screen-map")?null:l.a.createElement(E,{fluid:!0})),l.a.createElement(zn,{activeColor:this.state.activeColor,sidebarMini:this.state.sidebarMini,handleActiveClick:this.handleActiveClick,handleMiniClick:this.handleMiniClick}))}}]),t}(l.a.Component),Vn=(a(229),a(368),a(230),a(783),a(785),a(787),Object(s.a)());o.a.render(l.a.createElement(r.a,{history:Vn},l.a.createElement(c.a,null,l.a.createElement(d.a,{path:"/auth",render:function(e){return l.a.createElement(wn,e)}}),l.a.createElement(d.a,{path:"/admin",render:function(e){return l.a.createElement(Wn,e)}}),l.a.createElement(m.a,{from:"/",to:"/admin/home"}))),document.getElementById("root"))},87:function(e,t,a){e.exports={tablefixed:"approvesboms_tablefixed__2exDw","table-fixed":"approvesboms_table-fixed__2pEjV",tableContainer:"approvesboms_tableContainer__1_L19",code:"approvesboms_code__CcMZM",description:"approvesboms_description__JqAOb",measure:"approvesboms_measure__2ncHc",colors:"approvesboms_colors__HaorH",rejectedcolors:"approvesboms_rejectedcolors__1jWAe",actions:"approvesboms_actions__2N1eo",title:"approvesboms_title__CtKGA",resumetable:"approvesboms_resumetable__3OHWE",colorcon:"approvesboms_colorcon__1FbJT"}},99:function(e,t,a){e.exports={colRight:"step1_colRight__2tb-f",thID:"step1_thID__1Cffh",thDESC:"step1_thDESC__1gaXU",tdDESC:"step1_tdDESC__19exy",tdWidth:"step1_tdWidth__2vXu2",tdFont:"step1_tdFont__2g6C3",id:"step1_id__302TY"}}},[[394,2,1]]]);
//# sourceMappingURL=main.8f94db16.chunk.js.map